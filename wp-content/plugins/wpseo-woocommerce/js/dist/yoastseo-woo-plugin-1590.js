!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}({10:function(t,e){t.exports=window.wp.data},2:function(t,e){t.exports=window.lodash},22:function(t,e,n){"use strict";n.r(e);const o="excerpt";function i(){return"undefined"!=typeof tinyMCE&&void 0!==tinyMCE.editors&&tinyMCE.editors.length>=0}function r(t){if(!i())return!1;const e=tinyMCE.get(t);return null!==e&&!e.isHidden()}function a(){if(r(o)){return tinyMCE.get(o).getContent()}return t=o,document.getElementById(t)&&document.getElementById(t).value||"";var t}function s(t){const e=a();t.sendMessage("updateProductDescription",e,"YoastWooCommerce"),YoastSEO.app.refresh()}function c(t){const e=tinyMCE.get(o);e.on("change",()=>s(t)),e.on("input",()=>s(t))}function u(t){!function(t){const e=jQuery("#excerpt");e.on("change",()=>s(t)),e.on("input",()=>s(t))}(t),r(o)&&c(t),i()&&tinyMCE.on("AddEditor",e=>{"excerpt"===e.editor.id&&c(t)})}var d=n(4),l=n(10);function p(t){const e=document.querySelector(t+" a");e&&e.click()}function f(t,e={}){e=Object.assign({top:0,left:0},e);const n=t.getBoundingClientRect();window.scrollBy(n.left+e.left,n.top+e.top)}function m(t,e){t.classList.contains("open")||document.querySelectorAll(".edit_variation")[e].click()}var y=n(5);function v(t){p(".variations_tab"),setTimeout(()=>(function(t){const e=document.querySelectorAll(".woocommerce_variation")[t];m(e,t);const n=e.querySelector("[id^='variable_sku']");n.focus(),f(n,{top:-200})})(t),1e3)}function b(t){return Object.values(t.productIdentifiers).every(t=>""===t)}function g(t){p(".variations_tab"),setTimeout(()=>(function(t){const e=document.querySelectorAll(".woocommerce_variation")[t];m(e,t);const n=e.querySelector("h1");setTimeout(()=>f(n,{top:-200}),200)})(t),1e3)}var _=function(t){const e=Object(y.c)();"productSKU"!==t?"productIdentifier"===t&&g(e.findIndex(b)):v(e.findIndex(t=>""===t.sku))};var S=function(t){"productSKU"!==t?"productIdentifier"===t&&(p(".yoast_tab_tab"),f(document.getElementById("yoast_seo"),{top:-200})):function(){p(".inventory_tab");const t=document.getElementById("_sku");t.focus(),f(t,{top:-300})}()};function h(t){if("productSKU"!==t&&"productIdentifier"!==t)return;if(function(){const t=document.getElementById("woocommerce-product-data");if(t&&t.classList.contains("closed")){t.querySelector(".handlediv").click()}}(),"variable"===Object(y.b)().productType){if(Object(y.c)().length>0)return void _(t)}S(t)}const E="YoastWooCommerce";var w=0;let O="";class k{constructor(){this.loadWorkerScript(),YoastSEO.app.registerPlugin("YoastWooCommercePlugin",{status:"ready"}),this.registerModifications(),this.bindEvents(),this.dispatchGooglePreviewData(),Object(d.addFilter)("yoast.socials.imageFallback","yoast/yoast-woocommerce-seo/image_fallback",this.addProductGalleryImageAsFallback),Object(d.addAction)("yoast.focus.input","yoast/wpseo-woocommerce/inputFocus",h)}loadWorkerScript(){if("undefined"==typeof YoastSEO||void 0===YoastSEO.analysis||void 0===YoastSEO.analysis.worker)return;const t=YoastSEO.analysis.worker,e=a(),n="1"===wpseoWooL10n.shouldShowEditButtons;t.loadScript(wpseoWooL10n.script_url).then(()=>t.sendMessage("initialize",{l10n:wpseoWooL10n,productDescription:e,shouldShowEditButtons:n},E)).then(YoastSEO.app.refresh),t.initialize({translations:wpseoWooL10n.analysisTranslations}),u(t)}bindEvents(){if(r("excerpt")){tinyMCE.get("excerpt").on("change",(function(){YoastSEO.app.analyzeTimer()}))}jQuery(".add_product_images").find("a").on("click",this.bindLinkEvent.bind(this)),this.bindDeleteEvent()}dispatchGooglePreviewData(){Object(l.dispatch)("yoast-seo/editor").setShoppingData(window.wpseoWooL10n.wooGooglePreviewData)}bindLinkEvent(){0===jQuery(".media-modal-content").find(".media-button").length?++w<10&&setTimeout(this.bindLinkEvent.bind(this)):(w=0,jQuery(".media-modal-content").find(".media-button").on("click",this.buttonCallback.bind(this)))}buttonCallback(){YoastSEO.app.analyzeTimer()}bindDeleteEvent(){jQuery("#product_images_container").on("click",".delete",YoastSEO.app.analyzeTimer.bind(YoastSEO.app))}registerModifications(){var t=this.addContent.bind(this);YoastSEO.app.registerModification("content",t,"YoastWooCommercePlugin",10)}addContent(t){t+="\n\n"+a();for(var e=jQuery("#product_images_container").find("img"),n=0;n<e.length;n++)t+=e[n].outerHTML;return O=e[0]?e[0].src.replace(/-\d+x\d+(\.[a-zA-Z0-9]+)$/,"$1"):"",t}addProductGalleryImageAsFallback(t){if(O){const e=t.findIndex(t=>"socialImage"===Object.keys(t)[0]||"siteWideImage"===Object.keys(t)[0]);t.splice(e,0,{productGalleryImage:O})}return t}}"undefined"!=typeof YoastSEO&&void 0!==YoastSEO.app?new k:jQuery(window).on("YoastSEO:ready",(function(){new k}))},4:function(t,e){t.exports=window.wp.hooks},5:function(t,e,n){"use strict";n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return _}));var o=n(4),i=n(2);const r=["gtin8","gtin12","gtin13","gtin14","isbn","mpn"];let a=!0,s=!0,c=[];function u(t){return""!==t.sku}function d(t){return!!(t.productIdentifiers.gtin8||t.productIdentifiers.gtin12||t.productIdentifiers.gtin13||t.productIdentifiers.gtin14||t.productIdentifiers.isbn||t.productIdentifiers.mpn)}function l(t){return t.length>=1}function p(t){return t.every(t=>t.sku)}function f(t){return{id:t,sku:wpseoWooSKU.variations[t],productIdentifiers:wpseoWooIdentifiers.variations[t]}}function m(t){const e=[];return t.forEach(t=>{null===t?e.push(""):e.push(t.value)}),{gtin8:e[0].trim(),gtin12:e[1].trim(),gtin13:e[2].trim(),gtin14:e[3].trim(),isbn:e[4].trim(),mpn:e[5].trim()}}function y(t){const e=t.querySelector("input.variable_post_id").value,n=t.querySelector("input[id^=variable_sku]");let o="";n?o=n.value:a=!1;const i=[`#yoast_variation_identifier\\[${e}\\]\\[gtin8\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin12\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin13\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin14\\]`,`#yoast_variation_identifier\\[${e}\\]\\[gtin14\\]`,`#yoast_variation_identifier\\[${e}\\]\\[mpn\\]`].map(e=>t.querySelector(e));return i.some(t=>null===t)&&(s=!1),{id:e,sku:o.trim(),productIdentifiers:m(i)}}function v(){return function(t){const e=document.querySelector(".woocommerce_variations");if(0===t.length&&e){if(e.getAttribute("data-total")>0)return Object.keys(wpseoWooIdentifiers.variations).map(f);c=[]}else c=t<c?t:Object(i.uniqBy)([...t,...c,...Object.keys(wpseoWooIdentifiers.variations).map(f)],t=>t.id);return c}([...document.querySelectorAll(".woocommerce_variation")].map(y))}function b(){let t=!0,e=!0,n="";const o=document.querySelector("input#_sku");o?n=o.value:t=!1;const i=["yoast_identifier_gtin8","yoast_identifier_gtin12","yoast_identifier_gtin13","yoast_identifier_gtin14","yoast_identifier_isbn","yoast_identifier_mpn"].map(t=>document.getElementById(t));i.some(t=>null===t)&&(e=!1);const r=document.querySelector("select#product-type").value,a={canRetrieveGlobalSku:t,canRetrieveAllIdentifiers:e,sku:n.trim(),productType:r,productIdentifiers:m(i)};return Object.assign({},{sku:wpseoWooSKU.global_sku,productIdentifiers:wpseoWooIdentifiers.global_identifier_values},a)}function g(t){const e={...t};e.hasOwnProperty("customData")||(e.customData={});const n=b(),o=v(),i=d(n),r=function(t){return t.every(d)}(o),c=i||!i&&!0===n.canRetrieveAllIdentifiers,f=r||!r&&!0===s;return e.customData=Object.assign(e.customData,{canRetrieveGlobalIdentifier:c,canRetrieveVariantIdentifiers:f,canRetrieveGlobalSku:n.canRetrieveGlobalSku,canRetrieveVariantSkus:a,productType:n.productType,hasGlobalIdentifier:i,hasVariants:l(o),doAllVariantsHaveIdentifier:r,hasGlobalSKU:u(n),doAllVariantsHaveSKU:p(o)}),e}function _(){Object(o.addFilter)("yoast.analysis.data","wpseo-woocommerce-identifier-data",g),function(){r.forEach(t=>{document.getElementById(`yoast_identifier_${t}`).addEventListener("input",YoastSEO.app.refresh)});const t=document.getElementById("_sku");t&&t.addEventListener("input",YoastSEO.app.refresh),document.querySelector("select#product-type").addEventListener("change",YoastSEO.app.refresh),new MutationObserver(YoastSEO.app.refresh).observe(document.getElementById("variable_product_options"),{childList:!0,subtree:!0,attributes:!0}),jQuery(document.body).on("input","#variable_product_options .woocommerce_variations :input[id^=yoast_variation_identifier]",YoastSEO.app.refresh),a&&jQuery(document.body).on("input","#variable_product_options .woocommerce_variations :input[id^=variable_sku]",YoastSEO.app.refresh)}()}}});