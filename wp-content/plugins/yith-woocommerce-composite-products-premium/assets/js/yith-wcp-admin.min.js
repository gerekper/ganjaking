jQuery(document).ready(function(t){"use strict";var c;function i(){t("#ywcp_components_list_container_items.sortable").sortable({axis:"y",update:function(e,n){}}),t(document).on("click",".ywcp_components_list_container .ywcp_expand_all",function(){return t(this).closest(".ywcp_list_container").find(".ywcp_list_container_single_item").removeClass("closed").addClass("open"),!1}),t(document).on("click",".ywcp_components_list_container .ywcp_close_all",function(){return t(this).closest(".ywcp_list_container").find(".ywcp_list_container_single_item").removeClass("open").addClass("closed"),!1})}function o(){t("#ywcp_dependencies_list_container_items.sortable").sortable({axis:"y",update:function(e,n){}}),t(document).on("click",".ywcp_dependencies_list_container .ywcp_expand_all",function(){return t(this).closest(".ywcp_list_container").find(".ywcp_dependencieslist_container_single_item").removeClass("closed").addClass("open"),!1}),t(document).on("click",".ywcp_dependencies_list_container .ywcp_close_all",function(){return t(this).closest(".ywcp_list_container").find(".ywcp_dependencieslist_container_single_item").removeClass("open").addClass("closed"),!1})}function _(e){e.find(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}function s(){t(document.body).trigger("wc-enhanced-select-init")}function a(){t("body").on("change","select.ywcp-product-search",function(){var e=t(this).val(),n=t(this).closest(".ywcp_components_list_container_single_item_form");n.find(".ywcp_layout_options_container").hide(),"product"===e?n.find(".ywcp-product-search-container").show():"product_categories"===e?n.find(".ywcp-categories-search-container").show():"product_tags"===e&&n.find(".ywcp-tags-search-container").show()}),t("select.ywcp-product-search").change()}function p(){t("body").on("change","select.ywcp-dependecies-selection-option, select.ywcp-dependecies-do-option",function(){var e=t(this).val(),n=t(this).closest(".ywcp_dependencieslist_component_single_item").find(".ywcp_dependencieslist_component_single_item_products_chosen");"selection_is"===e||"selection_is_not"===e?n.show():n.hide()}),t("select.ywcp-dependecies-selection-option, select.ywcp-dependecies-do-option").change()}function d(){t("body").on("change","select.ywcp-dependecies-action-option",function(){var e=t(this).val(),n=t(this).closest(".ywcp_dependencieslist_component_single_item"),o=n.find(".ywcp_dependecies_action_container"),c=n.find(".ywcp_dependecies_condition_container");"do"===e?(o.show(),o.find("select").change(),c.hide()):"if"===e&&(o.hide(),c.show(),c.find("select").change())}),t("select.ywcp-dependecies-action-option").change()}function r(e){var n=t.extend({placeholder:t(this).data("placeholder"),width:"50%"},m());void 0===e?t(".categories_id-select2, .product_id-select2").select2(n):e.select2(n)}function l(e){var n=t.extend({placeholder:t(this).data("placeholder"),width:"50%",maximumSelectionLength:1,maximumSelectionSize:1},m());void 0===e?t(".ywcp_dependence_selection_product_id-select2").select2(n):e.select2(n)}function m(){return{language:{noResults:function(){return wc_enhanced_select_params.i18n_no_matches},errorLoading:function(){return wc_enhanced_select_params.i18n_ajax_error},inputTooShort:function(e){var n=e.minimum-e.input.length;return 1===n?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",n)},inputTooLong:function(e){var n=e.input.length-e.maximum;return 1===n?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",n)},maximumSelected:function(e){return 1===e.maximum?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e.maximum)},loadingMore:function(){return wc_enhanced_select_params.i18n_load_more},searching:function(){return wc_enhanced_select_params.i18n_searching}}}}function n(){var e,n;for(e="",n=0;n<32;n++)8!=n&&12!=n&&16!=n&&20!=n||(e+="-"),e+=Math.floor(16*Math.random()).toString(16).toUpperCase();return e}c={message:null,overlayCSS:{background:"#fff",opacity:.6}},t("body").on("woocommerce-product-type-change",function(e,n,o){"yith-composite"===n&&(t("input#_downloadable").prop("checked",!1),t("input#_virtual").removeAttr("checked"),t(".show_if_simple").not("._sold_individually_field").show(),t(".show_if_external").hide(),t("input#_downloadable").closest(".show_if_simple").hide(),t("input#_virtual").closest(".show_if_simple").hide(),t(".wc-tabs > li.general_options.general_tab").show(),t(".pricing").show(),t("ul.product_data_tabs li:visible").eq(0).find("a").click(),t("input#_manage_stock").change(),t("li.inventory_tab").show(),t("input#_ywcp_options_product_per_item_shipping").change(),t("input#_ywcp_options_product_per_item_pricing").change(),t(".options_group.pricing").show(),t(".options_group ._tax_status_field").parent().show())}),t("input#_ywcp_options_product_per_item_shipping").change(function(){"yith-composite"===t("select#product-type").val()&&(t("input#_ywcp_options_product_per_item_shipping").is(":checked")?(t(".show_if_virtual").show(),t(".hide_if_virtual").hide(),t(".shipping_tab").hasClass("active")&&t("ul.product_data_tabs li:visible").eq(0).find("a").click()):(t(".show_if_virtual").hide(),t(".hide_if_virtual").show()))}).change(),t("input#_ywcp_downloadable").change(function(){"yith-composite"===t("select#product-type").val()&&(t("input#_ywcp_downloadable").is(":checked")?(t(".show_if_downloadable").show(),t(".hide_if_downloadable").hide()):(t(".show_if_downloadable").hide(),t(".hide_if_downloadable").show()))}).change(),t(".ywcp_save_components").on("click",function(){var e={post_id:woocommerce_admin_meta_boxes.post_id,data:t("#ywcp_tab_component").find("input, select, textarea").serialize(),action:"ywcp_components_save"};t("#ywcp_tab_component").block(c),t.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){var n=window.location.toString();n=n.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),t("body").trigger("ywcp_woocommerce_components_saved"),t.get(n,function(e){t("#ywcp_tab_component").unblock()})},"json")}),t("body").on("ywcp_woocommerce_components_saved",function(){var e,n;e={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_load_components"},n=t("#ywcp_components_list_container_items"),t("#ywcp_tab_component").block(c),t.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){n.html(e),i(),_(n),a(),s(),r(n.find(".categories_id-select2")),n.trigger("ywcp_woocommerce_components_loaded"),t("#ywcp_tab_component").unblock()}),t(".ywcp_save_dependencies").trigger("click")}),t(".ywcp_save_dependencies").on("click",function(){var e={post_id:woocommerce_admin_meta_boxes.post_id,data:t("#ywcp_tab_dependecies").find("input, select, textarea").serialize(),action:"ywcp_dependencies_save"};t("#ywcp_tab_dependecies").block(c),t.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){var n=window.location.toString();n=n.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),t("body").trigger("ywcp_woocommerce_dependencies_saved"),t.get(n,function(e){t("#ywcp_tab_dependecies").unblock()})},"json")}),t("body").on("ywcp_woocommerce_dependencies_saved",function(){var e,n;e={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_load_dependencies"},n=t("#ywcp_dependencies_list_container_items"),t("#ywcp_tab_dependecies").block(c),t.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){n.html(e),o(),l(n.find(".ywcp_dependence_selection_product_id-select2")),p(),d(),n.trigger("ywcp_woocommerce_dependencies_loaded"),t("#ywcp_tab_dependecies").unblock()})}),t("body").on("click","button.ywcp_add_component",function(){t("#ywcp_tab_component").block(c);var e={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_add_component",ywcp_component_index:n()},o=t("#ywcp_components_list_container_items");return t.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){o.append(e);var n=t("#ywcp_components_list_container_items .ywcp_components_list_container_single_item").last();i(),_(n),a(),s(),r(n.find(".categories_id-select2")),n.trigger("ywcp_woocommerce_component_added"),t("#ywcp_tab_component").unblock()}),!1}),t("body").on("click","button.ywcp_add_dependencies",function(){t("#ywcp_tab_dependecies").block(c);var e={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_add_dependence",ywcp_dependence_index:n()},o=t("#ywcp_dependencies_list_container_items");return t.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){o.append(e);var n=t("#ywcp_dependencies_list_container_items .ywcp_dependencieslist_container_single_item").last();l(n.find(".ywcp_dependence_selection_product_id-select2")),p(),d(),n.trigger("ywcp_woocommerce_dependencies_added"),t("#ywcp_tab_dependecies").unblock()}),!1}),t("body").on("click","button.ywcp_remove_component",function(){var e=t(this).parent().parent();e.find("*").off(),e.remove()}),t("body").on("click","button.ywcp_remove_dependence",function(){var e=t(this).parent().parent();e.find("*").off(),e.remove()}),i(),o(),a(),p(),d(),s(),r(),l()});