"use strict";(function(){jQuery(document).ready(function(o){var n,c,e,t,i=null!=(e=window.typenow)?e:"",r=null!=(t=window.pagenow)?t:"";if("shop_order"===i&&(n=o.WCBackboneModal.View,c=function(e,t){var i=1<arguments.length&&void 0!==t&&t;return o("#wc-backbone-modal-dialog .modal-close").trigger("click"),new n({target:"wc-pip-action-modal",string:e}),o("#wc-pip-confirm-order-action").on("click",function(e){var t,n;return e.preventDefault(),"print"!==o(this).data("action")?((t=o(this).closest("div.wc-backbone-modal-content")).block({message:null,overlayCSS:{background:"#FFF",opacity:.6}}),n={action:"wc_pip_process_order_action",security:wc_pip_admin.process_order_action_nonce,document_type:o(this).data("type"),document_action:o(this).data("action"),order_ids:o(this).data("orders")},o.post(wc_pip_admin.ajax_url,n,function(e){return t.unblock(),e.success?c(e.data,i):console.log(e)})):("edit-shop_order"===r&&o('input[name="post[]"]:checked').attr("checked",!1),o("#wc-pip-cancel-order-action").trigger("click"),window.open(o(this).attr("href"),"_blank"),"shop_order"===r&&i?o(document).find("form#post").submit():location.reload())}),o("#wc-pip-dismiss-done-order-action").on("click",function(e){if(e.preventDefault(),o("#wc-backbone-modal-dialog .modal-close").trigger("click"),"edit-shop_order"===r&&o('input[name="post[]"]:checked').attr("checked",!1),"shop_order"===r)return i?o('button[name="save"]').trigger("click"):location.reload()})},o(".wc_pip_document").pointer({pointerClass:"wc-pip-document-actions-pointer",position:{edge:"right",align:"right"},content:function(){var e=parseInt(o(this).attr("href").replace(/^\D+/g,""),10);return o("#wc-pip-pointer-order-actions-"+e).html()},buttons:function(e,t){return o('<button class="button button-large wc-pip-pointer-close">'+wc_pip_admin.i18n.close+"</button>").bind("click.pointer",function(e){return e.preventDefault(),t.element.pointer("close")})},opened:function(){var e=parseInt(o(this).attr("href").replace(/^\D+/g,""),10);return o(".wc-pip-document-actions-pointer").each(function(){if(o(this).is(":visible")&&parseInt(o(this).find("input").val(),10)!==e)return o(this).find(".wc-pip-pointer-close").trigger("click")})}}).on("click",function(e){return e.preventDefault(),o(this).pointer("toggle"),o(".wc-pip-document-tooltip-order-action").on("click",function(e){var t;return e.preventDefault(),t={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:o(this).data("action"),order_ids:[o(this).data("order-id")]},o.post(wc_pip_admin.ajax_url,t,function(e){return e.success?c(e.data):console.log(e)})})}),o(document).on("mouseup",function(e){var t=o(e.target);if(t&&!t.hasClass("wc_pip_document")&&0===t.closest("div.wc-pip-document-actions-pointer").length)return o(".wc-pip-document-actions-pointer").each(function(){if(o(this).is(":visible"))return o(this).find(".wc-pip-pointer-close").trigger("click")})}),o(".bulkactions select").each(function(){var e,t=o(this),n=t.find("option[value^='wc_pip_']");if(n.length)return e=o("<optgroup>").attr("label",wc_pip_admin.i18n.plugin_name).append(n.detach()),t.append(e)}),o("#doaction, #doaction2").on("click",function(e){var t,n=o(this).prev("select").val(),i=[];if(-1!==wc_pip_admin.order_bulk_actions.indexOf(n))return e.preventDefault(),o('input[name="post[]"]:checked').each(function(){return i.push(o(this).val())}),t={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:n,order_ids:i},o.post(wc_pip_admin.ajax_url,t,function(e){return e.success&&e.data?c(e.data):console.log(e)})}),o('.wc-reload, button[name="save"]').on("click",function(e){var t,n,i=o("select[name=wc_order_action]").val();if(-1!==wc_pip_admin.order_bulk_actions.indexOf(i))return e.preventDefault(),n=o(this).hasClass("save_order"),t={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:i,order_ids:[o("#post_ID").val()]},o.post(wc_pip_admin.ajax_url,t,function(e){return e.success&&e.data?c(e.data,n):console.log(e)})})),"woocommerce_page_wc-settings"===r)return o("#wc_pip_invoice_number_reset_counter").attr("checked",!1),o(".hide-options-if-checked").change(function(e){return o(this).is(":checked")?o(document).find(".hide-if-use-order-number").closest("tr").hide():o(document).find(".hide-if-use-order-number").closest("tr").show()}).change(),o("#wc_pip_invoice_number_reset_counter").change(function(e){var t=o(this).is(":checked"),n=document.getElementById("wc_pip_invoice_number_start");return!0===t?!0===confirm(wc_pip_admin.i18n.reset_counter_warning)?n.readOnly=!1:o(this).prop("checked",!1):n.readOnly=!0}).change(),o(".wc-pip-media-upload").on("click",function(e){var n,i;e.preventDefault(),n=o(this),i?i.open():"undefined"!=typeof wp&&wp.media&&((i=wp.media.frames.file_frame=wp.media({title:o(this).data("uploader_title"),button:{text:o(this).data("uploader_button_text")},multiple:!1})).on("select",function(e){var t=i.state().get("selection").first().toJSON();return n.prev(".wc-pip-media-url").val(t.url)}),i.open())})})}).call(void 0);