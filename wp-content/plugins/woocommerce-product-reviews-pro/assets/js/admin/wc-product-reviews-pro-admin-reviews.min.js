"use strict";(function(){jQuery(function(s){var d,i,e,a;if("comment"===window.pagenow||"product_page_reviews"===window.pagenow)return a=null!=(e=window.wc_product_reviews_pro_admin_reviews)?e:{},d=s("#wc-product-reviews-pro-flags"),i=function(o,e,c){var t={action:"wc_product_reviews_pro_handle_contribution_flag",security:a.handle_contribution_flag_nonce,handling:o,flags:c,contribution:e};return s.post(a.ajax_url,t,function(e){var t,n,r,i,a;if(e.success){for(a=[],r=0,i=c.length;r<i;r++)n=c[r],t=d.find("#flag-"+n),"delete"===o?t.fadeOut("400",function(){if(s(this).remove(),1===d.find("tbody tr").length)return s("tr.no-flags").show()}):"resolve"===o&&t.find("button.resolve").fadeOut("400",function(){return t.removeClass("unresolved").addClass("resolved"),s(this).remove()}),a.push(s("#wc-product-reviews-pro-stats").find("tr.active-flags td").html(e.data));return a}return console.log(e)})},d.find("button").not(".action").on("click",function(e){var t;if(e.preventDefault(),"delete"!==(t=s(this).data("action"))||confirm(a.i18n.confirm_delete_flag))return i(t,s(this).data("contribution-id"),[s(this).data("flag-id")])}),d.find("button.action").on("click",function(e){var t,n,r;if(e.preventDefault(),n=s(this).data("contribution-id"),t=s(this).prev("select").val(),0<(r=d.find("input.select-flag-id:checked").map(function(){return s(this).val()}).get()).length){if("delete"===t&&!confirm(a.i18n.confirm_delete_flags))return;return i(t,n,r),location.reload()}}),s("#wc-product-reviews-pro-attachment a.remove-attachment").on("click",function(e){var t;if(e.preventDefault(),confirm(a.i18n.confirm_remove_attachment))return t=s(this).data("comment-id"),s("#wc-product-reviews-pro-attachment .inside .feedback").remove(),s.ajax({type:"POST",url:a.ajax_url,data:{action:"wc_product_reviews_pro_remove_contribution_attachment",security:a.nonce,comment_id:t},success:function(e){return e.data&&e.data.message||s("#wc-product-reviews-pro-attachment .inside").prepend('<p class="feedback" style="color:#AA0000;">'+a.i18n.error_removing_attachment+"</p>"),e.success?s("#wc-product-reviews-pro-attachment .inside").empty().prepend('<p class="feedback">'+e.data.message+"</p>"):s("#wc-product-reviews-pro-attachment .inside").prepend('<p class="feedback" style="color:#AA0000;">'+e.data.message+"</p>")}})})})}).call(void 0);