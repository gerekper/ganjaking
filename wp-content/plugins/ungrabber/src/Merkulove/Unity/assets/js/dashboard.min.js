!function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d();const{restBase:e,nonce:t,translation:n}=window.mdpDashboard;function s(n,s){const d=new XMLHttpRequest;d.open("POST",`${e}ungrabber/v2/dashboard/?nonce=${t}&plugin=${n}`,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.onload=()=>{if(200===d.status)switch(s){case"license":a(n,JSON.parse(d.response));break;case"update":!function(e,t){const n=document.querySelector(`div[data-plugin="${e}"] .mdp-dashboard__status__update`),s=n.dataset.version;if(""===t)return void n.remove();n.className+="-version",s===t?(n.querySelector(".mdp-dashboard__status__update-needed").remove(),n.querySelector(".mdp-dashboard__status__update-no-needed .mdp-dashboard__status__version").innerHTML=t,n.querySelector(".mdp-dashboard__status__update-no-needed").removeAttribute("style")):(n.querySelector(".mdp-dashboard__status__update-no-needed").remove(),n.querySelector(".mdp-dashboard__status__update-needed .mdp-dashboard__status__version").innerHTML=t,n.querySelector(".mdp-dashboard__status__update-needed").removeAttribute("style"))}(n,JSON.parse(d.response))}else a(n)},d.send(`ask=${s}`)}function a(e,t=""){const s=document.querySelector(`div[data-plugin="${e}"] .mdp-dashboard__status__license a`);!0===t?(s.closest(".mdp-dashboard__status__license").className+="--valid",s.innerHTML+=n.licenseActive):!1===t?(s.closest(".mdp-dashboard__status__license").className+="--invalid",s.innerHTML+=n.licenseInactive):(s.closest(".mdp-dashboard__status__license").className+="--unknown",s.innerHTML+=n.licenseUnknown)}function d(){document.querySelectorAll(".mdp-dashboard__plugin").forEach((e=>{const t=e.dataset.plugin;s(t,"license"),s(t,"update")})),document.querySelectorAll(".button-activate").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(e),function(e){const t=e.innerHTML;e.classList.add("button-disabled"),e.innerHTML=n.wait;let s=0;const a=setInterval((()=>{e.innerHTML+=".",s++,3===s&&(s=0,e.innerHTML=n.wait)}),200);if(""===e.href)return;const d=e.href;e.href="";const o=new XMLHttpRequest;o.open("POST",d,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=()=>{clearInterval(a),e.innerHTML=t,e.classList.remove("button-disabled"),200===o.status?(e.closest(".mdp-dashboard__buttons").querySelectorAll(".button").forEach((e=>{e.removeAttribute("style")})),e.remove()):location.href=d},o.send("")}(e.target)}))}))}}();