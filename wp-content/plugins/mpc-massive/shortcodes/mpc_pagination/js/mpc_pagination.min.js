!function(a){"use strict";function b(b){b.is(".mpc--square-init")&&g(b),b.find("li a").on("click",function(b){var c=a(this),d=c.parents(".mpc-pagination"),g=d.attr("data-type"),h=window["_"+d.attr("data-grid")+"_query"],i=parseInt(d.attr("data-current")),j=parseInt(d.attr("data-pages")),k=c.parents("li").attr("data-page");return!(d.is(".mpc-pagination--classic")&&!d.is(".mpc-non-ajax"))||(b.preventDefault(),(i==k||!c.parent(".mpc-pagination").is(".mpc-disabled"))&&(d.addClass("mpc-disabled"),h.paged="prev"==k?i>1&&i-1:"next"==k?i<j&&i+1:parseInt(k)!=i&&parseInt(k),void(h.paged&&(window["_"+d.attr("data-grid")+"_query"]=h,e(d.attr("data-grid"),g,c),f(d,d.attr("data-grid"))))))})}function c(b){b.find(".mpc-pagination__link").on("click",function(b){var c=a(this),d=c.parents(".mpc-pagination"),f=d.attr("data-type"),g=parseInt(d.attr("data-current")),h=parseInt(d.attr("data-pages"));if(!d.is(".mpc-pagination--classic")){if(b.preventDefault(),g>=h||c.is(".mpc-disabled"))return!1;c.addClass("mpc-disabled"),window["_"+d.attr("data-grid")+"_query"].paged=g+1,e(d.attr("data-grid"),f,c)}})}function d(b){b.on("mpc.infinity",function(){var b=a(this);b.is(".mpc-pagination--infinity")&&b.find(".mpc-pagination__link").trigger("click")})}function e(b,c,d){var e=window["_"+b+"_query"],f=window["_"+b+"_atts"];a.post(_mpc_vars.ajax_url,{action:"mpc_pagination_set",type:c,current:e.paged,query:e,atts:f,dataType:"html"},function(e){var f=a("#"+b),g=d.parents(".mpc-pagination"),h=a(e);if("classic"==c&&!g.is(".mpc-append-ajax")){var i=f.children();f.isotope("remove",i)}mpc_init_lightbox(h,!0),f.append(h).isotope("insert",h),f.imagesLoaded().done(function(){f.isotope("layout")});var j=f.find(".mpc-pagination--settings").data("pages"),k=f.find(".mpc-pagination--settings").data("current");f.find(".mpc-pagination--settings").remove(),f.trigger("mpc.loaded"),"infinity"==c&&g.removeClass("mpc-infinity--init"),g.attr("data-current",k).attr("data-pages",j),!g.is(".mpc-pagination--classic")&&j>k?g.removeClass("mpc-disabled"):g.is(".mpc-pagination--classic")&&g.removeClass("mpc-disabled"),g.find(".mpc-current, .mpc-disabled").removeClass("mpc-current mpc-disabled"),g.find('[data-page="'+k+'"]').addClass("mpc-current"),g.is(".mpc-pagination--classic")&&1==k&&g.find(".mpc-pagination__prev").addClass("mpc-disabled"),g.is(".mpc-pagination--classic")&&k==j?g.find(".mpc-pagination__next").addClass("mpc-disabled"):k==j&&g.off().remove()})}function f(c,d){a.post(_mpc_vars.ajax_url,{action:"mpc_pagination_refresh",query:window["_"+d+"_query"],preset:c.data("preset")},function(e){c.after(e.data),c.remove(),b(a('.mpc-pagination[data-grid="'+d+'"]'))})}function g(b){var c=b.find(".mpc-pagination__prev"),d=b.find(".mpc-pagination__next"),e=b.find(".mpc-pagination__link"),f=0;a.each(b.find(".mpc-pagination__link"),function(){var b=a(this);f=Math.max(b.width(),b.height(),f)}),e.css({width:f+"px",height:f+"px","line-height":f+"px"}),c.css({height:f+"px","line-height":f+"px"}),d.css({height:f+"px","line-height":f+"px"}),b.removeClass("mpc--square-init").addClass("mpc--square")}a(".mpc-pagination--infinity").each(function(){var b=a(this);new MPCwaypoint({element:b[0],handler:function(){b.addClass("mpc-infinity-init").trigger("mpc.infinity")},offset:"80%"})}),a(".mpc-pagination").on("mpc.init",function(){var e=a(this);e.is(".mpc--square-init")&&g(e),b(e),c(e),d(e),a("#"+e.data("grid")).on("layoutComplete",function(){MPCwaypoint.refreshAll()}),e.trigger("mpc.inited")})}(jQuery);