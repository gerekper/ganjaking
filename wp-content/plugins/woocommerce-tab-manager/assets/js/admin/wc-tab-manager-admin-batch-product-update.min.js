"use strict";var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){var n=window.jQuery,e=window.wp,r=window.wc_tab_manager_admin_params,t=function(){var t=(_createClass(a,[{key:"bind_events",value:function(){var a=this;return n.each(this.events,function(t,e){return a.el.on(t,n.proxy(a,e))}),this}}]),_createClass(a,[{key:"update_begin",value:function(){return this.update_spinner.addClass("active"),this.update_message.html(this.template()),this.process_batch(0),this}},{key:"update_complete",value:function(){return this.update_spinner.removeClass("active"),this}},{key:"process_batch",value:function(e){var a=this;return e=parseInt(e,10),n.ajax({type:"POST",url:r.ajax_url,data:{action:"wc_tab_manager_batch_update_products",step:e,nonce:r.nonce},dataType:"json",success:function(t){if(null!=t.data)return a.update_message.html(a.template(t.data)),t.data.complete?a.el.trigger("batch_update.complete"):0===t?a.el.trigger("batch_update.failed"):a.process_batch(++e)}}).fail(function(t){return a.update_message.html("Uh-oh, something went wrong with the server.\nHopefully this is a temporary problem.")}),this}}]),a);function a(){var e=this;return _classCallCheck(this,a),this.update_button=this.el.find(".batch-update-button"),this.update_message=this.el.find(".description"),this.update_spinner=this.el.find(".ajax-spinner"),this.update_button.on("click",function(t){return t.preventDefault(),e.el.trigger("batch_update.begin")}),this.bind_events(),this}return t.prototype.el=n("#wc-tab-manager-batch-update-settings"),t.prototype.update_button=null,t.prototype.update_message=null,t.prototype.update_spinner=null,t.prototype.template=e.template("batch-product-update-message"),t.prototype.events={"batch_update.begin":"update_begin","batch_update.complete":"update_complete"},t}.call(this);r.batch_update_view=new t}).call(void 0);