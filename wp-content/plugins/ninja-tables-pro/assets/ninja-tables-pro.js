!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),e.exports=n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(2);jQuery(document).on("ninja_table_button_action_csv",function(e,t){e.preventDefault();var n=t.tableConfig,a=t.button,i=FooTable.get("#footable_"+n.table_id).toJSON("yes"==a.all_rows).rows,r=n.columns,o=[],l={},d={};return jQuery.each(r,function(e,t){t.visible&&(d[t.name]=t,l[t.name]=t.title)}),o.push(l),jQuery.each(i,function(e,t){var a={};jQuery.each(t,function(e,i){var r;d[e]&&(a[e]=d[e].formatter(i,!1,t),"yes"==n.table_buttons.csv.plainText&&(a[e]=(r=a[e],(new DOMParser).parseFromString(r,"text/html").documentElement.textContent)))}),o.push(a)}),function(e,t){var n=new Blob([e],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveBlob)navigator.msSaveBlob(n,t);else{var a=document.createElement("a"),i=URL.createObjectURL(n);a.href=i,a.style="visibility:hidden",a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}(function(e){for(var t="",n=0,a=e.length;n<a;n++){var i=e[n],r=0;for(var o in i){var l="";i[o]&&(l='"'+i[o].replace(/"/g,'""')+'"'),t+=0===r?l:","+l,r+=1}t+="\n"}return t}(o),n.title+".csv")});n(3);jQuery(document).on("ninja_table_ready_init",function(e,t){var n=t.$table,a=t.tableConfig;if(a.table_buttons){var i=a.table_buttons.button_position,r=a.table_buttons.button_alignment,o=jQuery("<div/>",{class:"ninja_table_buttons "+i+" "+r}),l=!1;jQuery.each(a.table_buttons,function(e,t){t&&"yes"==t.status&&(l=!0,o.append(jQuery("<button/>",{class:"ninja_button btn ninja_button_"+e,html:t.label,"data-table_id":a.table_id}).css({backgroundColor:t.bg_color,color:t.text_color}).on("click",function(n){n.preventDefault(),jQuery(document).trigger("ninja_table_button_action_"+e,{button:t,tableConfig:a})})))}),l&&("after_table"==i?n.parent().append(o):"before_table"==i?n.find(".footable-filtering th").length?n.find(".footable-filtering th").prepend(o):n.parent().prepend(o):n.find(".footable-filtering th").length?n.find(".footable-filtering th").append(o):n.parent().prepend(o))}});n(4),n(5),n(6)},function(e,t){var n,a,i;n=FooTable,a=function(e,t,a){var i=!1;return n.arr.each(e,function(e){i||e.sortValue(t)>=e.sortValue(a[e.name])&&(i=!0)}),i},i=function(e,t,a){var i=!1;return n.arr.each(e,function(e){i||e.sortValue(t)<=e.sortValue(a[e.name])&&(i=!0)}),i},n.Row.prototype.filtered=function(e){var t=!0,r=this;return n.arr.each(e,function(e){if(t){var o=e.query._original.charAt(0),l=e.query._original.substring(1);if(":"==o)return t=function(e,t,a){var i=!1;return n.arr.each(e,function(e){i||e&&e.sortValue(t)==e.sortValue(a[e.name])&&(i=!0)}),i}(e.columns,l,r.value);if("%"==o)return t=function(e,t,a){var i=!1;return n.arr.each(e,function(e){if(!i&&e){var n=e.sortValue(a[e.name]);n&&("number"==typeof n?0===a[e.name].toString().indexOf(t)&&(i=!0):0===e.sortValue(a[e.name]).toLowerCase().indexOf(t.toLowerCase())&&(i=!0))}}),i}(e.columns,l,r.value);if("!"==o&&-1!=l)return t=function(e,t,a){var i=!1;return n.arr.each(e,function(e){i||e.sortValue(t)!=e.sortValue(a[e.name])&&(i=!0)}),i}(e.columns,l,r.value);if(">"==o)return t=i(e.columns,l,r.value);if("<"==o)return t=a(e.columns,l,r.value);if("~"==o&&-1!=l){var d=l.split(":",2);return u=e.columns,s=d[0],c=d[1],_=r.value,t=i(u,s,_)&&a(u,c,_)}if(0==(t=e.matchRow(r)))return!1}var u,s,c,_}),t}},function(e,t){jQuery(document).on("ninja_table_button_action_print",function(e,t){var n=t.tableConfig,a=n.columns,i=t.tableConfig.table_id,r=t.button,o=FooTable.get("#footable_"+i).toJSON("yes"==r.all_rows),l=n.custom_css,d=document.createElement("a"),u=function(e){d.href=e;var t=d.host;return-1===t.indexOf("/")&&0!==d.pathname.indexOf("/")&&(t+="/"),d.protocol+"//"+t+d.pathname+d.search},s=jQuery("#footable_"+i).attr("class"),c=jQuery("#footable_parent_"+i).attr("class");n.settings.stack_config&&n.settings.stack_config.stackable&&(s=s.replace("ninja_stacked_table"));var _='<div id="footable_parent_'+i+'" class="'+c+' ninja_doing_printing"><table id="footable_'+i+'" style="display: table !important;" class="'+s+'">';_+="<thead>",_+='<tr class="footable-header">';var f={},m={};jQuery.each(a,function(e,t){if(t.visible){f[t.name]=t;var n=jQuery("<th/>",{html:t.title,class:t.classes.join(" "),css:l["ninja_column_"+e]});_+=jQuery(n).get(0).outerHTML}m[t.name]=e}),_+="</tr></thead>",_+="<tbody>",jQuery.each(o.rows,function(e,t){var n={};jQuery.each(t,function(e,a){f[e]&&(n[e]={value:"",classes:"",css:""},n[e].value=f[e].formatter(a,!1,t),n[e].class=f[e].classes.join(" "),n[e].css=Object.entries(l["ninja_column_"+m[e]]).map(function(e){return e.join(":")}).join(";"))}),_+=function(e,t){t||(t="td");var n="<tr>";return jQuery.each(e,function(e,a){if("____editing____"!=e){var i=null===a.value||void 0===a.value?"":a.value;n+="<"+t+' class="'+a.class+'"style="'+a.css+'">'+i+"</"+t+">"}}),n+"</tr>"}(n)}),_+="</tbody>",_+="</table></div>",r.header_html&&(_='<div class="ninja_print_table_header">'+r.header_html+"</div>"+_),r.footer_html&&(_=_+'<div class="ninja_print_footer">'+r.footer_html+"</div>");var p=window.open("","");p.document.close();var h=n.title,v=r.message_top,y=r.message_bottom,b="<title>"+h+"</title>";jQuery("style, link").each(function(){var e;b+=("link"===(e=jQuery(this).clone()[0]).nodeName.toLowerCase()&&(e.href=u(e.href)),e.outerHTML)});try{p.document.head.innerHTML=b}catch(e){jQuery(p.document.head).html(b)}p.document.body.innerHTML="<div>"+(v||"")+"</div>"+_+"<div>"+(y||"")+"</div>",jQuery(p.document.body).addClass("ninja_table_print_view"),jQuery("img",p.document.body).each(function(e,t){t.setAttribute("src",u(t.getAttribute("src")))});var g=jQuery(document).find("html").attr("dir");jQuery(p.document).find("html").attr("dir",g),jQuery(p.document).find("head").append('<style>.ninja_table_print_view {\n  background: white;\n  color: black;\n  width: 100% !important;\n  font-family: Arial, "Times New Roman", "Bitstream Charter", Times, serif;\n} table {width: 100% !important;\n}\nbody {-webkit-print-color-adjust: exact !important;\n}\n</style>');var j=function(){p.print(),p.close()};navigator.userAgent.match(/Trident\/\d.\d/)?j():p.setTimeout(j,1e3)})},function(e,t){window.ninjaTableGetCustomFilter=function(e,t,n,a,i,r){var o,l=jQuery,d=l("."+r),u=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent);return{construct:function(e){var t=this;this._super(e);i&&(d.on("updated_table_filter",function(e,n){t.updateTableFilter()}),d.on("ninja_table_reset_filter",function(){t.resetTableFilter()})),d.on("ninja_table_all_chunk_loaded",function(){})},updateTableFilter:function(){jQuery.each(e,function(e,t){if("select"==t.type&&"dynamic_data"==t.select_value_type){var a=d.find("thead .form-group-"+e+" select");a.val()||(a.removeClass("ninja_populated"),jQuery(document).trigger("ninja_table_load_dynamic_options",{element:a,filter:t,table_id:n,reloadSumo:!0,tableIdentifier:r}))}})},resetTableFilter:function(){jQuery.each(e,function(e,t){if("select"==t.type&&"dynamic_data"==t.select_value_type){var a=d.find("thead .form-group-"+e+" select");a.removeClass("ninja_populated"),jQuery(document).trigger("ninja_table_load_dynamic_options",{element:a,filter:t,table_id:n,reloadSumo:!0,tableIdentifier:r})}})},$create:function(){var t=this;this._super();var n=this;jQuery.each(e,function(e,t){"checkbox"==t.type?n.createDomForCheckbox(t,e,function(a){var i=d.find('input[name="'+e+'"]:checked').map(function(e,n){return"yes"==t.strict?'"'+jQuery(n).val()+'"':jQuery(n).val()}).get().join(" ");(i=window.ninjaTableApp.diacriticsRemoval(i))&&" "!=i?n.addFilter(e,i,t.columns,!0,!0,"OR"):n.removeFilter(e),n.filter()}):"radio"==t.type?n.createDomForRadio(t,e,function(a){var i=this,r=l(this).val();r&&" "!=r?("yes"==t.strict&&(r=":"+r),r=window.ninjaTableApp.diacriticsRemoval(r),n.addFilter(e,r,t.columns,!0,!0,"OR")):n.removeFilter(e),n.filter().then(function(){l(i).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r})})}):"select"==t.type?n.createDomForSelect(t,e,function(a){"dynamic_data"==t.select_value_type&&(t.columns=[t.dynamic_select_column]);var i=l(this).val();Array.isArray(i)&&(i="yes"==t.strict?i.join('" OR "'):i.join(" OR ")),i=window.ninjaTableApp.diacriticsRemoval(i),n.doSelectFilter(i,t,e)}):"date_picker"==t.type?n.createDomForDatePicker(t,e,function(a){var i=this,r=l(this).val();if(r){var o=t.filter_operator;o="less"==o?"<":"greater"==o?">":"",n.addFilter("_ninja_date_filter_"+e,o+r,t.columns)}else n.removeFilter("_ninja_date_filter_"+e);n.filter().then(function(){l(i).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r})})}):"date_range"==t.type?n.createDomForDateRangePicker(t,e,function(a){var i=this,r=l(this).val();r?n.addFilter("_ninja_date_filter_from_ninja_date_"+e,">"+r,t.columns):n.removeFilter("_ninja_date_filter_from_ninja_date_"+e),n.filter().then(function(){l(i).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r})})},function(a){var i=this,r=l(this).val();r?n.addFilter("_ninja_date_filter_to_ninja_date_"+e,"<"+r,t.columns):n.removeFilter("_ninja_date_filter_to_ninja_date_"+e),n.filter().then(function(){l(i).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r})})}):"number_range"==t.type?n.createDomForNumberRangePicker(t,e,function(a){var i=this,r=l(this).val();r?n.addFilter("_ninja_date_filter_from_ninja_number_"+e,">"+r,t.columns):n.removeFilter("_ninja_date_filter_from_ninja_number_"+e),n.filter().then(function(){l(i).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r})})},function(a){var i=this,r=l(this).val();r?n.addFilter("_ninja_date_filter_to_ninja_number_"+e,"<"+r,t.columns):n.removeFilter("_ninja_date_filter_to_ninja_number_"+e),n.filter().then(function(){l(i).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r})})}):"text_input"==t.type?n.createDomForText(t,e,function(a){var i=this;clearTimeout(o),o=setTimeout(function(a){o=null;var r=l(i).val();r!=l(i).data("prev_value")&&(l(i).data("prev_value",r),r?(r=window.ninjaTableApp.diacriticsRemoval(r),t.filter_value_prefix?r=t.filter_value_prefix+r:"yes"==t.strict&&(r=":"+r),n.addFilter(e,r,t.columns)):n.removeFilter(e),n.filter().then(function(){if(d.trigger("updated_table_filter",{filter:t,filter_index:e,selected:r}),u){var n=r.length;l(i).focus().prop({selectionStart:n,selectionEnd:n})}else l(i).focus()}))},1e3*Math.random())}):"reset_filter"==t.type&&n.createDomForResetButton(t,e,function(e){d.trigger("footable_clear_filter"),l(e.target).parent().parent().find(".fooicon-remove").parent().trigger("click")})}),d.on("ninja_table_loaded_once ninja_table_all_chunk_loaded",function(e,n){t.resetTableFilter(),a&&a.length&&l.each(a,function(e,t){var n=d.find('[data-filter_name="'+t.target+'"]'),a=n.data("element_type");if("radio"==a)n.find('input[value="'+t.value+'"]').trigger("click");else if("select"==a){var i=n.find("select"),r="multiple"==i.attr("multiple");i.val(t.value),r&&jQuery.fn.SumoSelect&&i[0].sumo&&i[0].sumo.reload(),i.trigger("change")}else"text_input"==a?(n.find("input").val(t.value),n.find("input").trigger("keyup")):(n.find("input").val(t.value),n.find("input").trigger("change"))})})},doSelectFilter:function(e,t,n){var a=e;e&&" "!=e?("yes"!=t.is_multi_select&&"yes"==t.strict?e=":"+e:"yes"==t.strict&&(e='"'+e+'"'),this.addFilter(n,e,t.columns,!0,!1,"AND")):this.removeFilter(n),this.filter().then(function(){d.trigger("updated_table_filter",{filter:t,filter_index:n,selected:a})})},doCommonFilter:function(e,t,n){var a=this;e&&" "!=e?("yes"==t.strict&&(e='"'+e+'"'),this.addFilter(n,e,t.columns,!0,!1,"AND")):this.removeFilter(n),self.filter().then(function(){l(a).attr("checked",!0),d.trigger("updated_table_filter",{filter:t,filter_index:n,selected:e})})},createDomForDatePicker:function(e,t,n){var a=this.getCustomFilterLabel(e,t,"ninja_custom_date_filter");a.prependTo(this.$form),l("<input/>",{class:"form-control ninja_filter_"+e.type,"data-date_format":e.dateFormat,"data-show_time":e.showTime,"data-first_day_of_week":e.firstDayOfWeek,placeholder:e.placeholder}).on("change",n).appendTo(a)},createDomForDateRangePicker:function(e,t,n,a){var i=this.getCustomFilterLabel(e,t,"ninja_custom_date_filter");i.prependTo(this.$form),l("<input/>",{class:"form-control ninja_filter_date_from ninja_filter_"+e.type,"data-date_format":e.dateFormat,"data-show_time":e.showTime,"data-first_day_of_week":e.firstDayOfWeek,placeholder:e.from_placeholder,"aria-label":e.from_placeholder}).on("change",n).appendTo(i),l("<input/>",{class:"form-control ninja_filter_date_to ninja_filter_"+e.type,"data-date_format":e.dateFormat,"data-show_time":e.showTime,"data-first_day_of_week":e.firstDayOfWeek,placeholder:e.to_placeholder,"aria-label":e.to_placeholder}).on("change",a).appendTo(i)},createDomForNumberRangePicker:function(e,t,n,a){var i=this.getCustomFilterLabel(e,t,"ninja_custom_number_range_filter");i.prependTo(this.$form),l("<input/>",{type:"number",class:"form-control ninja_filter_number_from ninja_filter_"+e.type,placeholder:e.from_placeholder}).on("keyup",function(){window.nt_disable_keup_filter||(l(this).trigger("change"),l(this).focus())}).on("change",n).appendTo(i),l("<input/>",{type:"number",class:"form-control ninja_filter_number_to ninja_filter_"+e.type,placeholder:e.to_placeholder}).on("keyup",function(){window.nt_disable_keup_filter||(l(this).trigger("change"),l(this).focus())}).on("change",a).appendTo(i)},createDomForText:function(e,t,n){var a=this.getCustomFilterLabel(e,t,"ninja_custom_text_filter");a.prependTo(this.$form),l("<input/>",{class:"form-control ninja_filter_"+e.type,placeholder:e.placeholder}).on("keyup",n).appendTo(a)},createDomForCheckbox:function(e,t,n){var a=this.getCustomFilterLabel(e,t,"ninja_custom_select_checkbox");a.prependTo(this.$form),l.each(e.options,function(e,i){i.value&&l("<label/>",{}).text(i.label).prepend(l("<input/>",{type:"checkbox",value:i.value,name:t}).on("change",n)).appendTo(a)})},createDomForRadio:function(e,t,n){var a=this.getCustomFilterLabel(e,t,"ninja_custom_radio");a.prependTo(this.$form),e.placeholder&&l("<label/>",{}).text(e.placeholder).prepend(l("<input/>",{type:"radio",value:"","arial-label":e.placeholder,name:t}).on("change",n)).appendTo(a),l.each(e.options,function(e,i){i.value&&l("<label/>",{}).text(i.label).prepend(l("<input/>",{type:"radio","arial-label":i.label,value:i.value,name:t}).on("change",n)).appendTo(a)})},createDomForSelect:function(e,t,a){var i=this.getCustomFilterLabel(e,t,"ninja_custom_select");i.prependTo(this.$form);var o="yes"==e.is_multi_select,d=l("<select/>",{class:"form-control ninja_select_type_"+e.select_value_type+" ninja_multi_select_"+e.is_multi_select,"data-table_id":n,"data-filter_index":t,"data-placeholder":e.placeholder,"data-searchable":e.searchable,multiple:o,"data-target_column":e.dynamic_select_column});"dynamic_data"==e.select_value_type&&d.on("mouseenter",function(t){jQuery(document).trigger("ninja_table_load_dynamic_options",{element:this,filter:e,table_id:n,tableIdentifier:r})}),d.on("change",a),o&&"dynamic_data"!=e.select_value_type||e.placeholder&&d.append(l("<option/>",{value:""}).text(e.placeholder)),"dynamic_data"!=e.select_value_type&&l.each(e.options,function(e,t){t.value&&d.append(l("<option/>",{value:t.value}).text(t.label))}),d.appendTo(i),o&&"dynamic_data"!=e.select_value_type&&jQuery.fn.SumoSelect&&(l(this.$form).find(".form-group-"+t+" .ninja_multi_select_yes").SumoSelect({placeholder:e.placeholder||"&nbsp;"}),jQuery(".SumoSelect").find(".CaptionCont label i").replaceWith('<span><span style="display: none !important; visibility: hidden !important;">View Filters</span></span>'))},createDomForResetButton:function(e,t,n){var a=l("<div />",{class:"form-group ninja-custom-filter ninja_reset_wrapper"}),i=l("<button/>",{class:"ninja_reset_button btn",text:e.placeholder}).on("click",function(e){e.preventDefault(),n(e)});a.append(i),a.prependTo(this.$form)},getCustomFilterLabel:function(e,t,n){var a=l("<div/>",{class:"form-group ninja-custom-filter form-group-"+t+" "+n,"data-filter_name":e.title,"data-element_type":e.type});return e.filter_prefix&&a.html("<label class='ninja_filter_title'>"+e.filter_prefix+"</label>"),a.append(l("<label/>",{class:"sr-only",text:e.placeholder})),a}}}},function(e,t){function n(e,t){e.SumoSelect({placeholder:t.placeholder||"&nbsp;",search:t.searchable,forceCustomRendering:!0}),jQuery(".SumoSelect").find(".CaptionCont label i").replaceWith('<span><span style="display: none !important; visibility: hidden !important;">View Filters</span></span>')}jQuery(document).on("ninja_table_load_dynamic_options",function(e,t){function a(e){var t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").replace(/(\r\n\t|\n|\r\t)/gm,"").trim()}var i=jQuery(t.element);if(!i.hasClass("ninja_populated")){var r="yes"==t.filter.is_multi_select;i.find(".ninja_loading").remove(),i.append('<option class="ninja_loading">Loading...</option>');var o=FooTable.get("."+t.tableIdentifier).toJSON(!1);if(o&&o.rows){var l=o.rows,d=t.filter.dynamic_select_column,u=[];r&&jQuery.fn.SumoSelect&&t.reloadSumo&&i[0].sumo&&(i[0].sumo.unload(),i.val("")),r?i.find("option").remove():i.find("option:gt(0)").remove(),jQuery.each(l,function(e,n){var i=a(n[d]);if("yes"==t.filter.parse_comma_separated){var r=i.split(",");jQuery.each(r,function(e,t){(t=a(t))&&n[d]&&-1===u.indexOf(t)&&u.push(t)})}else i&&n[d]&&-1===u.indexOf(i)&&u.push(i)}),"yes"!=t.filter.disable_auto_sorting&&(u="numeric"==t.filter.sorting_method?u.sort(function(e,t){return e-t}):u.sort(),"desc"==t.filter.sorting_type&&(u=u.reverse()),window.ninjaCustomSorter&&(u=u.sort(window.ninjaCustomSorter))),jQuery.each(u,function(e,t){i.append('<option value="'+t+'">'+t+"</option>")}),i.find(".ninja_loading").remove(),i.addClass("ninja_populated"),r&&jQuery.fn.SumoSelect&&n(i,{placeholder:t.filter.placeholder,search:!!t.filter.searchable})}else i.find(".ninja_loading").remove()}}),jQuery(document).on("ninja_table_trigger_multi_reset",function(e,t){if(jQuery.fn.SumoSelect){var a=jQuery(t.frm_element);a[0].sumo&&(a[0].sumo.unload(),a.val(""),n(a,{placeholder:a.data("placeholder"),search:!!a.data("searchable")}))}})},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};({rowId:null,row:null,tableId:null,ft:null,loadedImageUploader:null,tableConfig:null,initEditor:function(e,t,n){wp&&wp.editor&&(wp.editor.remove(e),jQuery("#"+e).val(t),wp.editor.initialize(e,{mediaButtons:"yes"==jQuery("#"+e).data("media_status"),mode:"none",tinymce:{toolbar1:"formatselect,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,strikethrough,underline,forecolor,codeformat,removeformat,undo,redo",valid_elements:"*[*]",forced_root_block:"",setup:function(e){e.on("change",function(e,t){n&&n()})}},quicktags:!0}),jQuery("#"+e).on("change",function(e){n&&n()}))},resetForm:function(){var e=this,t=this.tableConfig.editing.defaultValues,n=jQuery("#nt_editor_modal_"+this.tableId);if(this.doneAjax(),document.getElementById("nt_editor_form_"+this.tableId).reset(),n.find(".nt_data_item").each(function(e,n){t[jQuery(n).attr("name")]&&jQuery(n).val(t[jQuery(n).attr("name")])}),this.row=null,this.rowId=null,n.find(".nt_form_html").length){var a=n.find(".nt_form_html");jQuery.each(a,function(n,a){var i=jQuery(a).attr("id"),r="";t[jQuery(a).attr("name")]&&(r=t[jQuery(a).attr("name")]),e.initEditor(i,r,function(){jQuery(a).val(wp.editor.getContent(i))})})}n.find(".nt_image_preview img").length&&n.find(".nt_image_preview img").attr("src","")},startingAjax:function(){jQuery("#nt_editor_modal_"+this.tableId).addClass("nt_submitting_form")},doneAjax:function(){jQuery("#nt_editor_modal_"+this.tableId).removeClass("nt_submitting_form")},setRowId:function(){if(this.row){var e=jQuery(this.row.$el).data("row_id");if(e)this.rowId=parseInt(e);else{var t=this.row.classes.join(" ");(t=t.match(/nt_row_id_([0-9]+)/))&&t.length>1?this.rowId=parseInt(t[1]):this.rowId=!1}}else this.rowId=!1},ninjaNotify:function(e,t){t||(t="success");var n=jQuery("<div class='nt_pro_notification nt_notification_type_"+t+"'>"+e+"</div>");jQuery("body").append(n),setTimeout(function(){n.remove()},2e3)},stripHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").replace(/(\r\n\t|\n|\r\t)/gm,"").trim()},getThumb:function(e){var t=this,n=e.width,a=e.url,i=!1;return jQuery.each(e.sizes,function(e,r){e==t.preferedThum&&(i=r.url),(!i||r.width>300)&&(r.width<400?i=r.url:r.width<n&&(n=r.width,a=r.url))}),i||a},maybeInitUploader:function(){if(!this.loadedImageUploader){var e=jQuery(".nt_image_change");if(e.length&&wp.media&&wp.media.editor){var t=this;e.on("click",function(e){e.preventDefault();var n=jQuery(this),a=jQuery(n).closest(".nt_image_uploader_wrapper"),i=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(e,n){var r=t.getThumb(n);a.find('input[data-value_name="image_thumb"]').val(r),a.find('input[data-value_name="image_full"]').val(n.url),a.find('input[data-value_name="alt_text"]').val(n.alt||n.title),a.find(".nt_image_preview img").attr("src",r),wp.media.editor.send.attachment=i},wp.media.editor.open(),!1}),this.removeImageHandler()}}},removeImageHandler:function(){var e=jQuery(".nt_btn_remove");e.length&&e.on("click",function(e){e.preventDefault(),jQuery(".nt_hidden_image_input").each(function(e,t){jQuery(t).val("")}),jQuery(".nt_image_preview img").attr("src","")})},showEditModal:function(){var e=this;this.maybeInitUploader();var t=jQuery("#nt_editor_modal_"+this.tableId);t.removeClass("nt_row_delete");var a=this.row.val();if(jQuery.each(a,function(a,i){var r=t.find(".nt_input_"+a);if(r.length)if("yes"==r.data("is_multi_select")&&i){if(!i)return void t.find(".nt_input_"+a).val([]);if("object"==(void 0===i?"undefined":n(i)))return void t.find(".nt_input_"+a).val(i);var o=i.split(", ");i.indexOf(",")&&(o=i.split(",")),o=o.map(function(t){return e.stripHtml(t)}),t.find(".nt_input_"+a).val(o)}else if("image"==r.data("type")){var l={};(l="object"==(void 0===i?"undefined":n(i))?i:jQuery(e.row.$el).find(".ninja_clmn_nm_"+a).data("json_values"))&&"object"==(void 0===l?"undefined":n(l))||(l={}),"image_light_box"==r.data("link_type")&&(r.find('input[data-value_name="image_thumb"]').val(l.image_thumb),r.find('input[data-value_name="image_full"]').val(l.image_full),r.find('input[data-value_name="alt_text"]').val(l.alt_text),r.find('input[data-value_name="permalink"]').val(l.permalink),r.find(".nt_image_preview img").attr("src",l.image_thumb))}else if("html"==r.data("type")||"textarea"==r.data("type"))t.find(".nt_input_"+a).val(i);else if("url"==r.attr("type")){var d=i;/<\/?[a-z][\s\S]*>/i.test(i)&&(d=jQuery(i).attr("href")),t.find(".nt_input_"+a).val(d)}else t.find(".nt_input_"+a).val(e.stripHtml(i))}),t.find(".nt_form_date").length&&Pikaday){var i=t.find(".nt_form_date");jQuery.each(i,function(e,t){var n=jQuery(t);n.pikaday({format:n.data("date_format"),showTime:"yes"===n.data("show_time"),firstDay:n.data("first_day_of_week")})})}if(t.find(".nt_form_html").length){var r=t.find(".nt_form_html");jQuery.each(r,function(t,n){var a=jQuery(n).attr("id");e.initEditor(a,jQuery(n).val(),function(){jQuery(n).val(wp.editor.getContent(a))})})}t.addClass("nt_modal_editing").removeClass("nt_modal_adding").addClass("show_nt_modal"),t.find("input").length&&this.focus(t),jQuery(document.body).trigger("ninja_table_editor_init",[t]),this.toggleModalOpen()},showAddModal:function(){var e=this;this.resetForm(),this.maybeInitUploader();var t=jQuery("#nt_editor_modal_"+this.tableId);if(t.removeClass("nt_row_delete"),t.find(".nt_form_date").length&&Pikaday){var n=t.find(".nt_form_date");jQuery.each(n,function(e,t){var n=jQuery(t);console.log("addmodal",n.data("first_day_of_week")),n.pikaday({format:n.data("date_format"),showTime:"yes"===n.data("show_time"),firstDay:n.data("first_day_of_week")})})}if(t.find(".nt_form_html").length){var a=t.find(".nt_form_html");jQuery.each(a,function(t,n){var a=jQuery(n).attr("id");e.initEditor(a,jQuery(n).val(),function(){jQuery(n).val(wp.editor.getContent(a))})})}t.addClass("nt_modal_adding").removeClass("nt_modal_editing").addClass("show_nt_modal"),this.focus(t),this.toggleModalOpen()},toggleModalOpen:function(){jQuery("body").toggleClass("ninja_tables_modal_open")},submitHandler:function(){var e=this;jQuery(".nt_editor_submit").on("click",function(t){t.preventDefault();var n="close";try{n=t.toElement.dataset.action}catch(e){}var a={},i=!1,r=jQuery("#nt_editor_modal_"+e.tableId);r.find(".nt_data_item").each(function(e,t){var n=jQuery(t).val(),r=jQuery(t).attr("name");n&&(i=!0),a[r]=n}),r.find(".nt_hidden_image_input").each(function(e,t){i=!0;var n=jQuery(t),r=n.data("key"),o=n.data("value_name");a[r]||(a[r]={}),a[r][o]=n.val()}),i?(e.startingAjax(),jQuery.post(window.ninja_footables.ajax_url,{action:"ninja_table_pro_update_row",table_id:e.tableId,row_id:e.rowId,values:a}).then(function(t){if(t.data&&t.data.values){if(e.rowId&&e.row)e.row.val(t.data.values);else{var a=new FooTable.Row(e.ft,e.ft.columns.array,t.data.values);e.ft.rows.add(a)}"close"==n?e.closeModal():e.focus(r),r.addClass("nt_modal_adding").removeClass("nt_modal_editing"),e.ninjaNotify(t.data.message,"success"),e.resetForm()}else e.ninjaNotify("Sorry, Something is wrong! Please try again","error")}).fail(function(t){t.responseJSON&&t.responseJSON.data?e.ninjaNotify(t.responseJSON.data.message,"error"):e.ninjaNotify("Something is wrong! Please try again","error")}).always(function(){e.doneAjax()})):e.ninjaNotify("Please provide at least one value","error")})},showDeleteModal:function(){jQuery("#nt_editor_modal_"+this.tableId).addClass("nt_row_delete").removeClass("nt_modal_editing").removeClass("nt_modal_adding").addClass("show_nt_modal"),this.toggleModalOpen()},handleDelete:function(){var e=this;jQuery(".nt_editor_delete").on("click",function(t){t.preventDefault();var n=jQuery("#nt_editor_modal_"+e.tableId);jQuery.post(window.ninja_footables.ajax_url,{action:"ninja_table_pro_delete_row",table_id:e.tableId,row_id:e.rowId}).then(function(t){t.data&&t.data.message?(e.row.delete(),e.closeModal(),n.removeClass("nt_row_delete"),e.ninjaNotify(t.data.message,"success")):e.ninjaNotify("Sorry, Something is wrong! Please try again","error")}).fail(function(t){t.responseJSON&&t.responseJSON.data?e.ninjaNotify(t.responseJSON.data.message,"error"):e.ninjaNotify("Something is wrong! Please try again","error")}).always(function(){})})},closeModal:function(){this.toggleModalOpen(),jQuery(".nt_editor_modal").removeClass("show_nt_modal")},registerEvents:function(){var e=this;jQuery(document).on("ninja_table_edit_row",function(t,n){e.row=n.row,e.ft=n.self.ft,e.tableId=n.tableConfig.table_id,e.setRowId(),e.tableConfig=n.tableConfig,e.showEditModal()}),jQuery(document).on("ninja_table_delete_row",function(t,n){e.row=n.row,e.ft=n.self.ft,e.tableId=n.tableConfig.table_id,e.setRowId(),e.tableConfig=n.tableConfig,e.showDeleteModal()}),jQuery(document).on("ninja_table_add_row",function(t,n){e.row=!1,e.ft=n.self.ft,e.tableId=n.tableConfig.table_id,e.rowId=!1,e.tableConfig=n.tableConfig,e.showAddModal()})},boot:function(){var e=this;jQuery(document).ready(function(t){e.registerEvents(),e.submitHandler(),e.handleDelete(),jQuery(".nt_close_modal").on("click",function(t){t.preventDefault(),e.closeModal()})})},focus:function(e){e.find(".nt_form_control:first .nt_data_item:first").focus()}}).boot()},function(e,t){}]);