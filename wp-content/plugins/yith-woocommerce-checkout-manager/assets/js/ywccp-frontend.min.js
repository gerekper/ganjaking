jQuery(document).ready(function(s){"use strict";var e=s('form[name="checkout"]').find("p.form-row input, p.form-row textarea"),o=function(e,t){e.next(".ywccp_error").length||e.after('<span class="ywccp_error"></span>'),e.next(".ywccp_error").html(t)};e.length&&s.each(e,function(){var n=s(this),e=n.data("tooltip"),r=n.closest("p.form-row");n.on("blur",function(){var e=s(this),t=e.val(),i="";ywccp_front.validation_enabled&&(!t&&r.hasClass("validate-required")?(i=ywccp_front.err_msg,o(e,i)):t&&r.hasClass("validate-vat")&&!function(e){var t=s("#billing_country");if("undefined"==typeof checkVATNumber||!t.length||!ywccp_front.vat_validation_enabled)return!0;var i=e.substr(0,2).toUpperCase(),n=t.val();return i!==n&&(e=n+e),checkVATNumber(n,e)}(t)?o(e,ywccp_front.err_msg_vat):t&&r.hasClass("validate-email")&&!/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(t)?o(e,ywccp_front.err_msg_mail):n.next(".ywccp_error").remove())}),void 0!==e&&""!=e&&"undefined"!=typeof s.fn.qtip&&n.qtip({content:{text:e},show:{event:"focus"},style:{classes:"ywccp_tooltip"},position:{my:"bottom center",at:"top center",viewport:s(window)}})});var t=s(".ywccp-multiselect-type, select.select"),i=s(".ywccp-datepicker-type"),n=s(".ywccp-timepicker-type");t&&"undefined"!=typeof s.fn.select2&&s.each(t,function(){var e=s(this),t=e.attr("id");s("#s2id_"+t).length||e.select2({placeholder:e.data("placeholder")})}),"undefined"!=typeof s.fn.datepicker&&i&&s.each(i,function(){s(this).datepicker({dateFormat:s(this).data("format")||"dd-mm-yy",changeYear:ywccp_front.datepicker_change_year,changeMonth:ywccp_front.datepicker_change_month,yearRange:ywccp_front.datepicker_year_range,minDate:ywccp_front.datepicker_min_date,beforeShow:function(){setTimeout(function(){s("#ui-datepicker-div").wrap('<div class="yith_datepicker"></div>').css("z-index",99999999999999),s("#ui-datepicker-div").show()},0)},onClose:function(){s("#ui-datepicker-div").hide(),s("#ui-datepicker-div").unwrap()}})}),"undefined"!=typeof s.fn.timepicki&&n&&(s.each(n,function(){s(this).timepicki({reset:!0,disable_keyboard_mobile:!0,show_meridian:ywccp_front.time_format,max_hour_value:ywccp_front.time_format?"12":"23",min_hour_value:ywccp_front.time_format?"1":"0",overflow_minutes:!0,increase_direction:"up"})}),s(document).on("click",".reset_time",function(e){e.preventDefault()}));var l=function(e){return jQuery.parseJSON(ywccp_front.conditions)[e]},u=function(t){var i=null;return t.each(function(e){if("radio"==t[e].type&&t[e].checked)return i=t[e].value,!1}),i},p=function(e){var t,i,n=e.input_name,r=e.type,o=(e.action,e.required,e.value),c=1<(i=s("*[name="+(t=n)+"]")).length?u(i):"checkbox"==i.attr("type")?i.is(":checked"):"radio"==i.attr("type")?s("#"+t+":checked").val():i.val(),a=!1;switch(r){case"is-set":c&&(a=!0);break;case"is-empty":c||(a=!0);break;case"has-value":var d=o.split(",");jQuery.each(d,function(e,t){String(c)==String(t)&&(a=!0)});break;case"has-not-value":c!=o&&(a=!0)}return a};s("form.checkout").on("change","input, select",function(e){r(e)}),s("form.checkout").on("submit",function(e){r(e)}),s(document.body).on("yith_wccp_i18n_locale_done",function(e){r(e)});var r=function(r){s("form.checkout").find("input,textarea,select").each(function(){var e=s(this).attr("name"),t=s(this).closest(".form-row"),i=function(e){var t=l(e);if(void 0===t||0===t.length)return null;for(var i=t.length,n={show:null,hide:null,set_required:null},r=0;r<i;r++){var o=t[r],c=p(o),a=o.action,d=o.required;"products"!=o.input_name?"show"===a&&"no"!=n.show?c?(1==d&&(n.set_required="yes"),n.show="yes",n.hide="no"):(n.show="no",n.set_required="no",n.hide="yes"):"hide"===a&&"no"!=n.hide&&(c?(n.hide="yes",n.show="no"):(n.hide="no",n.show="yes")):1==d&&(n.set_required="yes",n.show="yes")}return n}(e),n=!1;null!=i&&("yes"==i.show?(t.show(),"yes"==i.set_required&&(n=!0)):"yes"==i.hide&&t.hide(),c(r.type,t,n))})},c=function(e,t,i){1==i?(t.addClass("validate-required"),0==t.find("label").find("abbr.required").length&&(t.find("label").find(".optional").remove(),t.find("label").append('<abbr class="required" title="required">*</abbr>'))):(t.removeClass("validate-required woocommerce-validated woocommerce-invalid woocommerce-invalid-required-field"),0==t.find("label").find(".optional").length&&(t.find("label").append('<span class="optional">(optional)</span>'),t.find("abbr.required").remove()))};s("form.checkout").find("input, select").trigger("change");var a=s("#ship-to-different-address-checkbox").is(":checked");s(".woocommerce-shipping-fields__field-wrapper").hide(),s(document.body).on("init_checkout",function(){s("#ship-to-different-address-checkbox").prop("checked",a).change(),s(".woocommerce-shipping-fields__field-wrapper").toggle(!0)})});