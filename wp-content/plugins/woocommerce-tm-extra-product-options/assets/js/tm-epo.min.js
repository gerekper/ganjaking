!function(t,e,a){"use strict";function i(t,e,a,i,o,r,n){var c,l,d,s,p,m,_,f,u;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(c=e.attr("data-taxable"),l=e.attr("data-tax-rate"),d=e.attr("data-prices-include-tax"),s=e.attr("data-is-vat-exempt"),p=e.attr("data-non-base-location-prices"),m=e.attr("data-taxes-of-one"),_=e.attr("data-base-taxes-of-one"),f=e.attr("data-modded-taxes-of-one"),void 0!==e.data("current_variation")?u=e.data("current_variation"):void 0!==o&&(u=o),void 0!==u&&(c=(u=e.data("current_variation")).tc_is_taxable,l=u.tc_tax_rate,p=u.tc_non_base_location_prices,m=u.tc_taxes_of_one,_=u.tc_base_taxes_of_one,f=u.tc_modded_taxes_of_one),a&&a.data("tax-obj")&&("no"===(l=a.data("tax-obj")).has_fee?c=!1:"yes"===l.has_fee&&(c=!0),l=l.tax_rate),c&&("1"!==d||i?(a||void 0===u||n)&&(t=parseFloat(t)+parseFloat(t)*m):"1"===s?t="1"===p?parseFloat(t)-m*t:parseFloat(t)-_*t:"1"===p&&(t=parseFloat(t)-_*t+f*t))),t/=1e4}function o(t,e,a,i,o,r,n){var c,l,d,s,p,m;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(m=e.attr("data-tax-display-mode"),c=e.attr("data-taxable"),l=e.attr("data-tax-rate"),d=e.attr("data-taxes-of-one"),s=e.attr("data-prices-include-tax"),void 0!==e.data("current_variation")?p=e.data("current_variation"):void 0!==o&&(p=o),void 0!==p&&(c=p.tc_is_taxable,l=p.tc_tax_rate,d=p.tc_taxes_of_one),a&&a.data("tax-obj")&&("no"===(l=a.data("tax-obj")).has_fee?c=!1:"yes"===l.has_fee&&(c=!0),l=l.tax_rate),c&&("1"===s||i)&&("incl"===m||(a||void 0===p||i||n)&&(t=parseFloat(t)-parseFloat(d*t)))),t/=1e4}function r(t,e,a,r,n,c,l){return Number.isFinite(parseFloat(t))||(t=0),e&&(t="incl"===e.attr("data-tax-display-mode")?i(t,e,a,n,c,r,l):o(t,e,a,n,c,r,l)),t}function n(t,e){var i;return e||(e={}),i=a.extend({symbol:"",format:"",decimal:Vt.localDecimalSeparator,thousand:Vt.localThousandSeparator,precision:Yt.currency_format_num_decimals},e),a.epoAPI.applyFilter("tc_formatPrice",a.epoAPI.math.format(t,i),i,t)}function c(t,e,a){return e+n(t,{symbol:Yt.currency_format_symbol,format:Yt.currency_format})+a}function l(t,e,a,i,o,n){var l,d="",s=Yt.option_plus_sign+" ";return a||(t=r(t,e,o,n)),l=Math.abs(t),"minus"===Yt.tm_epo_global_options_price_sign&&(s=""),t<0&&(s=Yt.option_minus_sign+" "),e&&i&&(d=e.attr("data-tax-string")),void 0===d&&(d=""),c(l,s,d)}function d(t){var e,i,o,r,n=a(t);if(0!==n.length){if(n.is(".cpf-section"))return t.find(".tm-epo-field");if(e=n.attr("data-uniqid"),r=n.closest(".tc-extra-product-options"),i=r.attr("data-epo-id"),!r.is(".reactivate")&&Vt.getElementFromFieldCache&&Vt.getElementFromFieldCache[i]&&Vt.getElementFromFieldCache[i][e])return Vt.getElementFromFieldCache[i][e];if((o=n.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!==t&&void 0!==t?t:null})).length>0)switch("cpf-type-product"===(o=o[0])&&(o=n.is(".cpf-type-product-mode-product")?"cpf-type-checkbox":n.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),o){case"cpf-type-radio":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-radio"),Vt.getElementFromFieldCache[i][e];case"cpf-type-checkbox":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-checkbox"),Vt.getElementFromFieldCache[i][e];case"cpf-type-select":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-select"),Vt.getElementFromFieldCache[i][e];case"cpf-type-textarea":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-textarea"),Vt.getElementFromFieldCache[i][e];case"cpf-type-textfield":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-textfield"),Vt.getElementFromFieldCache[i][e];case"cpf-type-color":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tm-color-picker"),Vt.getElementFromFieldCache[i][e];case"cpf-type-range":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-range"),Vt.getElementFromFieldCache[i][e];case"cpf-type-date":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.find(".tm-epo-field.tmcp-date"),Vt.getElementFromFieldCache[i][e];case"cpf-type-variations":return Vt.getElementFromFieldCache[i]=[],Vt.getElementFromFieldCache[i][e]=n.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element"),Vt.getElementFromFieldCache[i][e]}}}function s(t){var e="input[name^='variation_id']";return t.find("input.variation_id").length>0&&(e="input.variation_id"),e}function p(t,e){var a=s(t),i=t.find(a);return e&&(i=i.not(e)),i}function m(t){return t.find(s(t)).val()||0}function _(t){var e=t.find(Vt.qtySelector).last();return 0===e.length&&(e=t.find(Vt.associateQtySelector).last()),e}function f(t){return parseFloat(_(t).val())}function u(t,e,a){oe[oe.length]={name:t,selector:e,func:a}}function g(t,e){var i,o;return(t=a(t)).is(".cpf_hide_element")?(i=t,t=t.find(".tmcp-field, .tmcp-fee-field")):i=t.closest(".cpf_hide_element"),!1!==i.data("isactive")&&!1!==i.closest(".cpf-section").data("isactive")?(o=t.first(),t.prop("disabled",!1),"yes"!==Yt.tm_epo_show_only_active_quantities?o.is(":radio, .cpf-type-radio")||o.is(":checkbox, .cpf-type-checkbox")?(t.filter(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!1),t.not(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!0)):(o.is("select, .cpf-type-select"),o.val()?i.find(".tm-qty").prop("disabled",!1):i.find(".tm-qty").prop("disabled",!0)):e||i.find(".tm-quantity").trigger("showhide.cpfcustom"),o.is(".cpf_hide_element")||(t.removeClass("tcdisabled").addClass("tcenabled"),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcdisabled").addClass("tcenabled").prop("disabled",!1)),i.removeClass("tc-container-disabled").addClass("tc-container-enabled"),t.trigger({type:"tm-field-is-active",field:t,value:!0}),!0):(t.is(".cpf_hide_element")||(t.prop("disabled",!0).removeClass("tcenabled").addClass("tcdisabled"),i.find(".tm-qty").prop("disabled",!0),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcenabled").addClass("tcdisabled").prop("disabled",!0)),i.removeClass("tc-container-enabled").addClass("tc-container-disabled"),t.trigger({type:"tm-field-is-active",field:t,value:!1}),!1)}function h(t,e,i){var o,r,n=a(t),c=n.attr("data-epo_id"),l=n.attr("data-product_id"),d=a(".variations_form[data-epo_id='"+c+"'][data-product_id='"+l+"']"),s="input[name^='variation_id']";if(0===(d=a.epoAPI.applyFilter("tm_variation_check_match_variationsForm",d,c,l,n)).length)return!1;switch(0===(r=d.find(s)).length&&(s="input.variation_id",0===(r=d.find(s)).length&&(r=d.closest(".tc-epo-element-product-li-container").find(".product-variation-id"))),null!==t&&null!==e&&void 0!==t&&void 0!==e&&!1!==t&&!1!==e&&(e=e?parseInt(e,10):-1),o=parseInt(r.val(),10),Number.isFinite(o)||(o=""),Number.isFinite(e)||(e=""),i){case"is":return""!==o&&o===e;case"isnot":return""!==o&&o!==e;case"isempty":return""===o||0===o;case"isnotempty":return""!==o&&0!==o;case"startswith":return o.toString().startsWith(e);case"endswith":return o.toString().endsWith(e);case"greaterthan":return parseFloat(o)>parseFloat(e);case"lessthan":return parseFloat(o)<parseFloat(e);case"greaterthanequal":return parseFloat(o)>=parseFloat(e);case"lessthanequal":return parseFloat(o)<=parseFloat(e)}return!1}function v(t,e,i){if(null===t||null===e)return!1;switch(t=encodeURIComponent(t),e=a.qtranxj_split?encodeURIComponent(a.qtranxj_split(decodeURIComponent(e))[te.language]):encodeURIComponent(decodeURIComponent(e)),t=t?t.toLowerCase():"",e=e?e.toLowerCase():"",t=t.toString(),e=e.toString(),i){case"is":return null!==t&&t===e;case"isnot":return null!==t&&t!==e;case"isempty":return!("undefined"!==t&&void 0!==t&&""!==t);case"isnotempty":return"undefined"!==t&&void 0!==t&&""!==t;case"startswith":return t.startsWith(e);case"endswith":return t.endsWith(e);case"greaterthan":return parseFloat(t)>parseFloat(e);case"lessthan":return parseFloat(t)<parseFloat(e);case"greaterthanequal":return parseFloat(t)>=parseFloat(e);case"lessthanequal":return parseFloat(t)<=parseFloat(e)}return!1}function y(t,e){var i,o,r,n=!0,c=t.find(".cpf_hide_element"),l=!1;if(t.is(".tc-hidden")){if("isnotempty"===e)return!1;if("isempty"===e)return!0}return a(c).each(function(t,c){var d;if(c=a(c),g(c))if((d=c.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!==t&&void 0!==t?t:null})).length>0){switch("cpf-type-product"===(d=d[0])&&(l=!0,d=c.is(".cpf-type-product-mode-product")?"cpf-type-checkbox":c.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),d){case"cpf-type-radio":o=c.find("input.tm-epo-field.tmcp-radio:checked"),"isnotempty"===e?(n=n&&o.length>0,o.length>0&&(i=o.length)):"isempty"===e&&(n=n&&0===o.length);break;case"cpf-type-checkbox":r=c.find("input.tm-epo-field.tmcp-checkbox:checked"),"isnotempty"===e?(n=n&&r.length>0,r.length>0&&(i=r.length)):"isempty"===e&&(n=n&&0===r.length);break;case"cpf-type-select":(i=c.find("select.tm-epo-field.tmcp-select").val())&&!l&&(i=i.slice(0,i.lastIndexOf("_")));break;case"cpf-type-textarea":i=c.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":i=c.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":i=c.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":i=c.find("input.tm-epo-field.tmcp-range").val()}n=n&&v(i,"",e)}else n=n&&!1}),n}function b(t){var e,i,o,r,n,c=a(t.element),l=t.operator,d=t.value,s=!1;if(!c.length)return!1;if(c.is(".cpf-section"))return y(c,l);if((n=c.attr("class").split(" ").map(function(t){return-1!==t.indexOf("cpf-type-",0)?t:null}).filter(function(t){return null!==t&&void 0!==t?t:null})).length>0){switch("cpf-type-product"===(n=n[0])&&(s=!0,n=c.is(".cpf-type-product-mode-product")?"cpf-type-checkbox":c.is(".cpf-type-product-dropdown")?"cpf-type-select":"cpf-type-radio"),n){case"cpf-type-radio":if(i=c.find("input.tm-epo-field.tmcp-radio:checked"),"is"===l||"isnot"===l){if(0===i.length)return!1;(e=c.find("input.tm-epo-field.tmcp-radio:checked").val())&&!s&&(e=e.slice(0,e.lastIndexOf("_")))}if("isnotempty"===l)return i.length>0;if("isempty"===l)return 0===i.length;break;case"cpf-type-checkbox":if(o=c.find("input.tm-epo-field.tmcp-checkbox:checked"),"is"===l||"isnot"===l)return 0!==o.length&&(r=!1,o.each(function(t,i){if((e=a(i).val())&&!s&&(e=e.slice(0,e.lastIndexOf("_"))),v(e,d,l))r=!0;else if("isnot"===l)return r=!1,!1}),r);if("isnotempty"===l)return o.length>0;if("isempty"===l)return 0===o.length;break;case"cpf-type-select":(e=c.find("select.tm-epo-field.tmcp-select").val())&&!s&&(e=e.slice(0,e.lastIndexOf("_")));break;case"cpf-type-textarea":e=c.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":e=c.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":e=c.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":e=c.find("input.tm-epo-field.tmcp-range").val();break;case"cpf-type-variations":return h(c,d,l)}return v(e,d,l)}return!1}function w(t,e){t.each(function(){var t=a(this),i=parseInt(t.data("matches"),10),o=t.data("toggle"),r=t.data("what"),n=t.data("fields"),c=0,l=!1;switch(o){case"show":l=!1;break;case"hide":l=!0}a.each(n,function(t,i){var o=!0;"cpflogic"===e&&(o=g(a(i.element))),o&&b(i)&&(c=parseInt(c,10)+1)}),"all"===r?i===c&&(l=!l):c>0&&(l=!l),l?("cpflogic"!==e||t.data("did_initial_activation")||re.push(function(){var e=t.find(".tm-epo-field.tcenabled");e.each(function(e,i){(i=a(i)).data("initial_activation")||t.closest(".cpf-section").is(".tc-hidden")||!g(i)||(i.trigger("tc_element_epo_rules"),i.data("initial_activation",1))}),(t.is(".cpf_hide_element")&&e.length||t.is(".cpf-section"))&&t.data("did_initial_activation",1)}),t.removeClass("tc-hidden")):t.addClass("tc-hidden"),t.data("isactive",l)})}function x(t){var e,i=[];a(t).length||(t="body"),(e=(t=a(t)).find(".iscpfdependson")).each(function(t,e){a(e).each(function(t,e){w(a(e))})}),e.each(function(t,e){a(e).each(function(t,e){w(a(e),"cpflogic")})}),e.each(function(t,e){a(e).each(function(t,e){(e=a(e)).is(".cpf-section")&&(e=e.find(".cpf_hide_element")),e.each(function(t,e){g(a(e).find(".tm-epo-field"))})})}),re.forEach(function(t){t()}),re=[],a().selectric&&a(".tm-extra-product-options select").selectric("refresh"),setTimeout(function(){a(".tm-owl-slider").each(function(){a(this).trigger("refresh.owl.carousel")})},200),t.find(".tm-product-image:checked,select.tm-product-image").each(function(){var t=a(this);g(t)&&""!==t.val()&&i.push(t)}),i.length&&i[i.length-1].trigger("tm_trigger_product_image"),de.trigger("cpflogicrun"),de.trigger("tmlazy"),de.trigger("cpflogicdone")}function F(t){return"object"==typeof t&&"toggle"in t&&"what"in t&&"rules"in t&&t.rules.length>0}function k(t){var e,i,o,r,n,c,l,d,s,p,m,_,f=a(t),u=f.find(".cpf-section");e=!f.is(".cpf-section")&&u,f.each(function(t,u){(i=a(u).is(".cpf-section")?a(u):a(u).find(".cpf-section")).each(function(t,i){o=a(i),r=o.data("logic"),n=parseInt(o.data("haslogic"),10),c=[],1===n&&F(r)&&(a.each(r.rules,function(t,a){a&&(l=a.section,d=a.element,s=a.operator,p=a.value,e?(m=e.filter("[data-uniqid='"+l+"']"),_=d!==l?m.find(".cpf_hide_element").eq(d):m):_=d!==l?f.find(".cpf_hide_element").eq(d):m,c.push({element:_,operator:s,value:p}))}),o.data("iscpfdependson")?o.cpfdependson(o.data("cpfdependson-fields"),r.toggle,r.what,!0):(o.data("cpfdependson-fields",c),o.cpfdependson(c,r.toggle,r.what)))})})}function C(t){var e,i,o,r,n,c,l,d,s,p,m=a(t),_=m.find(".cpf-section");e=!m.is(".cpf-section")&&_,m.find(".cpf_hide_element").each(function(t,_){var f=[];i=a(_),o=i.data("logic"),1===(r=parseInt(i.data("haslogic"),10))&&F(o)&&(a.each(o.rules,function(t,a){a&&(n=a.section,c=a.element,l=a.operator,d=a.value,e?(s=e.filter("[data-uniqid='"+n+"']"),p=c!==n?s.find(".cpf_hide_element").eq(c):s):p=c!==n?m.find(".cpf_hide_element").eq(c):s,f.push({element:p,operator:l,value:d}))}),i.data("iscpfdependson")?i.cpfdependson(i.data("cpfdependson-fields"),o.toggle,o.what,!0):(i.data("cpfdependson-fields",f),i.cpfdependson(f,o.toggle,o.what)))})}function I(t,e){var a,i,o,r;return e&&(a=e.attr("data-taxable"),i=e.attr("data-tax-rate"),o=e.attr("data-tax-display-mode"),r=e.attr("data-prices-include-tax"),a&&"incl"===o&&"1"!==r&&(t=parseFloat(t)/(1+i/100))),t}function P(t,e){var a,i,o,r;return e&&(a=e.attr("data-taxable"),i=e.attr("data-tax-rate"),o=e.attr("data-tax-display-mode"),r=e.attr("data-prices-include-tax"),a&&"incl"!==o&&"1"===r&&(t=parseFloat(t)*(1+i/100))),t}function A(t,e){var a,i,o;return e&&(a=e.attr("data-taxable"),i=e.attr("data-tax-display-mode"),o=e.attr("data-prices-include-tax"),a&&("1"===o?"incl"!==i&&(t=P(t,e)):"1"!==o&&"incl"===i&&(t=I(t,e)))),t}function S(t,e,a,i,o){var n,l="",d="";return a||(t=r(t,e,o,void 0,!0)),n=Math.abs(t),e&&i&&(l=e.attr("data-tax-string")),void 0===l&&(l=""),t<0&&(d=Yt.minus_sign+" "),c(n,d,l)}function q(t,e,a,i,o){E(t,e,a,i,o,!0)}function E(t,e,i,o,r,n){var c,l,d,s,p=a(t);0!==p.length&&(s=(c=p.closest(".tmcp-field-wrap")).find(".tm-epo-field"),!n&&"1"===s.attr("data-no-price-change")&&s.data("price-changed")||(e=a.epoAPI.applyFilter("tc_adjust_update_price_price",e),i=a.epoAPI.applyFilter("tc_adjust_update_price_formated_price",i,e),o=a.epoAPI.applyFilter("tc_adjust_update_price_original_price",o),r=a.epoAPI.applyFilter("tc_adjust_update_price_original_formated_price",r,o),Number.isFinite(parseFloat(o))||(o=0),Number.isFinite(parseFloat(e))||(e=0),l=c.find(".before-amount,.after-amount"),d={price:i,original_price:r},"yes"===Yt.tm_epo_auto_hide_price_if_zero&&!1===a.tmempty(e)||"yes"!==Yt.tm_epo_auto_hide_price_if_zero?!0===a.tmempty(e)&&"1"===s.attr("data-no-price")||!n&&s.length>0&&("1"===s.attr("data-no-price")||"variable"===s.attr("data-type")&&!s.data("price")||s.is(".tmcp-select")&&!s.children("option:selected").data("price"))?(p.empty(),l.addClass("tm-hidden")):(o&&void 0!==o&&parseFloat(o)!==parseFloat(e)?p.html(a.epoAPI.template.html(Vt.templateEngine.sale_price,{price:d})):p.html(a.epoAPI.template.html(Vt.templateEngine.price,{price:d})),l.removeClass("tm-hidden")):(p.empty(),l.addClass("tm-hidden"))))}function T(t,e){var i={};return e.thisForm&&(t=e.thisForm),t.find(".variations select, .tc-epo-variable-product-selector").each(function(){var t,e;t=void 0!==a(this).data("attribute_name")?a(this).data("attribute_name"):a(this).attr("name"),e=a(this).val(),i[t]=e}),i}function j(t,e,i){var o=[],r=T(t,i),n=!0;t.find(".cpf-type-variations").each(function(i,n){var c,l,d=a(n).find(".tm-epo-variation-element"),s=!1;o[i]=!0,d.is("select")?(c=a.epoAPI.dom.id(d.attr("data-tm-for-variation")),(l=d.val())&&(o[i]=!1),d.children("option").each(function(e,i){s=!1,t.find("[data-attribute_name='attribute_"+c+"']").children("option").each(function(){if(a(this).attr("value")===a(i).attr("value"))return s=!0,!1}),s?a(i).prop("disabled",!1).show():a(i).prop("disabled",!0).hide()})):d.each(function(t,n){var d,s,p=a(n),m=p.closest("li"),_=m.find(".tm-epo-variation-element"),f=a.extend(!0,{},r);c=p.attr("data-tm-for-variation"),l=p.val(),p.is(":checked")&&(o[i]=!1),f["attribute_"+c]=l,s=(d=a.fn.tm_find_matching_variations(e,f).shift())&&"is_in_stock"in d&&d.is_in_stock,d&&s?(p.prop("disabled",!1).removeClass("tm-disabled"),m.removeClass("tm-attribute-disabled").fadeTo("fast",1,function(){a(this).css("opacity","")}),_.prop("disabled",!1),_.removeAttr("data-tm-disabled")):(p.attr("disabled","disabled").addClass("tm-disabled"),_.attr("disabled","disabled"),_.attr("data-tm-disabled","disabled"),m.addClass("tm-attribute-disabled").fadeTo("fast",.5),s||m.find("label").off())})}),o&&(o.shift(),a.each(o,function(t,e){if(!1===e)return n=!1,!1}),n&&t.find(".cpf-type-variations").first().each(function(t,e){var i,o,r;(i=a(e).find(".tm-epo-variation-element")).is("select")||i.each(function(t,e){e=a(e),o=e.closest("li"),r=o.find(".tm-epo-variation-element"),e.prop("disabled",!1).removeClass("tm-disabled"),o.removeClass("tm-attribute-disabled").stop().css("opacity",""),r.prop("disabled",!1),r.removeAttr("data-tm-disabled")})}))}function O(e,i){var o,r=e.data("product_variations"),n=parseInt(e.data("product_id"),10),c=e.data("globalVariationObject")||!1;n||(n=e.data("tc_product_id")),!n&&e.is(Vt.compositeSelector)&&(n=(o=e.find(".component_options").data("options_data"))[0].option_id,r||(r=e.find(".details.component_data").data("product_variations"))),i.is_associated||(!r&&t.product_variations&&t.product_variations.product_id&&(r=t.product_variations.product_id),!r&&t.product_variations&&(r=t.product_variations),!r&&t["product_variations_"+n]&&(r=t["product_variations_"+n])),r?j(e,r,i):c?j(e,c.variations,i):(o={action:"woocommerce_tm_get_variations_array",post_id:n},a.post(Yt.ajax_url,o,function(t){c=t,e.data("globalVariationObject",t),j(e,c.variations,i)},"json"))}function z(t,e){var i,o;return void 0!==e&&(t=a(t),i=t.find(".tm-epo-variation-element").first(),o=i.closest(".tm-epo-variation-section"),i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+e+"</div>"),!0):(t.find(".tm-stock").remove(),t.find(".variations").after('<div class="tm-stock">'+e+"</div>"),!0))}function D(t,e){var a;"no"!==Yt.tm_epo_global_move_out_of_stock&&((a=t.find(".woocommerce-variation-availability").last()).length||(a=t.find(".stock").last()),a.length?(e.find(".tm-stock").remove(),z(e,a.prop("outerHTML"))&&a.remove()):e.find(".tm-stock").remove())}function N(t,e,a){var i,o="";return a&&(o=o+"[value='"+a+"']"),e||(e=t),0===(i=e.find(Vt.addToCartSelector+o)).length&&(i=e.find(Vt.tcAddToCartSelector+o)),i.last()}function B(t,e,a,i){return a||(a="form"),N(t,e,i).closest(a)}function H(t,e,a,i){return B(t,e,a,i)}function L(t){var e=a.epoAPI.applyFilter("tcGetNativePricesBlockSelector",".single_variation .price",t);return a(t).find(e).not(".tc-price")}function M(){se.on("click.cpfurl change.cpfurl tmredirect",".use_url_container .tmcp-radio, .use_url_container .tmcp-radio+label",function(e){var i=a(this).attr("data-url");i&&t.location!==i&&(e.preventDefault(),t.location=i)}),se.on("change.cpfurl tmredirect",".use_url_container .tmcp-select",function(e){var i=a(this).children("option:selected").attr("data-url");i&&t.location!==i&&(e.preventDefault(),t.location=i)})}function U(t,e,i){a.tcFloatingTotalsBox(t,e,i)}function J(t,e,a){var i,o,r;"object"==typeof e?(o=e.has_epo,r=e.this_epo_container,o=o&&(r.find(".tmcp-fee-field").length||r.find(".tmcp-field").not(".cpf-type-variations .tmcp-field").length)):o=e,o&&"yes"===Yt.tm_epo_hide_add_cart_button&&(i=t.find(Vt.addToCartButtonSelector).first(),a?i.removeClass("tc-hide-add-to-cart-button"):i.addClass("tc-hide-add-to-cart-button"))}function R(e,i){var o,r,n,c,l=a.tcepo.errorObject[i]||e;l&&("yes"!==Yt.tm_epo_disable_error_scroll&&(r=(o=l.closest(".cpf-section")).find(".tm-section-link"),n=l.closest(".cpf_hide_element"),o.find(".tm-toggle").length&&o.find(".tm-toggle").trigger("openwrap.tmtoggle"),t.tc_validation_offset||(t.tc_validation_offset=-100),o.is(".section_popup")?(pe.tcScrollTo(r,300,t.tc_validation_offset),r.trigger("click.tmsectionpoplink")):o.is(".tm-owl-slider-section")?(c=l.closest(".owl-item").index(),o.find(".tcowl-carousel").trigger("to.owl.carousel",[c,100]),setTimeout(function(){o.find(".tcowl-carousel").trigger("refresh.owl.carousel"),n.length>0&&pe.tcScrollTo(n,300,t.tc_validation_offset)},200)):n.length>0&&pe.tcScrollTo(n,300,t.tc_validation_offset)),e||(a.tcepo.errorObject[i]=!1))}function Q(t,e){var i,o,r,n=parseInt(t.attr("data-limit"),10),c=!1;return!(n>0&&(c=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){o=a(this),(r=o.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((i=parseInt(r.val(),10))<=0&&(i=1),c=parseInt(c,10)+i):c=parseInt(c,10)+1}),c>n))||(e&&t.prop("checked","").trigger("change"),!1)}function Z(t,e){var i,o,r,n=parseInt(t.attr("data-exactlimit"),10),c=!1;return!(n>0&&(c=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){o=a(this),(r=o.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((i=parseInt(r.val(),10))<=0&&(i=1),c=parseInt(c,10)+i):c=parseInt(c,10)+1}),c>n))||(e&&t.prop("checked","").trigger("change"),!1)}function W(t,e,i){var o,r,n,c,l,d,s,p,m,_,f=!0,u=!1;return t.each(function(){_=a(this),(o=_.find("[type='checkbox'][data-limit]")).length&&g(o)&&(r=parseInt(o.attr("data-limit"),10),n=0,_.find("input.tm-epo-field[type='checkbox']:checked").each(function(){c=a(this),(d=c.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((l=parseInt(d.val(),10))<=0&&(l=1),n=parseInt(n,10)+l):n=parseInt(n,10)+1}),s=_.closest(".cpf_hide_element"),p=s.find("div.tm-error-min"),r<n?(f=!1,u=_,m=1===r?Yt.tm_epo_global_validator_messages.epolimitsingle.replace("{0}",r):Yt.tm_epo_global_validator_messages.epolimit.replace("{0}",r),p.length&&p.remove(),"before"===Yt.tm_epo_global_error_label_placement?_.before('<div class="tm-error-min tm-error">'+m+"</div>"):_.after('<div class="tm-error-min tm-error">'+m+"</div>"),e.find(Vt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):p.remove())}),u&&(a.tcepo.errorObject[i]=u),f}function $(t,e,i){a.tcepo.formSubmitEvents[i][a.tcepo.formSubmitEvents[i].length]={trigger:function(){return W(t,e,i)},on_true:function(){return!0},on_false:function(){return R(a(t).find(".tm-epo-field").first(),i),!0}}}function X(t,e,i){var o,r,n,c,l,d,s,p,m,_,f=!0,u=!1;return t.each(function(){_=a(this),(o=_.find("[type='checkbox'][data-exactlimit]")).length&&g(o)&&(r=parseInt(o.attr("data-exactlimit"),10),n=0,_.find("input.tm-epo-field[type='checkbox']:checked").each(function(){c=a(this),(d=c.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((l=parseInt(d.val(),10))<=0&&(l=1),n=parseInt(n,10)+l):n=parseInt(n,10)+1}),s=_.closest(".cpf_hide_element"),p=s.find("div.tm-error-min"),r!==n?(f=!1,u=_,m=1===r?Yt.tm_epo_global_validator_messages.epoexactsingle.replace("{0}",r):Yt.tm_epo_global_validator_messages.epoexact.replace("{0}",r),p.length&&p.remove(),"before"===Yt.tm_epo_global_error_label_placement?_.before('<div class="tm-error-min tm-error">'+m+"</div>"):_.after('<div class="tm-error-min tm-error">'+m+"</div>"),e.find(Vt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):p.remove())}),u&&(a.tcepo.errorObject[i]=u),f}function G(t,e,i){a.tcepo.formSubmitEvents[i][a.tcepo.formSubmitEvents[i].length]={trigger:function(){return X(t,e,i)},on_true:function(){return!0},on_false:function(){return R(a(t).find(".tm-epo-field").first(),i),!0}}}function V(t,e){var i,o,r,n,c,l,d,s,p,m=!0,_=!1;return t.each(function(){var t;(t=(p=a(this)).find("[type='checkbox'][data-minimumlimit]")).length&&g(t)&&(i=parseInt(t.attr("data-minimumlimit"),10),o=0,p.find("input.tm-epo-field[type='checkbox']:checked").each(function(){r=a(this),(c=r.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((n=parseInt(c.val(),10))<=0&&(n=1),o=parseInt(o,10)+n):o=parseInt(o,10)+1}),l=p.closest(".cpf_hide_element"),d=l.find("div.tm-error-min"),i>o?(m=!1,_=p,s=1===i?Yt.tm_epo_global_validator_messages.epominsingle.replace("{0}",i):Yt.tm_epo_global_validator_messages.epomin.replace("{0}",i),d.length&&d.remove(),"before"===Yt.tm_epo_global_error_label_placement?p.before('<div class="tm-error-min tm-error">'+s+"</div>"):p.after('<div class="tm-error-min tm-error">'+s+"</div>")):d.remove())}),_&&(a.tcepo.errorObject[e]=_),m}function Y(t,e){a.tcepo.formSubmitEvents[e][a.tcepo.formSubmitEvents[e].length]={trigger:function(){return V(t,e)},on_true:function(){return!0},on_false:function(){return R(!1,e),!0}}}function K(t){return null===t?0:("object"==typeof t&&(t=t[0]),Number.isFinite(parseFloat(t))||(t=0),t)}function tt(t,e,i,o){return t=K(t),i&&(t=a.epoAPI.applyFilter("tc_apply_dpd",t,e,i,o)),t}function et(t,e){var i=0;return t.length>0&&(i=t.data("regular-price")),i=a.epoAPI.applyFilter("tc_calculate_product_regular_price",i,t),(!e||!1!==i)&&(i=parseFloat(i),Number.isFinite(i)||(i=0),i)}function at(t,e){var i=0;return t.length>0&&(i=t.data("price")),i=a.epoAPI.applyFilter("tc_calculate_product_price",i,t),(!e||!1!==i)&&(i=parseFloat(i),Number.isFinite(i)||(i=0),i)}function it(t,e,i,o,r){var n,c,l,d,s,p,m,_,f,u=t.toString(),g=0,h=0,v=e.closest(".cpf_hide_element"),y=i.this_epo_totals_container.data("totalsHolder_tc_totals_ob"),b=v.find(".tmcp-field, .tmcp-fee-field").filter(":checked").index(e),w=v.find(".tmcp-field, .tmcp-fee-field").index(e),x=i.is_associated?i.this_epo_container:i.this_epo_container.not(Vt.epoSelector+" "+Vt.associatedEpoSelector);-1!==b||e.is(".tmcp-checkbox, .tmcp-radio")||(b=0),o||e.data("addedtcEpoBeforeOptionPriceCalculation")||(de.on("tcEpoBeforeOptionPriceCalculation.math",function(){nt(i,e,void 0,void 0,void 0,!0)}),de.on("tcEpoAfterOptionPriceCalculation.math",function(){e.data("fetchOptionPrices",!1),e.data("fetchOptionPrices-forced",!1),e.data("fetchOptionPrices-fee",!1),e.data("fetchOptionPrices-fee-forced",!1)}),e.data("addedtcEpoBeforeOptionPriceCalculation",1)),e.is(".tmcp-field")?e.data("fetchOptionPrices")?(_=e.data("fetchOptionPrices"),f=e.data("fetchOptionPrices-forced")):(_=Ht(i,v,".tmcp-field",0,0,[],!0),f=Ht(i,v,".tmcp-field",0,0,[],!0,!0),e.data("fetchOptionPrices",_),e.data("fetchOptionPrices-forced",f)):e.is(".tmcp-fee-field")&&(e.data("fetchOptionPrices-fee")?(_=e.data("fetchOptionPrices-fee"),f=e.data("fetchOptionPrices-fee-forced")):(_=Ht(i,v,".tmcp-fee-field",0,0,[],!0),f=Ht(i,v,".tmcp-fee-field",0,0,[],!0,!0),e.data("fetchOptionPrices-fee",_),e.data("fetchOptionPrices-fee-forced",f))),void 0!==y?(u=u.replace(/{quantity}/g,a.epoAPI.math.unformat(y.qty,Vt.localInputDecimalSeparator)),u=r&&void 0!==y.original_product_price?u.replace(/{product_price}/g,a.epoAPI.math.unformat(y.original_product_price,Vt.localInputDecimalSeparator)):u.replace(/{product_price}/g,a.epoAPI.math.unformat(y.product_price,Vt.localInputDecimalSeparator))):(u=u.replace(/{quantity}/g,0),u=u.replace(/{product_price}/g,0)),u=void 0!==f.floatingBoxData&&void 0!==f.floatingBoxData[w]?u.replace(/{this.value}/g,a.epoAPI.math.unformat(f.floatingBoxData[w].valueText,Vt.localInputDecimalSeparator)).replace(/{this.value.length}/g,f.floatingBoxData[w].valueText.length):u.replace(/{this.value}/g,"").replace(/{this.value.length}/g,0),(u=u.replace(/{this.count}/g,_.floatingBoxData.length).replace(/{this.count.quantity}/g,_.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0)).replace(/{this.quantity}/g,e.data("tm-quantity"))).match(/\{(\s)*?field\.([^}]*)}/)&&u.match(/\{(\s)*?field\.([^}]*)}/g).forEach(function(t){if(void 0!==(n=t.match(/\{(\s)*?field\.([^}]*)}/))[2]&&"string"==typeof n[2]&&-1!==(s=n[2].indexOf(".",n[2].indexOf(".")+1))&&(m=n[2].substr(0,s),p=n[2].substr(s+1),-1!==a.inArray(p,["price","value","value.length","quantity","count","count.quantity"]))){if((c=x.find("[data-uniqid='"+a.epoAPI.util.escapeSelector(m)+"']")).length){if(l=c.find(".tmcp-field, .tmcp-fee-field"),o||e.data("addedfieldtcEpoBeforeOptionPriceCalculation")||(de.on("tcEpoBeforeOptionPriceCalculation.math",function(){nt(i,e,void 0,void 0,void 0,!0),e.trigger("tm-math-select-change-html-all")}),e.data("addedfieldtcEpoBeforeOptionPriceCalculation",1)),l=l.first(),g=0,c.is(".tc-container-enabled")){switch(l.is(".tmcp-field")?g=Ht(i,c,".tmcp-field",0,0,[],!0):l.is(".tmcp-fee-field")&&(g=Ht(i,c,".tmcp-fee-field",0,0,[],!0)),p){case"price":g=g.total;break;case"value":g.floatingBoxData&&(g=g.floatingBoxData.map(function(t){return a.epoAPI.math.unformat(t.valueText,Vt.localInputDecimalSeparator)}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0));break;case"value.length":g.floatingBoxData&&(g=g.floatingBoxData.map(function(t){return t.valueText}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+e.length},0));break;case"quantity":g.floatingBoxData&&(g=g.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0));break;case"count":g.floatingBoxData&&(g=g.floatingBoxData.length);break;case"count.quantity":g.floatingBoxData&&(g=g.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0))}g=a.epoAPI.math.toFloat(g),Number.isFinite(g)||(g=0)}}else g=0;d=new RegExp(n[0]),u=Number.isFinite(g)?u.replace(d,g):u.replace(d,"'"+g+"'")}});try{h=me.eval(u)}catch(t){h=0}return h}function ot(t,e){var i,o,r,n,c,l,d,s,p=a(e),m=p;return i=t.main_cart,d="input[name^='variation_id']",i.find("input.variation_id").length>0&&(d="input.variation_id"),(o=i.find(d).val())||(o=0),p.is("select")&&(m=p.find("option:selected")),r=a.epoAPI.util.parseJSON(m.attr("data-rules")),n=a.epoAPI.util.parseJSON(m.attr("data-rulestype")),l="","object"==typeof r?"object"==typeof n?l=o in n?n[o]:"object"==typeof(c=a.epoAPI.util.parseJSON(p.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&o in c?c[o]:n[0]:"object"==typeof(n=a.epoAPI.util.parseJSON(p.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(l=o in n?n[o]:n[0]):(s=p.closest(".tmcp-ul-wrap"),"object"==typeof(r=a.epoAPI.util.parseJSON(s.attr("data-rules")))&&("object"==typeof n?l=o in n?n[o]:"object"==typeof(c=a.epoAPI.util.parseJSON(s.attr("data-rulestype")))&&o in c?c[o]:n[0]:"object"==typeof(n=a.epoAPI.util.parseJSON(s.attr("data-rulestype")))&&(l=o in n?n[o]:n[0]))),"object"==typeof l&&(l=l[0]),p.is(".tmcp-fee-field")&&-1!==a.inArray(l,["fee","stepfee","currentstepfee"])&&(l=""),l}function rt(a){var i,o,r=0;for(i=t.MSInputMethodContext&&e.documentMode?/\S+/g:new RegExp(/\S+/,"gu");null!==(o=i.exec(a));)o.index===i.lastIndex&&i.lastIndex++,r+=o.length;return r}function nt(t,e,i,o,n,c){var d,s,p,m,_,f,u,g,h,v,y,b,w,x,F,k,C,I,P,A,S,q,T,j,O,z,D=a(e),N=D,B=D.is(".tmcp-range"),H=t.main_product,L=t.epoEventId,M=t.this_epo_totals_container,U=!0;if(!D.data("associated_price_set")&&(i?(d=i.cart,s=i.current_variation,p=i.bundleid,m=i.epoTotalsContainer,f=i.product_price,u=i.product_original_price,_=i.apply_dpd,U=i.per_product_pricing):(void 0!==(d=t.main_cart).data("per_product_pricing")&&(U=d.data("per_product_pricing")),j="input[name^='variation_id']",d.find("input.variation_id").length>0&&(j="input.variation_id"),s=d.find(j).val(),p=a.epoAPI.applyFilter("tc_get_bundleid",d.attr("data-product_id"),d),s||(s=0),f=at(m=a.epoAPI.applyFilter("tc_get_totals_container",M,D,H,p)),u=et(m),_=m.data("fields-price-rules")),f=a.epoAPI.applyFilter("tc_alter_product_price",f,D,d,m,p),u=a.epoAPI.applyFilter("tc_alter_product_original_price",u,D,d,m),!1!==f&&U)){switch(D.is("select")&&(N=D.find("option:selected")),o&&(N=o),g=a.epoAPI.util.parseJSON(N.attr("data-rules")),h=a.epoAPI.util.parseJSON(N.attr("data-rulestype")),void 0===(v=a.epoAPI.util.parseJSON(N.attr("data-original-rules")))&&(v=g),x="","object"==typeof g?(s in g?(F=g[s],k=v[s]):(y=a.epoAPI.util.parseJSON(D.closest(".tmcp-ul-wrap").attr("data-rules")),w=D.closest(".tmcp-ul-wrap").data("original-rules"),F="object"==typeof y&&s in y?y[s]:g[0],k="object"==typeof w&&s in w?w[s]:v[0]),"object"==typeof h?x=s in h?h[s]:"object"==typeof(b=a.epoAPI.util.parseJSON(D.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&s in b?b[s]:h[0]:"object"==typeof(h=a.epoAPI.util.parseJSON(D.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(x=s in h?h[s]:h[0])):(O=D.closest(".tmcp-ul-wrap"),g=a.epoAPI.util.parseJSON(O.attr("data-rules")),v=a.epoAPI.util.parseJSON(O.attr("data-original-rules")),"object"==typeof g&&(F=s in g?g[s]:g[0],k="object"==typeof v?s in v?v[s]:v[0]:F,"object"==typeof h?x=s in h?h[s]:"object"==typeof(b=a.epoAPI.util.parseJSON(O.attr("data-rulestype")))&&s in b?b[s]:h[0]:"object"==typeof(h=a.epoAPI.util.parseJSON(O.attr("data-rulestype")))&&(x=s in h?h[s]:h[0]))),"object"==typeof x&&(x=x[0]),D.is(".tmcp-fee-field")&&(-1!==a.inArray(x,["fee","stepfee","currentstepfee"])&&(x=""),_=0),void 0===n&&(D.is("select")?D.find("option").removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"):N.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate")),"math"!==x&&(F=K(F),k=K(k)),x){case"":F=tt(F,m,_),k=tt(k,m,_);break;case"math":F=tt(F=it(F,D,t,c),m,_),k=tt(k=it(k,D,t,!0,!0),m,_);break;case"percent_cart_total":z=parseFloat(Yt.cart_total),Number.isFinite(z)||(z=0),F=tt(F,m,_)/100*z,k=tt(k,m,_)/100*z;break;case"percent":F=tt(F,m,_)/100*f,k=tt(k,m,_)/100*u;break;case"percentcurrenttotal":a.tcepo.lateFieldsPrices[L].push({setter:N,price:F,original_price:k,bundleid:p,pricetype:x}),N.data("tm-price-for-late",F).data("tm-original-price-for-late",k).data("islate",1).addClass("tm-epo-late-field"),F=0,k=0;break;case"fixedcurrenttotal":F=tt(F,m,_),a.tcepo.lateFieldsPrices[L].push({setter:N,price:F,original_price:k,bundleid:p,pricetype:x}),N.data("tm-price-for-late",F).data("tm-original-price-for-late",k).data("islate",1).addClass("tm-epo-late-field"),F=0,k=0;break;case"word":F=tt(F,m,_)*rt(N.val()),k=tt(k,m,_)*rt(N.val());break;case"wordpercent":F=tt(F,m,_)/100*f*rt(N.val()),k=tt(k,m,_)/100*u*rt(N.val());break;case"wordnon":q=parseInt(N.attr("data-freechars"),10),Number.isFinite(q)||(q=0),(S=rt(N.val())-q)<0&&(S=0),F=tt(F,m,_)*S,k=tt(k,m,_)*S;break;case"wordpercentnon":q=parseInt(N.attr("data-freechars"),10),Number.isFinite(q)||(q=0),(S=rt(N.val())-q)<0&&(S=0),F=tt(F,m,_)/100*f*S,k=tt(k,m,_)/100*u*S;break;case"char":F=tt(F,m,_)*N.val().length,k=tt(k,m,_)*N.val().length;break;case"charpercent":F=tt(F,m,_)/100*f*N.val().length,k=tt(k,m,_)/100*u*N.val().length;break;case"charnospaces":F=tt(F,m,_)*N.val().replace(/\s/g,"").length,k=tt(k,m,_)*N.val().replace(/\s/g,"").length;break;case"charnofirst":(S=N.val().length-1)<0&&(S=0),F=tt(F,m,_)*S,k=tt(k,m,_)*S;break;case"charnon":q=parseInt(N.attr("data-freechars"),10),Number.isFinite(q)||(q=0),(S=N.val().length-q)<0&&(S=0),F=tt(F,m,_)*S,k=tt(k,m,_)*S;break;case"charpercentnon":q=parseInt(N.attr("data-freechars"),10),Number.isFinite(q)||(q=0),(S=N.val().length-q)<0&&(S=0),F=tt(F,m,_)/100*f*S,k=tt(k,m,_)/100*u*S;break;case"charnonnospaces":q=parseInt(N.attr("data-freechars"),10),Number.isFinite(q)||(q=0),(S=N.val().replace(/\s/g,"").length-q)<0&&(S=0),F=tt(F,m,_)*S,k=tt(k,m,_)*S;break;case"charpercentnonnospaces":q=parseInt(N.attr("data-freechars"),10),Number.isFinite(q)||(q=0),(S=N.val().replace(/\s/g,"").length-q)<0&&(S=0),F=tt(F,m,_)/100*f*S,k=tt(k,m,_)/100*u*S;break;case"charpercentnofirst":(S=N.val().length-1)<0&&(S=0),F=tt(F,m,_)/100*f*S,k=tt(k,m,_)/100*u*S;break;case"step":B?(F=tt(F,m,_)*N.val(),k=tt(k,m,_)*a.epoAPI.math.toFloat(N.val())):(F=tt(F,m,_)*a.epoAPI.math.toFloat(N.val()),k=tt(k,m,_)*a.epoAPI.math.toFloat(N.val()));break;case"currentstep":B?(F=tt(N.val(),m,_),k=tt(N.val(),m,_)):(F=tt(a.epoAPI.math.toFloat(N.val()),m,_),k=tt(a.epoAPI.math.toFloat(N.val()),m,_));break;case"intervalstep":B&&(T=parseFloat(a('.tm-range-picker[data-field-id="'+N.attr("id")+'"]').attr("data-min")),F=tt(F,m,_)*(N.val()-T),k=tt(k,m,_)*(N.val()-T));break;case"row":F=tt(F,m,_)*((N.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),k=tt(k,m,_)*((N.val().match(/(\r\n|\n|\r)/gm)||[]).length+1)}C||(C=F),I||(I=k),D.data("tm-quantity")&&(F*=parseFloat(D.data("tm-quantity")),k*=parseFloat(D.data("tm-quantity")),C*=parseFloat(D.data("tm-quantity")),I*=parseFloat(D.data("tm-quantity"))),P=l(F,m,!1,!1,N,x),A=l(k,m,!1,!1,N,x),D.data("price_set",1),N.data("price_set",1),N.data("raw_price",C),N.data("raw_original_price",I),N.data("price",r(F,m,N,x)),N.data("original_price",r(k,m,N,x)),o||(E(N.closest(".tmcp-field-wrap").find(".tc-price"),F,P,k,A),D.data("price-changed",1))}}function ct(t,e){var i,o,n,c,d,s,p,m,_,f,u,h,v,y,b,w,x,F,k=!0,C=t.main_product,I=t.epoEventId,P=t.this_epo_container,A=t.this_epo_totals_container;(i=e||C.find(".cart")).length<=0||(a.tcepo.lateFieldsPrices[I]=[],i.toArray().forEach(function(e){if(e=a(e),o="input[name^='variation_id']",e.find("input.variation_id").length>0&&(o="input.variation_id"),void 0!==e.data("per_product_pricing")&&(k=e.data("per_product_pricing")),n=e.find(o).val(),c=a.epoAPI.applyFilter("tc_get_bundleid",e.attr("data-product_id"),e),n||(n=0),d=a.epoAPI.applyFilter("tc_get_epo_container",P,e,C,c),s=a.epoAPI.applyFilter("tc_get_totals_container",A,e,C,c),p=s.data("fields-price-rules"),d.data("tm_rules_init_done")||(s.data("force-quantity")&&e.find(Vt.qtySelector).val(s.data("force-quantity")),d.toArray().forEach(function(t){a(t).closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",a(t).val())}),d.find(".tmcp-attributes, .tmcp-elements").toArray().forEach(function(t){t=a(t),m=a.epoAPI.util.parseJSON(t.attr("data-rules")),_=a.epoAPI.util.parseJSON(t.attr("data-original-rules")),"object"!=typeof m&&(m={0:"0"}),"object"!=typeof _&&(_={0:"0"}),"object"==typeof m&&(f=tt(m[a.epoAPI.math.toFloat(n)],s,p),u=l(f,s),h=tt(_[a.epoAPI.math.toFloat(n)],s,p),v=l(h,s),t.find(".tmcp-field, .tmcp-fee-field ").toArray().forEach(function(t){t=a(t),k?("1"===t.attr("data-no-price")&&(f=0,h=0),t.data("raw_price",f),t.data("raw_original_price",h),t.data("price",r(f,s,t)),t.data("original_price",r(h,s,t)),E(t.closest(".tmcp-field-wrap").find(".tc-price"),f,u,h,v)):(t.data("price",0),t.data("original_price",0),t.closest(".tmcp-field-wrap").find(".amount").empty())}))}),d.data("tm_rules_init_done",1)),!k)return!0;y=at(s),b=et(s),F={cart:e,current_variation:n,bundleid:c,epoTotalsContainer:s,product_price:y,product_original_price:b,apply_dpd:p,per_product_pricing:k},w=d.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field"),t.is_associated||(w=w.not(Vt.associatedEpoSelector+" .tmcp-field,"+Vt.associatedEpoSelector+" .tmcp-sub-fee-field,"+Vt.associatedEpoSelector+" .tmcp-fee-field")),x=w.filter(".tcenabled"),(!a.tcepo.initialActivation[I]||0===x.length&&w.length>0)&&(w.each(function(){g(a(this))}),a.tcepo.initialActivation[I]=!0),w.filter(".tcenabled").each(function(e,a){nt(t,a,F)}),w.each(function(e,i){a(i).on("tc_element_epo_rules",function(){nt(t,i,F)})})}))}function lt(t,e,i,o,n,c,d){var s,p,m,_,f,u,h,v,y,b,w,x,F,k,C,P,A,S=0,q=0,T=t.epoEventId;return A=void 0!==d?d:t.this_epo_totals_container.data("fields-price-rules"),P=e,a.tcepo.lateFieldsPrices[T].forEach(function(e){s=e.price,p=e.original_price,m=e.pricetype,_=e.setter,h=e.bundleid,v=_,C="percentcurrenttotal"===m?"_hidden":"_hiddenfixed",_.is("option")&&(v=_.closest("select")),P=parseFloat(a.epoAPI.applyFilter("tc_alter_product_price",P,v,c,t.this_epo_totals_container,n)),f=a.epoAPI.dom.id(v.attr("name")),y=a(".tc-totals-form.tm-totals-form-"+c.attr("data-cart-id")).attr("data-product-id"),b=a(".tc-totals-form.tm-totals-form-"+c.attr("data-cart-id")).attr("data-epo-id"),u=a(".tc-extra-product-options.tm-product-id-"+y+"[data-epo-id='"+b+"']").find("#"+f+C),h===n?("percentcurrenttotal"===m?(s=parseFloat(tt(s,t.this_epo_totals_container,A))/100*parseFloat(P+i),p=parseFloat(tt(p,t.this_epo_totals_container,A))/100*parseFloat(P+o)):"fixedcurrenttotal"===m&&(s=parseFloat(tt(s,t.this_epo_totals_container,A))+parseFloat(i),p=parseFloat(tt(p,t.this_epo_totals_container,A))+parseFloat(o)),v.data("tm-quantity")&&(s*=parseFloat(v.data("tm-quantity")),p*=parseFloat(v.data("tm-quantity"))),1===_.data("isset")&&g(_)&&(S+=s,q+=p),F=r(s,c,_),k=r(p,c,_),w=l(s,c,!1,!1,_),x=l(p,c,!1,!1,_),_.data("price",F),_.data("pricew",F),_.data("original_price",k),_.data("original_pricew",k),E(_.closest(".tmcp-field-wrap").find(".tc-price"),F,w,k,x),0===u.length&&v.before('<input type="hidden" id="'+f+C+'" name="'+f+C+'" value="'+I(s,c)+'" />'),_.is(".tm-epo-field.tmcp-radio")?_.is(":checked")&&u.val(I(s,c)):u.val(I(s,c))):void 0!==_.data("pricew")&&(w=l(_.data("pricew"),c,!0,!1,_),x="",void 0!==_.data("original_pricew")&&(x=l(_.data("original_pricew"),c,!0,!1,_)),E(_.closest(".tmcp-field-wrap").find(".tc-price"),_.data("pricew"),w,_.data("original_pricew"),x))}),[S,q]}function dt(t){var e,i,o,r,n=[".tm-variation-ul-color",".tm-variation-ul-image",".tm-variation-ul-radiostart",".tm-variation-ul-radioend","ul.use-images-container","ul.use_colors_container"],c=t.main_product;a(".tc-extra-product-options").addClass("tc-show-hidden"),n.forEach(function(t){c.find(t).toArray().forEach(function(t){a(t).toArray().forEach(function(t){t=a(t),(e=t.find(".tmhexcolorimage-li-nowh")).length&&(i=t.closest(".cpf-section"),o=e.first(),r=100,i.length&&i.find(".tm-collapse-wrap.closed").length?(i.find(".tm-collapse-wrap").removeClass("closed").show(),r=e.is(".tc-mode-endcolor, .tc-mode-startcolor")?o.css("line-height"):o.width()-1+"px",i.find(".tm-collapse-wrap").addClass("closed").hide()):r=e.is(".tc-mode-endcolor, .tc-mode-startcolor")?o.css("line-height"):o.width()-1+"px",e.find(".tmhexcolorimage").css({"min-width":r,"min-height":r}))})})}),a(".tc-extra-product-options").removeClass("tc-show-hidden")}function st(){var t;"yes"!==Yt.tm_epo_no_lazy_load&&((t=ne?a(ne).find("img.tmlazy"):a(".tc-extra-product-options img.tmlazy")).lazyLoadXT(),t.on("lazyshow",function(){de.trigger("lazyLoadXToncomplete")}))}function pt(t){var e,i;t&&t.find(".tm-owl-slider-section").each(function(){e=a(this),i=e.css("display"),e.find(".tm-slide").first().before('<div class="tm-owl-slider"></div>'),e.find(".tm-slide").appendTo(e.find(".tm-owl-slider")),e=e.find(".tm-owl-slider"),i=e.css("display"),e.show().addClass("tcowl-carousel").tmowlCarousel({rtl:"1"===Yt.isRTL,dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[Yt.i18n_prev_text,Yt.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1}),e.css("display",i)})}function mt(t){t&&a(t).length&&(a(t).spectrum({type:"color",theme:"epo",showButtons:!0,allowEmpty:!0,showInitial:!0,showInput:!0,clickoutFiresChange:!1,chooseText:Yt.closeText,cancelText:Yt.i18n_cancel}),a(t).spectrum("enable"))}function _t(t){t&&a(t).length&&a(function(){a(t).tclightbox()})}function ft(t){var e=t.closest(".tmcp-field-wrap").find("label img"),i=a(e).first().attr("data-original");return t.is("select.tm-product-image")&&(t=t.children("option:selected")),i||(i=a(e).first().attr("src")),i||(i=t.attr("data-image")),t.attr("data-imagep")&&(i=t.attr("data-imagep")),!!i}function ut(e){var i,o,r,n,c=e.is_associated?e.this_epo_container.find(".tm-epo-field.tmcp-upload"):e.this_epo_container.find(".tm-epo-field.tmcp-upload").not(Vt.epoSelector+" "+Vt.associatedEpoSelector+" .tm-epo-field.tmcp-upload");try{c.not(Vt.epoSelector+" "+Vt.associatedEpoSelector+" .tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").toArray().forEach(function(t){i=a(t),(ae||ie)&&((o=new ae("").clipboardData||new ie).items.add(new File([i.attr("data-file")],i.attr("data-filename"))),t.files=o.files),r=i.attr("name"),n=i.attr("data-file"),i.trigger("change.tcupload"),i.after('<input type="hidden" class="tmcp-upload-hidden" name="'+r+'" value="'+n+'" />'),i.removeAttr("data-file data-filename")})}catch(e){t.console.log(e),a(".tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").addClass("tc-nodt"),$t=e}}function gt(t){var e=t.epoEventId,i=t.this_epo_container;"yes"===Yt.tm_epo_upload_popup&&(a.tcepo.formSubmitEvents[e][a.tcepo.formSubmitEvents[e].length]={trigger:function(){return!0},on_true:function(){var t,e,o=i.data("num_uploads");return o&&Object.keys(o).length&&(t=a.tcFloatBox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tc-wrapper",data:a.epoAPI.template.html(Vt.templateEngine.tc_upload_messages,{files:o,title:Yt.i18n_uploading_files,message:Yt.i18n_uploading_message})}),e=function(){t.destroy(),se.off("ajaxSuccess",e)},se.on("ajaxSuccess",e)),!0},on_false:function(){return!0}})}function ht(t){var e=t.this_epo_container,i=t.main_product,o=t.epoEventId,r=e.find(".tm-limit"),n=e.find(".tm-exactlimit"),c=e.find(".tm-minimumlimit");e.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var t=a(this);Q(t,!0),Z(t,!0)}),r.length&&$(r,i,o),n.length&&G(n,i,o),c.length&&Y(c,o)}function vt(e){var i,o,r=e.this_epo_totals_container,n=e.this_epo_container,c=r.attr("data-theme-name");if(c){switch(c=c.toLowerCase(),i=n.find("select"),c){case"flatsome":case"flatsome-child":case"flatsome child":i.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":i.wrap('<div class="avada-select-parent tm-select-parent"></div>'),a('<div class="select-arrow">&#xe61f;</div>').appendTo(n.find(".tm-select-parent")),t.calc_select_arrow_dimensions?(t.calc_select_arrow_dimensions(),de.on("tmsectionpoplink cpflogicdone",function(){t.calc_select_arrow_dimensions()})):t.calcSelectArrowDimensions&&(t.calcSelectArrowDimensions(),de.on("tmsectionpoplink cpflogicdone",function(){t.calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":i.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":o=function(){setTimeout(function(){a(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").each(function(){a(this).is(".mpcthSelect")||(a(this).width(a(this).outerWidth()),a(this).customSelect({customClass:"mpcthSelect"}))})},100)},de.on("cpflogicrun",function(){o()}),de.on("epo_options_visible",function(){o()});break;case"handmade":case"handmade child theme":a(".tm-owl-slider.tcowl-carousel").addClass("manual")}de.trigger("tm-theme-specific-actions",{epo:{theme_name:c,all_epo_selects:i}})}se.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){a(this).closest(".quantity").find(Vt.qtySelector).trigger("change.cpf")})}function yt(t,i,o,r,n){var c,l,d,s,p,m,_,f,u,g=t.epoEventId,h="input[name^='variation_id']",v=t.is_associated?"tc_variation_form.tmlogic":"wc_variation_form.tmlogic",y=t.is_associated?"tc_":"",b=t.variations_form,w=t.is_associated?b.find(".tc-epo-element-variations"):b.find(".variations"),x=t.is_associated?".tc-epo-element-variable-reset-variations":".reset_variations";if(b.attr("data-epo_id",t.epo_id),i.find("input.variation_id").length>0&&(h="input.variation_id"),n.find(".tm-epo-variation-element").length||n.data("tm-epo-variation-element")){if((c=n.find(".tm-epo-variation-section").first()).find(".cpf-type-variations").attr("data-epo_id",t.epo_id).attr("data-product_id",b.attr("data-product_id")),n.data("tm-epo-variation-element",c.find(".tm-epo-variation-element")),o&&"main"!==o&&!t.is_associated){if(b=t.form,w=b.find('.composite_component[data-item_id="'+o+'"]').find(".variations"),b.attr("data-epo_id",t.epo_id),0===w.length)return;l=c.closest("li.tm-extra-product-options-field"),c.is(".tm-hidden")||w.hide(),w.after(c.addClass("tm-extra-product-options nopadding")),l.is(":empty")&&l.hide(),c.is(".section_popup")?c.wrap("<div class='tc-styled-variations tc-row'></div>"):(c.removeClass("tc-cell"),c.wrap("<div class='tc-styled-variations'></div>")),d=!1,i.off(v).on(v,function(){for(d=!0,b.on("click.tmlogic",".reset_variations",function(){c.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),c.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),de.trigger("tmlazy"),c.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),c.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")}),i.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){O(i,t)}),u=0;u<oe.length;u+=1)s=oe[u],"object"===(p=typeof s)&&(m="string"==typeof s.name||!1,_="string"==typeof s.selector||!1,f="function"==typeof s.func||!1,m&&f&&("input[name='variation_id']"===_&&(_=h),s.selector?i.data("tm-styled-variations",1).off(y+s.name,s.selector).on(y+s.name,s.selector,s.func):i.data("tm-styled-variations",1).off(y+s.name).on(y+s.name,s.func)));oe=[],c.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}),a(function(){!1===d&&i.trigger(v)})}else{for(c.length&&(c.is(".tm-hidden")||w.hide(),l=c.closest("li.tm-extra-product-options-field"),w.after(c.addClass("tm-extra-product-options nopadding")),l.is(":empty")&&l.hide(),c.is(".section_popup")?c.wrap("<div class='tc-styled-variations tc-row'></div>"):(c.removeClass("tc-cell"),c.wrap("<div class='tc-styled-variations'></div>")),b.off("click.tmlogic",x).on("click.tmlogic",x,function(){c.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),c.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),de.trigger("tmlazy"),c.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),c.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")})),b.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){O(b,t)}),u=0;u<oe.length;u+=1)s=oe[u],"object"===(p=typeof s)&&(m="string"==typeof s.name||!1,_="string"==typeof s.selector||!1,f="function"==typeof s.func||!1,m&&f&&("input[name='variation_id']"===_&&(_=h),s.selector?b.data("tm-styled-variations",1).off(y+s.name,s.selector).on(y+s.name,s.selector,s.func):b.data("tm-styled-variations",1).off(y+s.name).on(y+s.name,s.func)));oe=[],c.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}a.tcepo.formSubmitEvents[g][a.tcepo.formSubmitEvents[g].length]={trigger:function(){return!0},on_true:function(){return c.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){c.find(".tm-epo-variation-element").prop("disabled",!1)}},a(e.body).on("added_to_cart",function(){c.find(".tm-epo-variation-element").prop("disabled",!1)})}}function bt(t,e){var i=e.find(".flex-control-nav li:eq(0) img"),o=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=t,n=t.closest("a");r.attr("data-o_src",a.tc_product_image_store[0].src),r.attr("data-o_srcset",a.tc_product_image_store[0].srcset),r.attr("data-o_sizes",a.tc_product_image_store[0].sizes),r.attr("data-o_title",a.tc_product_image_store[0].title),r.attr("data-o_alt",a.tc_product_image_store[0].alt),r.attr("data-o_data-src",a.tc_product_image_store[0]["data-src"]),r.attr("data-o_data-large_image",a.tc_product_image_store[0]["data-large_image"]),r.attr("data-o_data-large_image_width",a.tc_product_image_store[0]["data-large_image_width"]),r.attr("data-o_data-large_image_height",a.tc_product_image_store[0]["data-large_image_height"]),o.attr("data-o_data-thumb",a.tc_product_image_store[1]["data-thumb"]),a.tc_product_image_store[2]&&i.attr("data-o_src",a.tc_product_image_store[2].src),n.attr("data-o_href",a.tc_product_image_store[3].href),n.attr("data-o_title",a.tc_product_image_store[3].title)}function wt(t,e){var i=e.find(".flex-control-nav li:eq(0) img"),o=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=t,n=t.closest("a");a.isEmptyObject(a.tc_product_image)?a.tc_product_image_store=a.tc_populate_store(t,e):(a.tc_product_image_store=a.tc_pre_populate_store(),a.tc_product_image_store=a.tc_maybe_copy_object_values(a.tc_product_image_store,a.tc_product_image)),r.tc_update_attr("src",0),r.tc_update_attr("srcset",0),r.tc_update_attr("sizes",0),r.tc_update_attr("title",0),r.tc_update_attr("alt",0),r.tc_update_attr("data-src",0),r.tc_update_attr("data-large_image",0),r.tc_update_attr("data-large_image_width",0),r.tc_update_attr("data-large_image_height",0),o.tc_update_attr("data-thumb",1),i.tc_update_attr("src",2),n.tc_update_attr("href",3),n.tc_update_attr("title",3)}function xt(t,e,a){var i=a.find(".flex-control-nav li:eq(0) img"),o=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=e,n=e.closest("a");t&&t.image_link&&t.image_link&&t.image_link.length>1?(null!==t.full_src&&""!==t.full_src||(t.full_src=t.image_link),null!==t.full_src_w&&""!==t.full_src_w||(t.full_src_w=r.attr("data-large_image_width")),null!==t.full_src_h&&""!==t.full_src_h||(t.full_src_h=r.attr("data-large_image_height")),r.length&&(t.image_srcset||(t.image_sizes=!1),t.image_sizes||(t.image_srcset=!1),r.tc_set_attr("src",t.image_link,0),r.tc_set_attr("srcset",t.image_srcset,0),r.tc_set_attr("sizes",t.image_sizes,0),r.tc_set_attr("title",t.image_title,0),r.tc_set_attr("alt",t.image_alt,0),r.tc_set_attr("data-src",t.full_src,0),r.tc_set_attr("data-large_image",t.full_src,0),r.tc_set_attr("data-large_image_width",t.full_src_w,0),r.tc_set_attr("data-large_image_height",t.full_src_h,0),o.tc_set_attr("data-thumb",t.image_link,1)),i.length&&i.tc_set_attr("src",t.image_link,2),n.length&&(n.tc_set_attr("href",t.full_src,3),n.tc_set_attr("title",t.image_caption,3))):(r.length&&(r.tc_reset_attr("src",0),r.tc_reset_attr("srcset",0),r.tc_reset_attr("sizes",0),r.tc_reset_attr("title",0),r.tc_reset_attr("alt",0),r.tc_reset_attr("data-src",0),r.tc_reset_attr("data-large_image",0),r.tc_reset_attr("data-large_image_width",0),r.tc_reset_attr("data-large_image_height",0),o.tc_reset_attr("data-thumb",1)),i.length&&i.tc_reset_attr("src",2),n.length&&(n.tc_reset_attr("href",3),n.tc_reset_attr("title",3)))}function Ft(t,e){var i;return t.is_associated?i=e.find(".tc-product-image .wp-post-image").first():""!==Yt.tm_epo_global_product_image_selector?i=a(Yt.tm_epo_global_product_image_selector):(0===(i=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first()).length&&(i=e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first()),0===i.length&&(i=e.find(".elementor-widget-ae-post-image .wp-post-image").first())),a(i).length>1&&(i=a(i).first()),i}function kt(t){var e,a,i;return t.is_associated?t.main_product.closest(".tc-epo-element-product-container"):(e=t.main_product,a=t.product_id,(i=e.closest("#product-"+a)).length<=0&&(i=e.closest(".post-"+a)),i)}function Ct(e,i,o,r,n,c,l){var d,s,p,m,_,f;for(d in e)if(Object.prototype.hasOwnProperty.call(e,d)&&(d=e[d]).enabled)switch(d.type){case"yith":i?(i.attr("srcset",o).attr("src-orig",o),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),s={elements:{zoom:a(".yith_magnifier_zoom"),zoomImage:i,gallery:a(".yith_magnifier_gallery li a")}},d.element.yith_magnifier(a.extend(!0,{},t.yith_magnifier_options,s))):(r?d.yith_wcmg_zoom.attr("href",d.yith_wcmg_default_zoom):d.yith_wcmg_zoom.attr("href",d._yith_wcmg_default_zoom),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),d.element.yith_magnifier(t.yith_magnifier_options));break;case"iosslider":setTimeout(function(t){t.element.iosSlider("update")}.bind(null,d),150);break;case"flexslider":de.trigger("resize");break;case"elevatezoom":d.element.each(function(t,e){var a=e(this).data("elevateZoom");void 0!==a&&a.swaptheimage(t,t)}.bind(null,o,a));break;case"easyzoom":d.element.swap(null,o);break;case"easyzoom-flatsome":d.element.swap(o,o);break;case"woocommerce":d.element.flexslider(0),p=d.element,t.setTimeout(function(t,e){t.trigger("woocommerce_gallery_init_zoom"),e.trigger("resize")}.bind(null,p,de),10);break;case"zoom":l&&(m=l.find(".woocommerce-product-gallery--with-images").width(),_=!1,d.element.find("img.wp-post-image").attr("data-large_image_width")>m&&(_=!0),_?(f={touch:!1},"ontouchstart"in t&&(f.on="click"),d.element.trigger("zoom.destroy"),d.element.zoom(f)):d.element.trigger("zoom.destroy"))}de.trigger("tm_gallery_compatibility_actions",{event_data:n,product_element:l,form:c})}function It(i,o,r){var n,c,l,d,s,p,m,_,f,u,g,h,v,y,b,w,x,F,k,C,I,P,A;return i.is_associated?{}:(n=!1,c=a(".images"),l=a(".yith_magnifier_zoom"),d=c.find(".yith_magnifier_zoom").first().attr("href"),s=d,p=c.find(".yith_magnifier_zoom img").first().attr("src"),m=!1,_=a(".iosSlider.product-gallery-slider,.iosSlider.product-slider"),f=!1,u=r.find(".images .fusion-flexslider"),g=o.data("elevateZoom")||!1,h=r.find("div.product-images .woocommerce-main-image"),v=!1,y=r.find(".images .easyzoom"),b=!1,w=r.find(".images .easyzoom"),x=!1,F=r.find(".woocommerce-product-gallery"),k=!1,C=t.wc_single_product_params,P="function"==typeof a.fn.zoom&&C&&C.zoom_enabled,A=!1,t.yith_magnifier_options&&c.data("yith_magnifier")&&(n=!0),_.length&&_.iosSlider&&(m=!0),u.length&&u.flexslider&&(f=!0),y.length&&y.filter(".images .easyzoom.first").data("easyZoom")&&(y=y.filter(".images .easyzoom.first").data("easyZoom"),v=!0),v||(w=r.find(".images .has-image-zoom .slide")).length&&w.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(w=w.filter(".images .has-image-zoom .slide.first").data("easyZoom"),b=!0),"complete"===e.readyState?setTimeout(function(){y.length&&y.data("easyZoom")&&(y=y.data("easyZoom"),v=!0),w.length&&w.data("easyZoom")&&(w=w.data("easyZoom"),b=!0)},150):de.on("load",function(){setTimeout(function(){y.length&&y.data("easyZoom")&&(y=y.data("easyZoom"),v=!0),w.length&&w.data("easyZoom")&&(w=w.data("easyZoom"),b=!0)},150)}),F.length&&F.data("flexslider")&&(x=!0,"function"==typeof a.fn.zoom&&C&&C.zoom_enabled&&(I=o.closest(".woocommerce-product-gallery__image")).length>0&&o.width()>a(".woocommerce-product-gallery").width()&&(k=I,o.data.wc27_zoom_target=k)),!x&&P&&(A=r.find(".woocommerce-product-gallery__image")),{is_yith_wcmg:{type:"yith",enabled:n,element:c,yith_wcmg_zoom:l,_yith_wcmg_default_zoom:s,yith_wcmg_default_image:p},is_iosSlider:{type:"iosslider",enabled:m,element:_},is_flexslider:{type:"flexslider",enabled:f,element:u},is_elevateZoom:{type:"elevatezoom",enabled:g,element:h},is_easyzoom:{type:"easyzoom",enabled:v,element:y},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:b,element:w},is_wc27_gallery:{type:"woocommerce",enabled:x,element:F},is_zoom_enabled:{type:"zoom",enabled:!x&&P,element:A}})}function Pt(t){var e,i,o,r,n,c,l,d,s=t.is_associated?t.this_epo_container:t.this_epo_container.not(Vt.epoSelector+" "+Vt.associatedEpoSelector),p=t.variations_form,m=t.main_product,_=t.form,f=kt(t),u=[],h=t.is_associated?"tc_":"";e=Ft(t,f),i=It(t,e,f),a(e).length>0&&(_.on(h+"reset_image.tcpi",function(){a.tc_product_image=a.tc_replace_object_values(a.tc_product_image,a.tc_product_image_store),u=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){g(o=a(this))&&""!==o.val()&&u.push(o)}),u.length?u[u.length-1].trigger("tm_trigger_product_image"):a.tc_product_image_store=a.tc_populate_store(e,f)}),_.on(h+"found_variation.tcpi",function(){wt(e,f),u=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){g(o=a(this))&&""!==o.val()&&u.push(o)}),u.length&&(bt(e,f),u[u.length-1].trigger("tm_trigger_product_image"))}),a.tc_product_image_store=a.tc_maybe_copy_object_values_from_img(a.tc_product_image_store,e,f),m.off("tm_change_product_image").on("tm_change_product_image",function(t,m){if(t.stopImmediatePropagation(),r=m.element,n=m.element_current,r&&n){if(c=r.data("imagep"),l="",""!==c?l="imagep":"images"===r.data("changes-product-image")&&(l="image"),(d=m.element_current.data("image-variations"))&&(d=d[l]),void 0===d)return;if(u=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){(o=a(this)).is("option")&&(o=o.closest("select")),g(o)&&""!==o.val()&&u.push(o)}),u.length&&!u[u.length-1].is(r))return;xt(d,e,f),Ct(i,e,d.image_link,!1,m,_,f)}}),m.off("tm_restore_product_image").on("tm_restore_product_image",function(t,n){t.stopImmediatePropagation(),r=n.element,u=[],r&&(a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){g(o=a(this))&&""!==o.val()&&u.push(o)}),u.length&&!u[u.length-1].is(r))?u[u.length-1].trigger("tm_trigger_product_image"):(xt(!1,e,f),Ct(i,!1,e.attr("src"),!1,n,_,f))}),u=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){g(o=a(this))&&""!==o.val()&&u.push(o)}),u.length&&u[u.length-1].trigger("tm_trigger_product_image")),de.trigger("tm_product_image_loaded")}function At(e){var i,o,r,n,c,l,d,s=e.is_associated?e.this_epo_container:e.this_epo_container.not(Vt.epoSelector+" "+Vt.associatedEpoSelector),p=e.main_product,m=e.product_id,_=e.form,f=kt(e),u=[];i=Ft(e,f),o=It(e,i,f),a(i).length>0&&(i.data("tm-current-image",!1),r=i.closest("a"),n=i.attr("src"),c=i.width(),l=i.height(),p.off("tm_change_product_image").on("tm_change_product_image",function(e,r){var n,s,p,f,u,h,v,y,w,x,F,k,C,I,P,A=[];s=(n=r.element.closest(".cpf-section")).is(".tm-epo-variation-section"),p=r.epo_holder,s&&(p=n),f=p.find(".tm-product-image:checked,select.tm-product-image"),A=[],u=r.element.attr("id"),h=!0,v=r.main_product,y=v.closest("#product-"+m),w=c,x=l,k=a("<div class='blockUI blockOverlay tm-preloader-img'></div>"),y.length<=0&&(y=v.closest(".post-"+m)),0===(F=y.find("#"+u+"_tmimage")).length&&(F=i),P=function(){k.remove(),_.tc_image_update(!1),i.data("tm-current-image",!1),y.find(".tm-clone-product-image").hide(),i.show()},r.src===F.attr("src")&&F.is(":visible")||(!1!==r.src?(k.css({width:w,height:x}),f.each(function(){g(d=a(this))&&ft(d)&&b({element:d.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&A.push(d)}),A.length&&(f=A[A.length-1]),f.attr("id")!==r.element.attr("id")&&(h=!1),C=i.tcClone(),I=new Image,C.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),h&&i.before(k),o.is_yith_wcmg.yith_wcmg_default_zoom=o.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),o.is_yith_wcmg.yith_wcmg_default_image=o.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),I.onerror=function(){P()},I.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();y.find("#"+u+"_tmimage").remove(),y.find(".tm-clone-product-image").hide(),C.prop("src",I.src).hide(),i.hide().after(C),C.css("opacity",0).show(),Ct(o,C,I.src),k.animate({opacity:0},750,"easeOutExpo",function(){k.remove()}),C.animate({opacity:1},t.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),de.trigger("tm_change_product_image_loaded",{src:r.src,element:r.element,main_product:r.main_product,epo_holder:r.epo_holder})},C.attr("id",u+"_tmimage").addClass("tm-clone-product-image").hide(),C.attr("src-orig")&&C.attr("src-orig",r.src),h?(I.src=r.src,_.tc_image_update(r.element,C),i.data("tm-current-image",u),de.trigger("tm_change_product_image_show",{src:r.src,element:r.element,main_product:r.main_product,epo_holder:r.epo_holder})):(C.prop("src",r.src).hide(),i.after(C)),de.trigger("tm_change_product_image_end",{src:r.src,element:r.element,main_product:r.main_product,epo_holder:r.epo_holder})):P())}),p.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){var a,c,l,d,s,p,f,u,g,h,v,y,b,w;if(de.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder}),a=e.element.attr("id"),c=e.main_product,l=c.closest("#product-"+m),d=e.element.closest(".cpf-section"),s=d.is(".tm-epo-variation-section"),u=!1,y=n,b=e.epo_holder,s&&(b=d),l.length<=0&&(l=c.closest(".post-"+m)),g=l.find("#"+a+"_tmimage").is(":visible"),l.find("#"+a+"_tmimage").remove(),0===l.find(".tm-clone-product-image").length)i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1);else{if(!g)return void de.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});for(h=l.find(".tm-clone-product-image").length,a=i.data("tm-current-image"),w=h-1;w>=0;w-=1){if(f=l.find(".tm-clone-product-image").eq(w),p=f.attr("id").replace("_tmimage",""),(v=b.find("[id='"+p+"']")).is(":checked")&&v.closest(".cpf_hide_element").is(":visible")){l.find(".tm-clone-product-image").eq(w).show(),r.attr("href",l.find(".tm-clone-product-image").eq(w).prop("src")),i.data("tm-current-image",p),u=!0;break}l.find(".tm-clone-product-image").eq(w).hide()}u?l.find("#"+a+"_tmimage").remove():(i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1))}u&&(y=f.attr("src")),Ct(o,!1,y,l.find(".tm-clone-product-image").filter(":visible").length),de.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),p.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){var c,l,s,p,f,u,h,v,y,w,x,F,k,C,I,P,A;if(c=e.main_product,l=c.closest("#product-"+m),s=e.element?e.element.closest(".cpf-section"):a(c.find(".tm-epo-variation-section").first(),e.epo_holder),p=s.is(".tm-epo-variation-section"),f=e.epo_holder,p&&(f=s),u=f.find(".tm-product-image:checked,select.tm-product-image"),h=[],v="",x=!1,F=i.data("tm-current-image"),C=n,l.length<=0&&(l=c.closest(".post-"+m)),f=c.find(".tm-epo-variation-section").first().add(e.epo_holder),(u=f.find(".tm-product-image:checked,select.tm-product-image")).each(function(){g(d=a(this))&&ft(d)&&b({element:d.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&h.push(d)}),h.length&&(v=(u=h[h.length-1]).attr("id")),!h.length||!u.length||F&&v===F){if(P=f.find("[id='"+F+"']").closest(".cpf_hide_element"),F&&(!1===P.data("isactive")||!1===P.closest(".cpf-section").data("isactive"))){if(l.find("#"+F+"_tmimage").remove(),0===(k=l.find(".tm-clone-product-image").length))i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1);else{for(A=k-1;A>=0;A-=1){if(y=l.find(".tm-clone-product-image").eq(A),w=y.attr("id").replace("_tmimage",""),(I=f.find("[id='"+w+"']")).is(":checked")&&I.closest(".cpf_hide_element").is(":visible")){l.find(".tm-clone-product-image").eq(A).show(),r.attr("href",l.find(".tm-clone-product-image").eq(A).prop("src")),i.data("tm-current-image",w),x=!0;break}l.find(".tm-clone-product-image").eq(A).hide()}x||(i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1))}x&&(C=y.attr("src")),Ct(o,!1,C,l.find(".tm-clone-product-image").filter(":visible").length)}}else u.last().trigger("tm_trigger_product_image")}),a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){g(d=a(this))&&""!==d.val()&&u.push(d)}),u.length&&u[u.length-1].trigger("tm_trigger_product_image")),de.trigger("tm_product_image_loaded")}function St(e){setTimeout(function(){"inline"===Yt.tm_epo_global_product_image_mode?At(e):Pt(e)},t.tc_epo_product_image_setup_delay||0)}function qt(t){de.trigger("tm-epo-compatibility",{epo:t})}function Et(t){ee&&t.find(".tm-range-picker").toArray().forEach(function(e){var i,o=a(e),r=o.attr("data-step").split("."),c=t.find("#"+a.epoAPI.dom.id(o.attr("data-field-id"))),l=parseFloat(o.attr("data-min")),d=parseFloat(o.attr("data-max")),s=parseFloat(o.attr("data-start")),p=parseFloat(o.attr("data-step")),m=o.attr("data-show-picker-value"),_=o.closest("li").find(".tm-show-picker-value"),f=parseFloat(o.attr("data-noofpips")),u=null;o.data("tc-picker-init")||(o.data("tc-picker-init",1),r=1===r.length?0:r[1].length,Number.isFinite(l)||(l=0),Number.isFinite(d)||(d=0),d<=l&&(d=parseFloat(d)+1),s=a.epoAPI.math.unformat(s,Vt.localDecimalSeparator),Number.isFinite(s)||(s=0),s=n(s,{precision:r}),Number.isFinite(p)||(p=0),Number.isFinite(f)||(f=10),f<2&&(f=2),"yes"===o.attr("data-pips")&&(u={mode:"count",values:f,filter:function(t,e){return t=parseFloat(a.epoAPI.math.toFixed(t,r)),p<=0?0:1!==e||Number.isInteger(t)?e:2},format:{from:function(t){return a.epoAPI.math.unformat(t,Vt.localInputDecimalSeparator)},to:function(t){return n(t,{precision:r})}},density:2}),ee.create(o.get(0),{direction:Yt.text_direction,start:s,step:p,connect:"lower",behaviour:"tap",format:{from:function(t){return a.epoAPI.math.unformat(t,Vt.localInputDecimalSeparator)},to:function(t){return n(t,{precision:r})}},range:{min:[l],max:[d]},pips:u,tooltips:{from:function(t){return a.epoAPI.math.unformat(t,Vt.localInputDecimalSeparator)},to:function(t){return n(t,{precision:r})}}}),i=o.find(".noUi-handle-lower"),o.get(0).noUiSlider.on("slide",function(){i.trigger("tmmovetooltip"),c.trigger("change.cpf")}),o.get(0).noUiSlider.on("update",function(t,e){t[e]=a.epoAPI.math.unformat(t[e],Vt.localDecimalSeparator),e=0,"left"!==m&&"right"!==m&&i.attr("title",n(t[e],{precision:r})),c.val(t[e]).trigger("change"),""!==m&&_.html(n(t[e],{precision:r}))}),""!==m&&_.html(s),"left"!==m&&"right"!==m&&(i.attr("title",s),o.addClass("noUi-show-tooltip")))})}function Tt(t,e){var i,o=a(e),r=a.tm_datepicker._getInst(o[0]),n=o.data("tc-enabled_only_dates"),c=o.data("tc-disabled_weekdays"),l=o.data("tc-disabled_months"),d=o.data("tc-disabled_dates"),s=o.data("tc-format"),p=t.getDay(),m=t.getDay()+1;return!!a.tm_datepicker._isInRange(r,t)&&(""!==n?(i=a.tm_datepicker.formatDate(s,t),-1!==n.indexOf(i)):-1===c.indexOf(p.toString())&&(-1===l.indexOf(m.toString())&&(""===d||(i=a.tm_datepicker.formatDate(s,t),-1===d.indexOf(i)))))}function jt(t){var e,a,i,o,r;if(t.toString().isNumeric()&&0!==(e=0===t?t:t>0?1:-1)){for(a=new Date,i=1,o=!1,r=Math.abs(t);i<=r;)!1===o&&(o=0),a.setDate(a.getDate()+1*e),o++,0!==a.getDay()&&6!==a.getDay()&&i++;!1!==o&&(t=o*e)}return t}function Ot(i){var o,r,n=".tm-epo-timepicker";a.tm_datepicker&&(o=a("input").map(function(){return this.id}).get().join(" "),(r=e.createElement("input")).setAttribute("type","date"),"text"===r.type&&(n=".tm-epo-system-timepicker"),i.find(n).toArray().forEach(function(e){var i=a(e),r=null,n=null,c=i.attr("data-time-format").trim(),l=i.attr("data-time-theme").trim(),d=i.attr("data-time-theme-size").trim(),s=i.attr("data-time-theme-position").trim(),p=i.attr("data-tranlation-hour").trim(),m=i.attr("data-tranlation-minute").trim(),_=i.attr("data-tranlation-second").trim();i.attr("type","text"),""!==i.attr("data-min-time").trim()&&(r=i.attr("data-min-time").trim()),""!==i.attr("data-max-time").trim()&&(n=i.attr("data-max-time").trim()),""!==i.attr("data-custom-time-format").trim()&&(c=i.attr("data-custom-time-format").trim()),p||(p=Yt.hourText),m||(m=Yt.minuteText),_||(_=Yt.secondText),i.tm_timepicker(Object.assign({isRTL:Yt.isRTL,hourText:p,minuteText:m,secondText:_,timeFormat:c,minTime:r,maxTime:n,closeText:Yt.closeText,showOn:"both",buttonText:"",beforeShow:function(t,e){a(e.dpDiv).removeClass(o).removeClass("tm-ui-skin-epo tm-ui-skin-epo-black tm-datepicker-medium tm-datepicker-small tm-datepicker-large tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+l+" tm-timepicker tm-datepicker tm-datepicker-"+s+" tm-datepicker-"+d).appendTo("body"),se.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){i.tm_timepicker("hide")}),le.addClass("tm-static"),i.prop("readonly",!0),de.trigger({type:"tm-timepicker-beforeShow",input:t,inst:e})},onClose:function(){le.removeClass("tm-static"),i.prop("readonly",!1),i.trigger("change")}},t.timepicker_settings||{})),a("#ui-tm-datepicker-div").hide()}),i.find(".tm-epo-datepicker").toArray().forEach(function(t){var e,r,n=a(t),c=parseInt(n.attr("data-start-year").trim(),10),l=parseInt(n.attr("data-end-year").trim(),10),d=n.attr("data-min-date").trim(),s=n.attr("data-max-date").trim(),p=n.attr("data-disabled-dates").trim(),m=n.attr("data-enabled-only-dates").trim(),_=n.attr("data-exlude-disabled").trim(),f=n.attr("data-disabled-weekdays").trim().split(","),u=n.attr("data-disabled-months").trim().split(","),g=n.attr("data-date-format").trim(),h=n.attr("data-date-showon").trim(),v=n.attr("data-date-defaultdate").trim(),y=n.attr("data-date-theme").trim(),b=n.attr("data-date-theme-size").trim(),w=n.attr("data-date-theme-position").trim();""!==p&&(e=p.split(","),-1!==p.indexOf(",")&&e.length>0&&(p=e)),""!==m&&(r=m.split(","),-1!==m.indexOf(",")&&r.length>0&&(m=r)),""===d?d=""===c?null:new Date(c,0,1):_&&(d=jt(d)),""===s?s=""===l?null:new Date(l,11,31):_&&(s=jt(s)),n.data("tc-enabled_only_dates",m),n.data("tc-disabled_weekdays",f),n.data("tc-disabled_months",u),n.data("tc-disabled_dates",p),n.data("tc-format",g),n.tm_datepicker({monthNames:Yt.monthNames,monthNamesShort:Yt.monthNamesShort,dayNames:Yt.dayNames,dayNamesShort:Yt.dayNamesShort,dayNamesMin:Yt.dayNamesMin,isRTL:Yt.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:h,defaultDate:v,buttonText:"",showButtonPanel:!0,firstDay:Yt.first_day,closeText:Yt.closeText,currentText:Yt.currentText,dateFormat:g,minDate:d,maxDate:s,onSelect:function(){var t,e,o=a(this),r="#"+a.epoAPI.dom.id(o.attr("id")),n=o.tm_datepicker("getDate"),c="",l="",d="",s=i.find(r+"_day"),_=i.find(r+"_month"),h=i.find(r+"_year");n&&(c=n.getDate(),l=n.getMonth()+1,d=n.getFullYear(),t=a.tm_datepicker.formatDate(g,n),(-1!==u.indexOf(l.toString())||-1!==f.indexOf(n.getDay().toString())||-1!==p.indexOf(t)||""!==m&&-1===m.indexOf(t))&&(e=o.data("tm-last-date"),e=o.data("tm-last-date")?o.data("tm-last-date"):"",o.val(e),o.tm_datepicker("setDate",e),e?(c=(n=o.tm_datepicker("getDate")).getDate(),l=n.getMonth()+1,d=n.getFullYear()):(c="",l="",d=""))),s.val(c),_.val(l),h.val(d),o.data("tm-last-date",o.val())},beforeShow:function(t,e){a(e.dpDiv).removeClass(o).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+y+" tm-datepicker tm-datepicker-"+w+" tm-datepicker-"+b).appendTo("body"),se.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){n.tm_datepicker("hide")}),se.off("click",".ui-tm-datepicker-current").on("click",".ui-tm-datepicker-current",function(){var t,i=new Date,o=a.tm_datepicker._daylightSavingAdjust(new Date(i.getFullYear(),i.getMonth(),i.getDate())),r=o.getDay(),c=o.getMonth()+1,l="#"+e.id.replace(/\\\\/g,"\\"),d=!1,s=n.tm_datepicker("getDate");if(""!==m)t=a.tm_datepicker.formatDate(g,s),d=-1!==m.indexOf(t);else if(-1!==u.indexOf(c.toString())||-1!==f.indexOf(r.toString()))d=!1;else{if(""!==p)return t=a.tm_datepicker.formatDate(g,s),[-1===p.indexOf(t),""];d=!0}d&&(a.tm_datepicker._setDate(e,o),a.tm_datepicker._gotoToday(l))}),le.addClass("tm-static"),n.prop("readonly",!0),de.trigger({type:"tm-datepicker-beforeShow",input:t,inst:e})},onClose:function(){le.removeClass("tm-static"),n.prop("readonly",!1),n.trigger("change")},beforeShowDay:function(t){var e,i=t.getDay(),o=t.getMonth()+1;return""!==m?(e=a.tm_datepicker.formatDate(g,t),[-1!==m.indexOf(e),""]):-1!==u.indexOf(o.toString())||-1!==f.indexOf(i.toString())?[!1,""]:""!==p?(e=a.tm_datepicker.formatDate(g,t),[-1===p.indexOf(e),""]):[!0,""]}}),a("#ui-tm-datepicker-div").hide()}),i.find(".tmcp-date-select").on("change.cpf",function(){var t="#"+a.epoAPI.dom.id(a(this).attr("data-tm-date")),e=i.find(t),o=e.attr("data-date-format"),r=i.find(t+"_day").val(),n=i.find(t+"_month").val(),c=i.find(t+"_year").val(),l=a.tm_datepicker.formatDate(o,new Date(c,parseInt(n,10)-1,r));r>0&&n>0&&c>0?(e.tm_datepicker("setDate",l),e.trigger("change")):(e.val(""),e.trigger("change.cpf"))}).on("focus.cpf",function(){var e="#"+a.epoAPI.dom.id(a(this).attr("data-tm-date")),o=i.find(e),r=i.find(e+"_day"),n=i.find(e+"_month"),c=i.find(e+"_year"),l=r.val(),d=n.val(),s=c.val(),p=a(this);""!==s&&""!==d&&""!==l||""!==s&&""!==d&&""===l||""!==l&&""!==s&&""===d||""!==l&&""!==d&&""===s?p.find("option").toArray().forEach(function(e){var i,r=a(e),n=r.val(),c=s+"-"+d+"-"+l;if(p.is(".tmcp-date-day")){if(""===s||""===d)return;c=s+"-"+d+"-"+n}else if(p.is(".tmcp-date-month")){if(""===s||""===l)return;c=s+"-"+n+"-"+l}else if(p.is(".tmcp-date-year")){if(""===l||""===d)return;c=n+"-"+d+"-"+l}if(""!==n)try{(i=a.tm_datepicker.parseDate("yy-mm-dd",c))&&(Tt(i,o)?r.prop("disabled",!1):r.prop("disabled",!0))}catch(e){t.console.log(e),r.prop("disabled",!0),$t=e}}):(r.find("option").prop("disabled",!1),n.find("option").prop("disabled",!1),c.find("option").prop("disabled",!1))}),de.on("resizestart",function(){var i=a(e.activeElement);if(i.is(".hasDatepicker")){if(i.data("resizestarted",!0),a(t).width()<768)return void i.data("resizewidth",!0);i.tm_datepicker("hide")}}),de.on("resizestop",function(){var t=a(e.activeElement);t.is(".hasDatepicker")&&t.data("resizestarted")&&(t.data("resizewidth")&&t.tm_datepicker("hide"),t.tm_datepicker("show")),t.data("resizestarted",!1),t.data("resizewidth",!1)}))}function zt(t){var e,i=t.epoEventId,o=t.main_product,r=!a.tcepo.formSubmitEvents[i].some(function(t){return typeof t&&("function"==typeof t.trigger||!1)&&!t.trigger()});return a.tcepo.formSubmitEvents[i].forEach(function(t){"object"===(e=typeof t)&&(r?t.on_true():t.on_false())}),r||setTimeout(function(){o.find(Vt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled")},100),de.trigger("tm-apply-submit-events",{epo:{form_is_submit:r}}),r}function Dt(t){var e,i,o=t.form,r=t.this_epo_container,n=t.main_product,c=t.epoEventId;return"yes"===Yt.tm_epo_global_enable_validation&&(e={},r.find(".tmcp-ul-wrap").toArray().forEach(function(t){var o,r,n,c,l;t=a(t),(i=t.data("tm-validation"))&&"object"===a.tmType(i)&&(r=(o=t.find(".tm-epo-field")).first().attr("name"),t.is(".tm-extra-product-options-radio.tm-element-ul-radio")?(r=o.last().attr("name"),e[r]=i):t.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?o.each(function(r,n){"required"in i&&(i.required=function(e){var i=t.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===i?o.last().attr("name")===a(e).attr("name"):i<=0}),e[a(n).attr("name")]=i}):t.is(".tm-extra-product-options-product.tm-element-ul-product")?("required"in i&&(n=t.find(".product-variation-id").first().attr("name"),l=t.find(".tc-epo-field-product").first(),c={required:function(){return!(!l.is("select")||!g(l,!0)||"variable"!==l.children(":selected").attr("data-type"))}},e[n]=c),e[r]=i):e[r]=i)}),o.removeData("tc_validator"),o.tc_validate({focusInvalid:!1,ignore:Vt.qtySelector+",.tcdisabled,.tmcp-upload-hidden,#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tc-epo-variable-product-selector,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:e,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return e.is(".tm-epo-field.tmcp-radio")||e.is(".tm-epo-field.tmcp-checkbox")||e.is(".tm-epo-field.tmcp-radio")?"before"===Yt.tm_epo_global_error_label_placement?t.prependTo(e.closest(".tmcp-ul-wrap").parent()):t.appendTo(e.closest(".tmcp-ul-wrap").parent()):"before"===Yt.tm_epo_global_error_label_placement?t.prependTo(e.closest(".tmcp-field-wrap")):t.appendTo(e.closest(".tmcp-field-wrap")),!1},invalidHandler:function(t,e){de.trigger("tm-invalidHandler",{epo:{validator:e}}),setTimeout(function(){n.find(Vt.addToCartButtonSelector).first().is(".disabled")||(n.find(Vt.addToCartButtonSelector).first().removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"),n.find(Vt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"))},100),e.errorList&&e.errorList[0]&&e.errorList[0].element&&R(a(e.errorList[0].element),c)},submitHandler:function(){var e;return t.is_quickview||(n.find(Vt.addToCartButtonSelector).first().addClass("disabled"),e=function(){n.find(Vt.addToCartButtonSelector).first().removeClass("disabled"),se.off("ajaxSuccess",e)},se.on("ajaxSuccess",e)),zt(t)}}),o.find(Vt.addToCartButtonSelector).on("click",function(t){o.tc_validate().form()||(t.preventDefault(),t.stopImmediatePropagation())}),!0)}function Nt(t){var e=t.form,i=t.epoEventId;de.trigger("tm-from-submit",{epo:t,functions:{tm_apply_validation:Dt,apply_submit_events:zt}}),!Dt(t)&&a.tcepo.formSubmitEvents[i].length&&e.on("submit",function(){zt(t)})}function Bt(t){var e,i=t.epoHolder,o=t.totalsHolder,r=t.totalsHolderContainer,n=t.currentCart,c=t.variationForm,l=t.variation,d=o.data("variations");o.data("current_variation",l),l&&"display_price"in l&&!o.data("tm-epo-is-woocs")?(e=l.display_price,o.data("priceIsWithDiscount","1"),o.removeData("tcprice")):d&&l&&l.variation_id&&void 0!==d[l.variation_id]?(e=d[l.variation_id],o.removeData("tcprice")):l&&a(l.price_html).find(".amount:last").length&&(e=(e=(e=(e=a(l.price_html).find(".amount:last").text()).replace(Yt.currency_format_thousand_sep,"")).replace(Yt.currency_format_decimal_sep,".")).replace(/[^0-9.]/g,""),e=parseFloat(e),o.removeData("tcprice")),e=A(e,o),o.data("price",e),r.find(".cpf-product-price").val(e),setTimeout(function(){i.find("select.tm-epo-field").trigger("tm-select-change-html-all-math")},100),c.data("tm-styled-variations")||n.trigger({type:"tm-epo-update"})}function Ht(t,e,i,o,r,c,l,d){var s=e.find(i);return!1===t.is_associated&&(s=s.not(Vt.associatedEpoSelector+" "+i)),o||(o=0),r||(r=0),c||(c=[]),d||(s=s.filter(".tcenabled")),s.toArray().forEach(function(t){var e,i,s,p,m,_,f,u,g,h,v,y,b=a(t),w="",x=b.closest(".cpf_hide_element"),F=b.closest(".tmcp-field-wrap"),k=x.attr("data-fblabelshow"),C=x.attr("data-fbvalueshow"),I="",P=F.find(".tm-qty").val();""===k&&(I=x.find(".tm-epo-element-label").html()),void 0===P&&(P=""),b.is(":checkbox, :radio, :input")&&(i=0,s=0,p=0,m=0,b.is(".tmcp-checkbox, .tmcp-radio")?d||b.is(":checked")?(i=b.data("raw_price"),s=b.data("price"),p=b.data("raw_original_price"),m=b.data("original_price"),l=!0,b.data("isset",1),f=(_=b.closest("li.tmcp-field-wrap")).find(".checkbox_image,.radio_image"),w="",v="",(u=b.closest("li.tmcp-field-wrap").find(".tm-label")).length&&(v=w=u.html()),f.length&&(b.closest(".tmcp-ul-wrap").is(".use_colors_container")?w+=f.closest(".tc-label-wrap").clone().addClass("tc-img-floating")[0].outerHTML:w+=f.clone().addClass("tc-img-floating")[0].outerHTML),b.closest(".tmcp-ul-wrap").is(".use-images-container")&&(v=w=_.find(".tc-label").first().html(),f.length&&(w=w+'<img class="tc-img-floating" src="'+b.attr("data-image")+'"')),c.push({title:I,value:w,valueText:v,price:s,original_price:m,quantity:P,label_show:k,value_show:C})):b.data("isset",0):b.is(".tmcp-select")?(i=(y=b.find("option:selected")).data("raw_price"),s=y.data("price"),p=y.data("raw_original_price"),m=y.data("original_price"),""===(g=b.children("option:selected")).val()&&""===g.attr("data-rulestype")||(l=!0),b.find("option").data("isset",0),y.data("isset",1),""===y.val()&&""===y.attr("data-rulestype")||(w=y.attr("data-text"),c.push({title:I,value:w,valueText:w,price:s,original_price:m,quantity:P,label_show:k,value_show:C}))):(e=b.val(),b.is("[type='file']")&&(e=e.replace("C:\\fakepath\\","")),e?b.is(".tmcp-range")&&"0"===e?b.data("isset",0):(i=b.data("raw_price"),s=b.data("price"),p=b.data("raw_original_price"),m=b.data("original_price"),l=!0,b.data("isset",1),w=e,b.is(".tmcp-range")&&(w=n(w,{precision:h=1===(h=a(".tm-range-picker[data-field-id='"+b.attr("id")+"']").attr("data-step").split(".")).length?0:h[1].length})),c.push({title:I,value:w,valueText:w,price:s,original_price:m,quantity:P,label_show:k,value_show:C})):b.data("isset",0)),i||(i=0),s||(s=0),p||(p=0),m||(m=0),o=parseFloat(o)+parseFloat(i),r=parseFloat(r)+parseFloat(p))}),{total:o,original_total:r,floatingBoxData:c,showTotal:l,elementsLength:s.length}}function Lt(t,e,i,o,r,n,c,l){var d,s=a.extend(!0,{},t),p=i.find(Vt.associatedEpoSelector),m=i,_=!0;c.addClass("tm-hidden"),"variable"===o?i.is(".tc-init-variations")?i.trigger("refresh.tc-variation-form"):(i.addClass("variations_form"),setTimeout(function(){d=Qt(m,!1,p.attr("data-product-id"),p.attr("data-epo-id"),r,s),i.addClass("tc-init-variations"),i.tc_product_variation_form(r,n,c,d)},40),_=!1):i.is(".tc-init-product")||(i.addClass("tc-init-product"),c.find(".tc-epo-element-variable-product").removeClass("variations_form"),c.find(".tc-epo-element-variations").removeClass("variations"),setTimeout(function(){Qt(m,!1,p.attr("data-product-id"),p.attr("data-epo-id"),r,s)},20),_=!1),i.removeClass("tm-hidden"),_&&de.trigger("cpflogicdone"),void 0===l&&"yes"===Yt.tm_epo_global_product_element_scroll&&de.tcScrollTo(i,200,a.epoAPI.math.toFloat(Yt.tm_epo_global_product_element_scroll_offset))}function Mt(c,d,u){var g,h,v,y,b,w,x,F,k,C,I=c.product_id,P=c.main_product,T=c.main_cart,j=c.this_epo_container,O=c.this_totals_container,z=c.this_epo_totals_container,N=c.epoEventId,B=c.main_epo_inside_form,M=c.epo_id_selector,U=c.epo_id,R=c.product_id_selector,W="main",$=c.is_associated?"tc-variation-form":"wc-variation-form",X=c.is_associated?"tc_":"";u&&d?(W=a.epoAPI.applyFilter("tc_get_item_id",d.attr("data-item_id"),d),g=P.find(".tm-extra-product-options.tm-cart-"+W),h=P.find(".tm-totals-form-"+W),v=P.find(".tm-epo-totals.tm-cart-"+W),x=d.find(".variations_form").first()):(T&&0!==T.length||(T=j.is(".tc-shortcode")?P:H(P,P,"form",I)),d=T.parent(),g=j,h=O,v=z,x=c.variations_form),c.is_associated&&(W=g.attr("data-cart-id")),y=u||T,v.data("tm_for_cart",y),b=s(y),F=_(y),v.data("variationIdElement",p(y,".wceb_picker_wrap "+b)),v.data("qty_element",F),w=v.data("type"),x.data("tc_product_id",I),k=v.attr("data-tm-epo-final-total-box"),de.on("epoCalculateRules",function(t,e){t&&e&&e.currentCart&&ct(c,e.currentCart)}),ct(c,y),g.find("select.tm-epo-field").off("tm-select-change-html").on("tm-select-change-html",function(){var t,e,i,o,r,n=a(this);n.is(".tc-epo-field-product")||T&&void 0!==T.data("per_product_pricing")&&!T.data("per_product_pricing")||(t=l(n.find("option:selected").data("price"),v,!0,!1,n),e=l(n.find("option:selected").data("original_price"),v,!1,!1,n),i=n.closest(".tmcp-field-wrap").find(".tc-tooltip"),o=n.closest(".tmcp-field-wrap").find(".tc-inline-description"),E(n.closest(".tmcp-field-wrap").find(".tc-price"),n.find("option:selected").data("price"),t,n.find("option:selected").data("original_price"),e),i.length>0&&i.attr("data-tm-tooltip-html",n.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),o.length>0&&(n.find("option:selected").attr("data-tm-tooltip-html")?o.html(n.find("option:selected").attr("data-tm-tooltip-html")):o.html("")),"0"!==n.find("option:selected").attr("data-hide-amount")&&"yes"!==Yt.tm_epo_show_price_inside_option_hidden_even||"yes"!==Yt.tm_epo_show_price_inside_option||!n.find("option:selected").attr("data-text")||("yes"===Yt.tm_epo_auto_hide_price_if_zero&&!1===a.tmempty(n.find("option:selected").data("price"))||"yes"!==Yt.tm_epo_auto_hide_price_if_zero&&""!==n.find("option:selected").attr("data-price"))&&(r="",n.find("option:selected").html(n.find("option:selected").attr("data-text")+" ("+r+t+")")),""===n.val()?i.addClass("tm-hidden"):n.find("option:selected").attr("data-tm-tooltip-html")?i.removeClass("tm-hidden"):i.addClass("tm-hidden"))}).off("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math").on("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math",function(t){var e,i,o,r,n,d=a(this);d.is(".tc-epo-field-product")||T&&void 0!==T.data("per_product_pricing")&&!T.data("per_product_pricing")||(e=d.closest(".tmcp-field-wrap").find(".tc-tooltip"),i=d.closest(".tmcp-field-wrap").find(".tc-inline-description"),e.length>0&&e.attr("data-tm-tooltip-html",d.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),i.length>0&&(d.find("option:selected").attr("data-tm-tooltip-html")?i.html(d.find("option:selected").attr("data-tm-tooltip-html")):i.html("")),"yes"===Yt.tm_epo_show_price_inside_option&&d.find("option").each(function(){if(!(o=a(this)).val())return!0;"tm-select-change-html-all"===t.type?(o.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),nt(c,d,void 0,o,1)):"tm-math-select-change-html-all"===t.type?nt(c,d,void 0,o,1,!0):"tm-select-change-html-all-math"===t.type&&(o.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),nt(c,d,void 0,o,1,!0)),r=1,"yes"!==Yt.tm_epo_multiply_price_inside_option&&(r=d.data("tm-quantity")),r||(r=1),n=l(o.data("price")/r,v,!0,!1,d),"0"!==o.attr("data-hide-amount")&&"yes"!==Yt.tm_epo_show_price_inside_option_hidden_even||!o.attr("data-text")||("yes"===Yt.tm_epo_auto_hide_price_if_zero&&!1===a.tmempty(o.data("price"))||"yes"!==Yt.tm_epo_auto_hide_price_if_zero&&""!==o.attr("data-price"))&&o.html(o.attr("data-text")+" ("+n+")")}),""===d.val()?e.addClass("tm-hidden"):d.find("option:selected").attr("data-tm-tooltip-html")?e.removeClass("tm-hidden"):e.addClass("tm-hidden"))}).off("tm-select-change").on("tm-select-change",function(){var t=a(this);t.is(".tc-epo-field-product")||T&&void 0!==T.data("per_product_pricing")&&!T.data("per_product_pricing")||(t.trigger("tm-select-change-html"),t.trigger("tm-select-change-html-all"),y.trigger({type:"tm-epo-update",norules:1,element:t}))}),g.off("focus.cpf",".tm-quantity .tm-qty").on("focus.cpf",".tm-quantity .tm-qty",function(){var t=a(this),e=t.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(t.val()),o=parseFloat(t.attr("max")),r=parseFloat(t.attr("min")),n=t.attr("step"),c=Q(e,!1),l=Z(e,!1),d=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(d=!1),c&&l&&d?t.data("tm-prev-value",i):t.data("tm-prev-value",r)}).off("change.cpf",".tm-quantity .tm-qty").on("change.cpf",".tm-quantity .tm-qty",function(t,e){var i=a(this),o=i.closest(".tmcp-field-wrap").find(".tm-epo-field"),r=parseFloat(i.val()),n=parseFloat(i.attr("max")),l=parseFloat(i.attr("min")),d=i.attr("step"),s=Q(o,!1),p=Z(o,!1),m=!0;r&&""!==r&&"NaN"!==r||(r=0),""!==n&&"NaN"!==n||(n=""),""!==l&&"NaN"!==l||(l=0),"any"!==d&&""!==d&&void 0!==d&&"NaN"!==parseFloat(d)||(d=1),(r<l||r>n)&&(m=!1),s&&p&&m?(c.noEpoUpdate?o.data("tm-quantity",i.val()).trigger("change.cpf",e).trigger("change.cpfproduct",e):o.data("tm-quantity",i.val()).trigger("change",e),o.trigger("tm-select-change-html-all")):i.data("tm-prev-value")?i.val(i.data("tm-prev-value")):i.val(l),i.trigger("cpf-changed")}).off("tmaddquantity",".tm-quantity .tm-qty").on("tmaddquantity",".tm-quantity .tm-qty",function(){var t=a(this);t.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",t.val())}),g.find(".tmcp-textfield.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").each(function(){var t=a(this),e=a.epoAPI.template.html(Vt.templateEngine.tc_chars_remanining,{maxlength:t.attr("maxlength"),characters_remaining:Yt.i18n_characters_remaining});t.after(a(e))}),g.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").off("change.tc_maxlen input.tc_maxlen").on("change.tc_maxlen input.tc_maxlen",function(){var t=a(this);t.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(t.attr("maxlength"),10)-parseInt(t.val().length,10))}),g.find(".tm-epo-field").off("tm_trigger_product_image").on("tm_trigger_product_image",function(){var t,e,i,o,r=a(this);r.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")?(e=r.closest(".tmcp-field-wrap").find("label img"),i=r.closest(".cpf-section").is(".tm-epo-variation-section"),t=r,r.is("select.tm-product-image")&&(t=r.children("option:selected")),(a(e).length>0||i&&void 0!==t.attr("data-image")||void 0!==t.attr("data-image")&&""!==t.attr("data-image")||void 0!==t.attr("data-imagep")&&""!==t.attr("data-imagep"))&&(r.is(":checked")||r.is("select.tm-product-image")&&""!==r.val()&&(""!==r.find("option:selected").attr("data-rules")||r.is(".tm-epo-variation-element")))?((o=a(e).first().attr("data-original"))||i||(o=a(e).first().attr("src")),o||(o=t.attr("data-image")),t.attr("data-imagep")&&(o=t.attr("data-imagep")),o?P.trigger("tm_change_product_image",{src:o,element:r,element_current:t,main_product:P,epo_holder:g}):P.trigger("tm_change_product_image",{src:!1,element:r,element_current:t,main_product:P,epo_holder:g})):P.trigger("tm_restore_product_image",{element:r,element_current:t,main_product:P,epo_holder:g})):P.trigger("tm_attempt_product_image",{element:r,element_current:t,main_product:P,epo_holder:g})}),g.find(".tm-quantity").off("showhide.cpfcustom").on("showhide.cpfcustom",function(){var t,e,i,o=a(this),r=o.closest(".tmcp-field-wrap").find(".tm-epo-field"),n=!1;r.is(".tm-epo-variation-element")||(r.is("select")?""!==r.val()&&(n=!0):r.is(":checkbox")?r.is(":checked")&&(n=!0):r.is(":radio")?r.is(":checked")&&(n=!0,"yes"===Yt.tm_epo_show_only_active_quantities&&r.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio").each(function(){a(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()})):r.val()&&(n=!0),e=(t=o.find(".tm-qty")).val(),i=t.attr("min")||"",n?("yes"===Yt.tm_epo_show_only_active_quantities&&o.show(),t.removeClass("ignore").prop("disabled",!1)):("yes"===Yt.tm_epo_show_only_active_quantities&&(o.hide(),e||t.val(i)),t.addClass("ignore").prop("disabled",!0)),setTimeout(function(){o.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200))}),g.find(".tm-epo-field").off("change.cpfcustom").on("change.cpfcustom",function(){a(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),g.find(".tm-epo-field").off("change.cpf").on("change.cpf",function(t,e){var i,o=a(this),r=o.closest(".tmcp-field-wrap"),n=o.closest(".tmcp-ul-wrap");o.is(":checkbox, :radio")&&(o.is(":radio")&&(e||n.find(".tmcp-field-wrap").removeClass("tc-active")),o.is(":checked")?r.addClass("tc-active"):r.removeClass("tc-active")),o.is(".tm-epo-variation-element")||(o.is(".use_images:checkbox, .use_images:radio")&&o.attr("data-imagec")&&(i=r.find(".radio_image,.checkbox_image").first()).length>0&&(o.is(":checked")?i.prop("src",o.attr("data-imagec")):i.prop("src",o.attr("data-image"))),o.is(".use_images:radio")&&o.closest(".cpf-type-radio").find(".use_images:radio").not(o).each(function(){var t=a(this);t.closest(".tmcp-field-wrap").find(".radio_image").first().prop("src",t.attr("data-image"))}),o.is(".tmcp-range")&&o.trigger("change.cpflogic"),o.is("select")?o.trigger("tm-select-change"):(o.is(".tmcp-radio")&&o.closest(".cpf_hide_element").find(".tm-quantity .tm-qty").each(function(){a(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?a(this).prop("disabled",!1):a(this).attr("disabled","disabled")}),y.trigger({type:"tm-epo-update",norules:1,element:o}))),o.trigger("tm_trigger_product_image"),setTimeout(function(){a(".tm-owl-slider").each(function(){a(this).trigger("refresh.owl.carousel")})},200),P.trigger("tm_attempt_product_image",{element:o,main_product:P,epo_holder:g})}),g.find(".tm-epo-field").filter(":checkbox:checked, :radio:checked").each(function(){a(this).closest(".tmcp-field-wrap").addClass("tc-active"),a(this).trigger("change.cpf")}),g.find(".tm-has-clearbutton .tm-epo-field").off("change.cpfclearbutton").on("change.cpfclearbutton cpfclearbutton",function(){var t,e=a(this),i=e.closest(".tmcp-field-wrap");e.is(":checked")&&(t=e.closest(".cpf_hide_element").find(".tm-epo-reset-radio").removeClass("tm-hidden"),i.append(t))}),g.find(".tm-epo-reset-radio").off("click.cpf").on("click.cpf",function(){var t=a(this),e=t.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio:checked");e.length&&(e.prop("checked",!1),e.trigger("change",{forced:1})),t.addClass("tm-hidden")}),_e&&_e.debounce&&g.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield").on("keyup",_e.debounce(function(){a(this).trigger("change.cpf")},10)),g.find(".tm-epo-field.tmcp-upload").off("change.cpfv change.tcupload").on("change.cpfv change.tcupload",function(){var e,i,o=a(this),r=o.closest("label"),n=o.closest(".tmcp-field-wrap"),c=n.find(".cpf-upload-container"),l=n.find(".tm-filename"),d=o.val().replace("C:\\fakepath\\",""),s=o.attr("data-file"),p=t.URL||t.webkitURL,m=this.files[0],_=n.find(".tc-upload-preview");c.length&&l.length<=0&&(l=a('<span class="tm-filename"></span>'),r.after(l)),void 0!==d&&"undefined"!==d||(d=""),l.html(d),(e=g.data("num_uploads"))||(e=[]),""!==d&&(e[o.closest(".cpf_hide_element").attr("data-uniqid")]=d),g.data("num_uploads",e),o.next(".tmcp-upload-hidden").remove(),(d||s)&&"yes"===Yt.tm_epo_upload_inline_image_preview&&p&&p.createObjectURL&&m&&(_.length||(_=a('<div class="tc-upload-preview"></div>'),n.find("label.tm-epo-field-label").after(_)),_.empty(),(i=new Image).onload=function(){var t=this.src;_.html('<img src="'+t+'"></div>')},i.src=s||p.createObjectURL(m))}),F.off("change.cpf").on("change.cpf",function(){var t=a(this);y.trigger("tm-epo-check-dpd"),t.data("tm-prev-value",t.val()),y.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",F.val()),g.find(".cpf-type-product .tc-epo-field-product").off("change.cpfproduct").on("change.cpfproduct",function(t,e){var i,o,r,n,l,d,s,p,m,_,f=a(this),u=f.closest(".cpf_hide_element").find(".tc-epo-element-product-container-wrap"),g=f.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap"),h=g.length>0,v=!1,b=1e3,w=f,x=f.closest(".cpf_hide_element"),k=f.closest(".cpf_hide_element").find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),C=k.filter(":checked");if((!e||2!==e.forced)&&(void 0===t.isTrigger||!f.data("triggeredonce")||e&&e.forced)){if(f.data("triggeredonce",1),f.is(":checkbox")||(b=t.isTrigger),k.is(":radio")||k.is(":checkbox")?C.length>0&&(_=C.closest(".tmcp-field-wrap").find("input.tm-qty")):_=k.closest(".tmcp-field-wrap").find("input.tm-qty"),s=u.find(Vt.associateQtySelector),""!==u.html()&&_&&_.length>0&&0===s.length&&_.val(0),f.is(":checkbox"))if(f.is(".tc-epo-field-product-hidden"))f.is(":checked")?(u.addClass("tc-active-product"),"0"===s.val()&&("0"===s.attr("min")?s.val(1).trigger("change"):s.val(s.attr("min")).trigger("change"))):(u.removeClass("tc-active-product"),s.val(0),s.closest(".tm-quantity-alt").removeClass("tm-hidden"),s.closest(".tm-quantity-alt").find(".single_add_to_cart_product").trigger("cpfqtybutton"),u.find(Vt.associatedEpoCart).trigger("tm-epo-update")),i=f.val(),o=f.attr("data-type"),x.find(".tc-epo-element-product-li-container").removeClass("tm-hidden");else{if(f.is(":checked"))h&&g.removeClass("tm-hidden");else{if(h&&g.addClass("tm-hidden"),!e||!e.forced)return;v=!0}v||(i=f.val(),o=f.attr("data-type"),x.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else if(f.is(":radio")){if(f.is(":checked"))h&&(u.addClass("tm-hidden"),g.removeClass("tm-hidden"));else{if(h&&g.addClass("tm-hidden"),!e||!e.forced)return;v=!0}v||(i=f.val(),o=f.attr("data-type"),x.find(".tc-epo-element-product-li-container").removeClass("tm-hidden")),f.val()&&!f.data("set_initial")&&"0"===s.val()&&("0"===s.attr("min")?s.val(1).trigger("change"):s.val(s.attr("min")).trigger("change"),f.data("set_initial",1))}else{if(!f.is("select"))return;f.val()&&!f.data("set_initial")&&"0"===s.val()&&("0"===s.attr("min")?s.val(1).trigger("change"):s.val(s.attr("min")).trigger("change"),f.data("set_initial",1)),w=r=f.children(":selected"),i=f.val(),o=r.attr("data-type"),x.find(".tc-epo-element-product-li-container").removeClass("tm-hidden")}if(n=f.is(".tc-epo-field-product-checkbox")?g.find(".tc-epo-element-product-container"):x.find(".tc-epo-element-product-container"),l=n.filter('[data-product_id="'+i+'"]'),!i)return n.addClass("tm-hidden"),p=a.epoAPI.util.parseJSON(f.attr("data-rules")),m=a.epoAPI.util.parseJSON(f.attr("data-original-rules")),w.data("associated_price_set",1),w.data("price_set",1),w.data("raw_price",p[0]),w.data("raw_original_price",m[0]),w.data("price",p[0]),w.data("original_price",m[0]),q(w.closest(".tmcp-field-wrap").find(".tc-price").not(Vt.associatedEpoSelector+" .tc-price"),p[0],S(p[0]),m[0],S(m[0])),void F.trigger("change.cpf");0===l.length?(d={action:"wc_epo_get_associated_product_html",product_id:i,mode:x.attr("data-mode"),layout_mode:x.attr("data-product-layout-mode"),uniqid:x.attr("data-uniqid"),name:f.attr("name"),counter:f.attr("data-counter"),quantity_min:x.attr("data-quantity-min"),quantity_max:x.attr("data-quantity-max"),priced_individually:x.attr("data-priced-individually"),discount:x.attr("data-discount"),discount_type:x.attr("data-discount-type"),show_image:x.attr("data-show-image"),show_title:x.attr("data-show-title"),show_price:x.attr("data-show-price"),show_description:x.attr("data-show-description"),show_meta:x.attr("data-show-meta")},x.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a.ajax({url:Yt.ajax_url,type:"POST",data:d,dataType:"json",success:function(t){200===t.result&&(l=a(t.html),h?f.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap").empty().append(l):x.find(".tc-epo-element-product-container-wrap").append(l),Lt(c,P,l,o,f,y,n,b))},complete:function(){x.unblock()}})):(Lt(c,P,l,o,f,y,n,b),l.find(Vt.associateQtySelector).trigger("change"))}}),a(e).off("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product").on("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product",function(){var t=a(this),e=t.closest(".tm-quantity-alt").find(Vt.associateQtySelector),i=t.is(".alt"),o=t.closest(".cpf_hide_element").find(".tc-epo-element-product-container-wrap");t.data("inittriggeredonce")&&(i?(o.addClass("tc-active-product"),"0"===e.val()&&("0"===e.attr("min")?e.val(1).trigger("change"):e.val(e.attr("min")).trigger("change")),t.removeClass("alt").text(t.attr("data-remove"))):(o.removeClass("tc-active-product"),e.val(0).trigger("change"),e.closest(".tm-quantity-alt").removeClass("tm-hidden"),t.addClass("alt").text(t.attr("data-add")))),t.data("inittriggeredonce",1),o.find(Vt.associatedEpoCart).trigger("tm-epo-update")}),a(e).off("change.cpfqtyalt",".cpf-type-product "+Vt.associateQtySelector).on("change.cpfqtyalt",".cpf-type-product "+Vt.associateQtySelector,function(){var t,e,i,o=a(this),r=o.closest(".cpf_hide_element").find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),n=o.closest(".tm-quantity-alt").find(".single_add_to_cart_product"),c=r.filter(":checked");if(e=a.epoAPI.math.toInt(o.attr("min")),i=a.epoAPI.math.toInt(o.attr("max")),r.is(".tc-epo-field-product-hidden")&&r.is(":checkbox")&&(0===c.length&&"0"!==o.val()?(r.prop("checked",!0).trigger("change"),c=r.filter(":checked")):"0"===o.val()&&c.length&&r.prop("checked",!1).trigger("change")),r.is(":radio")||r.is(":checkbox")){if(0===c.length)return;t=c.closest(".tmcp-field-wrap").find("input.tm-qty")}else t=r.closest(".tmcp-field-wrap").find("input.tm-qty");0!==t.length&&(e&&t.attr("min",e),i&&t.attr("max",i),o.closest(".tc-epo-element-product-container").find(Vt.associatedEpoCart).trigger("tm-epo-update"),t.val(o.val()),r.trigger("change.cpfproduct",{forced:2}),n.data("inittriggeredonce")&&("0"===o.val()?n.removeClass("alt"):n.addClass("alt")),n.trigger("cpfqtybutton"))}),y.off("tm-epo-update").on("tm-epo-update",function(t){var e,i,o,s,p,h,b,x,F,C,I,A,E,j,O,D,H,M,U,R,Q,Z,W,$,X,G,V,Y,K,tt,it,rt,dt,st,pt,mt,_t,ft,ut,gt,ht,vt,yt,bt,wt,xt,Ft,kt,Ct,It,Pt,At,St=a(this),qt=!1,Et=0,Tt=!1,jt=0,Ot=0,zt=0,Dt=!1,Nt=1,Bt=!0,Lt=[],Mt=0,Ut=0,Jt={},Rt=0,Qt=!1,Zt=!1,Wt="",$t=!1,Xt=!1,Gt="",Kt="",te=0,ee=0;if((Y=t.epoObject?a.extend(!0,{},t.epoObject):a.extend(!0,{},c))&&!Y.noEpoUpdate){if(e=a.epoAPI.applyFilter("tc_get_bundleid",St.attr("data-product_id"),St),o=v.attr("data-price-override"),i=f(St),s=m(St),Y.associated_connect&&1===Y.associated_connect.length&&(i=parseFloat(Y.main_product.find(Vt.associateQtySelector).not(Vt.associatedEpoSelector+" "+Vt.qtySelector).last().val())),t.stopImmediatePropagation(),qt=a.epoAPI.applyFilter("tcGetCurrentProductPrice",at(v,!0),y,v),Et=qt,Tt=a.epoAPI.applyFilter("tcGetCurrentProductRegularPrice",et(v,!0),y,v),jt=Tt,qt=a.epoAPI.applyFilter("tcCalculateCurrentProductPrice",qt,{epo:Y,alternativeCart:u,cart:St,main_product:P}),Number.isFinite(i)||(v.attr("data-is-sold-individually")||0===_(St).length)&&(i=1),At={qty:i,product_price:Et,original_product_price:jt},v.data("totalsHolder_tc_totals_ob",At),t.norules?t.norules&&(1===t.norules&&nt(Y,t.element),a.tcepo.lateFieldsPrices[N]=[],g.find(".tm-epo-late-field").toArray().forEach(function(t){(t=a(t)).data("price",0),a.tcepo.lateFieldsPrices[N].push({setter:t,price:t.data("tm-price-for-late"),original_price:t.data("tm-original-price-for-late"),bundleid:e,pricetype:ot(Y,t)})})):ct(Y,St),Y.associated_connect&&1===Y.associated_connect.length&&(ht=Y.associated_connect,Y.associated_connect.is("select")&&(ht=Y.associated_connect.find("option:selected"))),!1===qt)return v.empty(),void(Y.associated_connect&&1===Y.associated_connect.length&&q(ht.closest(".tmcp-field-wrap").find(".tc-price").not(Vt.associatedEpoSelector+" .tc-price"),0,"",0,""));Nt=a.epoAPI.applyFilter("tcAlterElementQty",Nt,{epo:Y,alternativeCart:u,currentCart:y,main_product:P}),void 0!==y.data("per_product_pricing")&&(Bt=y.data("per_product_pricing")),Bt=a.epoAPI.applyFilter("tcCalculatePerProductPricing",Bt,{epo:Y,alternativeCart:u,cart:St,main_product:P}),B&&"woocommerce_before_add_to_cart_button"===Yt.tm_epo_totals_box_placement&&("variable"!==w&&"variable-subscription"!==w||v.data("moved_inside")||v.data("moved_inside",1)),de.trigger("tcEpoBeforeOptionPriceCalculation",{epo:Y,alternativeCart:Y,this_product_type:w,cart:St,totalsHolder:v}),"no"===Yt.tm_epo_global_product_element_quantity_sync?(Ot=(gt=Ht(Y,g,".tmcp-field:not(.tc-epo-field-product)",Ot,zt,Lt,Dt)).total,zt=gt.original_total,Lt=gt.floatingBoxData,Dt=gt.showTotal,Ct=gt.elementsLength,te=(gt=Ht(Y,g,".tc-epo-field-product",te,0,Lt,Dt)).total,ee=gt.original_total,Lt=gt.floatingBoxData,Dt=Dt&&gt.showTotal,Ct+=gt.elementsLength,v.data("tm-floating-box-data",Lt)):(Ot=(gt=Ht(Y,g,".tmcp-field",Ot,zt,Lt,Dt)).total,zt=gt.original_total,Lt=gt.floatingBoxData,Dt=gt.showTotal,Ct=gt.elementsLength,v.data("tm-floating-box-data",Lt)),Mt=(gt=Ht(Y,g,".tmcp-fee-field",Mt,Ut,Lt,Dt)).total,Ut=gt.original_total,Lt=gt.floatingBoxData,Dt=gt.showTotal,Ct+=gt.elementsLength,de.trigger("tcEpoAfterOptionPriceCalculation",{epo:Y,alternativeCart:Y,this_product_type:w,cart:St,totalsHolder:v}),a.tcepo.oneOptionIsSelected[N]=Dt,J(P,Ct,a.tcepo.oneOptionIsSelected[N]),Dt=a.epoAPI.applyFilter("tcFinalTotalsBoxVisibility",Dt,{epo:Y,alternativeCart:u,cart:St,main_product:P,totalsHolder:v,this_epo_totals_container:z}),Mt>0&&(Dt=!0),u&&!Bt&&(Dt=!1),"pxq"!==k&&"hide"!==k&&"normal"!==k&&"options"!==k&&"final"!==k&&"hideoptionsifzero"!==k&&"optionsiftotalnotzero"!==k||(Dt=!0),i>1&&(Dt=!0),"variable"!==w&&"variable-subscription"!==w||a.epoAPI.math.toFloat(s)||(Dt=!1),p=Ot,h=zt,b=lt(Y,parseFloat(qt),parseFloat(p+te),parseFloat(h+ee),e,v),"disable"===k&&(Dt=!1),"disable_change"!==k&&"yes"!==Yt.tm_epo_change_variation_price&&"yes"!==Yt.tm_epo_change_original_price||(Dt=!0),Y.is_associated&&!Bt&&(Dt=!1),"yes"===Yt.tm_epo_total_price_as_unit_price&&(i=1),j=parseFloat(qt*i),Yt.extraFee&&(Rt=parseFloat(Yt.extraFee),Number.isFinite(Rt)||(Rt=0)),!1!==(D=a.epoAPI.applyFilter("tcCalculateFinalProductPrice",!1,{alternativeCart:u,product_price:qt,product_total_price:j,v_product_price:Et,tm_set_tax_price:r,main_product:P,totalsHolder:v,cartQty:i}))&&"object"==typeof D&&Object.prototype.hasOwnProperty.call(D,"productPrice")&&Object.prototype.hasOwnProperty.call(D,"productTotalPrice")&&(qt=D.productPrice,j=D.productTotalPrice),p+=b[0],p=a.epoAPI.applyFilter("tc_adjust_options_price_per_unit",p,j),Ot=parseFloat(p*i*Nt),Ot+=te,Ot=a.epoAPI.applyFilter("tc_adjust_options_total_price",Ot,i,Nt,p,te),h+=b[1],h=a.epoAPI.applyFilter("tc_adjust_options_price_per_unit",h,j),zt=parseFloat(h*i*Nt),zt+=ee,zt=a.epoAPI.applyFilter("tc_adjust_options_total_price",zt,i,Nt,h,ee),"1"===o&&parseFloat(Ot)>0&&(qt=0,Et=0,j=parseFloat(qt*i)),j=a.epoAPI.applyFilter("tc_adjust_product_total_price_without_options",j),Ot=a.epoAPI.applyFilter("tcAdjustTotal",Ot,{epo:Y,totalsHolder:v,cart:St,main_product:P}),zt=a.epoAPI.applyFilter("tcAdjustOriginalTotal",zt,{epo:Y,totalsHolder:v,cart:St,main_product:P}),K=Ot=parseFloat(a.epoAPI.applyFilter("tc_adjust_total",Ot,v)),tt=p,dt=Mt=parseFloat(a.epoAPI.applyFilter("tc_adjust_totals_fee",Mt,v)),pt=H=Ot+Mt,it=zt=parseFloat(a.epoAPI.applyFilter("tc_adjust_total",zt,v)),rt=h,st=Ut=parseFloat(a.epoAPI.applyFilter("tc_adjust_totals_fee",Ut,v)),mt=M=zt+Ut,_t=j,ft=parseFloat(j+H+Rt),ut=parseFloat(j+M+Rt),qt=r(qt,v,void 0,void 0,void 0,void 0,!0),j=r(j,v,void 0,void 0,void 0,void 0,!0),Ot=r(Ot,v,void 0,void 0,void 0,void 0,!0),p=r(p,v,void 0,void 0,void 0,void 0,!0),Mt=r(Mt,v,void 0,void 0,void 0,void 0,!0),H=r(H,v,void 0,void 0,void 0,void 0,!0),zt=r(zt,v,void 0,void 0,void 0,void 0,!0),h=r(h,v,void 0,void 0,void 0,void 0,!0),Ut=r(Ut,v,void 0,void 0,void 0,void 0,!0),M=r(M,v,void 0,void 0,void 0,void 0,!0),Rt=r(Rt,v,void 0,void 0,void 0,void 0,!0),x=S(Ot,v,!0,!0),C=S(Mt,v,!0,!0),F=S(zt,v,!0,!0),I=S(Ut,v,!0,!0),U=j,j=parseFloat(j+H+Rt),j=a.epoAPI.applyFilter("tc_adjust_product_total_price",j,H,Rt,Ot,Mt,v),O=parseFloat(j+M+Rt),O=a.epoAPI.applyFilter("tc_adjust_product_total_price",j,M,Rt,zt,Ut,v),A=S(j,v,!0,!0),E=S(O,v,!0,!0),R=S(parseFloat(qt+parseFloat(p)),v,!0,!0),Q=S(parseFloat(qt+parseFloat(h)),v,!0,!0),"yes"===Yt.tm_epo_fees_on_unit_price&&(R=S(parseFloat(qt+parseFloat(p)+parseFloat(parseFloat(Mt)/i)),v,!0,!0),Q=S(parseFloat(qt+parseFloat(h)+parseFloat(parseFloat(Ut)/i)),v,!0,!0)),"pxq"===k||"final"===k||"hide"===k||0===H&&"hideoptionsifzero"===k||(0===Ot&&"hideoptionsifzero"===k&&"options"!==k||(Qt=!0),0!==Mt&&(Zt=!0)),Rt&&($t=!0,Wt=S(Rt,v,!0,!0)),A&&"options"!==k&&"optionsiftotalnotzero"!==k&&(Xt=!0),R=a.epoAPI.applyFilter("tc_adjust_formatted_unit_price",R,qt,p,Mt,i),x=a.epoAPI.applyFilter("tc_adjust_formatted_options_total",x,Ot,p,i),C=a.epoAPI.applyFilter("tc_adjust_formatted_fees_total",C,Mt),A=a.epoAPI.applyFilter("tc_adjust_formatted_final_total",A,j,U,H,Rt,i),R=a.epoAPI.applyFilter("tcAdjustFormattedUnitPrice",R,{epo:Y,totalsHolder:v,event:t,productPrice:qt,_total:p,total_plcart_fee_options_totals_fee:Mt,cartQty:i}),Q=a.epoAPI.applyFilter("tcAdjustFormattedUnitOriginalPrice",Q,{epo:Y,totalsHolder:v,event:t,productPrice:qt,_original_total:h,total_plcart_fee_options_totals_fee:Mt,cartQty:i}),x=a.epoAPI.applyFilter("tcAdjustFormattedOptionsTotal",x,{epo:Y,totalsHolder:v,event:t,total:Ot,_total:p,total_plus_fee:H,extraFee:Rt,cartQty:i}),F=a.epoAPI.applyFilter("tcAdjustFormattedOptionsOriginalTotal",F,{epo:Y,totalsHolder:v,event:t,original_total:zt,_original_total:h,original_total_plus_fee:M,extraFee:Rt,cartQty:i}),C=a.epoAPI.applyFilter("tcAdjustFormattedFeesTotal",C,{epo:Y,totalsHolder:v,event:t,cart_fee_options_total:Mt,extraFee:Rt,cartQty:i}),I=a.epoAPI.applyFilter("tcAdjustFormattedFeesOriginalTotal",I,{epo:Y,totalsHolder:v,event:t,cart_fee_options_original_total:Ut,extraFee:Rt,cartQty:i}),A=a.epoAPI.applyFilter("tcAdjustFormattedFinalTotal",A,{epo:Y,totalsHolder:v,event:t,product_total_price:j,product_total_price_without_options:U,total_plus_fee:H,extraFee:Rt,cartQty:i}),E=a.epoAPI.applyFilter("tcAdjustFormattedFinalOriginalTotal",E,{epo:Y,totalsHolder:v,event:t,product_total_original_price:O,product_total_price_without_options:U,original_total_plus_fee:M,extraFee:Rt,cartQty:i}),Jt={qty:i,product_price:qt,raw_product_price:Et,product_regular_price:Tt,raw_product_regular_price:jt,late_total_prices:b,late_total_price:r(b[0],v),late_total_original_price:r(b[1],v),raw_options_price_per_unit:tt,raw_options_total_price:K,raw_cart_fee_options_total_price:dt,raw_total_plus_fee:pt,raw_options_original_price_per_unit:rt,raw_options_original_total_price:it,raw_cart_fee_options_original_total_price:st,raw_original_total_plus_fee:mt,raw_product_total_price:ft,raw_product_total_original_price:ut,raw_product_total_price_without_options:_t,options_price_per_unit:p,options_total_price:Ot,cart_fee_options_total_price:Mt,total_plus_fee:H,options_original_price_per_unit:h,options_original_total_price:zt,cart_fee_options_total_original_price:Ut,original_total_plus_fee:M,product_total_price:j,product_total_original_price:O,product_total_price_without_options:U,formatted_unit_price:R,formatted_options_total:x,formatted_fees_total:C,formatted_final_total:A,formatted_unit_original_price:Q,formatted_options_original_total:F,formatted_fees_original_total:I,formatted_final_original_total:E,formatted_extra_fee:Wt,show_options_total:Qt,show_fees_total:Zt,show_extra_fee:$t,show_final_total:Xt,unit_price:Yt.i18n_unit_price,show_unit_price:"yes"===Yt.tm_epo_show_unit_price,options_total:Yt.i18n_options_total,fees_total:Yt.i18n_fees_total,extra_fee:Yt.i18n_extra_fee,final_total:Yt.i18n_final_total},x&&Ot>0&&(It=n(Ot),Pt=n(zt),It=a.epoAPI.applyFilter("tcFilterFormattedFTotal",It,{epo:Y,totalsHolder:v,event:t,total:Ot,_total:p,total_plus_fee:H,extraFee:Rt,cartQty:i}),Pt=a.epoAPI.applyFilter("tcFilterFormattedFOriginalTotal",Pt,{epo:Y,totalsHolder:v,event:t,original_total:zt,total:zt,_total:p,total_plus_fee:H,extraFee:Rt,cartQty:i}),Ot!==zt?(Jt.formatted_options_total=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_sale_price,{price:Pt,sale_price:It,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt})),Jt._foriginal_total=Pt,Jt._ftotal=It):Jt.formatted_options_total=a.epoAPI.util.decodeHTML(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_price,{price:It,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt})))),A&&j>=0&&(X=n(j),G="1"===o&&parseFloat(mt+Rt)>0?parseFloat(mt+Rt):parseFloat(parseFloat(jt*i)+mt+Rt),Yt.customer_price_format&&(Gt=Yt.customer_price_format_wrap_start,Kt=Yt.customer_price_format_wrap_end,X=(V=Yt.customer_price_format).replace("__PRICE__",X).replace("__CODE__",Yt.current_currency),v.data("is-on-sale")||(G=V.replace("__PRICE__",G).replace("__CODE__",Yt.current_currency))),X=a.epoAPI.applyFilter("tc_adjust_native_price",X,j),G=n(G=r(G,v,void 0,void 0,void 0,void 0,!0)),G=a.epoAPI.applyFilter("tc_adjust_native_regular_price",G,j),v.data("is-on-sale")||Ot!==zt?Jt.formatted_final_total=a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_sale_price,{price:G,sale_price:X,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt})):Jt.formatted_final_total=a.epoAPI.util.decodeHTML(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_price,{price:X,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt}))),Jt._f_regular_price=G,Jt._fprice=X),Jt=a.epoAPI.applyFilter("tc_adjust_tc_totals_ob",Jt,{epo_object:Y,showTotal:Dt,epoHolder:g,totalsHolder:v,tm_set_price:l,tm_set_price_totals:S,product_total_price:j,product_price:qt,qty:i}),Y.tc_totals_ob=Jt,void 0!==Jt.showTotal&&(Dt=Jt.showTotal),Z=a.epoAPI.template.html(Vt.templateEngine.tc_final_totals,Jt),v.data("tm-html",Z),v.data("tc_totals_ob",Jt),Y.associated_connect&&1===Y.associated_connect.length&&("1"===Y.associated_connect.attr("data-no-price")?(vt=0,yt=0,bt=0,wt=0,xt="",Ft="",q(ht.closest(".tmcp-field-wrap").find(".tc-price").not(Vt.associatedEpoSelector+" .tc-price"),vt,xt,bt,Ft)):(vt=Jt.product_price+Jt.options_price_per_unit+Jt.cart_fee_options_total_price/Jt.qty,yt=Jt.raw_product_price+Jt.raw_options_price_per_unit+Jt.raw_cart_fee_options_total_price/Jt.qty,bt=Jt.product_regular_price+Jt.options_original_price_per_unit+Jt.cart_fee_options_total_original_price/Jt.qty,wt=Jt.raw_product_regular_price+Jt.raw_options_original_price_per_unit+Jt.raw_cart_fee_options_original_total_price/Jt.qty,xt=l(vt,Y.this_epo_totals_containe,!1,!1,ht),Ft=l(bt,Y.this_epo_totals_containe,!1,!1,ht),q(ht.closest(".tmcp-field-wrap").find(".tc-price").not(Vt.associatedEpoSelector+" .tc-price"),vt,xt,bt,Ft),Y.associated_connect.data("tm-quantity",Jt.qty),Y.associated_connect.data("tm-quantity")&&(vt*=parseFloat(Y.associated_connect.data("tm-quantity")),yt*=parseFloat(Y.associated_connect.data("tm-quantity")),bt*=parseFloat(Y.associated_connect.data("tm-quantity")),wt*=parseFloat(Y.associated_connect.data("tm-quantity"))),xt=l(vt,Y.this_epo_totals_containe,!1,!1,ht),Ft=l(bt,Y.this_epo_totals_containe,!1,!1,ht)),Y.associated_connect.data("price_set",1),ht.data("associated_price_set",1),ht.data("price_set",1),ht.data("raw_price",yt),ht.data("raw_original_price",wt),ht.data("price",r(vt,Y.this_epo_totals_containe,ht)),ht.data("original_price",r(bt,Y.this_epo_totals_containe,ht)),Y.associated_connect.data("price-changed",1),setTimeout(function(){Y.mainEpoObject.main_cart.trigger({type:"tm-epo-update",norules:2})},20)),de.trigger("tcEpoAfterCalculateTotals",{epo:Y,alternativeCart:u,this_product_type:w,cart:St,bundleid:e,totalsObject:Jt,main_product:P,per_product_pricing:Bt}),W=a.epoAPI.applyFilter("hide_native_price",!0),Dt&&i>0?("disable_change"!==k&&"yes"!==Yt.tm_epo_change_variation_price||(!0===W&&"disable"!==k&&"disable_change"!==k?L(St).hide():L(St).show()),"disable"===k||"disable_change"===k||("hideifoptionsiszero"===k||"optionsiftotalnotzero"===k)&&0===H||"hide"===k?(Z="",v.html(Z)):(v.html(Z),de.trigger("tc-totals-container",{epo:Jt,totals_holder:v,data:{epo_object:Y,tm_set_price:l,tm_set_price_totals:S,product_total_price:j,product_price:qt,qty:i},tm_epo_js:Yt})),A&&j>=0&&($=L(St),"disable_change"!==k&&"yes"!==Yt.tm_epo_change_variation_price||(v.data("is-on-sale")?$.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_sale_price,{price:G,sale_price:X,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt}))).show():$.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_price,{price:X,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt}))).show()),"disable_change"!==k&&"yes"!==Yt.tm_epo_change_original_price||(kt=Y.associated_connect?Y.main_product.find(Vt.associatedNativeProductPriceSelector):a(Vt.nativeProductPriceSelector),u&&0!==P.find(".cpf-bto-price").length||(void 0===kt.data("tc-original-html")&&kt.data("tc-original-html",kt.html()),j>0?!v.data("is-on-sale")||"1"===o&&parseFloat(M+Rt)>0?kt.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_price,{price:X,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt}))).show():kt.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Vt.templateEngine.tc_formatted_sale_price,{price:G,sale_price:X,customer_price_format_wrap_start:Gt,customer_price_format_wrap_end:Kt}))).show():w&&"composite"!==w&&(Y.associated_connect?kt.html(a.epoAPI.util.decodeHTML(Yt.assoc_current_free_text)):kt.html(a.epoAPI.util.decodeHTML(Yt.current_free_text)))),de.trigger("tcEpoMaybeChangePriceHtml",{epo:Y,alternativeCart:u,this_product_type:w,cart:St,bundleid:e,totalsObject:Jt,main_product:P,nativePrice:X}))),u?T.trigger({type:"tm-epo-update",norules:1}):z.data("is_active",!0)):(Y.associated_connect&&(kt=Y.main_product.find(Vt.associatedNativeProductPriceSelector)).html(kt.data("tc-original-html")),L(St).each(function(){var t=a(this);t.data("tm-original-html")?t.html(t.data("tm-original-html")):t.data("tm-original-html",t.html())}),0===Et&&"yes"===Yt.tm_epo_remove_free_price_label?L(St).hide():"disable_change"!==k&&"yes"!==Yt.tm_epo_change_variation_price||!0===W&&"disable"!==k&&"disable_change"!==k||L(St).show(),v.empty(),u&&T.trigger({type:"tm-epo-update",norules:1})),T.trigger("tm-epo-after-update",{container:d}),de.trigger("tc-epo-after-update",{epo:Jt,totals_holder:v,data:{epo_object:Y,add_late_fields_prices:lt,tm_set_price:l,tm_set_price_totals:S,product_total_price:j,product_price:qt,qty:i,bundleid:e,currentCart:y},tm_epo_js:Yt})}}),"variable"!==w&&"variable-subscription"!==w||((C=g.find(".tm-epo-variation-section").first()).find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(){var t=a(this),e=a.epoAPI.dom.id(t.attr("data-tm-for-variation")),i=t.closest(".cpf-type-variations"),o=t.closest(".cpf_hide_element").find(".tm-epo-variation-element"),r=t.closest(".cpf_hide_element").find(".tmcp-field-wrap");o.prop("checked",!1),r.removeClass("tc-active"),x.find("[data-attribute_name='attribute_"+e+"']").val("").trigger("change"),x.find("[data-attribute_name='attribute_"+e+"']").trigger("focusin"),P.find(".cpf-type-variations").not(i).each(function(t,e){x.find("[data-attribute_name='attribute_"+a.epoAPI.dom.id(a(e).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))+"']").trigger("focusin")}),t.trigger("blur"),x.trigger("woocommerce_update_variation_values_tmlogic")}),C.find("input.tm-epo-variation-element,input.tm-epo-variation-element + span").off("mouseup.cpfv").on("mouseup.cpfv",function(){var t,e=a(this);e.is("span")&&(e=e.prev("input")),e.attr("disabled")&&x.find(".reset_variations").trigger("click"),t=a.epoAPI.dom.id(e.attr("data-tm-for-variation")),x.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin")}),C.off("click."+$+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations").on("click."+$+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations",{_epoObject:c},function(t){var e;"disable_change"!==k&&"yes"!==Yt.tm_epo_change_original_price||u&&0!==P.find(".cpf-bto-price").length||(e=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Vt.associatedNativeProductPriceSelector):a(Vt.nativeProductPriceSelector)).data("tc-original-html")&&e.html(e.data("tc-original-html")),x.find(".variations .reset_variations, .tc-epo-element-variable-reset-variations").first().trigger("click")}),C.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(t){var e,i=a(this),o=a.epoAPI.dom.id(i.attr("data-tm-for-variation")),r=i.val(),n=i.closest(".cpf-type-variations"),c=x.find("[data-attribute_name='attribute_"+o+"']");t&&t.type&&"tm_epo_variation_element_change"===t.type||(e=!1,c.each(function(){if(this.value===r)return e=!0,!1}),e||c.trigger("focusin"),c.val(r).trigger("change")),r||c.trigger("focusin"),P.find(".cpf-type-variations").not(n).each(function(){x.find("#"+a.epoAPI.dom.id(a(this).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))).trigger("focusin")}),i.trigger("blur"),x.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){var t,e=a(this);e.is("select")&&(t=a.epoAPI.dom.id(e.attr("data-tm-for-variation")),x.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin"),x.trigger("woocommerce_update_variation_values_tmlogic"))}),x.off(X+"found_variation.tmepo tm_fix_stock",".single_variation_wrap").on(X+"found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(){D(a(this),d)}),x.off(X+"found_variation.tmepo").on(X+"found_variation.tmepo",function(t,e){var i=a(this);v.data("is-on-sale",e.tc_is_on_sale),v.data("regular-price",A(e.display_regular_price,v)),de.trigger("tm-epo-found-variation",{epo:c,totalsHolder:v,totalsHolderContainer:h,currentCart:y,variationForm:i,variation:e}),Bt({epoHolder:g,totalsHolder:v,totalsHolderContainer:h,currentCart:y,variationForm:i,variation:e}),D(i,d)}).off(X+"hide_variation.tmepo").on(X+"hide_variation.tmepo",{_epoObject:c},function(t){var e;"disable_change"!==k&&"yes"!==Yt.tm_epo_change_original_price||u&&0!==P.find(".cpf-bto-price").length||(e=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Vt.associatedNativeProductPriceSelector):a(Vt.nativeProductPriceSelector)).data("tc-original-html")&&e.html(e.data("tc-original-html")),v.data("price",!1),v.removeData("tcprice"),y.trigger({type:"tm-epo-update",norules:2})}).off(X+"check_variations.tmepo").on(X+"check_variations.tmepo",function(){var t={},e=0,i=C.find(".reset_variations");x.find(".variations select, .tc-epo-variable-product-selector").each(function(){var i=a(this).data("attribute_name")||a(this).attr("name"),o=a(this).val()||"";o.length>0&&e++,t[i]=o}),e>0?"hidden"===i.css("visibility")&&i.css("visibility","visible").hide().fadeIn():i.css("visibility","hidden")}).trigger(X+"check_variations"),yt(c,d,W,P,g)),g.find("select.tm-epo-field").trigger("tm-select-change-html"),g.find(".tm-quantity .tm-qty").trigger("change.cpf",{init:1}),g.find(".tm-quantity").trigger("showhide.cpfcustom"),g.find(".tm-has-clearbutton .tm-epo-field:checked").trigger("cpfclearbutton"),dt(c),de.on("tm-do-epo-update",function(){y.trigger({type:"tm-epo-update"})}),de.trigger("tm-epo-init-events",{epo:{epo_id:U,form:c.form,currentCart:y,cart_container:d,epo_holder:g,totals_holder_container:h,totals_holder:v,main_cart:T,main_epo_inside_form:B,product_id_selector:R,epo_id_selector:M,product_id:I,this_epo_container:j,this_totals_container:O,this_epo_totals_container:z}}),de.trigger("epoEventHandlers",{epo:c,currentCart:y,cartContainer:d,qtyElement:F,epoHolder:g,totalsHolderContainer:h,totalsHolder:v,variationForm:x,variation_id_selector:b,main_epo_inside_form:B,this_product_type:w,get_price_excluding_tax:o,get_price_including_tax:i}),"disable"!==k&&"disable_change"!==k&&"hide"!==k&&h.addClass("tc-show"),de.trigger("epo_options_before_visible"),"yes"===Yt.tm_epo_progressive_display?setTimeout(function(){g.css("opacity",0).addClass("tc-show").animate({opacity:1},Vt.epoAnimationDelay,"easeOutExpo",function(){de.trigger("epo_options_visible"),de.trigger("tmlazy")})},Vt.epoDelay):(g.addClass("tc-show"),de.trigger("epo_options_visible"),de.trigger("tmlazy")),P.addClass("tc-init")}function Ut(t){var e=t.variations_form,i=t.main_cart,o=t.this_epo_container,r=t.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";e.off(r).on(r,function(){e.data("epo_loaded")||(k(o),C(o),a.tcepo.lateFieldsPrices[t.epoEventId]=[],Mt(t),ut(t),St(t),t.noEpoUpdate=!1,setTimeout(function(){x(o),i.trigger({type:"tm-epo-update",rules:"init"})},10),e.data("epo_loaded",!0))}),ce&&e.trigger(r),de.trigger("epo-after-init",{epo:t})}function Jt(t){var e=requestAnimationFrame(function(){Jt(t)}),a=t.variations_form,i=a.data("bound"),o=t.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";i&&(cancelAnimationFrame(e),Ut(t),a.trigger(o))}function Rt(t,e,i,o,r){var n=a.extend(!0,{},t),c=o.attr("data-product-id"),l=o.attr("data-epo-id"),d=".tm-product-id-"+c,s="[data-epo-id='"+l+"']",p="p"+c+"e"+l;t.isManual=!0,a.tcepo.formSubmitEvents[p]=[],a.tcepo.errorObject[p]=!1,a.tcepo.initialActivation[p]=!1,t.product_id=c,t.product_id_selector=d,t.epo_id=l,t.epo_id_selector=s,t.epoEventId=p,t.noEpoUpdate=!0,t.thisForm=e,st(),r.find(".tm-collapse").tmtoggle(),r.find(".tm-section-link").tmsectionpoplink(),Ot(e),Et(e),pt(e),mt(o.find(".tm-color-picker")),_t(o.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image")),k(o),C(o),x(o),a.tcToolTip(e.find(".tm-tooltip")),Mt(t,e,i),t.noEpoUpdate=!1,i.trigger({type:"tm-epo-update",norules:2}),setTimeout(function(){t.main_cart.trigger({type:"tm-epo-update",epoObject:n,norules:1})},200),D(i,e)}function Qt(e,i,o,r,n,c,l){var d,s,p,m,_,f,u,g,h,v=!1,y=!1,b=!1,w=void 0!==o,F=!1,I=a(".variation_form_section .variations-table").length>0,P=!1;return!(!(e=a(e)).is(".tc-init")||l)||(pe=i?e:a(t),de.trigger("tm-epo-init-start"),w||e.is(".product")&&(F=!0,w=le.find(Vt.epoSelector).length),w||"no"!==Yt.tm_epo_enable_final_total_box_all||e.is(".tm-no-options-composite")?(F&&(de.trigger("tm-epo-init-no-options"),!e.is(".product")||e.is(".tm-no-options-pxq")||e.is(".tm-no-options-composite")||(e=le)),o||((s=e.find(Vt.addToCartSelector).last()).length>0?o=s.val():(s=a(".tc-totals-form.tm-totals-form-main"),o=s.attr("data-product-id")),o||(o="")),r||(r=parseInt(e.find("input.tm-epo-counter").last().val(),10),Number.isFinite(r)||(r="")),p=".tm-product-id-"+o,m="[data-epo-id='"+r+"']",_=a(".tc-extra-product-options"+p+m),f=a(".tc-totals-form"+p+m),u=a(".tc-epo-totals"+p+m),h=e.find(".variations_form").not(".composite_component .variations_form").first(),d="p"+o+"e"+r,h&&h.attr("data-product_id")&&h.attr("data-product_id")!==o&&(h=e.find(".variations_form[data-product_id='"+o+"']")),0===(v=H(e,e,"form",o)).length&&(e.is(".tc-shortcode-wrap")?v=H(f,f,".tc-totals-form",o):e.is(".tc-epo-element-product-container")&&(0===(v=e.find(Vt.associatedEpoCart)).length&&0===(v=_.parent(Vt.associatedEpoSelector)).length&&(v=e.find(".tc-epo-element-product-container-right")),P=!0)),P&&0===h.length&&e.is(".variations_form")&&(h=e),a.tcepo.formSubmitEvents[d]=[],a.tcepo.errorObject[d]=!1,a.tcepo.initialActivation[d]=!1,v.find(Vt.epoSelector).length>0&&(y=!0),v.find(".tc-totals-form").length>0&&(b=!0),b||(a.tcepo.formSubmitEvents[d][a.tcepo.formSubmitEvents[d].length]={trigger:function(){return!0},on_true:function(){var t=a(".tc-totals-form.tm-product-id-"+o+"[data-epo-id='"+r+"']").tcClone(),e=a('<div class="tm-hidden tm-formepo-normal"></div>');return v.find(".tm-formepo-normal").remove(),e.append(t),v.append(e),!0},on_false:function(){setTimeout(function(){a(".tm-formepo-normal").remove()},100)}}),y||(a.tcepo.formSubmitEvents[d][a.tcepo.formSubmitEvents[d].length]={trigger:function(){return!0},on_true:function(){var t=a(Vt.epoSelector+".tm-product-id-"+o+"[data-epo-id='"+r+"']").tcClone().addClass("formepo"),e=a('<div class="tm-hidden tm-formepo"></div>');return v.find(".tm-formepo").remove(),e.append(t),v.append(e),!0},on_false:function(){setTimeout(function(){a(".tm-formepo").remove()},100)}}),g={main_product:e,main_cart:v,epo_id:r,form:B(e),main_epo_inside_form:y,product_id_selector:p,epo_id_selector:m,product_id:o,this_epo_container:_,this_totals_container:f,this_epo_totals_container:u,qtySelector:Vt.qtySelector,manualInitEPO:Rt,epoEventId:d,variations_form:h,has_epo:w,is_quickview:i,is_associated:P,is_epo_shortcode:_.is(".tc-shortcode"),mainEpoObject:c,associated_connect:n,noEpoUpdate:!0},a(g.form).data("epo_object",g),v.data("product_id",o).data("epo_id",r).data("product_id_selector",p).data("epo_id_selector",m),ht(g),gt(g),Ot(_),Et(_),M(),a.tcToolTip(_.find(".tm-tooltip")),_.find(".tm-collapse").tmtoggle(),_.find(".tm-section-link").tmsectionpoplink(),l&&_.addClass("reactivate"),h.length>0?(l&&h.data("epo_loaded",!1),u.data("price",!1),I?Jt(g):Ut(g)):(setTimeout(function(){k(_),C(_),x(_),a.tcepo.lateFieldsPrices[d]=[],Mt(g),ut(g),St(g),de.trigger("epo-after-init-in-timeout",{epo:g}),v.trigger("tm-epo-check-dpd"),g.noEpoUpdate=!1,v.trigger({type:"tm-epo-update",rules:"init"})},20),de.trigger("epo-after-init",{epo:g})),st(),pt(_),mt(_.find(".tm-color-picker")),_t(_.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image")),vt(g),qt(g),P||(U(u,i,v),Nt(g),J(e,g,a.tcepo.oneOptionIsSelected[d])),de.on("cpflogicdone",function(){dt(g)}),de.trigger("tm-epo-init-end",{epo:g}),g):void de.trigger("tm-epo-init-end-no-options"))}function Zt(t,e){var i=a(t),o=i.attr("data-product-id"),r=i.attr("data-epo-id"),n=i.parent();n.is("form")||(n=i.closest("form")).is("form")||(n=i.parent()),Qt(n=n.parent(),!1,o,r,void 0,void 0,e)}function Wt(){var e,i;"no"===Yt.tm_epo_no_lazy_load&&a.extend(a.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:a.lazyLoadXT.updateEvent+" tmlazy"}),(e=a(".tm-no-options-pxq, .tm-no-options-composite")).length>0&&e.each(function(t,e){Qt(a(e),!1)}),setTimeout(function(){try{(i=a(Vt.epoSelector).not(Vt.associatedEpoSelector+" "+Vt.epoSelector+", .tm-no-options-pxq, .tm-no-options-composite, .wc-product-table "+Vt.epoSelector)).length>0&&i.each(function(){var t,e=a(this),i=e.attr("data-product-id"),o=e.attr("data-epo-id"),r=!1,n=!1;0===(t=e.closest(".tc-after-shop-loop.tm-has-options")).length?0===(t=a(Vt.addToCartSelector+"[value='"+i+"']").closest("form,.cart").first().parent()).length&&0===(t=a(Vt.tcAddToCartSelector+"[value='"+i+"']").closest("form,.cart").first().parent()).length&&0===(t=e.closest("form,.cart").first().parent(".tm-has-options")).length&&(e.is(".tc-shortcode")&&(t=e.wrap('<div class="tc-shortcode-wrap tc-wrap-'+o+'"></div>'),t=e.parent()),t.length>0&&(n=!0)):n=!0,t.length>0&&(n&&(r=!0,e.closest("form,.cart").first().append(a('<input name="add-to-cart" value="'+i+'" type="hidden" />')),e.closest("form,.cart").first().append(a('<input type="hidden" value="" class="variation_id" name="variation_id">'))),t.is("form")&&(t=t.parent()),Qt(t,r,i,o))})}catch(e){t.console.log(e),$t=e}},1)}var $t,Xt,Gt,Vt={},Yt=t.TMEPOJS,Kt=t.wp,te=t.TMEPOQTRANSLATEXJS,ee=t.noUiSlider,ae=t.ClipboardEvent,ie=t.DataTransfer,oe=[],re=[],ne=!1,ce=!1,le=a("body"),de=a(t),se=a(e),pe=a(t),me=t.tcmexp,_e=t._;Yt&&Kt&&("no"===Yt.tm_epo_no_lazy_load&&a.lazyLoadXT&&a.extend(a.lazyLoadXT,{autoInit:!1,updateEvent:a.lazyLoadXT.updateEvent+" tmlazy"}),Vt.localInputDecimalSeparator=""===Yt.tm_epo_global_input_decimal_separator?Yt.currency_format_decimal_sep:a.epoAPI.locale.getSystemDecimalSeparator(),Vt.localDecimalSeparator=""===Yt.tm_epo_global_displayed_decimal_separator?Yt.currency_format_decimal_sep:a.epoAPI.locale.getSystemDecimalSeparator(),Vt.localThousandSeparator=""===Yt.tm_epo_global_displayed_decimal_separator?Yt.currency_format_thousand_sep:a.epoAPI.locale.getSystemDecimalSeparator(),Vt.epoDelay=Yt.tm_epo_start_animation_delay?Yt.tm_epo_start_animation_delay:t.tc_epo_delay?t.tc_epo_delay:500,Vt.epoAnimationDelay=Yt.tm_epo_animation_delay?Yt.tm_epo_start_animation_delay:t.tc_epo_animation_delay?t.tc_epo_animation_delay:500,Vt.getElementFromFieldCache=[],Vt.epoSelector=".tc-extra-product-options",Vt.associatedEpoSelector=".tc-extra-product-options-inline",Vt.associatedEpoCart=".tc-epo-element-product-container-cart",Vt.addToCartSelector="input[name='add-to-cart']",Vt.tcAddToCartSelector="input.tc-add-to-cart",Vt.qtySelector="input.qty,input[name='quantity'],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount",Vt.associateQtySelector="input.tm-qty-alt",Vt.addToCartButtonSelector=".add_to_cart_button, .single_add_to_cart_button",Vt.compositeSelector=".bto_item,.component",Vt.nativeProductPriceSelector=".woocommerce div.product p.price",Vt.associatedNativeProductPriceSelector=".product-price span.price",Vt.templateEngine=a.epoAPI.applyFilter("tc_adjust_templateEngine",{price:Kt.template("tc-price"),sale_price:Kt.template("tc-sale-price"),tc_chars_remanining:Kt.template("tc-chars-remanining"),tc_final_totals:Kt.template("tc-final-totals"),tc_floating_box:Kt.template("tc-floating-box"),tc_floating_box_nks:Kt.template("tc-floating-box-nks"),tc_formatted_price:Kt.template("tc-formatted-price"),tc_formatted_sale_price:Kt.template("tc-formatted-sale-price"),tc_lightbox:Kt.template("tc-lightbox"),tc_lightbox_zoom:Kt.template("tc-lightbox-zoom"),tc_section_pop_link:Kt.template("tc-section-pop-link"),tc_upload_messages:Kt.template("tc-upload-messages")}),a.tcAPI=function(){return Vt},a.tcAPIGet=function(t){return Vt[t]},a.tcAPISet=function(t,e){Vt[t]=e},a.tc_validator&&a.extend(a.tc_validator.messages,{required:Yt.tm_epo_global_validator_messages.required,email:Yt.tm_epo_global_validator_messages.email,url:Yt.tm_epo_global_validator_messages.url,number:Yt.tm_epo_global_validator_messages.number,digits:Yt.tm_epo_global_validator_messages.digits,maxlengthsingle:a.tc_validator.format(Yt.tm_epo_global_validator_messages.maxlengthsingle),maxlength:a.tc_validator.format(Yt.tm_epo_global_validator_messages.maxlength),minlengthsingle:a.tc_validator.format(Yt.tm_epo_global_validator_messages.minlengthsingle),minlength:a.tc_validator.format(Yt.tm_epo_global_validator_messages.minlength),max:a.tc_validator.format(Yt.tm_epo_global_validator_messages.max),min:a.tc_validator.format(Yt.tm_epo_global_validator_messages.min),step:a.tc_validator.format(Yt.tm_epo_global_validator_messages.step),lettersonly:a.tc_validator.format(Yt.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:a.tc_validator.format(Yt.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:a.tc_validator.format(Yt.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:a.tc_validator.format(Yt.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:a.tc_validator.format(Yt.tm_epo_global_validator_messages.alphanumericunicodespace)}),a.tc_validator&&(a.tc_validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^[a-zA-Z0-9.-]+$/i.test(t)},a.tc_validator.messages.alphanumeric),a.tc_validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},a.tc_validator.messages.lettersonly),a.tc_validator.addMethod("lettersspaceonly",function(t,e){return this.optional(e)||/^[a-z,\u0020]+$/i.test(t)},a.tc_validator.messages.lettersspaceonly),a.tc_validator.addMethod("alphanumericunicode",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F]+$/i.test(t)},a.tc_validator.messages.alphanumericunicode),a.tc_validator.addMethod("alphanumericunicodespace",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F,\u0020]+$/i.test(t)},a.tc_validator.messages.alphanumericunicodespace)),a.epoAPI.util.escapeSelector=function(){var t=/([!"$%&'()*+,/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),a.epoAPI.util.unformat=function(t){var e=a.epoAPI.math.unformat(t,Vt.localInputDecimalSeparator),i=parseFloat(e);return Number.isFinite(i)?i:e},a.epoAPI.util.parseParams=function(t,e){return"string"!=typeof t||void 0===t.split?[]:t.split("&").map(function(t){var a={};return!0===e&&(t=decodeURIComponent(t.replace(/\+/g,"%20"))),(t=t.split("=").map(function(t){var e=t.split("?");return e.length>1?e[1]:t})).length>1&&(a[t[0]]=t[1]),a}).filter(function(t){return null!==t}).reduce(function(t,e){return Object.assign({},t,e)},{})},a.tmempty||(a.tmempty=function(t){var e=1===[void 0,null,!1,0,"","0"].filter(function(e){return t===e}).length,a=!1;return"object"==typeof t?a=0===Object.keys(t).filter(function(e){return Object.prototype.hasOwnProperty.call(t,e)}).length:e||a}),a.tmType||(a.tmType=function(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),a.is_on_screen||(a.fn.is_on_screen=function(){var e=a(t),i=a.epoAPI.dom.scroll(),o=this.offset(),r={top:i.top,left:i.left};return r.right=r.left+e.width(),r.bottom=r.top+e.height(),o.right=o.left+this.outerWidth(),o.bottom=o.top+this.outerHeight(),!(r.right<o.left||r.left>o.right||r.bottom<o.top||r.top>o.bottom)}),a().tmtoggle||(a.fn.tmtoggle=function(){var e=this,i=!1,o=0;if(0!==e.length)return e.each(function(){var t,e,r,n=a(this);if(!n.data("tm-toggle-init")){if(n.data("tm-toggle-init",1),t=n.find(".tm-toggle"),e=n.find(".tm-collapse-wrap"),r=a(".tm-collapse.tmaccordion").find(".tm-toggle"),0===t.length||0===e.length)return;e.is(".closed")?(a(e).removeClass("closed open").addClass("closed").hide(),a(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),a(t).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed")):(a(e).removeClass("closed open").addClass("open").show(),a(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),a(t).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),i=!0),t.each(function(t,i){a(i).on("closewrap.tmtoggle",function(){n.is(".tmaccordion")&&a(e).is(".closed")||(a(e).removeClass("closed open").addClass("closed"),a(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),a(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed"),a(e).removeClass("tm-animated fadein"),n.is(".tmaccordion"),a(e).animate({height:"toggle"},100,function(){a(e).hide()}),de.trigger("tmlazy"))}),a(i).on("openwrap.tmtoggle",function(){n.is(".tmaccordion")&&a(r).not(a(this)).trigger("closewrap.tmtoggle"),a(e).removeClass("closed open").addClass("open"),a(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),a(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),a(e).show().removeClass("tm-animated fadein").addClass("tm-animated fadein"),setTimeout(function(){de.trigger("tmlazy")},200),o&&n.is(".tmaccordion")&&!n.is_on_screen()&&de.tcScrollTo(a(i))}),a(i).on("click.tmtoggle",function(t){t.preventDefault(),a(e).is(".closed")?a(this).trigger("openwrap.tmtoggle"):a(this).trigger("closewrap.tmtoggle")}),a(i).find(".tm-qty").closest(".cpf_hide_element").find(".tm-epo-field").on("change.cpf",function(){a(i).trigger("openwrap.tmtoggle")})})}}),void 0===t.tc_accordion_closed_on_page_load&&!i&&e.filter(".tmaccordion").length>0&&e.filter(".tmaccordion").first().find(".tm-toggle").trigger("openwrap.tmtoggle"),o=1,e}),a().tmpoplink||(a.fn.tmpoplink=function(){var t,e=this;if(0!==e.length)return t=function(t){return a.epoAPI.template.html(Kt.template("tc-cart-options-popup"),{title:t.title,id:t.id,html:t.html,close:Yt.i18n_close})},e.each(function(){var e,i,o,r,n=a(this);n.is(".tc-poplink")||(n.addClass("tc-poplink"),e=a(this).attr("href"),i=a(this).attr("data-title"),o=a(e).html(),i||(i=Yt.i18n_addition_options),r=t({id:"tc-floatbox-content",html:o,title:i}),n.on("click.tmpoplink",function(t){a.tcFloatBox({fps:1,ismodal:!1,refresh:100,width:"80%",height:"80%",classname:"flasho tc-wrapper",data:r}),t.preventDefault()}))})}),(Xt=function(t,e,a){return this.this_epo_totals_container=t,this.is_quickview=e,this.main_cart=a,!(e||!Yt.floating_totals_box||"disable"===Yt.floating_totals_box||!a||!t.length)&&(this.init(),this)}).prototype={constructor:Xt,onUpdate:function(){var t,e,i=this.this_epo_totals_container.data("tm-html"),o=this.this_epo_totals_container.data("tm-floating-box-data"),r=[];o&&o.length&&a.each(o,function(t,e){""===e.title&&(e.title="&nbsp;"),""===e.value&&(e.value="&nbsp;"),e.title?(e.title=a("<div>"+e.title+"</div>"),e.title.find("span").remove(),e.title=e.title.html()):e.title="&nbsp;",this.is_nks&&(""!==e.label_show&&(e.title=""),""!==e.value_show&&(e.value="")),r.push({label_show:e.label_show,value_show:e.value_show,title:e.title,value:e.value,quantity:e.quantity,price:l(e.price,this.this_epo_totals_container,!0,!1)})}),i&&""!==i||this.is_nks||(i="",this.floatingBox.hide()),r&&!r.length&&r.push({label_show:"hidden",value_show:"hidden",title:"",value:"",quantity:0,price:0}),t=a.epoAPI.template.html(this.engineTemplate,{html_before:Yt.floating_totals_box_html_before,html_after:Yt.floating_totals_box_html_after,option_label:Yt.i18n_option_label,option_value:Yt.i18n_option_value,option_qty:Yt.i18n_option_qty,option_price:Yt.i18n_option_price,values:r,totals:i}),this.floatingBox.html(t),this.onUpdateScroll(),"yes"===Yt.floating_totals_box_add_button&&(e=this.main_cart.find(Vt.addToCartButtonSelector).first()).tcClone().addClass("tc-add-to-cart-button").on("click",function(){e.trigger("click")}).appendTo(this.floatingBox)},onUpdateScroll:function(){"always"!==Yt.floating_totals_box_visibility?de.scrollTop()>a.epoAPI.math.toFloat(Yt.floating_totals_box_pixels)||this.is_nks_alt?this.floatingBox.is(":hidden")&&!this.floatingBox.is(":empty")||this.is_nks_alt?!1===this.is_nks?this.floatingBox.fadeIn():this.floatingBox.show():!this.floatingBox.is(":hidden")&&this.floatingBox.is(":empty")&&(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.is(":hidden")||(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.show()},addEvents:function(){this.onUpdate(),this.main_cart.on("tm-epo-after-update",this.onUpdate.bind(this)),!1===this.is_nks&&de.on("scroll",this.onUpdateScroll.bind(this))},init:function(){this.floatingBox=a('<div class="tm-floating-box '+Yt.floating_totals_box+'"></div>'),this.nks_selector=a(".tm-floating-box-nks").first(),this.alt_selector=a(".tm-floating-box-alt").first(),this.engineTemplate=Vt.templateEngine.tc_floating_box,this.is_nks=!1,this.is_nks_alt=!1,this.nks_selector.length>0?(this.is_nks=!0,this.floatingBox.removeClass("top left right bottom").appendTo(this.nks_selector).show()):this.alt_selector.length>0?this.floatingBox.removeClass("top left right bottom").appendTo(this.alt_selector).hide():this.floatingBox.appendTo("body").hide(),(this.nks_selector.length>0||this.alt_selector.length>0)&&(this.is_nks_alt=!0,this.engineTemplate=Vt.templateEngine.tc_floating_box_nks),this.addEvents()}},a.tcFloatingTotalsBox=function(t,e,a){var i=!1;return t&&t.length&&void 0===t.data("tcfloatingtotalsbox")&&(i=new Xt(t,e,a),t.data("tcfloatingtotalsbox",i)),i},a.tc_product_image={},a.tc_product_image_store={},a.tc_replace_object_values=function(t,e){return Object.keys(t).forEach(function(a){Object.keys(t[a]).forEach(function(i){void 0!==e[a]&&void 0!==e[a][i]&&Object.prototype.hasOwnProperty.call(e[a],i)&&(t[a][i]=e[a][i])})}),t},a.tc_maybe_copy_object_values=function(t,e){return Object.keys(e).forEach(function(a){Object.keys(e[a]).forEach(function(i){void 0===e[a]||!Object.prototype.hasOwnProperty.call(e[a],i)||void 0===e[a][i]||void 0!==t[a]&&void 0!==t[a][i]||(void 0===t[a]&&(t[a]={}),t[a][i]=e[a][i])})}),t},a.tc_pre_populate_store=function(){var t={};return t[0]={},t[1]={},t[2]={},t[3]={},t[0].src="",t[0].srcset="",t[0].sizes="",t[0].title="",t[0].alt="",t[0]["data-src"]="",t[0]["data-large_image"]="",t[0]["data-large_image_width"]="",t[0]["data-large_image_height"]="",t[1]["data-thumb"]="",t[2].src="",t[3].href="",t[3].title="",t},a.tc_populate_store=function(t,e){var a=e.find(".flex-control-nav li:eq(0) img"),i=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),o=t,r=t.closest("a"),n={};return n[0]={},n[1]={},n[2]={},n[3]={},n[0].src=o.attr("src"),n[0].srcset=o.attr("srcset"),n[0].sizes=o.attr("sizes"),n[0].title=o.attr("title"),n[0].alt=o.attr("alt"),n[0]["data-src"]=o.attr("data-src"),n[0]["data-large_image"]=o.attr("data-large_image"),n[0]["data-large_image_width"]=o.attr("data-large_image_width"),n[0]["data-large_image_height"]=o.attr("data-large_image_height"),n[1]["data-thumb"]=i.attr("data-thumb"),n[2].src=a.attr("src"),n[3].href=r.attr("href"),n[3].title=r.attr("title"),n},a.tc_maybe_copy_object_values_from_img=function(t,e,i){var o,r,n=i.find(".flex-control-nav li:eq(0) img"),c=[["src","srcset","sizes","title","alt","data-src","data-large_image","data-large_image_width","data-large_image_height","large-image"],["data-thumb"],["src"],["href","title"]];return[e,i.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n,e.closest("a")].forEach(function(e,i){void 0!==e&&void 0!==e[0]&&(o=e[0].attributes,a.each(o,function(){this.specified&&(r=this.name,-1!==a.inArray(r,c[i])&&(void 0===t[i]||void 0!==t[i]&&void 0===t[i][r])&&(void 0===t[i]&&(t[i]={}),t[i][r]=this.value))}))}),t},a.fn.tc_set_attr=function(t,e,i){void 0===i&&(i=0),(void 0===a.tc_product_image[i]||void 0!==a.tc_product_image[i]&&void 0===a.tc_product_image[i][t])&&(void 0===a.tc_product_image[i]&&(a.tc_product_image[i]={}),a.tc_product_image[i][t]="",this.attr(t)&&(a.tc_product_image[i][t]=this.attr(t))),!1===e?this.removeAttr(t):this.attr(t,e)},a.fn.tc_reset_attr=function(t,e){void 0===e&&(e=0),void 0!==a.tc_product_image[e]&&(void 0!==a.tc_product_image[e][t]&&this.attr(t,a.tc_product_image[e][t]),delete a.tc_product_image[e][t])},a.fn.tc_update_attr=function(t,e){void 0===e&&(e=0),void 0!==a.tc_product_image[e]&&(a.tc_product_image[e][t]=this.attr(t))},a.fn.tc_image_update=function(t,e){var i,o,r,n,c=a(t),l=this,d=a(e),s=l.data("epo_object"),p=s.main_product.closest("#product-"+s.product_id),m=p;p.length<=0&&(m=s.main_product.closest(".post-"+s.product_id)),c.is("select")&&(c=c.children("option:selected")),i=c.data("image-variations"),r=(o=""!==Yt.tm_epo_global_product_image_selector?a(Yt.tm_epo_global_product_image_selector):m.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img,img.emoji,a.woocommerce-product-gallery__trigger img").first()).closest("a"),o.length>1&&(o=o.first()),c&&i&&d.length>0?(d.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),n=i.imagep,i.imagep.image_link||(n=i.image),d.attr("title",n.image_title),d.attr("alt",n.image_alt),n.image_srcset&&d.attr("srcset",n.image_srcset),n.image_sizes&&d.attr("sizes",n.image_sizes),o.tc_set_attr("title",n.image_title),o.tc_set_attr("alt",n.image_alt),o.tc_set_attr("data-large-image",n.image_link),o.data.wc27_zoom_target&&(o.data.wc27_zoom_target.tc_set_attr("data-thumb",n.image_link),m.find(".flex-control-nav li:eq(0) img").tc_set_attr("src",n.image_link)),r.tc_set_attr("href",n.image_link),r.tc_set_attr("title",n.image_caption)):(o.tc_reset_attr("title"),o.tc_reset_attr("alt"),o.tc_reset_attr("data-large-image"),o.data.wc27_zoom_target&&(o.data.wc27_zoom_target.tc_reset_attr("data-thumb"),m.find(".flex-control-nav li:eq(0) img").tc_reset_attr("src")),r.tc_reset_attr("href"),r.tc_reset_attr("title"))},a.fn.tm_find_matching_variations=function(t,e){var i,o,r=[];if(t)for(i=0;i<t.length;i+=1)o=t[i],a.fn.tm_variations_match(o.attributes,e)&&r.push(o);return r},a.fn.tm_variations_match=function(t,e){var a,i,o=!0;return Object.keys(t).forEach(function(r){Object.prototype.hasOwnProperty.call(t,r)&&(a=t[r],i=e[r],void 0!==a&&void 0!==i&&0!==a.length&&0!==i.length&&a!==i&&(o=!1))}),o},a().tclightbox||(a.fn.tclightbox=function(){var t=this;if(0!==t.length)return t.each(function(){var t,e,i,o,r,n,c,l=a(this);l.is(".tcinit")||(t=l.attr("src")||l.attr("data-original"),i=(e=l.closest("label")).closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+e.attr("for")+"']"),(t=i.attr("data-imagel")||i.attr("data-imagep")||i.attr("data-image")||t)&&(l.addClass("tcinit").before(a.epoAPI.template.html(Vt.templateEngine.tc_lightbox,{})),o=l.prev(),l.wrap("<div class='tc-lightbox-image-wrap'/>"),l.after(o),r=o.find(".tc-lightbox-button"),c=function(){r.addClass("tcinit").on("click.tclightbox",function(e){var i,o;a(".tc-closing.tc-lightbox").length>0||(i=a.epoAPI.dom.size(),o=a("<img>").addClass("tc-lightbox-img").attr("src",t).css("maxHeight",i.visibleHeight+"px").css("maxWidth",i.visibleWidth+"px"),a.tcFloatBox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomin",animateOut:"tc-lightbox-zoomout",data:a.epoAPI.template.html(Vt.templateEngine.tc_lightbox_zoom,{img:o[0].outerHTML}),zIndex:102001,cancelClass:".tc-lightbox-img, .tc-lightbox-button-close",unique:!0}),e.preventDefault())})},"yes"===Yt.tm_epo_preload_lightbox_image?((n=new Image).src=t,n.onload=function(){c()}):c()))})}),a().tmsectionpoplink||(a.fn.tmsectionpoplink=function(){var t=this;if(0!==t.length)return t.each(function(){var t,e,i,o,r,n,c=a(this);c.data("tmsectionpoplink")||(c.data("tmsectionpoplink",!0),t=c.attr("data-sectionid"),e=Yt.i18n_addition_options,i=c.closest(".cpf-section[data-uniqid='"+t+"']"),o=!1,r=a('<div class="fl-overlay"></div>').css({zIndex:parseInt(c.zIndex,10)-1,opacity:.8}),n=function(){var t=a("#tm-section-pop-up");t.parents().removeClass("noanimated"),r.unbind().remove(),t.after(i),t.remove(),i.find(".tm-section-link").show(),i.find(".tm-section-pop").hide()},c.attr("data-title")&&(e=c.attr("data-title")),c.on("click.tmsectionpoplink",function(t){var c;t.preventDefault(),o=!1,r.appendTo("body").on("click",n),i.before(a.epoAPI.template.html(Vt.templateEngine.tc_section_pop_link,{title:e,close:Yt.i18n_close})),(c=a("#tm-section-pop-up")).find(".float-editbox").prepend(i),i.find(".tm-section-link").hide(),i.find(".tm-section-pop").show(),c.parents().addClass("noanimated"),c.find(".floatbox-cancel").on("click",function(){o||(o=!0,n())}),de.trigger("tmlazy"),de.trigger("tmsectionpoplink")}))})}),a().cpfdependson||(a.fn.cpfdependson=function(t,e,i,o){var r=this,n=0;if(0!==r.length&&"object"==typeof t)return e||(e="show"),i||(i="all"),a.each(t,function(e,i){var r,c;if("object"!=typeof t)return!0;(r=d(i.element))&&r.length>0&&(r.each(function(t,e){var i,r,n=a(e),l="change.cpflogic";c||(i=".tm-product-id-"+n.closest(".tc-extra-product-options").attr("data-product-id"),r="[data-epo-id='"+n.closest(".tc-extra-product-options").attr("data-epo-id")+"']",c=a(".tc-extra-product-options"+i+r)),e&&n.length>0&&(!n.data("tmhaslogicevents")||o)&&(n.is(".tm-epo-variation-element")?(u("found_variation.tmlogic",!1,function(){x(c),de.trigger("tm-do-epo-update")}),u("hide_variation.tmlogic",!1,function(){x(c),de.trigger("tm-do-epo-update")})):((n.is(":text")||n.is("textarea"))&&(l="change.cpflogic input.cpflogic"),n.off(l).on(l,function(){x(c)})),n.data("tmhaslogicevents",1))}),n=parseInt(n,10)+1)}),r.each(function(){var o=a(this),r=!1;switch(o.data("matches",n).data("toggle",e).data("what",i).data("fields",t),e){case"show":r=!1;break;case"hide":r=!0}r?o.removeClass("tc-hidden"):o.addClass("tc-hidden"),o.data("isactive",r)}),r.addClass("iscpfdependson").data("iscpfdependson",1),r.each(function(){a(this).addClass("is-epo-depend")})},a.fn.run_cpfdependson=function(){x()}),a.tcepo={formSubmitEvents:{},oneOptionIsSelected:{},initialActivation:{},lateFieldsPrices:{},errorObject:{}},a.tcepo.tm_init_epo=function(t,e,a,i){Qt(t,e,a,i)},de.on("tc_manual_init",function(t,e){var a;"container"in e&&"reactivate"in e&&(a=e.reactivate,e=e.container),Zt(e,a)}),a(function(){Vt=a.epoAPI.applyFilter("tc_api",Vt),de.on("lazyLoadXToncomplete",function(){a(".tm-owl-slider").each(function(){a(this).trigger("refresh.owl.carousel")})}),de.on("tc_init_epo_plugin",function(t){Wt()}),de.on("tcShowLastError",function(){t.console.log($t)}),a(".ajax_add_to_cart").on("click.tcajax",function(){Gt=a(this)}),a.ajaxPrefilter(function(t,e){var i,o,r,n,c,l,d,s,p,m,_,f,u,g=!1;if("yes"===Yt.tm_epo_enable_in_shop&&(i=t.url.split("?"))&&i.length>=1&&(i=i[1])){for(o=i.split("&"),r=0;r<o.length;r+=1)(n=o[r].split("=")).length>=1&&n[0]&&n[1]&&"wc-ajax"===n[0]&&"add_to_cart"===n[1]&&(g=!0);g&&(t.originalsuccess=t.success,t.success=function(i){i&&i.error&&i.product_url?(Gt&&1===Gt.length&&(c=Gt),(c=a(".ajax_add_to_cart[data-product_id='"+e.data.product_id+"']")).removeClass("added"),c.removeClass("loading")):t.originalsuccess.call(null,i)})}FormData&&e.data&&(l=e.data,"string"==typeof e.data&&(l=a.epoAPI.util.parseParams(e.data)),d=[],e.url&&e.url.indexOf&&(d=a.epoAPI.util.parseParams(e.url.slice(e.url.indexOf("?")+1))),"quantity"in l&&(l.product_id||l["add-to-cart"]||d.product_id||d["add-to-cart"]||l.tcaddtocart)&&(s=l.product_id||l["add-to-cart"]||d.product_id||d["add-to-cart"]||l.tcaddtocart,(p=Gt&&1===Gt.length&&1===Gt.closest(".tm-has-options").length?Gt.closest(".tm-has-options").find(".tc-extra-product-options.tm-product-id-"+s):a(".tc-extra-product-options.tm-product-id-"+s)).length>1&&(p=p.filter(".formepo")?p.filter(".formepo"):p.first()),1===p.length&&(_={tcajax:1,tcaddtocart:s,cpf_product_price:a(".tc-totals-form.tm-product-id-"+s).find(".cpf-product-price").val()},(m=a(".tc-totals-form.tm-product-id-"+s).find(".tc_form_prefix").val())&&(_.tc_form_prefix=m),t.data=a.epoAPI.util.parseParams(t.data,!0),t.data=a.extend(t.data,p.tcSerializeObject(),_),f=t.data,u=new FormData,Object.keys(f).forEach(function(t){u.append(t,f[t])}),p.find(":file").toArray().forEach(function(t){for(r=0;r<a(t)[0].files.length;r++)u.append(a(t).attr("name"),a(t)[0].files[r])}),t.data=u,t.contentType=!1,t.cache=!1,t.processData=!1)))}),se.ajaxSuccess(function(t,e,i){var o,r,n,c,l,d,s,p=Yt.quickview_array||"null",m=Yt.quickview_container||"null",_={},f=1,u=!1;a(".tm-formepo-normal").remove(),a(".tm-formepo").remove(),a(".tm-cart-link").tmpoplink(),p=a.epoAPI.util.parseJSON(p),m=a.epoAPI.util.parseJSON(m);for(o in m)Object.prototype.hasOwnProperty.call(m,o)&&(_[m[o][0]]=a(m[o][1]));a.extend(p,_),Object.keys(p).forEach(function(t){if(!u){if(l=!1,r=a(p[t]),"woothemes_quick_view"===t&&r.is(".fusion-woocommerce-quick-view-container"))return!0;if("fusion_quick_view_load"===t&&0===r.find(Vt.epoSelector).length)return!0;"woodmart_quick_shop"===t&&"woodmart_quick_shop"===(s=a.epoAPI.util.parseParams(i.url)).action&&(d=a(a.epoAPI.util.escapeSelector(p[t]+".post-"+s.id))).length&&(r=d,l=!0),"woodmart_quick_view"===t&&"woodmart_quick_view"===(s=a.epoAPI.util.parseParams(i.url)).action&&(d=a(a.epoAPI.util.escapeSelector(p[t]+".post-"+s.id))).length&&(r=d,l=!0),"quickview_pro"===t&&(s=i.url.split("/")).length&&(d=a(a.epoAPI.util.escapeSelector(p[t]+" .post-"+s[s.length-1]))).length&&(r=d,l=!0),"wqv_popup_content"!==t&&"wp_food"!==t&&"jet_popup_get_content"!==t||(l=!0),"woofood"===t&&i.data&&"woofood_quickview_ajax"===(s=a.epoAPI.util.parseParams(i.data)).action&&(d=d=r.find("form").parent()).length&&(r=d,l=!0),0===r.find(".product").length&&r.is(".product")&&(l=!0),r.length&&(r.find(".product").length>0||l)&&(r.removeClass("tc-init"),u=!0,"fusion_quick_view_load"!==t&&"jet_popup_get_content"!==t&&"wp_food"!==t&&"woodmart_quick_shop"!==t&&"woodmart_quick_view"!==t&&"lightboxpro"!==t&&"jckqv_quick_view"!==t&&"yith_quick_view"!==t&&"theme_flatsome"!==t||(ce=!0),ne=r,"fusion_quick_view_load"===t&&(f=1400),setTimeout(function(){n=ne.find(Vt.epoSelector).attr("data-product-id"),c=ne.find(Vt.epoSelector).attr("data-epo-id"),"woodmart_quick_shop"===t&&r.addClass("has-options"),Vt.getElementFromFieldCache=[],Qt(ne,!0,n,c),de.trigger("tmlazy"),de.trigger("tm_epo_loaded_quickview"),a.jMaskGlobals&&ne.find(a.jMaskGlobals.maskElements).each(function(){var t=a(this);t.attr("data-mask")&&t.mask(t.attr("data-mask"))})},f))}})}),Wt(),a(".tm-cart-link").tmpoplink(),le.on("updated_checkout",function(){a(".tm-cart-link").tmpoplink()}),de.trigger("tmlazy"),de.trigger("tm_epo_loaded")}),a(function(){var e=navigator.userAgent||navigator.vendor||t.opera;(e=e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1||e.indexOf("Instagram")>-1)&&a(".tmcp-upload").removeAttr("accept"),se.on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){a(this).closest(".quantity").find("input.qty").trigger("change")}),le.on("sober_quickview_opened",function(){var t,e;t=(ne=a("#quick-view-modal")).find(Vt.epoSelector).attr("data-product-id"),e=ne.find(Vt.epoSelector).attr("data-epo-id"),Qt(ne,!0,t,e),de.trigger("tmlazy"),de.trigger("tm_epo_loaded_quickview"),a.jMaskGlobals&&ne.find(a.jMaskGlobals.maskElements).each(function(){var t=a(this);t.attr("data-mask")&&t.mask(t.attr("data-mask"))})}),a("#wholesale_form").on("submit",function(){var t=a("form.cart").find(Vt.addToCartSelector).val(),e=a(Vt.epoSelector+".tm-cart-main[data-product-id='"+t+"']").tcClone(),i=a(".tm-totals-form-main[data-product-id='"+t+"']").tcClone(),o=a("<div class='tm-hidden tm-formepo'></div>");return o.append(e),o.append(i),a(this).append(o),!0}),se.on("click","#add_to_quote",function(t){var e,i,o;Yt&&"yes"===Yt.tm_epo_global_enable_validation&&(i=(e=a(this).parents("form")).find(".tm-epo-counter").val(),o=a(Vt.epoSelector+"[data-epo-id='"+i+"']"),e.length>0&&o.length>0&&!e.tc_validate().form()&&t.stopImmediatePropagation())}),a(".single_add_to_cart_button.paypal_checkout_button").on("click",function(t){var e=a(".cart");e.data("tc_validator")&&e.data("tc_validator").errorList&&t.stopImmediatePropagation()}),a(".wc-product-table").on("init.wcpt",function(e,i){i.$table.find(Vt.epoSelector).addClass("hidden"),i.$table.find("thead tr").append("<th>&nbsp;</th>"),setTimeout(function(){i.$table.find(".cart:not(.cart_group)").each(function(){var e=a(this).find(Vt.epoSelector),i=e.closest("tr");a("<td class='wc-product-table-epo'></td>").appendTo(i).append(e),a(t).trigger("tc_manual_init",e),e.removeClass("hidden")})},500)})}))}(window,document,window.jQuery);