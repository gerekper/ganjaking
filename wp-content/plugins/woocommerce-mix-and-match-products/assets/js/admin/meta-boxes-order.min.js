/*! WooCommerce Mix and Match Products 1.10.0 2020-07-25 12:48 */

jQuery(function(i){var o=i("#woocommerce-order-items"),t=!1,c={handle_events:function(){o.on("click","button.configure_container",{action:"configure"},this.clicked_edit_button).on("click","button.edit_container",{action:"edit"},this.clicked_edit_button)},clicked_edit_button:function(e){var n=i.WCBackboneModal.View.extend({addButton:c.clicked_done_button}),o=i(this).closest("tr.item").attr("data-order_item_id");return t=new n({target:"wc-modal-edit-container",string:{action:"configure"===e.data.action?wc_mnm_admin_order_params.i18n_configure:wc_mnm_admin_order_params.i18n_edit,item_id:o}}),c.populate_form(),!1},clicked_done_button:function(n){c.block(t.$el.find(".wc-backbone-modal-content"));var e=i.extend({},c.get_taxable_address(),{action:"woocommerce_edit_container_in_order",item_id:t._string.item_id,fields:t.$el.find("input, select, textarea").serialize(),dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce});i.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){e.result&&"success"===e.result?(o.find(".inside").empty(),o.find(".inside").append(e.html),o.trigger("wc_order_items_reloaded"),e.notes_html&&(i("ul.order_notes").empty(),i("ul.order_notes").append(i(e.notes_html).find("li"))),c.unblock(t.$el.find(".wc-backbone-modal-content")),c.block(o,{fadeIn:0}),setTimeout(function(){c.unblock(o)},250),t.closeButton(n)):(window.alert(e.error?e.error:wc_mnm_admin_order_params.i18n_validation_error),c.unblock(t.$el.find(".wc-backbone-modal-content")))})},populate_form:function(){c.block(t.$el.find(".wc-backbone-modal-content"));var e={action:"woocommerce_configure_container_order_item",item_id:t._string.item_id,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce};i.post(woocommerce_admin_meta_boxes.ajax_url,e,function(e){e.result&&"success"===e.result?(t.$el.find("form").html(e.html),c.unblock(t.$el.find(".wc-backbone-modal-content"))):(window.alert(wc_mnm_admin_order_params.i18n_form_error),c.unblock(t.$el.find(".wc-backbone-modal-content")),t.$el.find(".modal-close").trigger("click"))})},get_taxable_address:function(){var e="",n="",o="",t="";return"shipping"===woocommerce_admin_meta_boxes.tax_based_on&&(e=i("#_shipping_country").val(),n=i("#_shipping_state").val(),o=i("#_shipping_postcode").val(),t=i("#_shipping_city").val()),"billing"!==woocommerce_admin_meta_boxes.tax_based_on&&e||(e=i("#_billing_country").val(),n=i("#_billing_state").val(),o=i("#_billing_postcode").val(),t=i("#_billing_city").val()),{country:e,state:n,postcode:o,city:t}},block:function(e,n){var o=i.extend({},{message:null,overlayCSS:{background:"#fff",opacity:.6}},n||{});e.block(o)},unblock:function(e){e.unblock()}};c.handle_events()});