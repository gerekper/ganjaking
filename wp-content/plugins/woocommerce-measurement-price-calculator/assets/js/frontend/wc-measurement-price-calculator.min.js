"use strict";jQuery(document).ready(function(m){var e,a;function r(a){void 0===wc_price_calculator_params.page_loaded?(function(a){var e=m.cookie(wc_price_calculator_params.cookie_name);if(!1===m.isPlainObject(e)||m.isEmptyObject(e))return;for(var r in e)!1!==e.hasOwnProperty(r)&&a.find('.amount_needed[name="'+r+'"]:not(.fixed-value), input[name="'+r+'"].qty').val(e[r]);m("form.cart").trigger("wc-measurement-price-calculator-update"),setTimeout(function(a){return function(){a.trigger("mpc-change")}}(a.find("input.amount_needed:first")),100)}(a),wc_price_calculator_params.page_loaded=!0):setTimeout(function(){var r={};a.find(".amount_needed:input, input[name=quantity]").each(function(a,e){r[e.name]=e.value}),m.cookie(wc_price_calculator_params.cookie_name,r)},100)}function s(a,e,r,c){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var t=isFinite(+a)?+a:0,i=isFinite(+e)?Math.abs(e):0,n=void 0===c?",":c,o=void 0===r?".":r,_="";return 3<(_=(i?function(a,e){var r=Math.pow(10,e),c=(o=""+a).indexOf(".");if(-1<c){c+=e,o=o.replace(".","");var t="";String.prototype.startsWith||(String.prototype.startsWith=function(a,e){return e=isNaN(parseInt(e))?0:e,this.indexOf(a,e)===e}),o.startsWith("0")&&(t=o.slice(0,o.length-parseFloat(o).toString().length));var i,n=o,o=o.slice(0,c);return 5<=n.slice(c,c+1)&&(o=parseFloat(o),o=t+(o=""+(o+=1))),o=o.length<c?(i=c-o.length,o*=Math.pow(10,i),Number(o,10)):Number([o,".",o.slice(c)].join(""),10),""+Math.round(o)/r}return a.toFixed(e)}(t,i):""+Math.round(t)).split("."))[0].length&&(_[0]=_[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(_[1]||"").length<i&&(_[1]=_[1]||"",_[1]+=new Array(i-_[1].length+1).join("0")),_.join(o)}function d(a,e,r){return void 0!==wc_price_calculator_params.unit_normalize_table[e]&&(void 0!==wc_price_calculator_params.unit_normalize_table[e].inverse&&wc_price_calculator_params.unit_normalize_table[e].inverse?a/=wc_price_calculator_params.unit_normalize_table[e].factor:a*=wc_price_calculator_params.unit_normalize_table[e].factor,e=wc_price_calculator_params.unit_normalize_table[e].unit),void 0!==wc_price_calculator_params.unit_conversion_table[e]&&void 0!==wc_price_calculator_params.unit_conversion_table[e][r]&&(void 0!==wc_price_calculator_params.unit_conversion_table[e][r].inverse&&wc_price_calculator_params.unit_conversion_table[e][r].inverse?a/=wc_price_calculator_params.unit_conversion_table[e][r].factor:a*=wc_price_calculator_params.unit_conversion_table[e][r].factor),a}function w(a){var e;return(e=a.match(/(\d+)\s+(\d+)\/(\d+)/))?0!==e[3]?parseFloat(e[1])+e[2]/e[3]:parseFloat(e[1]):(e=a.match(/(\d+)\/(\d+)/))?0!==e[2]?e[1]/e[2]:0:""===a?0:parseFloat(a)}function g(a){var e=m.trim(wc_price_calculator_params.woocommerce_price_thousand_sep).toString(),r=m.trim(wc_price_calculator_params.woocommerce_price_decimal_sep).toString();return a&&null!==a?isNaN(a)||(a=a.toString()):a="",0<a.length&&(a=(a="."===e?a.replace(/\./g,""):a.replace(new RegExp(e,"g"),"")).replace(r,".")),a}function v(a){var e="",r=wc_price_calculator_params.woocommerce_price_num_decimals,c=wc_price_calculator_params.woocommerce_currency_pos,t=wc_price_calculator_params.woocommerce_currency_symbol;switch(a=s(a,r,wc_price_calculator_params.woocommerce_price_decimal_sep,wc_price_calculator_params.woocommerce_price_thousand_sep),"yes"===wc_price_calculator_params.woocommerce_price_trim_zeros&&0<r&&(a=a.replace(new RegExp(function(a,e){return(a+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(e||"")+"-]","g"),"\\$&")}(wc_price_calculator_params.woocommerce_price_decimal_sep,"/")+"0+$"),"")),c){case"left":e='<span class="amount">'+t+a+"</span>";break;case"right":e='<span class="amount">'+a+t+"</span>";break;case"left_space":e='<span class="amount">'+t+"&nbsp;"+a+"</span>";break;case"right_space":e='<span class="amount">'+a+"&nbsp;"+t+"</span>"}return e}m.cookie.json=!0,m(document).bind("reset_image",function(){wc_price_calculator_params.product_price="",wc_price_calculator_params.product_measurement_value="",wc_price_calculator_params.product_measurement_unit="",m(".variable_price_calculator").hide()}),m(".wc-measurement-price-calculator-input-help").tipTip({attribute:"title",defaultPosition:"left"}),"undefined"!=typeof wc_price_calculator_params&&"pricing"===wc_price_calculator_params.calculator_type&&(m("form.cart").bind("wc-measurement-price-calculator-update",function(){var n,a,r,c;m(".amount_needed:input").each(function(a,e){e=m(e);var r=w("number"===m(this).attr("type")?e.val():g(e.val()));e.trigger("wc-measurement-price-calculator-product-measurement-change",[r])}),m(".amount_needed:input").each(function(a,e){e=m(e);var r=w("number"===m(this).attr("type")?e.val():g(e.val()));if(!r||r<0)return n=0,!1;if(r=d(r,e.data("unit"),e.data("common-unit")),"area-linear"===wc_price_calculator_params.measurement_type)n?n+=2*r:n=2*r;else if("area-surface"===wc_price_calculator_params.measurement_type){if(!n){var c=d(w(c=g(m("#length_needed").val())),m("#length_needed").data("unit"),m("#length_needed").data("common-unit")),t=d(w(t=g(m("#width_needed").val())),m("#width_needed").data("unit"),m("#width_needed").data("common-unit")),i=d(w(i=g(m("#height_needed").val())),m("#height_needed").data("unit"),m("#height_needed").data("common-unit"));return void(n=2*(c*t+t*i+c*i))}}else n?n*=r:n=r}),n=d(n,wc_price_calculator_params.product_total_measurement_common_unit,wc_price_calculator_params.product_price_unit),wc_price_calculator_params.pricing_rules&&(r=n,c=null,m.each(wc_price_calculator_params.pricing_rules,function(a,e){if(r>=parseFloat(e.range_start)&&(""===e.range_end||r<=e.range_end))return c=e,!1}),(a=c)?(wc_price_calculator_params.product_price=parseFloat(a.price),m(".single_variation span.price").html(a.price_html)):(wc_price_calculator_params.product_price="",m(".single_variation span.price").html(""))),m("#_measurement_needed").val(n),m("#_measurement_needed_unit").val(wc_price_calculator_params.product_price_unit);var e,t=0,i=parseFloat(wc_price_calculator_params.pricing_overage),o=m(".product_price"),_=m(".product_price_overage");n?(t=wc_price_calculator_params.product_price*n,wc_price_calculator_params.minimum_price>t&&(t=parseFloat(wc_price_calculator_params.minimum_price)),0<i&&(t+=e=t*i,_.html(v(e))),o.html(v(t)).trigger("wc-measurement-price-calculator-product-price-change",[n,t])):(o.html("").trigger("wc-measurement-price-calculator-product-price-change"),0<i&&_.html(""));var p,u,l=null;(l=m(".wc-measurement-price-calculator-total-amount"))&&(p=wc_price_calculator_params,u=d(n,p.product_price_unit,l.data("unit")),u=parseFloat(n.toFixed(p.measurement_precision)),l.text(s(u,p.measurement_precision,p.woocommerce_price_decimal_sep,p.woocommerce_price_thousand_sep))),"undefined"!=typeof woocommerce_addons_params&&0<m("form.cart").find("#product-addons-total").length&&(woocommerce_addons_params.product_price=(""===t?0:t).toFixed(2),m("form.cart").trigger("woocommerce-product-addons-update"))}),m("form.cart").trigger("wc-measurement-price-calculator-update"),m(".amount_needed:input").on("keyup change mpc-change",function(){var a=m(this).closest("form.cart");a.trigger("wc-measurement-price-calculator-update"),r(a)}).first().trigger("mpc-change"),m(".single_variation, .single_variation_wrap").bind("show_variation",function(a,e){var r=parseFloat(e.price),c=parseFloat(e.minimum_price);wc_price_calculator_params.product_price=r,wc_price_calculator_params.minimum_price=c,m("form.cart").trigger("wc-measurement-price-calculator-show-variation",e),m("form.cart").trigger("wc-measurement-price-calculator-update"),m(".variable_price_calculator").show()}),m(document.body).bind("updated_addons",function(){var a=m("form.cart"),e=a.find("#product-addons-total");e.data("price")!==woocommerce_addons_params.product_price&&0<e.length&&(e.data("price",woocommerce_addons_params.product_price),a.trigger("woocommerce-product-addons-update"))})),"undefined"!=typeof wc_price_calculator_params&&"quantity"===wc_price_calculator_params.calculator_type&&(m("form.cart").bind("wc-measurement-price-calculator-quantity-changed",function(a,i){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];wc_price_calculator_params.product_measurement_value&&(m(e?".amount_needed, .amount_actual":".amount_actual").each(function(a,e){var r,c,t;e=m(e),1<m(".amount_needed").length||(r=d(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,e.data("unit")),c=parseFloat((r*i).toFixed(2)),t=wc_price_calculator_params,e.is("input")?"number"!==e.attr("type")?e.val(s(c,2,t.woocommerce_price_decimal_sep,t.woocommerce_price_thousand_sep)):e.val(c):e.text(s(c,2,t.woocommerce_price_decimal_sep,t.woocommerce_price_thousand_sep)))}),m(".total_price").html(v(i*wc_price_calculator_params.product_price)).trigger("wc-measurement-price-calculator-quantity-total-price-change",[i,wc_price_calculator_params.product_price]))}),e=!1,m("form.cart").bind("wc-measurement-price-calculator-update",function(){var c,a,t;wc_price_calculator_params.product_measurement_value&&(m("input.amount_needed").each(function(a,e){var r=w(g((e=m(e)).val()));if(!r||r<0)return c=0,!1;r=d(r,e.data("unit"),e.data("common-unit")),c?c*=r:c=r}),c&&(a=d(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,wc_price_calculator_params.product_total_measurement_common_unit),(t=Math.ceil((c/a).toFixed(wc_price_calculator_params.measurement_precision)))<parseFloat(wc_price_calculator_params.quantity_range_min_value)&&(t=parseFloat(wc_price_calculator_params.quantity_range_min_value)),e=!!(parseFloat(wc_price_calculator_params.quantity_range_max_value)&&t>parseFloat(wc_price_calculator_params.quantity_range_max_value))&&(t=parseFloat(wc_price_calculator_params.quantity_range_max_value),!0),m("input[name=quantity]").val(t),m(".amount_actual").each(function(a,e){e=m(e);var r=d(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,e.data("unit")),r=parseFloat((r*t).toFixed(2));e.is("input")?e.val(r):e.text(r)}),e?(m("#stock-discrepancy-warning").remove(),m(".entry-summary").find(".cart").after('<p id="stock-discrepancy-warning" class="woocommerce-error">'+wc_price_calculator_params.stock_warning+"</p>")):m("#stock-discrepancy-warning").remove(),m(".total_price").html(v(t*wc_price_calculator_params.product_price)).trigger("wc-measurement-price-calculator-total-price-change",[t,wc_price_calculator_params.product_price])))}),(a=m(".amount_needed:input")).on("keyup change mpc-change",function(){var a=m(this).closest("form.cart");a.trigger("wc-measurement-price-calculator-update"),r(a)}),a.on("blur mpc-change",function(){var a=m(this).closest("form.cart"),e=m("input[name=quantity]").val();a.trigger("wc-measurement-price-calculator-quantity-changed",[e,!1])}),a.trigger("mpc-change"),m("input[name=quantity]").on("change mpc-change",function(a){var e=m(this).closest("form.cart");e.trigger("wc-measurement-price-calculator-quantity-changed",[a.target.value]),r(e)}).trigger("change"),m(".single_variation, .single_variation_wrap").bind("show_variation",function(a,e){wc_price_calculator_params.product_price=parseFloat(e.price),wc_price_calculator_params.product_measurement_value=parseFloat(e.product_measurement_value),wc_price_calculator_params.product_measurement_unit=e.product_measurement_unit,e.product_measurement_value?(0<m("input.amount_needed").length&&m("input.amount_needed").val()?m("form.cart").trigger("wc-measurement-price-calculator-update"):m("form.cart").trigger("wc-measurement-price-calculator-quantity-changed",[m("input[name=quantity]").val()]),m(".variable_price_calculator").show()):m(".variable_price_calculator").hide()}))});