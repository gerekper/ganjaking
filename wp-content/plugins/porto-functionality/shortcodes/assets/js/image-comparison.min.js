!function(t){"use strict";t.fn.portoImageCompare=function(){var e=function(t,e,o,i,a){"vertical"==i?(e.css("clip","rect(0,"+a.w+","+a.ch+",0)"),o.css("clip","rect("+a.ch+","+a.w+","+a.h+",0)")):(e.css("clip","rect(0,"+a.cw+","+a.h+",0)"),o.css("clip","rect(0, "+a.w+","+a.h+","+a.cw+")")),t.css("height",a.h)},o=function(t,e,o,i,a,n,c){var s;return s="vertical"==o?(e-a)/c:(t-i)/n,Math.max(0,Math.min(1,s))};return this.each(function(){var i=t(this),a=i.attr("data-offset")?i.attr("data-offset"):.5,n=i.attr("data-orientation")?i.attr("data-orientation"):"horizontal",c=i.attr("data-handle-action")?i.attr("data-handle-action"):"click",s=i.find(".porto-image-comparison-before"),r=i.find(".porto-image-comparison-after"),p=i.find(".porto-image-comparison-handle"),d=0,f=0,l=0,u=0,m=function(t){(t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==n?t.preventDefault():(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===n&&t.preventDefault(),i.addClass("active");var e=i.offset();d=s.width(),f=s.height(),l=e.left,u=e.top},v=function(t){if(i.hasClass("active")){a=o(t.pageX,t.pageY,n,l,u,d,f);var c=d,m=f,v={w:c+"px",h:m+"px",cw:c*a+"px",ch:m*a+"px"};p.css("vertical"===n?"top":"left","vertical"===n?m*a:c*a),e(i,s,r,n,v)}};t(window).on("resize.porto-image-comparison",function(t){var o=s.width(),c=s.height(),d={w:o+"px",h:c+"px",cw:o*a+"px",ch:c*a+"px"};p.css("vertical"===n?"top":"left","vertical"===n?c*a:o*a),e(i,s,r,n,d)});var h="handle_only"==c?p:i;h.on("movestart",m),h.on("move",v),h.on("moveend",function(){i.removeClass("active")}),"hover"==c&&(i.on("mouseenter",m),i.on("mousemove",v),i.on("mouseleave",function(){i.removeClass("active")})),p.on("touchmove",function(t){t.preventDefault()}),i.find("img").on("mousedown",function(t){t.preventDefault()}),"click"==c&&i.on("click",function(t){var c=i.offset().left,l=i.offset().top;d=s.width(),f=s.height(),a=o(t.pageX,t.pageY,n,c,l,d,f),i.addClass("active"),"vertical"==n?p.stop(!0,!0).animate({top:f*a+"px"},{queue:!1,duration:300,easing:"easeOutQuad",step:function(t){e(i,s,r,n,{w:d+"px",h:f+"px",cw:f*(t/d)+"px",ch:t+"px"})},complete:function(){i.removeClass("active")}}):p.stop(!0,!0).animate({left:d*a+"px"},{queue:!1,duration:300,easing:"easeOutQuad",step:function(t){e(i,s,r,n,{w:d+"px",h:f+"px",cw:t+"px",ch:f*(t/d)+"px"})},complete:function(){i.removeClass("active")}})}),i.addClass("initialized"),t(window).trigger("resize.porto-image-comparison")})},t(window).on("load",function(){t(".porto-image-comparison").portoImageCompare(),t(document.body).on("porto_init",function(t,e){e.find(".porto-image-comparison").portoImageCompare()})})}(jQuery);