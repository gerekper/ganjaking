"use strict";window.themeAdmin=window.themeAdmin||{},function(e){var t={criticalIframe:"",device:"desktop",loadTimeout:2e4,timeoutId:0,resultCriticalCss:"",viewPort:{desktop:{width:1920,height:1080},mobile:{width:360,height:640}},main:async function(e,t="desktop",i=!1,r=""){try{this.matchMQ=i,this.required=r,this.criticalIframe||(this.criticalIframe=document.querySelector(".temp-iframe")),this.device=t,this.criticalIframe.width=this.viewPort[t].width,this.criticalIframe.height=this.viewPort[t].height,this.loadPage(e),await this.injectCssExtractor()}catch(t){console.warn("exception in page at "+e,t),themeAdmin.criticalWizard.$progressBar.addClass("failed"),this.closePage()}},closePage:function(){this.criticalIframe.src="",this.criticalIframe.onload=null},loadPage:function(e){return!!e&&(this.criticalIframe.src=e,!0)},injectCssExtractor:async function(){await new Promise(((e,t)=>{themeAdmin.criticalCss.timeoutId=setTimeout((()=>{console.warn("Timeout"),t()}),themeAdmin.criticalCss.loadTimeout),themeAdmin.criticalCss.criticalIframe.onload=function(){clearTimeout(themeAdmin.criticalCss.timeoutId);var t=new XMLHttpRequest,i=themeAdmin.criticalCss.criticalIframe.contentWindow;t.open("get",i.location.href,!1),t.onload=function(){var r=t.responseText;if(r&&-1===r.indexOf("stylesheet"))return!1;var n={};themeAdmin.criticalCss.matchMQ&&(n.matchMQ=!0),themeAdmin.criticalCss.required&&(n.required=themeAdmin.criticalCss.required),i.extractCSSOptions=n,themeAdmin.criticalCss.generate(i,i.document),e()},t.send()}}))},generate:function(t,i){var r,n,a,c,s,l,o=i.documentElement,d=t.extractCSSOptions,f=[],h=[];function u(a){if(!l||a){l=!0;var c=i.querySelectorAll("link");if(Array.prototype.slice.call(c).filter((function(e){return"preload"==e.rel&&"style"==e.as})).length>0)setTimeout((function(){u(!0)}),50);else{r=o.offsetWidth,n=t.innerHeight,h=Array.prototype.slice.call(i.styleSheets).filter((function(e){return!e.media.length||"screen"==e.media[0]||"all"==e.media[0]})),s=h.slice(0);var d=t.location.href.replace(/\/[^/]+$/,"/");h.forEach((function(e){if(e.href&&-1==e.href.indexOf("fonts.googleapis.com"))!function(e,t){var i=new XMLHttpRequest;try{i.open("GET",e,!1),i.onload=function(){i.status&&404==i.status?t(""):t(i.responseText)},i.onerror=function(){t("")},i.send(null)}catch(e){t(""),console.warn(e)}}(e.href,(function(t){var i=s.indexOf(e);i>-1&&s.splice(i,1),""!=t&&(t=(t=t.replace(/\/\*[\s\S]+?\*\//g,"").replace(/[\n\r]+/g,"").replace(/url\((["']|)(\.\.\/[^"'\(\)]+)\1\)/g,(function(t,i,r){return"url("+i+p(d,e.href,r)+i+")"}))).replace(/@charset "[^"]*";/gm,""),f.push(t)),0===s.length&&v()}));else{var t=s.indexOf(e);if(t>-1&&s.splice(t,1),""==e.ownerNode.id||""!=e.ownerNode.id&&"porto-critical-css"!=e.ownerNode.id){var i=e.ownerNode.innerHTML;i=(i=i.replace(/\/\*[\s\S]+?\*\//g,"").replace(/[\n\r]+/g,"").replace(/url\((["']|)(\.\.\/[^"'\(\)]+)\1\)/g,(function(t,i,r){return"url("+i+p(d,e.href,r)+i+")"}))).replace(/@charset "[^"]*";/gm,""),f.push(i)}0===s.length&&v()}}))}}function v(){var t=!1;o.offsetHeight!=n&&(t=Array.prototype.slice.call(i.getElementsByTagName("*")).filter((function(e){return e.getBoundingClientRect().top<o.offsetHeight})));var r=f.map((function(e){return m(g(e,t))})).join("");if(!r)return themeAdmin.criticalWizard.$progressBar.addClass("failed"),void console.warn("Browser did not return any CSS at "+themeAdmin.criticalCss.criticalIframe.src);themeAdmin.criticalWizard.criticalDone++,themeAdmin.criticalWizard.$progressBar.css({width:10+85*themeAdmin.criticalWizard.criticalDone/(2*themeAdmin.criticalWizard.criticalTodo)+"%"}),themeAdmin.criticalCss.resultCriticalCss=r;var a,c=themeAdmin.criticalCss.viewPort[themeAdmin.criticalCss.device].height,s=i.querySelectorAll("img"),d=[];for(a=0;a<s.length;a++){if(!((w=(v=s[a]).getBoundingClientRect()).top+140<c))break;var h=e(v).closest(".owl-carousel");if(v.offsetWidth&&(0==h.length||h.length&&w.left<h.get(0).getBoundingClientRect().right))if("visible"==getComputedStyle(v).visibility||v.classList.contains("porto-lazyload")){var u="";v.classList.contains("porto-lazyload")?(u=v.getAttribute("data-oi"))||(u=v.getAttribute("data-src")):u=v.classList.contains("owl-lazy")?v.getAttribute("data-src"):v.getAttribute("src"),u&&-1==d.indexOf(u)&&d.push(u)}else if(e(v).closest("rs-slide:first-child").length){u="";if((u=v.classList.contains("rs-lazyload")?v.getAttribute("data-lazyload"):v.getAttribute("src"))&&-1==d.indexOf(u)&&d.push(u),0==e(s[a+1]).closest("rs-slide:first-child").length)break}}var p=i.querySelectorAll(".porto-lazyload:not(img)");for(a=0;a<p.length;a++){var v,w;if(!((w=(v=p[a]).getBoundingClientRect()).top+140<c))break;h=e(v).closest(".owl-carousel");v.offsetWidth&&(0==h.length||h.length&&w.left<h.get(0).getBoundingClientRect().right)&&-1==d.indexOf(v.getAttribute("data-original"))&&d.push(v.getAttribute("data-original"))}themeAdmin.criticalCss.resultPreload=d,themeAdmin.criticalCss.criticalIframe.src="",themeAdmin.criticalCss.criticalIframe.onload=null,l=!1}}function m(e){return e.map((function(e){return e.selectors.join(",")+"{"+e.css+"}"})).join("")}function g(e,t){var n=function(e){var t=e.replace(/\n+/g," ").match(/(?:[^{}]+\s*\{[^{}]+\})|(?:[^{}]+\{\s*(?:[^{}]+\{[^{}]+\})+\s*\})/g),i=[];t&&t.forEach((function(e){var t=function(e){var t=e.match(/^,*\s*([^{}]+)\s*\{\s*((?:[^{}]+\{[^{}]+\})+|[^{}]+)\s*\}$/);if(t){var i=t[1].match(/:(is|not|matches)[^\)\n\r]*/gi);if(i&&i.length)for(var r=0;r<i.length;r++)if(i[r].indexOf(", [")>0||i[r].indexOf(",[")>0)return{selectors:[t[1]],css:t[2]}}return{selectors:t&&t[1].split(/\s*,\s*(?![^\(\[]*[\]\)])/),css:t&&t[2]}}(e);t&&i.push(t)}));return i}(e),s=[];return n.forEach((function(e){var n=[],l=e.selectors[0].match(/^\s*(@[a-z\-]+)/);if(e.selectors)if(l)switch(l[1]){case"@font-face":n=["@font-face"];break;case"@media":var o;if(a){var d,f=e.selectors[0].match(/m(?:ax|in)-width:[^)]+/g);if(f)for(o={};f.length;)o[(d=f.shift().split(/:\s?/))[0]]=parseInt(d[1])}if(!a||!o||(!("min-width"in o)||o["min-width"]<=r)&&(!("max-width"in o)||o["max-width"]>=r)){var h=g(e.css,t);h.length&&(n=e.selectors,e.css=m(h))}}else n=function(e,t){return e.map((function(e){return e.replace(/\/\*[\s\S]+?\*\//g,"").replace(/(?:^\s+)|(?:\s+$)/g,"")})).filter((function(e){if(!e||e.match(/@/))return!1;if(c&&c.some((function(t){return t.test(e)})))return!0;if(e.indexOf(":")>-1&&(e=e.replace(/(?:::?)(?:after|before|link|visited|hover|active|focus|selection|checked|selected|optional|required|invalid|valid|in-range|read-only|read-write|target|(?:-[a-zA-Z-]+))\s*$/g,"")),0==e.length)return!0;var r=[];try{r=i.querySelectorAll(e)}catch(e){}var n=0,a=r.length;if(a){if(t){for(;n<a;)if(t.indexOf(r[n++])>-1)return!0;return!1}return!0}return!1}))}(e.selectors,t);n.length&&(e.selectors=n,s.push(e))})),s}function p(e,t,i){for(;0===i.indexOf("../");)i=i.slice(3),t=t.replace(/\/[^/]+\/[^/]*$/,"/");var r=t+i;return 0===r.indexOf(e)?r.slice(e.length):r}d&&("matchMQ"in d&&(a=d.matchMQ),"required"in d&&(c=(c=d.required).map((function(e){return new RegExp(e,"i")})))),"complete"!=i.readyState?t.addEventListener("load",(function(){u()}),!1):u()}};themeAdmin.criticalCss=t}(window.jQuery);