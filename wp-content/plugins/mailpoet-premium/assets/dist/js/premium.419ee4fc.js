!function(){var __webpack_modules__={703:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},697:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(703)()},414:function(module){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},718:function(module){"use strict";module.exports=MailPoet},514:function(module){"use strict";module.exports=MailPoetLib.Common},797:function(module){"use strict";module.exports=MailPoetLib.Hooks},171:function(module){"use strict";module.exports=MailPoetLib.Listing},311:function(module){"use strict";module.exports=MailPoetLib.React},704:function(module){"use strict";module.exports=MailPoetLib.ReactStringReplace}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},function(){"use strict";var modules_namespaceObject={};__webpack_require__.r(modules_namespaceObject),__webpack_require__.d(modules_namespaceObject,{VERSION:function(){return VERSION},after:function(){return after},all:function(){return every},allKeys:function(){return allKeys},any:function(){return some},assign:function(){return extendOwn},before:function(){return before},bind:function(){return bind},bindAll:function(){return bindAll},chain:function(){return chain},chunk:function(){return chunk},clone:function(){return clone},collect:function(){return map},compact:function(){return compact},compose:function(){return compose},constant:function(){return constant},contains:function(){return contains},countBy:function(){return countBy},create:function(){return create},debounce:function(){return debounce},default:function(){return underscore_array_methods},defaults:function(){return defaults},defer:function(){return defer},delay:function(){return delay},detect:function(){return find},difference:function(){return difference},drop:function(){return rest},each:function(){return each},escape:function(){return modules_escape},every:function(){return every},extend:function(){return extend},extendOwn:function(){return extendOwn},filter:function(){return filter},find:function(){return find},findIndex:function(){return findIndex},findKey:function(){return findKey},findLastIndex:function(){return findLastIndex},findWhere:function(){return findWhere},first:function(){return first},flatten:function(){return flatten_flatten},foldl:function(){return reduce},foldr:function(){return reduceRight},forEach:function(){return each},functions:function(){return functions},get:function(){return get},groupBy:function(){return groupBy},has:function(){return has_has},head:function(){return first},identity:function(){return identity},include:function(){return contains},includes:function(){return contains},indexBy:function(){return indexBy},indexOf:function(){return indexOf},initial:function(){return initial},inject:function(){return reduce},intersection:function(){return intersection},invert:function(){return invert},invoke:function(){return invoke},isArguments:function(){return modules_isArguments},isArray:function(){return isArray},isArrayBuffer:function(){return isArrayBuffer},isBoolean:function(){return isBoolean},isDataView:function(){return modules_isDataView},isDate:function(){return isDate},isElement:function(){return isElement},isEmpty:function(){return isEmpty},isEqual:function(){return isEqual},isError:function(){return isError},isFinite:function(){return isFinite_isFinite},isFunction:function(){return modules_isFunction},isMap:function(){return isMap},isMatch:function(){return isMatch},isNaN:function(){return isNaN_isNaN},isNull:function(){return isNull},isNumber:function(){return isNumber},isObject:function(){return isObject},isRegExp:function(){return isRegExp},isSet:function(){return isSet},isString:function(){return isString},isSymbol:function(){return isSymbol},isTypedArray:function(){return modules_isTypedArray},isUndefined:function(){return isUndefined},isWeakMap:function(){return isWeakMap},isWeakSet:function(){return isWeakSet},iteratee:function(){return iteratee},keys:function(){return keys},last:function(){return last},lastIndexOf:function(){return lastIndexOf},map:function(){return map},mapObject:function(){return mapObject},matcher:function(){return matcher},matches:function(){return matcher},max:function(){return max},memoize:function(){return memoize},methods:function(){return functions},min:function(){return min},mixin:function(){return mixin},negate:function(){return negate},noop:function(){return noop},now:function(){return now},object:function(){return object},omit:function(){return omit},once:function(){return once},pairs:function(){return pairs},partial:function(){return modules_partial},partition:function(){return partition},pick:function(){return pick},pluck:function(){return pluck},property:function(){return property},propertyOf:function(){return propertyOf},random:function(){return random},range:function(){return range},reduce:function(){return reduce},reduceRight:function(){return reduceRight},reject:function(){return reject},rest:function(){return rest},restArguments:function(){return restArguments},result:function(){return result},sample:function(){return sample},select:function(){return filter},shuffle:function(){return shuffle},size:function(){return size},some:function(){return some},sortBy:function(){return sortBy},sortedIndex:function(){return sortedIndex},tail:function(){return rest},take:function(){return first},tap:function(){return tap},template:function(){return template},templateSettings:function(){return templateSettings},throttle:function(){return throttle},times:function(){return times},toArray:function(){return toArray},toPath:function(){return toPath},transpose:function(){return unzip},unescape:function(){return modules_unescape},union:function(){return union},uniq:function(){return uniq},unique:function(){return uniq},uniqueId:function(){return uniqueId},unzip:function(){return unzip},values:function(){return values},where:function(){return where},without:function(){return without},wrap:function(){return wrap},zip:function(){return zip}});var external_MailPoetLib_React_=__webpack_require__(311),external_MailPoetLib_React_default=__webpack_require__.n(external_MailPoetLib_React_),external_MailPoetLib_Hooks_=__webpack_require__(797),external_MailPoetLib_Hooks_default=__webpack_require__.n(external_MailPoetLib_Hooks_),external_MailPoet_=__webpack_require__(718),external_MailPoet_default=__webpack_require__.n(external_MailPoet_),external_MailPoetLib_Common_=__webpack_require__(514),external_MailPoetLib_ReactStringReplace_=__webpack_require__(704),external_MailPoetLib_ReactStringReplace_default=__webpack_require__.n(external_MailPoetLib_ReactStringReplace_),external_MailPoetLib_HelpTooltip_namespaceObject=MailPoetLib.HelpTooltip,external_MailPoetLib_HelpTooltip_default=__webpack_require__.n(external_MailPoetLib_HelpTooltip_namespaceObject),prop_types=__webpack_require__(697),prop_types_default=__webpack_require__.n(prop_types);function RevenuesStats(_ref){let{revenue:revenue}=_ref;return null===revenue||0===revenue.count?null:external_MailPoetLib_React_default().createElement("div",{className:"mailpoet_stat_big mailpoet_stat_spaced"},external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-statistics-value"},external_MailPoetLib_ReactStringReplace_default()(external_MailPoet_default().I18n.t("revenuesStats"),/(%1s|%2s)/,(match=>"%1s"===match?external_MailPoetLib_React_default().createElement("span",{className:"mailpoet-statistics-value-number",key:"a"},revenue.formatted):"%2s"===match?revenue.count:"")),external_MailPoetLib_React_default().createElement(external_MailPoetLib_HelpTooltip_default(),{tooltip:external_MailPoet_default().I18n.t("revenueStatsTooltip"),place:"top",tooltipId:"helpTooltipStatsRevenue"})))}RevenuesStats.propTypes={revenue:prop_types_default().shape({value:prop_types_default().number.isRequired,formatted:prop_types_default().string.isRequired,count:prop_types_default().number.isRequired})},RevenuesStats.defaultProps={revenue:{}};var revenues_stats=RevenuesStats;function ClickedLinksTable(props){const{links:links}=props;let content;return content=0===links.length?external_MailPoetLib_React_default().createElement("tr",null,external_MailPoetLib_React_default().createElement("td",{colSpan:"2"},external_MailPoet_default().I18n.t("noClickedLinksFound"))):links.map((row=>external_MailPoetLib_React_default().createElement("tr",{key:`link-${row.url}`},external_MailPoetLib_React_default().createElement("td",null,function(url){const parts=url.split("?"),domain=parts[0];let params=parts[1]||"";return params&&(params=params.split("&").filter((p=>!p.startsWith("utm_medium")&&!p.startsWith("utm_source")&&!p.startsWith("utm_campaign"))).join("&")),params&&(params=`?${params}`),external_MailPoet_default().getShortcodeLinks()[url]?external_MailPoet_default().getShortcodeLinks()[url]:external_MailPoetLib_React_default().createElement("a",{href:url,target:"_blank",rel:"noopener noreferrer",className:"mailpoet-stats-link"},domain+params)}(row.url)),external_MailPoetLib_React_default().createElement("td",null,row.cnt)))),external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-listing mailpoet-listing-no-space"},external_MailPoetLib_React_default().createElement("table",{className:"mailpoet-listing-table"},external_MailPoetLib_React_default().createElement("thead",null,external_MailPoetLib_React_default().createElement("tr",null,external_MailPoetLib_React_default().createElement("th",null,external_MailPoet_default().I18n.t("linkColumn")),external_MailPoetLib_React_default().createElement("th",null,external_MailPoet_default().I18n.t("uniqueClicksColumn")))),external_MailPoetLib_React_default().createElement("tbody",null,content)))}ClickedLinksTable.propTypes={links:prop_types_default().arrayOf(prop_types_default().shape({cnt:prop_types_default().number.isRequired,url:prop_types_default().string.isRequired})).isRequired};var clicked_links_table=ClickedLinksTable;function PurchasedProduct(_ref){let{product:product}=_ref;const Element=product.product_id?"a":"div";return external_MailPoetLib_React_default().createElement(Element,{className:"mailpoet-stats-product","data-acceptance-id":`purchased-product-${product.name}`,href:product.product_id&&`post.php?post=${product.product_id}&action=edit`,target:"_blank"},external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-stats-product-image",style:{backgroundImage:product.image_url?`url('${product.image_url}')`:null}}),external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-stats-product-info"},external_MailPoetLib_React_default().createElement("h5",{className:"mailpoet-h5"},product.name),external_MailPoetLib_React_default().createElement("p",null,external_MailPoet_default().I18n.t("nProductsSold").replace("%1s",product.count)),external_MailPoetLib_React_default().createElement("p",null,external_MailPoet_default().I18n.t("totalNetRevenue").replace("%1s",product.formatted_total))))}PurchasedProduct.propTypes={product:prop_types_default().shape({name:prop_types_default().string.isRequired,count:prop_types_default().number.isRequired,formatted_total:prop_types_default().string.isRequired,image_url:prop_types_default().string,product_id:prop_types_default().number}).isRequired};var purchased_product=PurchasedProduct;function PurchasedProducts(_ref){let{newsletter:newsletter}=_ref;const[initalized,setInitialized]=(0,external_MailPoetLib_React_.useState)(!1),[products,setProducts]=(0,external_MailPoetLib_React_.useState)(null);return(0,external_MailPoetLib_React_.useEffect)((()=>{external_MailPoet_default().Ajax.post({api_version:external_MailPoet_default().apiVersion,endpoint:"stats",action:"getProducts",data:{newsletter_id:newsletter.id}}).done((response=>{setInitialized(!0),setProducts(response.data)}))}),[newsletter.id]),null===products||0===products.length?initalized?external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,external_MailPoetLib_React_default().createElement("p",null,external_MailPoet_default().I18n.t("noProducts1")),external_MailPoetLib_React_default().createElement("p",null,external_MailPoetLib_ReactStringReplace_default()(external_MailPoet_default().I18n.t("noProducts2"),/\[link\](.*?)\[\/link\]/,(match=>external_MailPoetLib_React_default().createElement("a",{key:match,href:"https://www.mailpoet.com/blog/woocommerce-follow-up-emails/",rel:"noopener noreferrer",target:"_blank",className:"mailpoet-link"},match)))),external_MailPoetLib_React_default().createElement("p",null,external_MailPoetLib_ReactStringReplace_default()(external_MailPoet_default().I18n.t("noProducts3"),/\[link\](.*?)\[\/link\]/,(match=>external_MailPoetLib_React_default().createElement("a",{key:match,href:"https://kb.mailpoet.com/article/275-how-to-add-a-products-widget-to-the-newsletter","data-beacon-article":"5d3983ff2c7d3a2ec4bf66ea",rel:"noopener noreferrer",target:"_blank",className:"mailpoet-link"},match))))):external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Loader,null):external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-stats-products","data-acceptance-id":"purchased_product_list"},Object.values(products).map((product=>external_MailPoetLib_React_default().createElement(purchased_product,{product:product,key:product.product_id}))))}PurchasedProducts.propTypes={newsletter:prop_types_default().shape({id:prop_types_default().string.isRequired}).isRequired};var purchased_products=PurchasedProducts,VERSION="1.13.2",root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,SymbolProto="undefined"!=typeof Symbol?Symbol.prototype:null,push=ArrayProto.push,slice=ArrayProto.slice,_setup_toString=ObjProto.toString,_setup_hasOwnProperty=ObjProto.hasOwnProperty,supportsArrayBuffer="undefined"!=typeof ArrayBuffer,supportsDataView="undefined"!=typeof DataView,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,nativeIsView=supportsArrayBuffer&&ArrayBuffer.isView,_isNaN=isNaN,_isFinite=isFinite,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function restArguments(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;index<length;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}var args=Array(startIndex+1);for(index=0;index<startIndex;index++)args[index]=arguments[index];return args[startIndex]=rest,func.apply(this,args)}}function isObject(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj}function isNull(obj){return null===obj}function isUndefined(obj){return void 0===obj}function isBoolean(obj){return!0===obj||!1===obj||"[object Boolean]"===_setup_toString.call(obj)}function isElement(obj){return!(!obj||1!==obj.nodeType)}function tagTester(name){var tag="[object "+name+"]";return function(obj){return _setup_toString.call(obj)===tag}}var isString=tagTester("String"),isNumber=tagTester("Number"),isDate=tagTester("Date"),isRegExp=tagTester("RegExp"),isError=tagTester("Error"),isSymbol=tagTester("Symbol"),isArrayBuffer=tagTester("ArrayBuffer"),isFunction=tagTester("Function"),nodelist=root.document&&root.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof nodelist&&(isFunction=function(obj){return"function"==typeof obj||!1});var modules_isFunction=isFunction,_hasObjectTag=tagTester("Object"),hasStringTagBug=supportsDataView&&_hasObjectTag(new DataView(new ArrayBuffer(8))),isIE11="undefined"!=typeof Map&&_hasObjectTag(new Map),isDataView=tagTester("DataView");var modules_isDataView=hasStringTagBug?function(obj){return null!=obj&&modules_isFunction(obj.getInt8)&&isArrayBuffer(obj.buffer)}:isDataView,isArray=nativeIsArray||tagTester("Array");function has(obj,key){return null!=obj&&_setup_hasOwnProperty.call(obj,key)}var isArguments=tagTester("Arguments");!function(){isArguments(arguments)||(isArguments=function(obj){return has(obj,"callee")})}();var modules_isArguments=isArguments;function isFinite_isFinite(obj){return!isSymbol(obj)&&_isFinite(obj)&&!isNaN(parseFloat(obj))}function isNaN_isNaN(obj){return isNumber(obj)&&_isNaN(obj)}function constant(value){return function(){return value}}function createSizePropertyCheck(getSizeProperty){return function(collection){var sizeProperty=getSizeProperty(collection);return"number"==typeof sizeProperty&&sizeProperty>=0&&sizeProperty<=MAX_ARRAY_INDEX}}function shallowProperty(key){return function(obj){return null==obj?void 0:obj[key]}}var _getByteLength=shallowProperty("byteLength"),_isBufferLike=createSizePropertyCheck(_getByteLength),typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var modules_isTypedArray=supportsArrayBuffer?function(obj){return nativeIsView?nativeIsView(obj)&&!modules_isDataView(obj):_isBufferLike(obj)&&typedArrayPattern.test(_setup_toString.call(obj))}:constant(!1),_getLength=shallowProperty("length");function collectNonEnumProps(obj,keys){keys=function(keys){for(var hash={},l=keys.length,i=0;i<l;++i)hash[keys[i]]=!0;return{contains:function(key){return!0===hash[key]},push:function(key){return hash[key]=!0,keys.push(key)}}}(keys);var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=modules_isFunction(constructor)&&constructor.prototype||ObjProto,prop="constructor";for(has(obj,prop)&&!keys.contains(prop)&&keys.push(prop);nonEnumIdx--;)(prop=nonEnumerableProps[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!keys.contains(prop)&&keys.push(prop)}function keys(obj){if(!isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)has(obj,key)&&keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys}function isEmpty(obj){if(null==obj)return!0;var length=_getLength(obj);return"number"==typeof length&&(isArray(obj)||isString(obj)||modules_isArguments(obj))?0===length:0===_getLength(keys(obj))}function isMatch(object,attrs){var _keys=keys(attrs),length=_keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;i<length;i++){var key=_keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0}function _(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)}function toBufferView(bufferSource){return new Uint8Array(bufferSource.buffer||bufferSource,bufferSource.byteOffset||0,_getByteLength(bufferSource))}_.VERSION=VERSION,_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)};function eq(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return!1;if(a!=a)return b!=b;var type=typeof a;return("function"===type||"object"===type||"object"==typeof b)&&deepEq(a,b,aStack,bStack)}function deepEq(a,b,aStack,bStack){a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=_setup_toString.call(a);if(className!==_setup_toString.call(b))return!1;if(hasStringTagBug&&"[object Object]"==className&&modules_isDataView(a)){if(!modules_isDataView(b))return!1;className="[object DataView]"}switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object Symbol]":return SymbolProto.valueOf.call(a)===SymbolProto.valueOf.call(b);case"[object ArrayBuffer]":case"[object DataView]":return deepEq(toBufferView(a),toBufferView(b),aStack,bStack)}var areArrays="[object Array]"===className;if(!areArrays&&modules_isTypedArray(a)){if(_getByteLength(a)!==_getByteLength(b))return!1;if(a.buffer===b.buffer&&a.byteOffset===b.byteOffset)return!0;areArrays=!0}if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(modules_isFunction(aCtor)&&aCtor instanceof aCtor&&modules_isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}bStack=bStack||[];for(var length=(aStack=aStack||[]).length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,_keys=keys(a);if(length=_keys.length,keys(b).length!==length)return!1;for(;length--;)if(!has(b,key=_keys[length])||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0}function isEqual(a,b){return eq(a,b)}function allKeys(obj){if(!isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys}function ie11fingerprint(methods){var length=_getLength(methods);return function(obj){if(null==obj)return!1;var keys=allKeys(obj);if(_getLength(keys))return!1;for(var i=0;i<length;i++)if(!modules_isFunction(obj[methods[i]]))return!1;return methods!==weakMapMethods||!modules_isFunction(obj[forEachName])}}var forEachName="forEach",commonInit=["clear","delete"],mapTail=["get","has","set"],mapMethods=commonInit.concat(forEachName,mapTail),weakMapMethods=commonInit.concat(mapTail),setMethods=["add"].concat(commonInit,forEachName,"has"),isMap=isIE11?ie11fingerprint(mapMethods):tagTester("Map"),isWeakMap=isIE11?ie11fingerprint(weakMapMethods):tagTester("WeakMap"),isSet=isIE11?ie11fingerprint(setMethods):tagTester("Set"),isWeakSet=tagTester("WeakSet");function values(obj){for(var _keys=keys(obj),length=_keys.length,values=Array(length),i=0;i<length;i++)values[i]=obj[_keys[i]];return values}function pairs(obj){for(var _keys=keys(obj),length=_keys.length,pairs=Array(length),i=0;i<length;i++)pairs[i]=[_keys[i],obj[_keys[i]]];return pairs}function invert(obj){for(var result={},_keys=keys(obj),i=0,length=_keys.length;i<length;i++)result[obj[_keys[i]]]=_keys[i];return result}function functions(obj){var names=[];for(var key in obj)modules_isFunction(obj[key])&&names.push(key);return names.sort()}function createAssigner(keysFunc,defaults){return function(obj){var length=arguments.length;if(defaults&&(obj=Object(obj)),length<2||null==obj)return obj;for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){var key=keys[i];defaults&&void 0!==obj[key]||(obj[key]=source[key])}return obj}}var extend=createAssigner(allKeys),extendOwn=createAssigner(keys),defaults=createAssigner(allKeys,!0);function baseCreate(prototype){if(!isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);var Ctor=function(){};Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result}function create(prototype,props){var result=baseCreate(prototype);return props&&extendOwn(result,props),result}function clone(obj){return isObject(obj)?isArray(obj)?obj.slice():extend({},obj):obj}function tap(obj,interceptor){return interceptor(obj),obj}function toPath(path){return isArray(path)?path:[path]}function _toPath_toPath(path){return _.toPath(path)}function deepGet(obj,path){for(var length=path.length,i=0;i<length;i++){if(null==obj)return;obj=obj[path[i]]}return length?obj:void 0}function get(object,path,defaultValue){var value=deepGet(object,_toPath_toPath(path));return isUndefined(value)?defaultValue:value}function has_has(obj,path){for(var length=(path=_toPath_toPath(path)).length,i=0;i<length;i++){var key=path[i];if(!has(obj,key))return!1;obj=obj[key]}return!!length}function identity(value){return value}function matcher(attrs){return attrs=extendOwn({},attrs),function(obj){return isMatch(obj,attrs)}}function property(path){return path=_toPath_toPath(path),function(obj){return deepGet(obj,path)}}function optimizeCb(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}}function baseIteratee(value,context,argCount){return null==value?identity:modules_isFunction(value)?optimizeCb(value,context,argCount):isObject(value)&&!isArray(value)?matcher(value):property(value)}function iteratee(value,context){return baseIteratee(value,context,1/0)}function cb(value,context,argCount){return _.iteratee!==iteratee?_.iteratee(value,context):baseIteratee(value,context,argCount)}function mapObject(obj,iteratee,context){iteratee=cb(iteratee,context);for(var _keys=keys(obj),length=_keys.length,results={},index=0;index<length;index++){var currentKey=_keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results}function noop(){}function propertyOf(obj){return null==obj?noop:function(path){return get(obj,path)}}function times(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum}function random(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))}_.toPath=toPath,_.iteratee=iteratee;var now=Date.now||function(){return(new Date).getTime()};function createEscaper(map){var escaper=function(match){return map[match]},source="(?:"+keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}}var _escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},modules_escape=createEscaper(_escapeMap),modules_unescape=createEscaper(invert(_escapeMap)),templateSettings=_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;function escapeChar(match){return"\\"+escapes[match]}var bareIdentifier=/^\s*(\w|\$)+\s*$/;function template(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,(function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escapeRegExp,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match})),source+="';\n";var render,argument=settings.variable;if(argument){if(!bareIdentifier.test(argument))throw new Error("variable is not a bare identifier: "+argument)}else source="with(obj||{}){\n"+source+"}\n",argument="obj";source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(argument,"_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)};return template.source="function("+argument+"){\n"+source+"}",template}function result(obj,path,fallback){var length=(path=_toPath_toPath(path)).length;if(!length)return modules_isFunction(fallback)?fallback.call(obj):fallback;for(var i=0;i<length;i++){var prop=null==obj?void 0:obj[path[i]];void 0===prop&&(prop=fallback,i=length),obj=modules_isFunction(prop)?prop.call(obj):prop}return obj}var idCounter=0;function uniqueId(prefix){var id=++idCounter+"";return prefix?prefix+id:id}function chain(obj){var instance=_(obj);return instance._chain=!0,instance}function executeBound(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return isObject(result)?result:self}var partial=restArguments((function(func,boundArgs){var placeholder=partial.placeholder,bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===placeholder?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound}));partial.placeholder=_;var modules_partial=partial,bind=restArguments((function(func,context,args){if(!modules_isFunction(func))throw new TypeError("Bind must be called on a function");var bound=restArguments((function(callArgs){return executeBound(func,bound,context,this,args.concat(callArgs))}));return bound})),_isArrayLike=createSizePropertyCheck(_getLength);function flatten(input,depth,strict,output){if(output=output||[],depth||0===depth){if(depth<=0)return output.concat(input)}else depth=1/0;for(var idx=output.length,i=0,length=_getLength(input);i<length;i++){var value=input[i];if(_isArrayLike(value)&&(isArray(value)||modules_isArguments(value)))if(depth>1)flatten(value,depth-1,strict,output),idx=output.length;else for(var j=0,len=value.length;j<len;)output[idx++]=value[j++];else strict||(output[idx++]=value)}return output}var bindAll=restArguments((function(obj,keys){var index=(keys=flatten(keys,!1,!1)).length;if(index<1)throw new Error("bindAll must be passed function names");for(;index--;){var key=keys[index];obj[key]=bind(obj[key],obj)}return obj}));function memoize(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize}var delay=restArguments((function(func,wait,args){return setTimeout((function(){return func.apply(null,args)}),wait)})),defer=modules_partial(delay,_,1);function throttle(func,wait,options){var timeout,context,args,result,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)},throttled=function(){var _now=now();previous||!1!==options.leading||(previous=_now);var remaining=wait-(_now-previous);return context=this,args=arguments,remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=_now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result};return throttled.cancel=function(){clearTimeout(timeout),previous=0,timeout=context=args=null},throttled}function debounce(func,wait,immediate){var timeout,previous,args,result,context,later=function(){var passed=now()-previous;wait>passed?timeout=setTimeout(later,wait-passed):(timeout=null,immediate||(result=func.apply(context,args)),timeout||(args=context=null))},debounced=restArguments((function(_args){return context=this,args=_args,previous=now(),timeout||(timeout=setTimeout(later,wait),immediate&&(result=func.apply(context,args))),result}));return debounced.cancel=function(){clearTimeout(timeout),timeout=args=context=null},debounced}function wrap(func,wrapper){return modules_partial(wrapper,func)}function negate(predicate){return function(){return!predicate.apply(this,arguments)}}function compose(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}}function after(times,func){return function(){if(--times<1)return func.apply(this,arguments)}}function before(times,func){var memo;return function(){return--times>0&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}}var once=modules_partial(before,2);function findKey(obj,predicate,context){predicate=cb(predicate,context);for(var key,_keys=keys(obj),i=0,length=_keys.length;i<length;i++)if(predicate(obj[key=_keys[i]],key,obj))return key}function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=_getLength(array),index=dir>0?0:length-1;index>=0&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return-1}}var findIndex=createPredicateIndexFinder(1),findLastIndex=createPredicateIndexFinder(-1);function sortedIndex(array,obj,iteratee,context){for(var value=(iteratee=cb(iteratee,context,1))(obj),low=0,high=_getLength(array);low<high;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=_getLength(array);if("number"==typeof idx)dir>0?i=idx>=0?idx:Math.max(idx+length,i):length=idx>=0?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length)return array[idx=sortedIndex(array,item)]===item?idx:-1;if(item!=item)return(idx=predicateFind(slice.call(array,i,length),isNaN_isNaN))>=0?idx+i:-1;for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir)if(array[idx]===item)return idx;return-1}}var indexOf=createIndexFinder(1,findIndex,sortedIndex),lastIndexOf=createIndexFinder(-1,findLastIndex);function find(obj,predicate,context){var key=(_isArrayLike(obj)?findIndex:findKey)(obj,predicate,context);if(void 0!==key&&-1!==key)return obj[key]}function findWhere(obj,attrs){return find(obj,matcher(attrs))}function each(obj,iteratee,context){var i,length;if(iteratee=optimizeCb(iteratee,context),_isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var _keys=keys(obj);for(i=0,length=_keys.length;i<length;i++)iteratee(obj[_keys[i]],_keys[i],obj)}return obj}function map(obj,iteratee,context){iteratee=cb(iteratee,context);for(var _keys=!_isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,results=Array(length),index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results}function createReduce(dir){var reducer=function(obj,iteratee,memo,initial){var _keys=!_isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,index=dir>0?0:length-1;for(initial||(memo=obj[_keys?_keys[index]:index],index+=dir);index>=0&&index<length;index+=dir){var currentKey=_keys?_keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};return function(obj,iteratee,memo,context){var initial=arguments.length>=3;return reducer(obj,optimizeCb(iteratee,context,4),memo,initial)}}var reduce=createReduce(1),reduceRight=createReduce(-1);function filter(obj,predicate,context){var results=[];return predicate=cb(predicate,context),each(obj,(function(value,index,list){predicate(value,index,list)&&results.push(value)})),results}function reject(obj,predicate,context){return filter(obj,negate(cb(predicate)),context)}function every(obj,predicate,context){predicate=cb(predicate,context);for(var _keys=!_isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0}function some(obj,predicate,context){predicate=cb(predicate,context);for(var _keys=!_isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1}function contains(obj,item,fromIndex,guard){return _isArrayLike(obj)||(obj=values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),indexOf(obj,item,fromIndex)>=0}var invoke=restArguments((function(obj,path,args){var contextPath,func;return modules_isFunction(path)?func=path:(path=_toPath_toPath(path),contextPath=path.slice(0,-1),path=path[path.length-1]),map(obj,(function(context){var method=func;if(!method){if(contextPath&&contextPath.length&&(context=deepGet(context,contextPath)),null==context)return;method=context[path]}return null==method?method:method.apply(context,args)}))}));function pluck(obj,key){return map(obj,property(key))}function where(obj,attrs){return filter(obj,matcher(attrs))}function max(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee||"number"==typeof iteratee&&"object"!=typeof obj[0]&&null!=obj)for(var i=0,length=(obj=_isArrayLike(obj)?obj:values(obj)).length;i<length;i++)null!=(value=obj[i])&&value>result&&(result=value);else iteratee=cb(iteratee,context),each(obj,(function(v,index,list){((computed=iteratee(v,index,list))>lastComputed||computed===-1/0&&result===-1/0)&&(result=v,lastComputed=computed)}));return result}function min(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee||"number"==typeof iteratee&&"object"!=typeof obj[0]&&null!=obj)for(var i=0,length=(obj=_isArrayLike(obj)?obj:values(obj)).length;i<length;i++)null!=(value=obj[i])&&value<result&&(result=value);else iteratee=cb(iteratee,context),each(obj,(function(v,index,list){((computed=iteratee(v,index,list))<lastComputed||computed===1/0&&result===1/0)&&(result=v,lastComputed=computed)}));return result}var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function toArray(obj){return obj?isArray(obj)?slice.call(obj):isString(obj)?obj.match(reStrSymbol):_isArrayLike(obj)?map(obj,identity):values(obj):[]}function sample(obj,n,guard){if(null==n||guard)return _isArrayLike(obj)||(obj=values(obj)),obj[random(obj.length-1)];var sample=toArray(obj),length=_getLength(sample);n=Math.max(Math.min(n,length),0);for(var last=length-1,index=0;index<n;index++){var rand=random(index,last),temp=sample[index];sample[index]=sample[rand],sample[rand]=temp}return sample.slice(0,n)}function shuffle(obj){return sample(obj,1/0)}function sortBy(obj,iteratee,context){var index=0;return iteratee=cb(iteratee,context),pluck(map(obj,(function(value,key,list){return{value:value,index:index++,criteria:iteratee(value,key,list)}})).sort((function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index-right.index})),"value")}function group(behavior,partition){return function(obj,iteratee,context){var result=partition?[[],[]]:{};return iteratee=cb(iteratee,context),each(obj,(function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)})),result}}var groupBy=group((function(result,value,key){has(result,key)?result[key].push(value):result[key]=[value]})),indexBy=group((function(result,value,key){result[key]=value})),countBy=group((function(result,value,key){has(result,key)?result[key]++:result[key]=1})),partition=group((function(result,value,pass){result[pass?0:1].push(value)}),!0);function size(obj){return null==obj?0:_isArrayLike(obj)?obj.length:keys(obj).length}function keyInObj(value,key,obj){return key in obj}var pick=restArguments((function(obj,keys){var result={},iteratee=keys[0];if(null==obj)return result;modules_isFunction(iteratee)?(keys.length>1&&(iteratee=optimizeCb(iteratee,keys[1])),keys=allKeys(obj)):(iteratee=keyInObj,keys=flatten(keys,!1,!1),obj=Object(obj));for(var i=0,length=keys.length;i<length;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result})),omit=restArguments((function(obj,keys){var context,iteratee=keys[0];return modules_isFunction(iteratee)?(iteratee=negate(iteratee),keys.length>1&&(context=keys[1])):(keys=map(flatten(keys,!1,!1),String),iteratee=function(value,key){return!contains(keys,key)}),pick(obj,iteratee,context)}));function initial(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))}function first(array,n,guard){return null==array||array.length<1?null==n||guard?void 0:[]:null==n||guard?array[0]:initial(array,array.length-n)}function rest(array,n,guard){return slice.call(array,null==n||guard?1:n)}function last(array,n,guard){return null==array||array.length<1?null==n||guard?void 0:[]:null==n||guard?array[array.length-1]:rest(array,Math.max(0,array.length-n))}function compact(array){return filter(array,Boolean)}function flatten_flatten(array,depth){return flatten(array,depth,!1)}var difference=restArguments((function(array,rest){return rest=flatten(rest,!0,!0),filter(array,(function(value){return!contains(rest,value)}))})),without=restArguments((function(array,otherArrays){return difference(array,otherArrays)}));function uniq(array,isSorted,iteratee,context){isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=_getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted&&!iteratee?(i&&seen===computed||result.push(value),seen=computed):iteratee?contains(seen,computed)||(seen.push(computed),result.push(value)):contains(result,value)||result.push(value)}return result}var union=restArguments((function(arrays){return uniq(flatten(arrays,!0,!0))}));function intersection(array){for(var result=[],argsLength=arguments.length,i=0,length=_getLength(array);i<length;i++){var item=array[i];if(!contains(result,item)){var j;for(j=1;j<argsLength&&contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result}function unzip(array){for(var length=array&&max(array,_getLength).length||0,result=Array(length),index=0;index<length;index++)result[index]=pluck(array,index);return result}var zip=restArguments(unzip);function object(list,values){for(var result={},i=0,length=_getLength(list);i<length;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result}function range(start,stop,step){null==stop&&(stop=start||0,start=0),step||(step=stop<start?-1:1);for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range}function chunk(array,count){if(null==count||count<1)return[];for(var result=[],i=0,length=array.length;i<length;)result.push(slice.call(array,i,i+=count));return result}function chainResult(instance,obj){return instance._chain?_(obj).chain():obj}function mixin(obj){return each(functions(obj),(function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),chainResult(this,func.apply(_,args))}})),_}each(["pop","push","reverse","shift","sort","splice","unshift"],(function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return null!=obj&&(method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0]),chainResult(this,obj)}})),each(["concat","join","slice"],(function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return null!=obj&&(obj=method.apply(obj,arguments)),chainResult(this,obj)}}));var underscore_array_methods=_,index_default_=mixin(modules_namespaceObject);index_default_._=index_default_;var index_default=index_default_,external_MailPoetLib_Listing_=__webpack_require__(171);const columns=[{name:"email",label:external_MailPoet_default().I18n.t("subscriberColumn"),sortable:!0},{name:"status",label:external_MailPoet_default().I18n.t("statusColumn"),sortable:!0},{name:"created_at",label:external_MailPoet_default().I18n.t("dateAndTimeColumn"),sortable:!0}],messages={onLoadingItems:()=>external_MailPoet_default().I18n.t("loadingEngagementItems"),onNoItemsFound:()=>external_MailPoet_default().I18n.t("noEngagementItemsFound")},trackFilteredByClickedLinks=index_default.once((()=>external_MailPoet_default().trackEvent("User has filtered subscribers by clicked links")));function getListingItemKey(item){return`item-${item.id}-${item.status}`}function renderStatItem(statistic){let status,email;switch(statistic.status){case"opened":status=external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,null,external_MailPoet_default().I18n.t("opened"));break;case"machine-opened":status=external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,null,external_MailPoet_default().I18n.t("machine-opened"));break;case"clicked":status=external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,{isInverted:!0},external_MailPoet_default().I18n.t("clicked"));break;case"unsubscribed":status=external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,{variant:"unknown",isInverted:!0},external_MailPoet_default().I18n.t("unsubscribed"));break;case"unopened":status=external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,null,external_MailPoet_default().I18n.t("unopened"))}return email=statistic.email?external_MailPoetLib_React_default().createElement("a",{className:"mailpoet-listing-title",href:statistic.subscriber_url},statistic.email):external_MailPoet_default().I18n.t("deletedSubscriber"),external_MailPoetLib_React_default().createElement("div",null,external_MailPoetLib_React_default().createElement("td",{className:"manage-column column-primary has-row-actions"},email,external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-listing-subtitle"},statistic.first_name," ",statistic.last_name)),external_MailPoetLib_React_default().createElement("td",{className:"column","data-colname":external_MailPoet_default().I18n.t("statusColumn")},status),external_MailPoetLib_React_default().createElement("td",{className:"column-date","data-colname":external_MailPoet_default().I18n.t("dateAndTimeColumn")},external_MailPoetLib_React_default().createElement("abbr",null,external_MailPoet_default().Date.format(statistic.created_at))))}class SubscriberEngagementListing extends external_MailPoetLib_React_default().Component{constructor(props){super(props),this.renderCreateSegmentButton=this.renderCreateSegmentButton.bind(this),this.handleCreateSegment=this.handleCreateSegment.bind(this),this.canCreateSegment=this.canCreateSegment.bind(this)}handleCreateSegment(group,newsletter,linkId){const{handleCreateSegment:handleCreateSegment}=this.props;handleCreateSegment(group,newsletter,linkId)}canCreateSegment(listingState){const{newsletter:newsletter}=this.props;return"standard"===newsletter.type&&-1!==["opened","clicked","unopened"].indexOf(listingState.group)}renderCreateSegmentButton(listingState){const{newsletter:newsletter,savingSegment:savingSegment}=this.props;if(this.canCreateSegment(listingState,newsletter))return external_MailPoetLib_React_default().createElement("input",{onClick:index_default.partial(this.handleCreateSegment,listingState.group,newsletter,listingState.filter.link),type:"submit",value:savingSegment?external_MailPoet_default().I18n.t("savingSegment"):external_MailPoet_default().I18n.t("createSegment"),className:"mailpoet-button mailpoet-button-small button-primary",disabled:savingSegment})}render(){const{params:params,location:location}=this.props;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_Listing_.Listing,{limit:external_MailPoet_default().listingPerPage,location:location,params:params,endpoint:"stats",base_url:"stats/:id",onRenderItem:renderStatItem,getListingItemKey:getListingItemKey,onBeforeSelectFilter:trackFilteredByClickedLinks,columns:columns,messages:messages,sort_by:"created_at",sort_order:"desc",renderExtraActions:this.renderCreateSegmentButton})}}SubscriberEngagementListing.propTypes={params:prop_types_default().shape({id:prop_types_default().string.isRequired,0:prop_types_default().string}).isRequired,location:prop_types_default().object.isRequired,handleCreateSegment:prop_types_default().func.isRequired,savingSegment:prop_types_default().bool.isRequired,newsletter:prop_types_default().shape({id:prop_types_default().string.isRequired,subject:prop_types_default().string.isRequired,type:prop_types_default().string.isRequired}).isRequired};var subscriber_engagement_listing=SubscriberEngagementListing;const buildSegmentFilterData=(group,newsletter,linkId)=>{const filterData={segmentType:"email",action:"unopened"===group?"opened":group,operator:"unopened"===group?"none":"any"};return linkId&&(filterData.link_ids=[parseInt(linkId,10)]),"clicked"===group?filterData.newsletter_id=parseInt(newsletter.id,10):filterData.newsletters=[parseInt(newsletter.id,10)],filterData};class SubscriberEngagement extends external_MailPoetLib_React_default().Component{constructor(props){super(props),this.state={savingSegment:!1,segmentCreated:!1,segmentErrors:[]},this.handleCreateSegment=this.handleCreateSegment.bind(this)}handleCreateSegment(group,newsletter,linkId){const name=`${newsletter.subject}  ${group}`;this.setState({savingSegment:!0,segmentCreated:!1,segmentErrors:[]}),external_MailPoet_default().Ajax.post({api_version:external_MailPoet_default().apiVersion,endpoint:"dynamic_segments",action:"save",data:{name:name,filters_connect:"and",filters:[buildSegmentFilterData(group,newsletter,linkId)]}}).always((()=>{this.setState({savingSegment:!1})})).done((()=>{this.setState({segmentCreated:!0,segmentName:name})})).fail((response=>{this.setState({segmentErrors:response.errors.map((error=>409===error.error?external_MailPoet_default().I18n.t("segmentExists"):error.message))})}))}renderCreateSegmentSuccess(){const{segmentCreated:segmentCreated,segmentName:segmentName}=this.state;let segmentCreatedSuccessMessage;if(segmentCreated){let message=external_MailPoetLib_ReactStringReplace_default()(external_MailPoet_default().I18n.t("successMessage"),/\[link\](.*?)\[\/link\]/g,((match,i)=>external_MailPoetLib_React_default().createElement("a",{key:i,href:"?page=mailpoet-newsletters#/new"},match)));message=external_MailPoetLib_ReactStringReplace_default()(message,"%s",(()=>segmentName)),segmentCreatedSuccessMessage=external_MailPoetLib_React_default().createElement("div",{className:"mailpoet_notice notice inline notice-success"},external_MailPoetLib_React_default().createElement("p",null,message))}return segmentCreatedSuccessMessage}renderCreateSegmentError(){const{segmentErrors:segmentErrors}=this.state;let error;return segmentErrors.length>0&&(error=external_MailPoetLib_React_default().createElement("div",null,segmentErrors.map((errorMessage=>external_MailPoetLib_React_default().createElement("div",{className:"mailpoet_notice notice inline error",key:`error-${errorMessage}`},external_MailPoetLib_React_default().createElement("p",null,errorMessage)))))),error}render(){const{savingSegment:savingSegment}=this.state,{params:params,location:location,newsletter:newsletter}=this.props;return external_MailPoetLib_React_default().createElement("div",null,this.renderCreateSegmentSuccess(),this.renderCreateSegmentError(),external_MailPoetLib_React_default().createElement(subscriber_engagement_listing,{location:location,params:params,newsletter:newsletter,handleCreateSegment:this.handleCreateSegment,savingSegment:savingSegment}))}}SubscriberEngagement.propTypes={params:prop_types_default().shape({id:prop_types_default().string.isRequired,0:prop_types_default().string}).isRequired,location:prop_types_default().object.isRequired,newsletter:prop_types_default().shape({id:prop_types_default().string.isRequired,subject:prop_types_default().string.isRequired}).isRequired};var subscriber_engagement=SubscriberEngagement;const bounces_listing_columns=[{name:"email",label:external_MailPoet_default().I18n.t("subscriberColumn"),sortable:!0},{name:"status",label:external_MailPoet_default().I18n.t("statusColumn"),sortable:!0},{name:"created_at",label:external_MailPoet_default().I18n.t("dateAndTimeColumn"),sortable:!0}],bounces_listing_messages={onLoadingItems:()=>external_MailPoet_default().I18n.t("loadingEngagementItems"),onNoItemsFound:()=>external_MailPoet_default().I18n.t("noBouncesItemsFound")};function bounces_listing_getListingItemKey(item){return`item-${item.id}-${item.status}`}function renderItem(bounced){let email;return email=bounced.email?external_MailPoetLib_React_default().createElement("a",{className:"mailpoet-listing-title",href:bounced.subscriber_url},bounced.email):external_MailPoet_default().I18n.t("deletedSubscriber"),external_MailPoetLib_React_default().createElement("div",null,external_MailPoetLib_React_default().createElement("td",{className:"manage-column column-primary has-row-actions"},email,external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-listing-subtitle"},bounced.first_name," ",bounced.last_name)),external_MailPoetLib_React_default().createElement("td",{className:"column","data-colname":external_MailPoet_default().I18n.t("statusColumn")},external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,{variant:"unknown",isInverted:!0},external_MailPoet_default().I18n.t("bounced"))),external_MailPoetLib_React_default().createElement("td",{className:"column-date","data-colname":external_MailPoet_default().I18n.t("dateAndTimeColumn")},external_MailPoetLib_React_default().createElement("abbr",null,external_MailPoet_default().Date.format(bounced.created_at))))}function BouncesListing(_ref){let{params:params,location:location}=_ref;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_Listing_.Listing,{groups:!1,limit:external_MailPoet_default().listingPerPage,location:location,params:params,endpoint:"bounces",base_url:"stats/:id",onRenderItem:renderItem,getListingItemKey:bounces_listing_getListingItemKey,columns:bounces_listing_columns,messages:bounces_listing_messages,sort_by:"created_at",sort_order:"desc"})}BouncesListing.propTypes={params:prop_types_default().shape({id:prop_types_default().string.isRequired}).isRequired};var bounces_listing=BouncesListing;function Bounces(_ref){let{params:params,location:location}=_ref;return external_MailPoetLib_React_default().createElement(bounces_listing,{location:location,params:params})}Bounces.propTypes={params:prop_types_default().shape({id:prop_types_default().string.isRequired}).isRequired};var bounces=Bounces;const trackStatsClicked=()=>{external_MailPoet_default().trackEvent("User has clicked to view detailed stats")};external_MailPoetLib_Hooks_default().addFilter("mailpoet_newsletters_listing_stats_tracking","mailpoet",(()=>trackStatsClicked));external_MailPoetLib_Hooks_default().addFilter("mailpoet_newsletters_revenues_stats","mailpoet",((ignoredFreeContent,revenue)=>external_MailPoetLib_React_default().createElement(revenues_stats,{revenue:revenue})));external_MailPoetLib_Hooks_default().addFilter("mailpoet_newsletters_clicked_links_table","mailpoet",((ignoredFreeContent,links)=>external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:external_MailPoetLib_React_default().createElement(clicked_links_table,{links:links})));external_MailPoetLib_Hooks_default().addFilter("mailpoet_newsletters_purchased_products","mailpoet",((ignoredFreeContent,newsletter)=>external_MailPoet_default().isWoocommerceActive?external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tab,{key:"products",title:external_MailPoet_default().I18n.t("productsSold"),automationId:"products-sold-tab"},external_MailPoetLib_React_default().createElement(purchased_products,{newsletter:newsletter})):null));external_MailPoetLib_Hooks_default().addFilter("mailpoet_newsletters_subscriber_engagement","mailpoet",((ignoredFreeContent,location,params,newsletter)=>external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:external_MailPoetLib_React_default().createElement(subscriber_engagement,{location:location,params:params,newsletter:newsletter})));external_MailPoetLib_Hooks_default().addFilter("mailpoet_newsletters_bounces","mailpoet",((ignoredFreeContent,location,params)=>external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:external_MailPoetLib_React_default().createElement(bounces,{location:location,params:params})))}(),function(){"use strict";var external_MailPoetLib_Hooks_=__webpack_require__(797),external_MailPoetLib_Hooks_default=__webpack_require__.n(external_MailPoetLib_Hooks_),external_MailPoet_=__webpack_require__(718),external_MailPoet_default=__webpack_require__.n(external_MailPoet_),external_MailPoetLib_DynamicSegmentsTypes_namespaceObject=MailPoetLib.DynamicSegmentsTypes,external_MailPoetLib_React_=__webpack_require__(311),external_MailPoetLib_React_default=__webpack_require__.n(external_MailPoetLib_React_),external_MailPoetLib_ReactStringReplace_=__webpack_require__(704),external_MailPoetLib_ReactStringReplace_default=__webpack_require__.n(external_MailPoetLib_ReactStringReplace_),external_MailPoetLib_WordPressData_namespaceObject=MailPoetLib.WordPressData;function ConditionType(){const segment=(0,external_MailPoetLib_WordPressData_namespaceObject.useSelect)((select=>select("mailpoet-dynamic-segments-form").getSegment()),[]),{updateSegment:updateSegment}=(0,external_MailPoetLib_WordPressData_namespaceObject.useDispatch)("mailpoet-dynamic-segments-form");return segment.filters.length<=1?null:external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,external_MailPoetLib_React_default().createElement("div",null,external_MailPoetLib_React_default().createElement("label",{className:"mailpoet-form-radio","data-automation-id":"dynamic-segment-condition-type-and"},external_MailPoetLib_React_default().createElement("input",{type:"radio",value:external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SegmentConnectTypes.AND,checked:segment.filters_connect===external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SegmentConnectTypes.AND,onChange:e=>updateSegment({filters_connect:e.target.value})}),external_MailPoetLib_React_default().createElement("span",{className:"mailpoet-form-radio-control"}),external_MailPoetLib_React_default().createElement("span",null,external_MailPoetLib_ReactStringReplace_default()(external_MailPoet_default().I18n.t("allConditions"),/<strong>(.*?)<\/strong>/g,((match,i)=>external_MailPoetLib_React_default().createElement("strong",{key:i},match))))),external_MailPoetLib_React_default().createElement("label",{className:"mailpoet-form-radio","data-automation-id":"dynamic-segment-condition-type-or"},external_MailPoetLib_React_default().createElement("input",{type:"radio",value:external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SegmentConnectTypes.OR,checked:segment.filters_connect===external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SegmentConnectTypes.OR,onChange:e=>updateSegment({filters_connect:e.target.value})}),external_MailPoetLib_React_default().createElement("span",{className:"mailpoet-form-radio-control"}),external_MailPoetLib_React_default().createElement("span",null,external_MailPoetLib_ReactStringReplace_default()(external_MailPoet_default().I18n.t("anyConditions"),/<strong>(.*?)<\/strong>/g,((match,i)=>external_MailPoetLib_React_default().createElement("strong",{key:i},match)))))),external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-gap"}))}var prop_types=__webpack_require__(697),prop_types_default=__webpack_require__.n(prop_types);function FilterSeparator(_ref){let{index:index}=_ref;const segment=(0,external_MailPoetLib_WordPressData_namespaceObject.useSelect)((select=>select("mailpoet-dynamic-segments-form").getSegment()),[]);return segment.filters.length<=1||index===segment.filters.length-1?external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-gap"}):external_MailPoetLib_React_default().createElement("p",null,external_MailPoetLib_React_default().createElement("span",{className:"mailpoet-gap"}),external_MailPoetLib_React_default().createElement("strong",null,segment.filters_connect===external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SegmentConnectTypes.AND?external_MailPoet_default().I18n.t("filterConnectAnd").toUpperCase():external_MailPoet_default().I18n.t("filterConnectOr").toUpperCase()))}FilterSeparator.propTypes={index:prop_types_default().number.isRequired};const MinusIcon=external_MailPoetLib_React_default().createElement("svg",{viewBox:"0 0 24 24"},external_MailPoetLib_React_default().createElement("path",{d:"M20 14H4V10H20V14Z"}));function RemoveFilter(_ref){let{filterRows:filterRows,index:index}=_ref;const segment=(0,external_MailPoetLib_WordPressData_namespaceObject.useSelect)((select=>select("mailpoet-dynamic-segments-form").getSegment()),[]),{updateSegment:updateSegment}=(0,external_MailPoetLib_WordPressData_namespaceObject.useDispatch)("mailpoet-dynamic-segments-form");return segment.filters.length<=1||filterRows.length<=1?null:external_MailPoetLib_React_default().createElement("a",{href:void 0,className:"mailpoet-form-segment-delete","data-automation-id":"delete-filter-row",onClick:e=>{e.preventDefault();const filters=segment.filters;filters.splice(index,1),updateSegment({filters:filters})}},MinusIcon)}RemoveFilter.propTypes={filterRows:prop_types_default().array,index:prop_types_default().number.isRequired},RemoveFilter.defaultProps={filterRows:[]};external_MailPoetLib_Hooks_default().addFilter("mailpoet_dynamic_segments_form_filters_before","mailpoet",(ignoredFreeContent=>!external_MailPoet_default().hasValidPremiumKey||external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:ConditionType));external_MailPoetLib_Hooks_default().addFilter("mailpoet_dynamic_filters_filter_before","mailpoet",(ignoredFreeContent=>!external_MailPoet_default().hasValidPremiumKey||external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:RemoveFilter));external_MailPoetLib_Hooks_default().addFilter("mailpoet_dynamic_filters_filter_after","mailpoet",(ignoredFreeContent=>!external_MailPoet_default().hasValidPremiumKey||external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:FilterSeparator));const addConditionAction=(segment,updateSegment)=>{const filters=segment.filters;filters.push({segmentType:external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SegmentTypes.WordPressRole,action:external_MailPoetLib_DynamicSegmentsTypes_namespaceObject.SubscriberActionTypes.WORDPRESS_ROLE}),updateSegment({filters:filters})};external_MailPoetLib_Hooks_default().addFilter("mailpoet_dynamic_segments_form_add_condition_action","mailpoet",(ignoredFreeContent=>!external_MailPoet_default().hasValidPremiumKey||external_MailPoet_default().subscribersLimitReached?ignoredFreeContent:addConditionAction))}(),function(){"use strict";var external_MailPoetLib_React_=__webpack_require__(311),external_MailPoetLib_React_default=__webpack_require__.n(external_MailPoetLib_React_),external_MailPoetLib_Hooks_=__webpack_require__(797),external_MailPoetLib_Hooks_default=__webpack_require__.n(external_MailPoetLib_Hooks_),prop_types=__webpack_require__(697),prop_types_default=__webpack_require__.n(prop_types),external_MailPoetLib_Listing_=__webpack_require__(171),external_MailPoet_=__webpack_require__(718),external_MailPoet_default=__webpack_require__.n(external_MailPoet_),external_MailPoetLib_Common_=__webpack_require__(514);var action_clicked=function(_ref){let{action:action}=_ref;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-subscriber-stats-action-row"},external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,{isInverted:!0},external_MailPoet_default().I18n.t("statsClicked")),"",external_MailPoet_default().getShortcodeLinks()[action.url]?external_MailPoet_default().getShortcodeLinks()[action.url]:external_MailPoetLib_React_default().createElement("a",{href:action.url,target:"_blank",rel:"noreferrer noopener"},((fullString,strLen)=>{if(fullString.length<=strLen)return fullString;const charsToShow=strLen-3,frontChars=Math.ceil(charsToShow*(2/3)),backChars=Math.floor(charsToShow*(1/3));return`${fullString.substr(0,frontChars)}...${fullString.substr(fullString.length-backChars)}`})(action.url,40))),action.purchases.map((purchase=>external_MailPoetLib_React_default().createElement("div",{key:`click-purhase-${purchase.id}`,className:"mailpoet-subscriber-stats-action-row"}," ",external_MailPoetLib_React_default().createElement("a",{href:purchase.order_url},`${external_MailPoet_default().I18n.t("orderNumberPrefix")} #${purchase.order_id}`)))))};var action_opened=function(_ref){let{action:action}=_ref;return external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-subscriber-stats-action-row"},external_MailPoetLib_React_default().createElement(external_MailPoetLib_Common_.Tag,null,"machine-open"===action.type?external_MailPoet_default().I18n.t("statsMachineOpened"):external_MailPoet_default().I18n.t("statsOpened")))};function ActionList(_ref){let{actions:actions}=_ref;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,actions.map((action=>"click"===action.type?external_MailPoetLib_React_default().createElement(action_clicked,{action:action,key:`action_${action.type}_${action.id}`}):external_MailPoetLib_React_default().createElement(action_opened,{action:action,key:`action_${action.type}_${action.id}`}))))}ActionList.propTypes={actions:prop_types_default().arrayOf(prop_types_default().shape({id:prop_types_default().number.isRequired,type:prop_types_default().string.isRequired,url:prop_types_default().string,count:prop_types_default().number,created_at:prop_types_default().string.isRequired})).isRequired};var action_counts=function(_ref){let{action:action}=_ref;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-subscriber-stats-action-row"},action.count),action.purchases&&action.purchases.map((purchase=>external_MailPoetLib_React_default().createElement("div",{key:`action_purchase_count_${purchase.id}`,className:"mailpoet-subscriber-stats-action-row"},purchase.revenue))))};var action_dates=function(_ref){let{action:action}=_ref;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,external_MailPoetLib_React_default().createElement("div",{className:"mailpoet-subscriber-stats-action-row"},external_MailPoetLib_React_default().createElement("abbr",null,external_MailPoet_default().Date.format(action.created_at))),action.purchases&&action.purchases.map((purchase=>external_MailPoetLib_React_default().createElement("div",{key:`action_purchase_date_${purchase.id}`,className:"mailpoet-subscriber-stats-action-row"},external_MailPoetLib_React_default().createElement("abbr",null,external_MailPoet_default().Date.format(purchase.created_at))))))};const renderItem=item=>external_MailPoetLib_React_default().createElement(external_MailPoetLib_React_default().Fragment,null,external_MailPoetLib_React_default().createElement("td",{className:"column-primary"},external_MailPoetLib_React_default().createElement("a",{className:"mailpoet-listing-title",href:item.preview_url,target:"_blank",rel:"noopener noreferrer"},item.subject)),external_MailPoetLib_React_default().createElement("td",null,external_MailPoetLib_React_default().createElement(ActionList,{actions:item.actions})),external_MailPoetLib_React_default().createElement("td",null,item.actions.map((action=>external_MailPoetLib_React_default().createElement(action_counts,{action:action,key:`action_count_${action.type}_${action.id}`})))),external_MailPoetLib_React_default().createElement("td",null,item.actions.map((action=>external_MailPoetLib_React_default().createElement(action_dates,{action:action,key:`action_date_${action.type}_${action.id}`})))));function getListingItemKey(item){return`item-${item.id}`}const messages={onLoadingItems:()=>external_MailPoet_default().I18n.t("loadingSubscriberStats"),onNoItemsFound:()=>external_MailPoet_default().I18n.t("noStatsForSubscriber")},columns=[{name:"newsletter",label:external_MailPoet_default().I18n.t("email"),sortable:!1},{name:"action",label:external_MailPoet_default().I18n.t("columnAction"),sortable:!1,width:"35%"},{name:"count",label:external_MailPoet_default().I18n.t("columnCount"),sortable:!1,width:"10%"},{name:"actionOn",label:external_MailPoet_default().I18n.t("columnActionOn"),sortable:!1}];function OpenedNewslettersListing(_ref){let{params:params,location:location}=_ref;return external_MailPoetLib_React_default().createElement(external_MailPoetLib_Listing_.Listing,{limit:external_MailPoet_default().listingPerPage,params:params,location:location,endpoint:"subscriber_detailed_stats",base_url:"stats/:id",onRenderItem:renderItem,getListingItemKey:getListingItemKey,columns:columns,messages:messages,groups:!1})}OpenedNewslettersListing.propTypes={params:prop_types_default().shape({id:prop_types_default().string.isRequired}).isRequired};var opened_newsletters_listing=OpenedNewslettersListing;external_MailPoetLib_Hooks_default().addFilter("mailpoet_subscribers_opened_emails_stats","mailpoet",((params,location)=>external_MailPoetLib_React_default().createElement(opened_newsletters_listing,{params:params,location:location})))}()}();