"use strict";!function(){var i;i=jQuery,Backbone,_,window.WC_Memberships_Modal_View=i.WCBackboneModal.View.extend({constructor:function(e){var t;return(e=e||{}).target=this.template_id||e.template_id,e.string=e.data,(t=Array.prototype.slice.call(arguments,1)).unshift(e),WC_Memberships_Modal_View.__super__.constructor.apply(this,t)},render:function(){var e,n;return i("#wc-backbone-modal-dialog .modal-close").trigger("click"),e=wp.template(this._target),this.$el.append(e(this._string)),i(document.body).css({overflow:"hidden"}).append(this.$el),this.resizeContent(),this.$(".wc-backbone-modal-content").attr("tabindex","0").focus(),i(document.body).trigger("init_tooltips"),i(document.body).trigger("wc_backbone_modal_loaded",this._target),n=this,i("#btn-close").on("click",function(e){return e.preventDefault(),n.close()}),i("#btn-stop").on("click",function(e){return e.preventDefault(),n.removeJob(i(this).data("job-name"),i(this).data("job-id"),!0)}),i("document, body").on("wc_backbone_modal_before_remove",function(e,t){var t=i("#"+t+"-job"),o=t?t.data("name"):null,t=t?t.data("id"):null;if(o&&t)return n.removeJob(o,t,!1)})},is_blocked:function(){return this.$(".wc-backbone-modal-content").is(".processing")||this.$(".wc-backbone-modal-content").parents(".processing").length},block:function(){if(!this.is_blocked())return this.$(".wc-backbone-modal-content").addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){return this.$(".wc-backbone-modal-content").removeClass("processing").unblock()},closeButton:function(e){if(e.preventDefault(),!(this._string&&this._string.job&&("completed"!==this._string.job.status||this._string.job.percentage&&100!==parseInt(this._string.job.percentage,10))))return i(document.body).trigger("wc_backbone_modal_before_remove",this._target),this.undelegateEvents(),this.close()},close:function(){return i(document).off("focusin"),i(document.body).css({overflow:"auto"}),this.remove()},removeJob:function(e,t,o){e={action:"wc_memberships_remove_batch_job",security:wc_memberships_admin.remove_memberships_batch_job_nonce,job_name:e,job_id:t};return i.post(wc_memberships_admin.ajax_url,e,function(e){if(window.onbeforeunload=null,e.success&&o)return location.reload()})}})}.call(void 0);