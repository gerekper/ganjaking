"use strict";!function(){jQuery(function(n){var e,s,r,_=null!=(r=window.wc_memberships_admin)?r:{};if("woocommerce_page_wc-settings"===(null!=(r=window.pagenow)?r:""))return n("#wc_memberships_restriction_mode").on("change",function(e){var s=n('label[for="wc_memberships_show_excerpts"]').find("span.show-if-hide-content-only-restriction-mode"),r=n('label[for="wc_memberships_show_excerpts"]').find("span.show-if-redirect-restriction-mode");return n("#wc_memberships_restriction_mode_desc li").hide(),"redirect"===n(this).val()?(n("#wc_memberships_redirect_page_id").closest("tr").show(),s.hide(),r.show()):n("#wc_memberships_redirect_page_id").closest("tr").hide(),"hide"===n(this).val()?(n("#wc_memberships_show_excerpts").closest("tr").hide(),n("#wc_memberships_restriction_mode_desc li.hide").show()):(n("#wc_memberships_show_excerpts").closest("tr").show(),"hide_content"===n(this).val()?(n("#wc_memberships_restriction_mode_desc li.hide_content").show(),s.show(),r.hide()):void 0)}).trigger("change"),s=function(){return n("#wc_memberships_show_excerpts").is(":checked")&&"hide"!==n("#wc_memberships_restriction_mode").val()?n("#wc_memberships_excerpt_length").closest("tr").show():n("#wc_memberships_excerpt_length").closest("tr").hide()},n("#wc_memberships_restriction_mode").on("change",function(e){return s()}).trigger("change"),n("#wc_memberships_show_excerpts").on("change",function(e){return s()}).trigger("change"),n("input[name=wc_memberships_redirect_upon_member_login]").change(function(e){return"site_page"===n("input[name=wc_memberships_redirect_upon_member_login]:checked").val()?n("#wc_memberships_member_login_redirect_page_id").closest("tr").show():n("#wc_memberships_member_login_redirect_page_id").closest("tr").hide()}).change(),n("#wc_memberships_assign_user_roles_to_members").on("change",function(e){return n(this).is(":checked")?(n("#wc_memberships_active_member_user_role").closest("tr").show(),n("#wc_memberships_inactive_member_user_role").closest("tr").show()):(n("#wc_memberships_active_member_user_role").closest("tr").hide(),n("#wc_memberships_inactive_member_user_role").closest("tr").hide())}).trigger("change"),n("select.js-select-edit-message-group").change(function(e){var t=n(this).val();return n("form#mainform").find("tr").each(function(e,s){var r=n(s).closest("table"),i=r.prev(),_=i.prev();return n(s).find(t).length?(r.show(),i.show(),_.show()):n(s).find(".js-select-edit-message-group").length?void 0:(r.hide(),i.hide(),_.hide())})}).change(),n("#wc_memberships_display_member_login_notice").change(function(e){return"never"===n(this).val()?n("#wc_memberships_messages\\[member_login_message\\]").closest("tr").hide():n("#wc_memberships_messages\\[member_login_message\\]").closest("tr").show()}).change(),r=n("#woocommerce_WC_Memberships_User_Membership_Ending_Soon_Email_send_days_before"),e=n("#woocommerce_WC_Memberships_User_Membership_Renewal_Reminder_Email_send_days_after"),(0<r.length||0<e.length)&&(n(".woocommerce-save-button").after('<button id="wc-memberships-user-memberships-reschedule-events" name="reschedule" class="button button-large" style="margin-left:12px;">'+_.i18n.reschedule+"</button>"),n("button#wc-memberships-user-memberships-reschedule-events").on("click",function(e){return e.preventDefault(),e=n("input#wc-memberships-reschedule-user-memberships-events-ongoing-job-id").val(),e={action:"wc_memberships_get_batch_job",security:_.get_memberships_batch_job_nonce,job_name:"user_memberships_reschedule_events",job_id:e||"",process:!0},n.post(_.ajax_url,e,function(e){return e.success?new WC_Memberships_Modal_View_Reschedule_User_Memberships_Events({data:{job:null,error:null}}):console.log(e)})})),window.WC_Memberships_Modal_View_Reschedule_User_Memberships_Events=WC_Memberships_Modal_View.extend({template_id:"wc-memberships-modal-reschedule-user-memberships-events",initialize:function(e){var s,r=this,i=e.data.job||null,e=e.data.error||null;return WC_Memberships_Modal_View_Reschedule_User_Memberships_Events.__super__.initialize.apply(this,arguments),r.unblock(),i&&i.id?"completed"===i.status||e?window.onbeforeunload=null:(e||(window.onbeforeunload=function(){return _.i18n.confirm_stop_batch_job}),s={action:"wc_memberships_get_batch_job",security:_.get_memberships_batch_job_nonce,job_name:i.name,job_id:i.id,process:!0},n.post(_.ajax_url,s,function(e){return e.data?(r.close(),new WC_Memberships_Modal_View_Reschedule_User_Memberships_Events({data:{job:e.success?e.data:null,error:e.success?null:e.data}})):console.log(e)})):n("#btn-start").on("click",function(e){return e.preventDefault(),r.block(),s={action:"wc_memberships_reschedule_user_memberships_events",security:_.reschedule_user_memberships_events_nonce},n.post(_.ajax_url,s,function(e){return e.data?(r.close(),new WC_Memberships_Modal_View_Reschedule_User_Memberships_Events({data:{job:e.success?e.data:null,error:e.success?null:e.data}})):console.log(e)})})}})})}.call(void 0);