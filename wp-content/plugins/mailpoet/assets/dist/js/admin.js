/*! For license information please see admin.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[328],{49868:function(){jQuery.AsyncQueue=function(){var e,t,n,a,r=this,s=[],o=!1;return a=function(){var e=s.shift();e?(e.apply(r,[r]),!1===o&&a()):t&&t.apply(r)},this.onFailure=function(t){e=t},this.onComplete=function(e){t=e},this.add=function(e){return s.push(e),this},this.storeData=function(e){return n=e,this},this.lastCallbackData=function(){return n},this.run=function(){o=!1,a()},this.pause=function(){return o=!0,this},this.failure=function(){if(o=!0,e){var t=[r];for(i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(r,t)}},this}},83653:function(e,t,n){e.exports={Experiment:n(54160).Z,Variant:n(95776).Z,emitter:n(91414).default,useExperiment:n(81116).default,experimentDebugger:n(11446),mixpanelHelper:n(80773).Z,segmentHelper:n(43013).Z}},82335:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(70079)),i=l(n(39519)),s=l(n(81116)),o=l(n(91414));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var d=function(e){var t=(0,r.useMemo)((function(){return function(e,t){var n={};return r.default.Children.forEach(t,(function(t){if(!r.default.isValidElement(t)||"Pushtell.Variant"!==t.type.displayName){var a=new Error("Pushtell Experiment children must be Pushtell Variant components.");throw a.type="PUSHTELL_INVALID_CHILD",a}n[t.props.name]=t,o.default.addExperimentVariant(e,t.props.name)})),o.default.emit("variants-loaded",e),n}(e.name,e.children)}),[e.name,e.children]);return(0,(0,s.default)(e.name,e.userIdentifier,e.defaultVariantName).selectVariant)(t,[])};d.propTypes={name:i.default.string.isRequired,userIdentifier:i.default.string,defaultVariantName:i.default.string,children:i.default.node};var u=d;t.default=u},54160:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}t.Z=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(70079)),i=c(n(39519)),s=c(n(82335)),o=c(n(91414)),l=c(n(70935));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function h(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o.default.addActiveVariantListener((function(e,t,n){n||l.default.setItem("PUSHTELL-"+e,t)}));var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,a,i,l=(a=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(a);if(i){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function c(){var e;u(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return x(f(e=l.call.apply(l,[this].concat(n))),"win",(function(){o.default.emitWin(e.props.name)})),e}return t=c,(n=[{key:"render",value:function(){return r.default.createElement(s.default,this.props,this.props.children)}}])&&p(t.prototype,n),c}(r.Component);t.Z=_,x(_,"propTypes",{name:i.default.string.isRequired,defaultVariantName:i.default.string,userIdentifier:i.default.string,children:i.default.node}),x(_,"displayName","Pushtell.Experiment")},95776:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}t.Z=void 0;var r,i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=i?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(70079)),s=(r=n(39519))&&r.__esModule?r:{default:r};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,n,a,r,s=(a=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(a);if(r){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function o(){return l(this,o),s.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return i.default.isValidElement(this.props.children)?this.props.children:i.default.createElement("span",null,this.props.children)}}])&&c(t.prototype,n),o}(i.Component);t.Z=h,m(h,"propTypes",{name:s.default.string.isRequired}),m(h,"displayName","Pushtell.Variant")},49382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n(13003)),r=s(n(91414)),i=s(n(70935));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){for(var n=r.default.getSortedVariants(e),i=r.default.getSortedVariantWeights(e),s=i.reduce((function(e,t){return e+t}),0),o="string"==typeof t?Math.abs((0,a.default)(t)%s):Math.floor(Math.random()*s),l=n[n.length-1],c=0;c<i.length;c++)if((o-=i[c])<0){l=n[c];break}return r.default.setActiveVariant(e,l),l};t.default=function(e,t,n){if("string"==typeof t)return o(e,t);var a=r.default.getActiveVariant(e);if("string"==typeof a)return a;var s=i.default.getItem("PUSHTELL-"+e);return"string"==typeof s?(r.default.setActiveVariant(e,s,!0),s):"string"==typeof n?(r.default.setActiveVariant(e,n),n):o(e)}},11446:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(70079)),i=l(n(99581)),s=l(n(91414)),o=n(35245);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=!1,_=null,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,a,i,o=(a=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(a);if(i){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function l(){var e;d(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return g(h(e=o.call.apply(o,[this].concat(n))),"state",{experiments:s.default.getActiveExperiments(),visible:!1}),g(h(e),"toggleVisibility",(function(){e.setState({visible:!e.state.visible})})),g(h(e),"updateExperiments",(function(){e.setState({experiments:s.default.getActiveExperiments()})})),e}return t=l,(n=[{key:"setActiveVariant",value:function(e,t){s.default.setActiveVariant(e,t)}},{key:"componentDidMount",value:function(){this.activeSubscription=s.default.addListener("active",this.updateExperiments),this.inactiveSubscription=s.default.addListener("inactive",this.updateExperiments)}},{key:"componentWillUnmount",value:function(){this.activeSubscription.remove(),this.inactiveSubscription.remove()}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.experiments);return this.state.visible?r.default.createElement("div",{className:"pushtell-container pushtell-panel"},r.default.createElement("div",{className:"pushtell-close",onClick:this.toggleVisibility},"×"),t.map((function(t){var n=Object.keys(e.state.experiments[t]);if(0!==n.length)return r.default.createElement("div",{className:"pushtell-experiment",key:t},r.default.createElement("div",{className:"pushtell-experiment-name"},t),r.default.createElement("ul",null,n.map((function(n){return r.default.createElement("li",{key:n},r.default.createElement("label",{className:e.state.experiments[t][n]?"active":null,onClick:e.setActiveVariant.bind(e,t,n)},r.default.createElement("input",{type:"radio",name:t,value:n,defaultChecked:e.state.experiments[t][n]}),n))}))))})),r.default.createElement("div",{className:"pushtell-production-build-note"},"This panel is hidden on production builds.")):t.length>0?r.default.createElement("div",{className:"pushtell-container pushtell-handle",onClick:this.toggleVisibility},t.length," Active Experiment",t.length>1?"s":""):null}}])&&u(t.prototype,n),l}(r.Component);e.exports={setDebuggerAvailable:function(e){x=e},enable:function(){if(x&&o.canUseDOM){!function(){function e(e,t){"insertRule"in _.sheet?_.sheet.insertRule(e+"{"+t+"}",0):"addRule"in _.sheet&&_.sheet.addRule(e,t,0)}(_=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(_),e("#pushtell-debugger","z-index: 25000"),e("#pushtell-debugger","position: fixed"),e("#pushtell-debugger","transform: translateX(-50%)"),e("#pushtell-debugger","bottom: 0"),e("#pushtell-debugger","left: 50%"),e("#pushtell-debugger ul","margin: 0"),e("#pushtell-debugger ul","padding: 0 0 0 20px"),e("#pushtell-debugger li","margin: 0"),e("#pushtell-debugger li","padding: 0"),e("#pushtell-debugger li","font-size: 14px"),e("#pushtell-debugger li","line-height: 14px"),e("#pushtell-debugger input","float: left"),e("#pushtell-debugger input","margin: 0 10px 0 0"),e("#pushtell-debugger input","padding: 0"),e("#pushtell-debugger input","cursor: pointer"),e("#pushtell-debugger label","color: #999999"),e("#pushtell-debugger label","margin: 0 0 10px 0"),e("#pushtell-debugger label","cursor: pointer"),e("#pushtell-debugger label","font-weight: normal"),e("#pushtell-debugger label.active","color: #000000"),e("#pushtell-debugger .pushtell-experiment-name","font-size: 16px"),e("#pushtell-debugger .pushtell-experiment-name","color: #000000"),e("#pushtell-debugger .pushtell-experiment-name","margin: 0 0 10px 0"),e("#pushtell-debugger .pushtell-production-build-note","font-size: 10px"),e("#pushtell-debugger .pushtell-production-build-note","color: #999999"),e("#pushtell-debugger .pushtell-production-build-note","text-align: center"),e("#pushtell-debugger .pushtell-production-build-note","margin: 10px -40px 0 -10px"),e("#pushtell-debugger .pushtell-production-build-note","border-top: 1px solid #b3b3b3"),e("#pushtell-debugger .pushtell-production-build-note","padding: 10px 10px 5px 10px"),e("#pushtell-debugger .pushtell-handle","cursor: pointer"),e("#pushtell-debugger .pushtell-handle","padding: 5px 10px 5px 10px"),e("#pushtell-debugger .pushtell-panel","padding: 15px 40px 5px 10px"),e("#pushtell-debugger .pushtell-container","font-size: 11px"),e("#pushtell-debugger .pushtell-container","background-color: #ebebeb"),e("#pushtell-debugger .pushtell-container","color: #000000"),e("#pushtell-debugger .pushtell-container","box-shadow: 0px 0 5px rgba(0, 0, 0, 0.1)"),e("#pushtell-debugger .pushtell-container","border-top: 1px solid #b3b3b3"),e("#pushtell-debugger .pushtell-container","border-left: 1px solid #b3b3b3"),e("#pushtell-debugger .pushtell-container","border-right: 1px solid #b3b3b3"),e("#pushtell-debugger .pushtell-container","border-top-left-radius: 2px"),e("#pushtell-debugger .pushtell-container","border-top-right-radius: 2px"),e("#pushtell-debugger .pushtell-close","cursor: pointer"),e("#pushtell-debugger .pushtell-close","font-size: 16px"),e("#pushtell-debugger .pushtell-close","font-weight: bold"),e("#pushtell-debugger .pushtell-close","color: #CC0000"),e("#pushtell-debugger .pushtell-close","position: absolute"),e("#pushtell-debugger .pushtell-close","top: 0px"),e("#pushtell-debugger .pushtell-close","right: 7px"),e("#pushtell-debugger .pushtell-close:hover","color: #FF0000"),e("#pushtell-debugger .pushtell-close, #pushtell-debugger label","transition: all .25s")}();var e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.id="pushtell-debugger",e.appendChild(t),i.default.render(r.default.createElement(b,null),t)}},disable:function(){if(x&&o.canUseDOM){null!==_&&(document.head.removeChild(_),_=null);var e=document.getElementsByTagName("body")[0],t=document.getElementById("pushtell-debugger");t&&(i.default.unmountComponentAtNode(t),e.removeChild(t))}}}},91414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=n(71248),i=(a=n(49382))&&a.__esModule?a:{default:a},s={},o={},l={},c={},d={},u={},p=void 0,m=new r.EventEmitter,h=function(){};h.prototype.emitWin=function(e){if("string"!=typeof e)throw new Error("Required argument 'experimentName' should have type 'string'");m.emit("win",e,s[e])},h.prototype._emitPlay=function(e,t){if("string"!=typeof e)throw new Error("Required argument 'experimentName' should have type 'string'");if("string"!=typeof t)throw new Error("Required argument 'variantName' should have type 'string'");u[e]||(m.emit("play",e,t),u[e]=!0)},h.prototype._resetPlayedExperiments=function(){s={},u={}},h.prototype._reset=function(){s={},o={},l={},c={},d={},u={},p=void 0},h.prototype.rewind=function(){this._reset(),m.removeAllListeners()},h.prototype._incrementActiveExperiments=function(e){c[e]=c[e]||0,c[e]+=1,m.emit("active",e)},h.prototype._decrementActiveExperiments=function(e){c[e]-=1,m.emit("inactive",e)},h.prototype.addActiveVariantListener=function(e,t){return"function"==typeof e?(t=e,m.addListener("active-variant",(function(e,n,a){t(e,n,a)}))):m.addListener("active-variant",(function(n,a,r){n===e&&t(n,a,r)}))},h.prototype.emit=function(){return m.emit.apply(m,arguments)},h.prototype.addListener=function(e,t){return m.addListener(e,t)},h.prototype.once=function(e,t){return m.once(e,t)},h.prototype.addPlayListener=function(e,t){return"function"==typeof e?(t=e,m.addListener("play",(function(e,n){t(e,n)}))):m.addListener("play",(function(n,a){n===e&&t(n,a)}))},h.prototype.addWinListener=function(e,t){return"function"==typeof e?(t=e,m.addListener("win",(function(e,n){t(e,n)}))):m.addListener("win",(function(n,a){n===e&&t(n,a)}))},h.prototype.setCustomDistributionAlgorithm=function(e){p=e},h.prototype.defineVariants=function(e,t,n){var a={},r={};if(t.forEach((function(e){a[e]=!0})),Array.isArray(n)){if(t.length!==n.length)throw new Error("Required argument 'variantNames' should have the same number of elements as optional argument 'variantWeights'");t.forEach((function(e,t){if("number"!=typeof n[t])throw new Error("Optional argument 'variantWeights' should be an array of numbers.");r[e]=n[t]}))}else t.forEach((function(e,t){r[e]=1}));l[e]=r,o[e]=a,d[e]=!0},h.prototype.getSortedVariants=function(e){var t=Object.keys(o[e]);return t.sort(),t},h.prototype.getSortedVariantWeights=function(e){return this.getSortedVariants(e).map((function(t){return l[e][t]}))},h.prototype.getActiveExperiments=function(){var e={};return Object.keys(c).forEach((function(t){0!==c[t]&&(e[t]={},Object.keys(o[t]).forEach((function(n){e[t][n]=s[t]===n})))})),e},h.prototype.calculateActiveVariant=function(e,t,n){return void 0!==p?p(e,t,n):(0,i.default)(e,t,n)},h.prototype.getActiveVariant=function(e){return s[e]},h.prototype.setActiveVariant=function(e,t,n){s[e]=t,m.emit("active-variant",e,t,n)},h.prototype.addExperimentVariant=function(e,t){if(o[e]=o[e]||{},l[e]=l[e]||{},!0!==o[e][t]){if(d[e]){var n=new Error("Experiment “"+e+"” added new variants after variants were defined.");throw n.type="PUSHTELL_INVALID_VARIANT",n}if(s[e]){var a=new Error("Experiment “"+e+"” added new variants after a variant was selected. Declare the variant names using emitter.defineVariants(experimentName, variantNames).");throw a.type="PUSHTELL_INVALID_VARIANT",a}l[e][t]=1}o[e][t]=!0};var f=new h;t.default=f},80773:function(e,t,n){"use strict";t.Z=void 0;var a,r,i,s=(a=n(91414))&&a.__esModule?a:{default:a},o=n(35245),l={enable:function(){if(o.canUseDOM){if("undefined"==typeof mixpanel){var e=new Error("React A/B Test Mixpanel Helper: 'mixpanel' global is not defined.");throw e.type="PUSHTELL_HELPER_MISSING_GLOBAL",e}r=s.default.addPlayListener((function(e,t){mixpanel.track("Experiment Play",{Experiment:e,Variant:t},(function(){s.default.emit("mixpanel-play",e,t)}))})),i=s.default.addWinListener((function(e,t){mixpanel.track("Experiment Win",{Experiment:e,Variant:t},(function(){s.default.emit("mixpanel-win",e,t)}))}))}},disable:function(){if(o.canUseDOM){if(!r||!i){var e=new Error("React A/B Test Mixpanel Helper: Helper was not enabled.");throw e.type="PUSHTELL_HELPER_INVALID_DISABLE",e}r.remove(),i.remove()}}};t.Z=l},43013:function(e,t,n){"use strict";t.Z=void 0;var a,r,i,s=(a=n(91414))&&a.__esModule?a:{default:a},o=n(35245),l={enable:function(){if(o.canUseDOM){if("undefined"==typeof analytics){var e=new Error("React A/B Test Segment Helper: 'analytics' global is not defined.");throw e.type="PUSHTELL_HELPER_MISSING_GLOBAL",e}r=s.default.addPlayListener((function(e,t){analytics.track("Experiment Viewed",{experimentName:e,variationName:t},(function(){s.default.emit("segment-play",e,t)}))})),i=s.default.addWinListener((function(e,t){analytics.track("Experiment Won",{experimentName:e,variationName:t},(function(){s.default.emit("segment-win",e,t)}))}))}},disable:function(){if(o.canUseDOM){if(!r||!i){var e=new Error("React A/B Test Segment Helper: Helper was not enabled.");throw e.type="PUSHTELL_HELPER_INVALID_DISABLE",e}r.remove(),i.remove()}}};t.Z=l},81116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=n(70079),i=(a=n(91414))&&a.__esModule?a:{default:a};function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(e,t,n){var a,o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var a,r,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(i.default.calculateActiveVariant(e,t,n)),2),l=o[0],c=o[1];return(0,r.useEffect)((function(){i.default._incrementActiveExperiments(e),i.default.setActiveVariant(e,l),i.default._emitPlay(e,l);var t=i.default.addActiveVariantListener(e,(function(t,n){t===e&&n!==l&&c(n)}));return function(){t.remove(),i.default._decrementActiveExperiments(e)}}),[e,l]),{experimentName:e,activeVariant:l,emitWin:function(){return i.default.emitWin(e)},selectVariant:(a=l,function(e,t){return a in e?e[a]:t})}}},70935:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={getItem:function(){},setItem:function(){}};if("undefined"!=typeof window&&"localStorage"in window)try{var r="__pushtell_react__";window.localStorage.setItem(r,r),window.localStorage.getItem(r)!==r?n=a:(window.localStorage.removeItem(r),n=window.localStorage)}catch(e){n=a}else n=a;var i=n;t.default=i},60108:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,{hideProductDiscovery:function(){return P},hideTaskList:function(){return E},hideUpsell:function(){return O}});var r={};n.r(r),n.d(r,{getCanDisplayUpsell:function(){return H},getCanImportWooCommerceSubscribers:function(){return L},getCurrentTask:function(){return $},getGlobalSubscriberStatsChange:function(){return B},getHasForms:function(){return q},getHasImportedSubscribers:function(){return F},getIsProductDiscoveryDone:function(){return V},getIsProductDiscoveryHidden:function(){return W},getIsTaskListHidden:function(){return R},getIsUpsellHidden:function(){return Y},getIsWooCommerceActive:function(){return Z},getListsSubscriberStatsChange:function(){return U},getProductDiscoveryTasksStatus:function(){return A},getTasksStatus:function(){return M}});var i=n(99581),s=n(70079),o=n(75987),l=n(91073),c=n(44520),d=n(12025),u=n(61232),p=n(57765),m=n(35250);function h(e){let{mailpoetInstalledDaysAgo:t,sendTransactionalEmails:n,mtaMethod:a,noticeDismissed:r,apiVersion:i}=e;const[o,l]=(0,s.useState)(!1),c=()=>{d.x.Ajax.post({api_version:i,endpoint:"UserFlags",action:"set",data:{transactional_emails_opt_in_notice_dismissed:"1"}})};return t<30||n||"PHPMail"===a||r||o?null:(0,m.jsxs)(p.q,{type:"success",timeout:!1,onClose:c,children:[(0,m.jsx)("h3",{children:d.x.I18n.t("transactionalEmailNoticeTitle")}),(0,m.jsxs)("p",{children:[d.x.I18n.t("transactionalEmailNoticeBody")," ",(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails",target:"_blank",rel:"noopener noreferrer",children:d.x.I18n.t("transactionalEmailNoticeBodyReadMore")})]}),(0,m.jsx)("p",{children:(0,m.jsx)("button",{type:"button",className:"button",onClick:()=>{l(!0),d.x.Ajax.post({api_version:i,endpoint:"settings",action:"set",data:{send_transactional_emails:"1"}}),c()},children:d.x.I18n.t("transactionalEmailNoticeCTA")})})]})}h.displayName="TransactionalEmailsProposeOptInNotice";var f=n(85551),g=n(34352),x=n.n(g);function _(){if(!d.x.subscribersLimitReached)return null;const e=d.x.hasValidApiKey,t=d.x.subscribersLimit.toString();let n=d.x.I18n.t("subscribersLimitNoticeTitleUnknownLimit"),a="";d.x.subscribersLimit&&(n=d.x.I18n.t("subscribersLimitNoticeTitle").replace("[subscribersLimit]",t),a=d.x.I18n.t(e?"yourPlanLimit":"freeVersionLimit").replace("[subscribersLimit]",t));const r=e?d.x.MailPoetComUrlFactory.getUpgradeUrl(d.x.pluginPartialKey):d.x.MailPoetComUrlFactory.getPurchasePlanUrl(d.x.subscribersCount+1),i=x()(d.x.I18n.t("checkHowToManageSubscribers"),/\[link](.*?)\[\/link]/g,(e=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/348-subscribers-limit-for-sending-plans",children:e},"checkManageSubscribers")));return(0,m.jsxs)(p.q,{type:"error",timeout:!1,closable:!1,renderInPlace:!0,children:[(0,m.jsx)("h3",{children:n}),(0,m.jsxs)("p",{children:[a," ",d.x.I18n.t("youNeedToUpgrade"),"active"===d.x.wpSegmentState?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),i]}):null]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"button button-primary",href:r,children:d.x.I18n.t("upgradeNow")}),e&&(0,m.jsxs)(m.Fragment,{children:[" ",(0,m.jsx)("button",{type:"button",className:"button",onClick:async()=>{await d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"services",action:"recheckKeys"}),window.location.reload()},children:d.x.I18n.t("refreshMySubscribers")})]})]})]})}_.displayName="SubscribersLimitNotice";var b=n(26973);function v(){if(!d.x.emailVolumeLimitReached)return null;let e=d.x.I18n.t("emailVolumeLimitNoticeTitleUnknownLimit"),t=d.x.I18n.t("youReachedEmailVolumeLimitUnknownLimit");d.x.emailVolumeLimit&&(e=d.x.I18n.t("emailVolumeLimitNoticeTitle").replace("[emailVolumeLimit]",d.x.emailVolumeLimit),t=d.x.I18n.t("youReachedEmailVolumeLimit").replace("[emailVolumeLimit]",d.x.emailVolumeLimit));const n=d.x.MailPoetComUrlFactory.getUpgradeUrl(d.x.pluginPartialKey),a=new Date,r=new Date(a.getFullYear(),a.getMonth()+1,1);let i=x()(d.x.I18n.t("toContinueUpgradeYourPlanOrWaitUntil"),/\[link](.*?)\[\/link]/g,(e=>(0,m.jsx)("a",{target:"_blank",rel:"noreferrer",href:n,children:e},e)));return i=x()(i,/<b>\[date]<\/b>\./g,(()=>(0,b.ZP)(`<b>${d.x.Date.short(r)}</b>.`))),(0,m.jsxs)(p.q,{type:"error",timeout:!1,closable:!1,renderInPlace:!0,children:[(0,m.jsx)("h3",{children:e}),(0,m.jsxs)("p",{children:[t,(0,m.jsx)("br",{}),i]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"button button-primary",href:n,children:d.x.I18n.t("upgradeNow")})," ",(0,m.jsx)("button",{type:"button",className:"button",onClick:async()=>{await d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"services",action:"recheckKeys"}),window.location.reload()},children:d.x.I18n.t("refreshMyEmailVolumeLimit")})]})]})}v.displayName="EmailVolumeLimitNotice";const y=(0,o.withBoundary)(v);function w(e){let{mssKeyInvalid:t,subscribersCount:n}=e;return t?(0,m.jsxs)(p.q,{type:"error",timeout:!1,closable:!1,renderInPlace:!0,children:[(0,m.jsx)("h3",{children:d.x.I18n.t("allSendingPausedHeader")}),(0,m.jsx)("p",{children:x()(d.x.I18n.t("allSendingPausedBody"),/\[link\](.*?)\[\/link\]/g,(e=>(0,m.jsx)("a",{href:"?page=mailpoet-settings#premium",children:e},"check-sending")))}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{href:`https://account.mailpoet.com?s=${n}`,className:"button button-primary",target:"_blank",rel:"noopener noreferrer",children:d.x.I18n.t("allSendingPausedLink")})})]}):null}function j(){return(0,m.jsxs)(o.ErrorBoundary,{children:[d.x.subscribersLimitReached&&(0,m.jsx)(_,{}),d.x.emailVolumeLimitReached&&(0,m.jsx)(y,{}),!d.x.subscribersLimitReached&&!d.x.emailVolumeLimitReached&&(0,m.jsx)(w,{mssKeyInvalid:d.x.hasInvalidMssApiKey,subscribersCount:d.x.subscribersCount})]})}function S(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.w,{}),(0,m.jsx)(j,{}),(0,m.jsx)(h,{mailpoetInstalledDaysAgo:d.x.installedDaysAgo,sendTransactionalEmails:d.x.transactionalEmailsEnabled,mtaMethod:d.x.mtaMethod,apiVersion:d.x.apiVersion,noticeDismissed:d.x.transactionalEmailsOptInNoticeDismissed}),(0,m.jsx)(f._,{mtaLog:d.x.mtaLog,mtaMethod:d.x.mtaMethod,isInline:!0})]})}w.displayName="InvalidMssKeyNotice";var k=n(10159),N=n(66510),C=n(74457),I=n(64826),T=n(81433),D=n(30426);function*E(){return yield(0,D.t)({endpoint:"settings",action:"set",method:"POST",data:{"homepage.task_list_dismissed":!0}}),{type:"SET_TASK_LIST_HIDDEN"}}function*P(){return yield(0,D.t)({endpoint:"settings",action:"set",method:"POST",data:{"homepage.product_discovery_dismissed":!0}}),{type:"SET_PRODUCT_DISCOVERY_HIDDEN"}}function*O(){return yield(0,D.t)({endpoint:"settings",action:"set",method:"POST",data:{"homepage.upsell_dismissed":!0}}),{type:"SET_UPSELL_HIDDEN"}}function R(e){return e.taskList.isTaskListHidden}function M(e){return e.taskList.tasksStatus}function A(e){return e.productDiscovery.tasksStatus}function L(e){return e.taskList.canImportWooCommerceSubscribers}function F(e){return e.taskList.hasImportedSubscribers}function q(e){return e.formsCount>0}function W(e){return e.productDiscovery.isHidden}function B(e){return e.subscribersStats.global}function U(e){return e.subscribersStats.lists}function V(e){const t=e.productDiscovery.tasksStatus;return e.isWooCommerceActive?t.addSubscriptionForm&&t.setUpWelcomeCampaign&&t.setUpAbandonedCartEmail&&t.brandWooEmails:t.setUpWelcomeCampaign&&t.addSubscriptionForm&&t.sendFirstNewsletter}function Z(e){return e.isWooCommerceActive}function $(e){return e.taskList.tasksStatus.senderSet?e.taskList.tasksStatus.mssConnected?!e.taskList.tasksStatus.wooSubscribersImported&&e.taskList.canImportWooCommerceSubscribers?"wooSubscribersImported":e.taskList.tasksStatus.subscribersAdded?null:"subscribersAdded":"mssConnected":"senderSet"}function Y(e){return e.upsell.isHidden}function H(e){var t;return null===(t=e.upsell.upsellStatus)||void 0===t?void 0:t.canDisplay}function z(e,t){switch(t.type){case"SET_TASK_LIST_HIDDEN":return{...e,taskList:{...e.taskList,isTaskListHidden:!0}};case"SET_PRODUCT_DISCOVERY_HIDDEN":return{...e,productDiscovery:{...e.productDiscovery,isHidden:!0}};case"SET_UPSELL_HIDDEN":return{...e,upsell:{...e.upsell,isHidden:!0}};default:return e}}const K="mailpoet/homepage",G={};var Q=n(82248),X=n(71458),J=n(65443),ee=n.n(J);function te(e,t,n){d.x.trackEvent(e,{ctaLabel:t},{send_immediately:!0},(()=>{window.location.href=n}))}function ne(e){let{title:t,titleCompleted:n="",slug:a,link:r,order:i,isCompleted:s,isActive:o,children:l=null}=e;const c=ee()("mailpoet-task-list__task",{"mailpoet-task-list__task--completed":s,"mailpoet-task-list__task--active":o}),d=()=>{te("Home Page Task",a,r)};return(0,m.jsxs)("li",{className:c,role:"row",onClick:s?void 0:d,tabIndex:s?void 0:0,onKeyDown:s?void 0:e=>"Enter"===e.key&&d(),children:[(0,m.jsx)("div",{className:"mailpoet-task-list__task-before",children:(0,m.jsx)("div",{className:"mailpoet-task-list__task-icon",children:s?(0,m.jsx)(Q.Z,{icon:X.Z}):i})}),(0,m.jsxs)("div",{className:"mailpoet-task-list__task-content",children:[(0,m.jsx)("div",{className:"mailpoet-task-list__task-title",children:s&&n?n:t}),l]})]})}function ae(e){let{onHide:t}=e;const{tasksStatus:n,currentTask:a,hasImportedSubscribers:r,canImportWooCommerceSubscribers:i}=(0,k.Z)((e=>({tasksStatus:e(K).getTasksStatus(),currentTask:e(K).getCurrentTask(),hasImportedSubscribers:e(K).getHasImportedSubscribers(),canImportWooCommerceSubscribers:e(K).getCanImportWooCommerceSubscribers()})),[]),s=[];return s.push((0,m.jsx)(ne,{slug:"set sender",title:d.x.I18n.t("senderSetTask"),titleCompleted:d.x.I18n.t("senderSetTaskDone"),link:"admin.php?page=mailpoet-settings#/basics",order:1,isCompleted:n.senderSet,isActive:"senderSet"===a},"senderSet")),s.push((0,m.jsx)(ne,{slug:"connect mss",title:d.x.I18n.t("mssConnectedTask"),titleCompleted:d.x.I18n.t("mssConnectedTaskDone"),link:"admin.php?page=mailpoet-settings#/premium",order:2,isCompleted:n.mssConnected,isActive:"mssConnected"===a},"mssConnected")),i&&s.push((0,m.jsx)(ne,{slug:"import woocommerce subscribers",title:d.x.I18n.t("wooSubscribersImportedTask"),titleCompleted:d.x.I18n.t("wooSubscribersImportedTaskDone"),link:"admin.php?page=mailpoet-woocommerce-setup",order:3,isCompleted:n.wooSubscribersImported,isActive:"wooSubscribersImported"===a},"wooSubscribersImported")),s.push((0,m.jsxs)(ne,{slug:"add subscribers",title:d.x.I18n.t("subscribersAddedTask"),titleCompleted:r?d.x.I18n.t("subscribersAddedTaskDoneByImport"):d.x.I18n.t("subscribersAddedTaskDoneByForm"),link:"admin.php?page=mailpoet-import",order:i?4:3,isCompleted:n.subscribersAdded,isActive:"subscribersAdded"===a,children:[!n.subscribersAdded&&(0,m.jsxs)("p",{children:[d.x.I18n.t("noSubscribersQuestion")," ",(0,m.jsx)("a",{href:"admin.php?page=mailpoet-form-editor-template-selection",onClick:o.stopLinkPropagation,children:d.x.I18n.t("setUpForm")})]}),n.subscribersAdded&&!r&&(0,m.jsxs)("p",{children:[d.x.I18n.t("haveSubscribersQuestion")," ",(0,m.jsx)("a",{href:"admin.php?page=mailpoet-import",children:d.x.I18n.t("import")})]})]},"subscribersAdded")),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-task-list__heading",children:[(0,m.jsx)("h1",{children:d.x.I18n.t("welcomeToMailPoet")}),(0,m.jsx)("p",{children:d.x.I18n.t("beginByCompletingSetup")}),(0,m.jsx)(N.Z,{label:d.x.I18n.t("hideList"),icon:C.Z,controls:[{title:d.x.I18n.t("hideList"),onClick:t,icon:null}]})]}),(0,m.jsx)("ul",{children:s.map((e=>e))}),!a&&(0,m.jsxs)("p",{className:"mailpoet-task-list__all-set",children:[d.x.I18n.t("youAreSet")," ",(0,m.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),t()},children:d.x.I18n.t("dismissList")})]})]})}function re(e){let{title:t,slug:n,link:a,description:r,doneMessage:i,imgSrc:s,isDone:o}=e;const l=()=>{te("Home Page Task",n,a)};return(0,m.jsxs)("li",{className:ee()("mailpoet-product-discovery__task",{"mailpoet-product-discovery__task--completed":o}),role:"row",onClick:o?void 0:l,tabIndex:o?void 0:0,onKeyDown:o?void 0:e=>"Enter"===e.key&&l(),children:[(0,m.jsx)("img",{src:s,alt:t,width:124,height:72}),(0,m.jsx)("div",{className:"mailpoet-product-discovery__task-content",children:o?(0,m.jsx)("h3",{children:i}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h3",{children:`${t} →`}),r&&(0,m.jsx)("p",{children:r})]})}),(0,m.jsx)("div",{className:"mailpoet-product-discovery__task-after",children:o&&(0,m.jsx)("div",{className:"mailpoet-task-list__task-icon",children:(0,m.jsx)(Q.Z,{icon:X.Z})})})]})}function ie(e){let{heading:t,description:n,children:a,headingAfter:r,className:i=""}=e;return(0,m.jsxs)("section",{className:ee()("mailpoet-homepage-section__container",i),children:[(0,m.jsxs)("header",{className:"mailpoet-homepage-section__heading",children:[(0,m.jsxs)("h2",{children:[t,n&&(0,m.jsx)("span",{children:n})]}),(0,m.jsx)("div",{className:"mailpoet-homepage-section__heading-after",children:r})]}),a]})}function se(e){let{onHide:t}=e;const{tasksStatus:n,isWooCommerceActive:a,isDiscoveryDone:r}=(0,k.Z)((e=>({tasksStatus:e(K).getProductDiscoveryTasksStatus(),isWooCommerceActive:e(K).getIsWooCommerceActive(),isDiscoveryDone:e(K).getIsProductDiscoveryDone()})),[]),i=[];return i.push((0,m.jsx)(re,{slug:"set up welcome campaign",title:d.x.I18n.t("setUpWelcomeCampaign"),description:d.x.I18n.t("setUpWelcomeCampaignDesc"),link:"admin.php?page=mailpoet-automation-templates",imgSrc:`${d.x.cdnUrl}homepage/welcome-email-illustration.png`,isDone:n.setUpWelcomeCampaign,doneMessage:d.x.I18n.t("setUpWelcomeCampaignDone")},"setUpWelcomeCampaign"),(0,m.jsx)(re,{slug:"add subscription form",title:d.x.I18n.t("addSubscriptionForm"),description:d.x.I18n.t("addSubscriptionFormDesc"),link:"admin.php?page=mailpoet-form-editor-template-selection",imgSrc:`${d.x.cdnUrl}homepage/subscription-form-illustration.png`,isDone:n.addSubscriptionForm,doneMessage:d.x.I18n.t("addSubscriptionFormDone")},"addSubscriptionForm")),a?i.push((0,m.jsx)(re,{slug:"set up abandoned cart email",title:d.x.I18n.t("setUpAbandonedCartEmail"),description:d.x.I18n.t("setUpAbandonedCartEmailDesc"),link:"admin.php?page=mailpoet-newsletters#/new/woocommerce/woocommerce_abandoned_shopping_cart/conditions",imgSrc:`${d.x.cdnUrl}homepage/woo-cart-email-illustration.png`,isDone:n.setUpAbandonedCartEmail,doneMessage:d.x.I18n.t("setUpAbandonedCartEmailDone")},"setUpAbandonedCartEmail"),(0,m.jsx)(re,{slug:"brand woocommerce emails",title:d.x.I18n.t("brandWooEmails"),description:d.x.I18n.t("brandWooEmailsDesc"),link:"admin.php?page=mailpoet-settings#/woocommerce",imgSrc:`${d.x.cdnUrl}homepage/woo-transactional-email-illustration.png`,isDone:n.brandWooEmails,doneMessage:d.x.I18n.t("brandWooEmailsDone")},"brandWooEmails")):i.push((0,m.jsx)(re,{slug:"send first newsletter",title:d.x.I18n.t("sendFirstNewsletter"),description:d.x.I18n.t("sendFirstNewsletterDesc"),link:"admin.php?page=mailpoet-newsletters#/new",imgSrc:`${d.x.cdnUrl}homepage/newsletter-illustration.png`,isDone:n.sendFirstNewsletter,doneMessage:d.x.I18n.t("sendFirstNewsletterDone")},"sendFirstNewsletter")),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ie,{className:"mailpoet-homepage-product-discovery",heading:d.x.I18n.t("startEngagingWithYourCustomers"),headingAfter:(0,m.jsx)(N.Z,{label:d.x.I18n.t("hideList"),icon:C.Z,controls:[{title:d.x.I18n.t("hideList"),onClick:t,icon:null}]}),children:(0,m.jsx)("ul",{children:i.map((e=>e))})}),r&&(0,m.jsxs)("p",{className:"mailpoet-task-list__all-set",children:[d.x.I18n.t("allDone")," ",(0,m.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),t()},children:d.x.I18n.t("dismissTasks")})]})]})}var oe=n(15128),le=n(18822),ce=n(43981),de=n(31347),ue=n(42238),pe=n(3939);function me(e){let{closable:t,onHide:n}=e;return(0,m.jsx)(ie,{className:"mailpoet-homepage-upsell",heading:d.x.I18n.t("accelerateYourGrowth"),headingAfter:t&&n?(0,m.jsx)(pe.ZP,{icon:oe.Z,onClick:n,label:d.x.I18n.t("close")}):null,children:(0,m.jsxs)("div",{className:"mailpoet-homepage-upsell__content",children:[(0,m.jsxs)("ul",{children:[(0,m.jsxs)("li",{children:[(0,m.jsx)(Q.Z,{icon:le.Z}),(0,m.jsx)("span",{children:d.x.I18n.t("detailedAnalytics")})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(Q.Z,{icon:ce.Z}),(0,m.jsx)("span",{children:d.x.I18n.t("advancedSubscriberSegmentation")})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(Q.Z,{icon:de.Z}),(0,m.jsx)("span",{children:d.x.I18n.t("emailMarketingAutomations")})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(Q.Z,{icon:ue.Z}),(0,m.jsx)("span",{children:d.x.I18n.t("prioritySupport")})]})]}),(0,m.jsx)(pe.ZP,{variant:"primary",href:d.x.MailPoetComUrlFactory.getPurchasePlanUrl(d.x.subscribersCount,d.x.currentWpUserEmail,"business",{utm_source:"plugin",utm_medium:"homepage",utm_campaign:"upsell"}),children:d.x.I18n.t("upgradePlan")})]})})}var he=n(48405),fe=n(24362);function ge(e){let{id:t,engagementScore:n}=e;const a={unknown:{name:d.x.I18n.t("unknownBadgeName"),type:"unknown",tooltipTitle:d.x.I18n.t("unknownBadgeTooltip"),tooltipText:d.x.I18n.t("tooltipUnknown")},excellent:{name:d.x.I18n.t("excellentBadgeName"),type:"excellent",tooltipTitle:d.x.I18n.t("excellentBadgeTooltip"),tooltipText:d.x.I18n.t("tooltipExcellent")},good:{name:d.x.I18n.t("goodBadgeName"),type:"good",tooltipTitle:d.x.I18n.t("goodBadgeTooltip"),tooltipText:d.x.I18n.t("tooltipGood")},average:{name:d.x.I18n.t("averageBadgeName"),type:"average",tooltipTitle:d.x.I18n.t("averageBadgeTooltip"),tooltipText:d.x.I18n.t("tooltipAverage")}},r=`badge-${t}`;let i;i=null==n?a.unknown:n<20?a.average:n<50?a.good:a.excellent;const s=(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"mailpoet-listing-stats-tooltip-title",children:i.tooltipTitle.toUpperCase()}),(0,m.jsx)("div",{className:"mailpoet-listing-stats-tooltip-description",children:d.x.I18n.t("engagementScoreDescription")}),(0,m.jsxs)("div",{className:"mailpoet-listing-stats-tooltip-content",children:[(0,m.jsx)(fe.C,{type:"unknown",name:d.x.I18n.t("unknownBadgeName")})," : ",a.unknown.tooltipText,(0,m.jsx)("br",{}),(0,m.jsx)(fe.C,{type:"excellent",name:d.x.I18n.t("excellentBadgeName")})," : ",a.excellent.tooltipText,(0,m.jsx)("br",{}),(0,m.jsx)(fe.C,{type:"good",name:d.x.I18n.t("goodBadgeName")})," : ",a.good.tooltipText,(0,m.jsx)("br",{}),(0,m.jsx)(fe.C,{type:"average",name:d.x.I18n.t("averageBadgeName")})," : ",a.average.tooltipText]})]},`tooltip-${r}`);return(0,m.jsxs)("div",{className:"mailpoet-listing-stats-opened-clicked",children:[null!=n&&(0,m.jsxs)("div",{className:"mailpoet-listing-stats-percentages",children:[n.toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),"%"]}),(0,m.jsx)("div",{children:(0,m.jsx)(fe.C,{isInverted:!0,type:i.type,name:i.name,tooltip:s,tooltipId:r,tooltipPlace:"top"})})]})}const xe=(e,t,n)=>{e.preventDefault(),te("Home Page Statistics Click",t,n)};function _e(){const{globalChange:e,listsChange:t,hasForms:n}=(0,k.Z)((e=>({globalChange:e(K).getGlobalSubscriberStatsChange(),listsChange:e(K).getListsSubscriberStatsChange(),hasForms:e(K).getHasForms()})),[]),a=0===t.length&&0===e.subscribed&&0===e.unsubscribed;return(0,m.jsx)(ie,{className:"mailpoet-subscribers-stats",heading:d.x.I18n.t("subscribersHeading"),description:d.x.I18n.t("subscribersSectionDescription"),headingAfter:!a&&(0,m.jsxs)("span",{className:ee()({"mailpoet-decrease":e.changePercent<0}),children:[(0,m.jsx)(Q.Z,{icon:le.Z}),e.changePercent<0&&"-",Math.abs(e.changePercent)>1e3?"∞%":`${Math.abs(e.changePercent)}%`]}),children:a?(0,m.jsxs)("div",{className:"mailpoet-subscribers-stats-empty",children:[(0,m.jsx)(Q.Z,{icon:le.Z,viewBox:"-4 -4 32 32"}),n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:d.x.I18n.t("subscriberCountHasNotChangeLongTime")}),(0,m.jsx)("a",{href:"admin.php?page=mailpoet-newsletters#/new",onClick:e=>xe(e,"campaigns","admin.php?page=mailpoet-newsletters#/new"),children:d.x.I18n.t("exploreCampaigns")})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{children:[d.x.I18n.t("changesWillAppear"),(0,m.jsx)("br",{}),d.x.I18n.t("starBySettingUpForm")]}),(0,m.jsx)("a",{href:"admin.php?page=mailpoet-form-editor-template-selection",onClick:e=>xe(e,"new form","admin.php?page=mailpoet-form-editor-template-selection"),children:d.x.I18n.t("createForm")})]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-subscribers-stats-global-change",children:[(0,m.jsxs)("div",{children:[d.x.I18n.t("newSubscribers"),(0,m.jsx)("br",{}),(0,m.jsx)("span",{children:e.subscribed})]}),(0,m.jsxs)("div",{children:[d.x.I18n.t("unsubscribedSubscribers"),(0,m.jsx)("br",{}),(0,m.jsx)("span",{children:e.unsubscribed})]})]}),!!t.length&&(0,m.jsxs)("table",{className:"mailpoet-subscribers-stats-list-change-table",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:d.x.I18n.t("listName")}),(0,m.jsx)("th",{children:d.x.I18n.t("listScore")}),(0,m.jsx)("th",{children:d.x.I18n.t("subscribedSubscribers")}),(0,m.jsx)("th",{children:d.x.I18n.t("unsubscribedSubscribers")})]})}),(0,m.jsx)("tbody",{children:t.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsx)("a",{href:`admin.php?page=mailpoet-subscribers#/page[1]/sort_by[created_at]/sort_order[desc]/group[all]/filter[segment=${e.id}]`,children:e.name})}),(0,m.jsx)("td",{children:(0,m.jsx)("div",{className:"mailpoet-listing-stats",children:(0,m.jsx)(ge,{id:e.id,engagementScore:e.averageEngagementScore})})}),(0,m.jsx)("td",{children:e.subscribed}),(0,m.jsx)("td",{children:e.unsubscribed})]},e.id)))})]})]})})}var be=n(74193),ve=n(83158);function ye(e){let{link:t,abstract:n,title:a,imgSrc:r}=e;return(0,m.jsxs)("a",{className:"mailpoet-resource-post",href:t,target:"_blank",rel:"noreferrer",children:[(0,m.jsx)("img",{src:r,alt:a,width:"292",height:"166"}),(0,m.jsx)("h3",{children:a}),(0,m.jsx)("p",{children:n})]})}function we(){const[e,t]=(0,s.useState)(1),n=[(0,m.jsx)(ye,{link:"https://kb.mailpoet.com/article/141-create-an-email-types-of-campaigns?utm_source=plugin&utm_medium=homepage&utm_campaign=resources",abstract:d.x.I18n.t("createAnEmailAbstract"),title:d.x.I18n.t("createAnEmailTitle"),imgSrc:`${d.x.cdnUrl}homepage/resources/add_email.png`},"createAnEmail"),(0,m.jsx)(ye,{link:"https://kb.mailpoet.com/article/297-create-a-form-with-our-new-editor?utm_source=plugin&utm_medium=homepage&utm_campaign=resources",abstract:d.x.I18n.t("createAFormAbstract"),title:d.x.I18n.t("createAFormTitle"),imgSrc:`${d.x.cdnUrl}homepage/resources/add_form.png`},"createAForm"),(0,m.jsx)(ye,{link:"https://www.mailpoet.com/blog/email-segmentation/?utm_source=plugin&utm_medium=homepage&utm_campaign=resources",abstract:d.x.I18n.t("segmentationGuideAbstract"),title:d.x.I18n.t("segmentationGuideTitle"),imgSrc:`${d.x.cdnUrl}homepage/resources/segmentation.png`},"segmentationGuide"),(0,m.jsx)(ye,{link:"https://www.mailpoet.com/blog/re-engagement-emails/?utm_source=plugin&utm_medium=homepage&utm_campaign=resources",abstract:d.x.I18n.t("reEngagementAbstract"),title:d.x.I18n.t("reEngagementTitle"),imgSrc:`${d.x.cdnUrl}homepage/resources/reengagement.png`},"reEngagement"),(0,m.jsx)(ye,{link:"https://www.mailpoet.com/blog/newsletter-marketing-strategy/?utm_source=plugin&utm_medium=homepage&utm_campaign=resources",abstract:d.x.I18n.t("marketingStrategyAbstract"),title:d.x.I18n.t("marketingStrategyTitle"),imgSrc:`${d.x.cdnUrl}homepage/resources/marketing.png`},"marketingStrategy"),(0,m.jsx)(ye,{link:"https://www.mailpoet.com/blog/how-to-promote-your-sales-with-email-marketing-mailpoet-woocommerce-segmentation/?utm_source=plugin&utm_medium=homepage&utm_campaign=resources",abstract:d.x.I18n.t("promotingSalesAbstract"),title:d.x.I18n.t("promotingSalesTitle"),imgSrc:`${d.x.cdnUrl}homepage/resources/sales.png`},"promotingSales")],a=(0,s.useCallback)((n=>{n.preventDefault(),t(e+1)}),[e]),r=(0,s.useCallback)((n=>{n.preventDefault(),t(e-1)}),[e]);return(0,m.jsxs)(ie,{className:"mailpoet-homepage-resources",heading:d.x.I18n.t("learnMoreAboutEmailMarketing"),children:[(0,m.jsx)("div",{className:"mailpoet-homepage-resources__posts",children:n.filter(((t,n)=>n+1===2*e||n+1===2*e-1)).map((e=>e))}),(0,m.jsxs)("div",{className:"mailpoet-homepage-resources__pagination",children:[d.x.I18n.t("pageOf").replace("%1$d",e.toString()).replace("%2$d",Math.ceil(n.length/2).toString()),e>1?(0,m.jsx)("a",{href:"#",onClick:r,title:d.x.I18n.t("previousPostsPage"),children:(0,m.jsx)(Q.Z,{icon:be.Z})}):(0,m.jsx)(Q.Z,{icon:be.Z}),e<Math.ceil(n.length/2)?(0,m.jsx)("a",{href:"#",onClick:a,title:d.x.I18n.t("nextPostsPage"),children:(0,m.jsx)(Q.Z,{icon:ve.Z})}):(0,m.jsx)(Q.Z,{icon:ve.Z})]})]})}function je(){const{isTaskListHidden:e,isProductDiscoveryHidden:t,isUpsellHidden:n,canDisplayUpsell:a}=(0,k.Z)((e=>({isTaskListHidden:e(K).getIsTaskListHidden(),isProductDiscoveryHidden:e(K).getIsProductDiscoveryHidden(),isUpsellHidden:e(K).getIsUpsellHidden(),canDisplayUpsell:e(K).getCanDisplayUpsell()})),[]),{hideTaskList:r}=(0,he.Z)(K),{hideProductDiscovery:i}=(0,he.Z)(K),{hideUpsell:s}=(0,he.Z)(K);return(0,m.jsxs)("div",{className:"mailpoet-homepage__container",children:[!e&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(ae,{onHide:r})}),!t&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(se,{onHide:i})}),e&&t&&a&&!n&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(me,{closable:!0,onHide:s})}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(_e,{})}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(we,{})})]})}function Se(){const[e,t]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(()=>{const e=(0,I.Z)(K,{actions:a,controls:G,selectors:r,reducer:z,initialState:{taskList:{isTaskListHidden:window.mailpoet_homepage_data.taskListDismissed,tasksStatus:window.mailpoet_homepage_data.taskListStatus,canImportWooCommerceSubscribers:window.mailpoet_homepage_data.wooCustomersCount>0,hasImportedSubscribers:window.mailpoet_homepage_data.subscribersCount>10},productDiscovery:{isHidden:window.mailpoet_homepage_data.productDiscoveryDismissed,tasksStatus:window.mailpoet_homepage_data.productDiscoveryStatus},upsell:{isHidden:window.mailpoet_homepage_data.upsellDismissed,upsellStatus:window.mailpoet_homepage_data.upsellStatus},isWooCommerceActive:d.x.isWoocommerceActive,subscribersStats:window.mailpoet_homepage_data.subscribersStats,formsCount:window.mailpoet_homepage_data.formsCount}});(0,T.register)(e)})(),t(!0)}),[]),(0,m.jsxs)(l.k.Provider,{value:(0,l.S)(window),children:[(0,m.jsx)(c.Q,{}),(0,m.jsx)(S,{}),e?(0,m.jsx)(je,{}):null]})}const ke=document.getElementById("mailpoet_homepage_container");ke&&((0,o.registerTranslations)(),i.render((0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Se,{})}),ke));var Ne=n(26952),Ce=n(16374),Ie=n(65311),Te=n.n(Ie),De=n(39519),Ee=n.n(De),Pe=n(77176),Oe=n(88750),Re=n(95915),Me=n(7936),Ae=n(70869);function Le(e){let{cacheCalculation:t}=e;const[n,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)([]),o=(new Date).getTime()-new Date(t).getTime(),l=Math.floor(o/1e3/60);return(0,m.jsxs)("div",{className:"mailpoet-subscribers-cache-notice",children:[x()((0,Me.__)("Lists and Segments subscribers counts were calculated <abbr>{$mins} minutes ago</abbr>","mailpoet"),/<abbr>(.*?)<\/abbr>/,((e,n)=>(0,m.jsx)("abbr",{title:t,children:e.replace(/(\{\$mins\}|\$mins)/i,String(l))},n))),(0,m.jsx)(Ae.z,{className:"mailpoet-subscribers-cache-notice-button",type:"button",variant:"secondary",dimension:"small",onClick:()=>{a(!0),d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"settings",action:"recalculateSubscribersCountsCache"}).done((()=>{window.location.reload()})).fail((e=>{i(e.errors.map((e=>e.message))),a(!1)}))},withSpinner:n,children:(0,Me.__)("Recalculate now","mailpoet")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),r.length>0&&(0,m.jsx)(p.q,{type:"error",children:r.map((e=>(0,m.jsx)("p",{children:e},e)))})]})}var Fe=n(92677);function qe(e){let{subscribersInPlan:t,subscribersInPlanLimit:n}=e;if(!1===t)return null;const a=n?(0,m.jsx)("b",{children:(0,Me._x)("%1$d / %2$d","count / total subscribers","mailpoet").replace("%1$d",t.toLocaleString()).replace("%2$d",n.toLocaleString())},"subscribers_count"):(0,m.jsx)("b",{children:t},"subscribers_count");return(0,m.jsxs)("div",{className:"mailpoet-subscribers-in-plan",children:[x()((0,Me._x)("%s subscribers in your plan","number of subscribers in a sending plan","mailpoet"),"%s",(()=>a))," ",(0,m.jsx)(Fe.Tooltip,{tooltip:(0,Me.__)("This is the total of subscribed, unconfirmed and inactive subscribers we count when you are sending with MailPoet Sending Service. The count excludes unsubscribed and bounced (invalid) email addresses.","mailpoet"),place:"right"}),(0,m.jsx)("span",{className:"mailpoet-subscribers-in-plan-spacer",children:" "})]})}var We=n(532);function Be(e){let{location:t}=e;return(0,m.jsxs)(c.Q,{children:[(0,m.jsxs)(Ne.Link,{className:"mailpoet-button button-secondary",to:{pathname:"/new",state:{backUrl:null==t?void 0:t.pathname}},children:[We.R,(0,m.jsx)("span",{"data-automation-id":"add-new-subscribers-button",children:d.x.I18n.t("new")})]}),(0,m.jsx)("a",{className:"mailpoet-button not-small-screen button-secondary",href:"?page=mailpoet-import","data-automation-id":"import-subscribers-button",children:d.x.I18n.t("import")}),(0,m.jsx)("a",{id:"mailpoet_export_button",className:"mailpoet-button not-small-screen button-secondary",href:"?page=mailpoet-export",children:d.x.I18n.t("export")})]})}Be.propTypes={location:Ee().object.isRequired};const Ue=(0,Ce.EN)(Be),Ve=d.x.trackingConfig.emailTrackingEnabled,Ze=[{name:"email",label:d.x.I18n.t("subscriber"),sortable:!0},{name:"status",label:d.x.I18n.t("status"),sortable:!0},{name:"segments",label:d.x.I18n.t("lists")},{name:"tags",label:d.x.I18n.t("tags")},{name:"statistics",label:d.x.I18n.t("statisticsColumn"),display:Ve},{name:"created_at",label:d.x.I18n.t("subscribedOn"),sortable:!0}],$e={onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneSubscriberTrashed"):d.x.I18n.t("multipleSubscribersTrashed").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneSubscriberDeleted"):d.x.I18n.t("multipleSubscribersDeleted").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneSubscriberRestored"):d.x.I18n.t("multipleSubscribersRestored").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onNoItemsFound:e=>"bounced"===e&&!window.mailpoet_premium_active&&!window.mailpoet_mss_active&&(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{children:d.x.I18n.t("bouncedSubscribersHelp")}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{href:"admin.php?page=mailpoet-upgrade",className:"button-primary",children:d.x.I18n.t("bouncedSubscribersPremiumButtonText")})})]})},Ye=(e,t,n,a)=>(0,m.jsxs)(Oe.u,{title:a,onRequestClose:t,isDismissible:!0,children:[(0,m.jsx)(Re.Y,{field:n}),(0,m.jsx)("span",{className:"mailpoet-gap-half"}),(0,m.jsx)(o.Button,{onClick:e,dimension:"small",variant:"secondary",children:d.x.I18n.t("apply")})]}),He=[{name:"moveToList",label:d.x.I18n.t("moveToList"),onSelect:function(e,t){return Ye(e,t,{id:"move_to_segment",name:"move_to_segment",endpoint:"segments",filter:function(e){return!(e.deleted_at||"default"!==e.type)}},d.x.I18n.t("moveToList"))},getData:function(){return{segment_id:Number(Te()("#move_to_segment").val())}},onSuccess:function(e){d.x.Notice.success(d.x.I18n.t("multipleSubscribersMovedToList").replace("%1$d",Number(e.meta.count).toLocaleString()).replace("%2$s",e.meta.segment))}},{name:"addToList",label:d.x.I18n.t("addToList"),onSelect:function(e,t){return Ye(e,t,{id:"add_to_segment",name:"add_to_segment",endpoint:"segments",filter:function(e){return!(e.deleted_at||"default"!==e.type)}},d.x.I18n.t("addToList"))},getData:function(){return{segment_id:Number(Te()("#add_to_segment").val())}},onSuccess:function(e){d.x.Notice.success(d.x.I18n.t("multipleSubscribersAddedToList").replace("%1$d",Number(e.meta.count).toLocaleString()).replace("%2$s",e.meta.segment))}},{name:"removeFromList",label:d.x.I18n.t("removeFromList"),onSelect:function(e,t){return Ye(e,t,{id:"remove_from_segment",name:"remove_from_segment",endpoint:"segments",filter:function(e){return!("default"!==e.type)}},d.x.I18n.t("removeFromList"))},getData:function(){return{segment_id:Number(Te()("#remove_from_segment").val())}},onSuccess:function(e){d.x.Notice.success(d.x.I18n.t("multipleSubscribersRemovedFromList").replace("%1$d",Number(e.meta.count).toLocaleString()).replace("%2$s",e.meta.segment))}},{name:"removeFromAllLists",label:d.x.I18n.t("removeFromAllLists"),onSuccess:function(e){d.x.Notice.success(d.x.I18n.t("multipleSubscribersRemovedFromAllLists").replace("%1$d",Number(e.meta.count).toLocaleString()))}},{name:"trash",label:d.x.I18n.t("moveToTrash"),onSuccess:$e.onTrash},{name:"unsubscribe",label:d.x.I18n.t("unsubscribe"),onSelect:(e,t,n)=>{const a="all"!==n.selection?n.selected_ids.length:n.count;return(0,m.jsxs)(Oe.u,{title:d.x.I18n.t("unsubscribe"),onRequestClose:t,isDismissible:!0,children:[(0,m.jsx)("p",{children:d.x.I18n.t("unsubscribeConfirm").replace("%s",a.toLocaleString())}),(0,m.jsx)("span",{className:"mailpoet-gap-half"}),(0,m.jsx)(o.Button,{onClick:e,dimension:"small",variant:"secondary",automationId:"bulk-unsubscribe-confirm",children:d.x.I18n.t("apply")})]})}}],ze=[{name:"statistics",label:d.x.I18n.t("statsListingActionTitle"),link:function(e,t){return(0,m.jsx)(Ne.Link,{to:{pathname:`/stats/${e.id}`,state:{backUrl:null==t?void 0:t.pathname}},children:d.x.I18n.t("statsListingActionTitle")})}},{name:"edit",label:d.x.I18n.t("edit"),link:function(e,t){return(0,m.jsx)(Ne.Link,{to:{pathname:`/edit/${e.id}`,state:{backUrl:null==t?void 0:t.pathname}},children:d.x.I18n.t("edit")})}},{name:"sendConfirmationEmail",className:"mailpoet-hide-on-mobile",label:d.x.I18n.t("resendConfirmationEmail"),display:function(e){return"unconfirmed"===e.status&&e.count_confirmations<window.mailpoet_max_confirmation_emails},onClick:function(e){return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"subscribers",action:"sendConfirmationEmail",data:{id:e.id}}).done((()=>d.x.Notice.success(d.x.I18n.t("oneConfirmationEmailSent")))).fail((e=>d.x.Notice.showApiErrorNotice(e)))}},{name:"trash",className:"mailpoet-hide-on-mobile"}],Ke=e=>0===Number(e.wp_user_id)&&0===Number(e.is_woocommerce_user);function Ge(e){let{match:t}=e;const n=(0,Ce.TH)();return(0,m.jsxs)("div",{children:[(0,m.jsx)(Ue,{}),(0,m.jsx)(qe,{subscribersInPlan:d.x.subscribersCount,subscribersInPlanLimit:d.x.subscribersLimit}),(0,m.jsx)(j,{}),(0,m.jsx)(Le,{cacheCalculation:window.mailpoet_subscribers_counts_cache_created_at}),(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:n,params:t.params,endpoint:"subscribers",onRenderItem:(e,t)=>{const a=ee()("manage-column","column-primary","has-row-actions","column-username");let r="";switch(e.status){case"subscribed":r=d.x.I18n.t("subscribed");break;case"unconfirmed":r=d.x.I18n.t("unconfirmed");break;case"unsubscribed":r=d.x.I18n.t("unsubscribed");break;case"inactive":r=d.x.I18n.t("inactive");break;case"bounced":r=d.x.I18n.t("bounced");break;default:r="Invalid"}const i=[];return e.subscriptions.length>0&&e.subscriptions.forEach((e=>{const t=(e=>{let t=!1;return window.mailpoet_segments.forEach((n=>{n.id===e&&(t=n)})),t})(e.segment_id);!1!==t&&"subscribed"===e.status&&i.push(t)})),(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:a,children:[(0,m.jsx)(Ne.Link,{className:"mailpoet-listing-title",to:{pathname:`/edit/${e.id}`,state:{backUrl:null==n?void 0:n.pathname}},children:e.email}),(0,m.jsxs)("div",{className:"mailpoet-listing-subtitle",children:[e.first_name," ",e.last_name]}),t]}),(0,m.jsx)("td",{className:"column","data-colname":d.x.I18n.t("status"),children:r}),(0,m.jsx)("td",{className:"column","data-colname":d.x.I18n.t("lists"),children:(0,m.jsx)(o.SegmentTags,{segments:i,dimension:"large"})}),(0,m.jsx)("td",{className:"column","data-colname":d.x.I18n.t("tags"),children:(0,m.jsx)(o.SubscriberTags,{subscribers:e.tags,variant:"wordpress",isInverted:!0})}),!0===Ve?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":d.x.I18n.t("statisticsColumn"),children:(0,m.jsx)("div",{className:"mailpoet-listing-stats",children:(0,m.jsx)("a",{href:`#/stats/${e.id}`,children:(0,m.jsx)(ge,{id:e.id,engagementScore:e.engagement_score})},`stats-link-${e.id}`)})}):null,(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("subscribedOn"),children:[d.x.Date.short(e.created_at),(0,m.jsx)("br",{}),d.x.Date.time(e.created_at)]})]})},columns:Ze,bulk_actions:He,item_actions:ze,messages:$e,sort_by:"created_at",sort_order:"desc",isItemDeletable:Ke})]})}Ge.propTypes={match:Ee().shape({params:Ee().object}).isRequired},Ge.displayName="SubscriberList";var Qe=n(73136),Xe=n.n(Qe),Je=n(51059),et=n(26138),tt=n(12447),nt=n.n(tt),at=n(51273);class rt extends s.Component{render(){const e=this.props.field.name||null,t=this.props.item||{};let n,a;this.props.onValueChange instanceof Function&&(n=t[this.props.field.name],n=void 0===n?this.props.field.defaultValue||"":n),!n&&this.props.field.defaultValue&&(a=this.props.field.defaultValue);let r=this.props.field.id||null;!r&&this.props.field.name&&(r=`field_${this.props.field.name}`);let i=this.props.field.className||null;return i||this.props.field.size||(i="regular-text"),(0,m.jsx)(at.I,{type:"text",disabled:void 0!==this.props.field.disabled&&this.props.field.disabled(this.props.item),className:i,size:"auto"!==this.props.field.size&&this.props.field.size>0?this.props.field.size:null,name:e,id:r,value:n,defaultValue:a,placeholder:this.props.field.placeholder,onChange:this.props.onValueChange,onBlur:this.props.onBlurEvent,customLabel:this.props.field.customLabel,tooltip:this.props.field.tooltip,...this.props.field.validation})}}rt.propTypes={onValueChange:Ee().func,onBlurEvent:Ee().func,field:Ee().shape({name:Ee().string.isRequired,defaultValue:Ee().string,id:Ee().string,className:Ee().string,size:Ee().oneOfType([Ee().string,Ee().number]),disabled:Ee().func,placeholder:Ee().string,validation:Ee().shape({"data-parsley-required":Ee().bool,"data-parsley-required-message":Ee().string,"data-parsley-type":Ee().string,"data-parsley-errors-container":Ee().string,maxLength:Ee().number}),customLabel:Ee().string,tooltip:Ee().string}).isRequired,item:Ee().object.isRequired},rt.defaultProps={onValueChange:function(){},onBlurEvent:function(){}};var it=n(42561);function st(e){return(0,m.jsx)(it.g,{type:"text",name:e.field.name,id:`field_${e.field.name}`,value:e.item[e.field.name],placeholder:e.field.placeholder,defaultValue:e.field.defaultValue,onChange:e.onValueChange,className:e.field.className,customLabel:e.field.customLabel,tooltip:e.field.tooltip,...e.field.validation})}st.propTypes={item:Ee().object.isRequired,field:Ee().shape({name:Ee().string,placeholder:Ee().string,defaultValue:Ee().string,validation:Ee().shape({"data-parsley-required":Ee().bool,"data-parsley-required-message":Ee().string,"data-parsley-type":Ee().string,"data-parsley-errors-container":Ee().string,maxLength:Ee().number}),className:Ee().string,customLabel:Ee().string,tooltip:Ee().string}).isRequired,onValueChange:Ee().func.isRequired};var ot=n(35614),lt=n(92558);class ct extends s.Component{render(){if(void 0===this.props.field.values)return!1;let e,t=!1,n=!1,a=!1;void 0!==this.props.field.placeholder&&(n=(0,m.jsx)("option",{value:"",children:this.props.field.placeholder})),void 0!==this.props.field.filter&&(t=this.props.field.filter),ot.ZP.isFunction(this.props.field.sortBy)&&(a=this.props.field.sortBy),e=a?ot.ZP.map(ot.ZP.sortBy(ot.ZP.pairs(this.props.field.values),(e=>a(e[0],e[1]))),(e=>e[0])):Object.keys(this.props.field.values);const r=e.filter((e=>!1===t||t(this.props.item,e))).map((e=>(0,m.jsx)("option",{value:e,children:this.props.field.values[e]},`option-${e}`)));return(0,m.jsxs)(lt.Select,{name:this.props.field.name,id:`field_${this.props.field.name}`,value:this.props.item[this.props.field.name]||"",onChange:this.props.onValueChange,automationId:this.props.automationId,...this.props.field.validation,children:[n,r]})}}ct.propTypes={onValueChange:Ee().func,field:Ee().shape({name:Ee().string.isRequired,values:Ee().objectOf(Ee().string),placeholder:Ee().string,filter:Ee().func,sortBy:Ee().func,validation:Ee().shape({"data-parsley-required":Ee().bool,"data-parsley-required-message":Ee().string,"data-parsley-type":Ee().string,"data-parsley-errors-container":Ee().string,maxLength:Ee().number})}).isRequired,item:Ee().object.isRequired,automationId:Ee().string},ct.defaultProps={automationId:"",onValueChange:function(){}};var dt=n(80374);class ut extends s.Component{constructor(e){super(e),(0,et.Z)(this,"onValueChange",((e,t)=>this.props.onValueChange(t))),this.onValueChange=this.onValueChange.bind(this)}render(){if(void 0===this.props.field.values)return!1;const e=this.props.item[this.props.field.name],t=Object.keys(this.props.field.values).map((t=>(0,m.jsx)("p",{children:(0,m.jsx)(dt.Y,{checked:e===t,value:t,onCheck:this.onValueChange,name:this.props.field.name,children:this.props.field.values[t]})},`radio-${t}`)));return(0,m.jsx)("div",{children:t})}}ut.propTypes={onValueChange:Ee().func,field:Ee().shape({name:Ee().string.isRequired,values:Ee().objectOf(Ee().string)}).isRequired,item:Ee().object.isRequired},ut.defaultProps={onValueChange:function(){}};var pt=n(59171);class mt extends s.Component{constructor(e){super(e),(0,et.Z)(this,"onValueChange",((e,t)=>(t.target.value=e?"1":"0",this.props.onValueChange(t)))),this.onValueChange=this.onValueChange.bind(this)}render(){if(void 0===this.props.field.values)return!1;const e=!!Number(this.props.item[this.props.field.name]),t=Object.keys(this.props.field.values).map((t=>(0,m.jsx)("p",{children:(0,m.jsx)(pt.X,{value:"1",checked:e,name:this.props.field.name,onCheck:this.onValueChange,children:this.props.field.values[t]})},`checkbox-${t}`)));return(0,m.jsx)("div",{children:t})}}function ht(e){const t=[];void 0!==e.placeholder&&t.push((0,m.jsx)("option",{value:"",children:e.placeholder},0));const n=Xe()().year();for(let e=n;e>=n-100;e-=1)t.push((0,m.jsx)("option",{value:e,children:e},e));return(0,m.jsx)(o.Select,{isMinWidth:!0,name:`${e.name}[year]`,value:e.year,onChange:e.onValueChange,children:t})}function ft(e){const t=[];void 0!==e.placeholder&&t.push((0,m.jsx)("option",{value:"",children:e.placeholder},0));for(let n=1;n<=12;n+=1)t.push((0,m.jsx)("option",{value:n,children:e.monthNames[n-1]},n));return(0,m.jsx)(o.Select,{isMinWidth:!0,name:`${e.name}[month]`,value:e.month,onChange:e.onValueChange,children:t})}function gt(e){const t=[];void 0!==e.placeholder&&t.push((0,m.jsx)("option",{value:"",children:e.placeholder},0));for(let e=1;e<=31;e+=1)t.push((0,m.jsx)("option",{value:e,children:e},e));return(0,m.jsx)(o.Select,{isMinWidth:!0,name:`${e.name}[day]`,value:e.day,onChange:e.onValueChange,children:t})}mt.propTypes={onValueChange:Ee().func.isRequired,field:Ee().shape({name:Ee().string.isRequired,values:Ee().objectOf(Ee().string)}).isRequired,item:Ee().object.isRequired},ht.propTypes={name:Ee().string.isRequired,placeholder:Ee().string.isRequired,onValueChange:Ee().func.isRequired,year:Ee().oneOfType([Ee().string,Ee().number]).isRequired},ft.propTypes={name:Ee().string.isRequired,placeholder:Ee().string.isRequired,onValueChange:Ee().func.isRequired,month:Ee().oneOfType([Ee().string,Ee().number]).isRequired,monthNames:Ee().arrayOf(Ee().string).isRequired},gt.propTypes={name:Ee().string.isRequired,placeholder:Ee().string.isRequired,onValueChange:Ee().func.isRequired,day:Ee().oneOfType([Ee().string,Ee().number]).isRequired};class xt extends s.Component{constructor(e){super(e),this.state={year:"",month:"",day:""},this.onValueChange=this.onValueChange.bind(this)}componentDidMount(){this.extractDateParts()}componentDidUpdate(e){void 0!==this.props.item&&void 0!==e.item&&this.props.item.id!==e.item.id&&this.extractDateParts()}onValueChange(e){const t=e.target.name.match(/(.*?)\[(.*?)\]/);let n=null,a=null;if(null!==t&&3===t.length){[,n,a]=t;const r=Number(e.target.value);this.setState({[`${a}`]:r},(()=>{this.props.onValueChange({target:{name:n,value:this.formatValue()}})}))}}formatValue(){let e;switch(this.props.field.params.date_type){case"year_month_day":e={year:this.state.year,month:this.state.month,day:this.state.day};break;case"year_month":e={year:this.state.year,month:this.state.month};break;case"month":e={month:this.state.month};break;case"year":e={year:this.state.year};break;default:e={value:"invalid type"}}return e}extractDateParts(){const e=void 0!==this.props.item[this.props.field.name]?this.props.item[this.props.field.name].trim():"";if(""===e)return;const t=Xe()(e);this.setState({year:t.format("YYYY"),month:t.format("M"),day:t.format("D")})}render(){const e=window.mailpoet_month_names||[];let t=(window.mailpoet_date_formats||{})[this.props.field.params.date_type][0];this.props.field.params.date_format&&(t=this.props.field.params.date_format);const n=t.split("/").map((t=>{switch(t){case"YYYY":return(0,m.jsx)(ht,{onValueChange:this.onValueChange,name:this.props.field.name,year:this.state.year,placeholder:this.props.field.year_placeholder},"year");case"MM":return(0,m.jsx)(ft,{onValueChange:this.onValueChange,name:this.props.field.name,month:this.state.month,monthNames:e,placeholder:this.props.field.month_placeholder},"month");case"DD":return(0,m.jsx)(gt,{onValueChange:this.onValueChange,name:this.props.field.name,day:this.state.day,placeholder:this.props.field.day_placeholder},"day");default:return(0,m.jsx)("div",{children:"Invalid date type"})}}));return(0,m.jsx)("div",{children:n})}}xt.propTypes={item:Ee().object.isRequired,field:Ee().shape({name:Ee().string,day_placeholder:Ee().string,month_placeholder:Ee().string,year_placeholder:Ee().string,params:Ee().object}).isRequired,onValueChange:Ee().func.isRequired};var _t=n(86816),bt=n(21418);function vt(e){const t=Array.isArray(e.item[e.field.name])?e.field.name&&e.item[e.field.name].map((t=>e.field.getName(t))):[];let n=[];return e.field.endpoint?n=function(e){let t=[];return void 0!==window[`mailpoet_${e}`]&&(t=window[`mailpoet_${e}`]),t}(String(e.field.endpoint)).map((t=>e.field.getName(t))):e.field.suggestedValues&&(n=e.field.suggestedValues),(0,m.jsx)(bt.T,{label:e.field.label,name:e.field.name,placeholder:e.field.placeholder,selectedValues:t,suggestedValues:n,onChange:e.onValueChange})}class yt extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"renderField",(e=>{let t,n=!1;e.field.description&&(n=(0,m.jsx)("p",{className:"description",children:e.field.description}));let a=e.field;switch(void 0!==e.field.field&&(a=Te().merge(a,e.field.field)),a.type){case"text":t=(0,m.jsx)(rt,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"textarea":t=(0,m.jsx)(st,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"select":t=(0,m.jsx)(ct,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"radio":t=(0,m.jsx)(ut,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"checkbox":t=(0,m.jsx)(mt,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"selection":t=(0,m.jsx)(Re.Y,{onValueChange:e.onValueChange,field:e.field,automationId:e.automationId,inline:e.inline,description:e.description,item:e.item},`selection-field-${a.name}`);break;case"date":t=(0,m.jsx)(xt,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"reactComponent":t=(0,m.jsx)(e.field.component,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,inline:e.inline,description:e.description});break;case"tokenField":t=(0,m.jsx)(vt,{onValueChange:e.onValueChange,field:e.field,item:e.item,automationId:e.automationId,description:e.description});break;case"empty":break;default:t="invalid"}const r="function"==typeof this.props.field.disabled?this.props.field.disabled(this.props.field):this.props.field.disabled,i={...this.props.field.onWrapperClick?{onClick:this.props.field.onWrapperClick}:{}};return(0,m.jsxs)("div",{className:ee()("mailpoet-form-field",{"mailpoet-form-field-disabled":r}),...i,children:[t,n]},`field-${e.index||0}`)}))}render(){let e=!1;e=void 0!==this.props.field.fields?this.props.field.fields.map(((e,t)=>this.renderField({index:t,field:e,item:this.props.item,onValueChange:this.props.onValueChange||!1}))):this.renderField(this.props);let t=!1;this.props.field.label&&(t=(0,m.jsx)(_t.X,{level:4,children:(0,m.jsx)("label",{htmlFor:`field_${this.props.field.name}`,children:this.props.field.label})}));let n=!1;return this.props.field.tip&&(n=(0,m.jsx)("p",{className:"mailpoet-form-description",children:this.props.field.tip})),(0,m.jsxs)("div",{className:`mailpoet-form-field-${this.props.field.name} form-field-row-${this.props.field.name}`,children:[t,n,e]})}}yt.propTypes={onValueChange:Ee().func,field:Ee().shape({name:Ee().string.isRequired,values:Ee().objectOf(Ee().string),tip:Ee().oneOfType([Ee().array,Ee().string]),label:Ee().string,fields:Ee().arrayOf(Ee().object),description:Ee().string,onWrapperClick:Ee().func,disabled:Ee().oneOfType([Ee().func,Ee().bool])}).isRequired,item:Ee().object.isRequired},yt.defaultProps={onValueChange:function(){}},(0,o.registerTranslations)();class wt extends s.Component{constructor(e){super(e),(0,et.Z)(this,"getValues",(()=>this.props.item||this.state.item)),(0,et.Z)(this,"getErrors",(()=>this.props.errors||this.state.errors)),(0,et.Z)(this,"loadItem",(e=>{this.setState({loading:!0}),this.props.endpoint&&d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:this.props.endpoint,action:"get",data:{id:e}}).done((e=>{this.setState({loading:!1,item:e.data}),"function"==typeof this.props.onItemLoad&&this.props.onItemLoad(e.data)})).fail((()=>{this.setState({loading:!1,item:{}},(function(){this.props.history.push("/lists")}))}))})),(0,et.Z)(this,"handleSubmit",(e=>{if(e.preventDefault(),void 0!==this.props.isValid&&!1===this.props.isValid())return;this.setState({loading:!0});const t={};this.props.fields.forEach((e=>{void 0!==e.fields?e.fields.forEach((e=>{t[e.name]=this.state.item[e.name]})):t[e.name]=this.state.item[e.name]})),void 0!==this.props.params.id&&(t.id=this.props.params.id),this.props.endpoint&&d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:this.props.endpoint,action:"save",data:t}).always((()=>{this.setState({loading:!1})})).done((()=>{void 0!==this.props.onSuccess?this.props.onSuccess():this.props.history.push("/"),void 0!==this.props.params.id?this.props.messages.onUpdate():this.props.messages.onCreate()})).fail((e=>{e.errors.length>0&&this.setState({errors:e.errors})}))})),(0,et.Z)(this,"handleValueChange",(e=>{const{name:t,value:n}=Object.prototype.hasOwnProperty.call(e,"target")?e.target:e;return this.props.onChange?this.props.onChange(e):(this.setState((e=>{const a=e.item;return a[t]=n,{item:a}})),!0)})),this.formRef=(0,s.createRef)(),this.state={loading:!1,errors:[],item:{}}}componentDidMount(){void 0!==this.props.params.id?this.loadItem(this.props.params.id):nt()((()=>{const e=Te()(".mailpoet_form").mailpoetSerializeObject(),t=Array.isArray(this.props.fields)&&this.props.fields.length>0&&this.props.fields.find((e=>"checkbox"===(null==e?void 0:e.type)&&(null==e?void 0:e.isChecked)));t&&t.name&&(e[t.name]="1"),this.setState({item:e})}))}componentDidUpdate(e){void 0===this.props.params.id&&e.location.pathname!==this.props.location.pathname&&(nt()((()=>{this.setState({loading:!1,item:{}})})),void 0===this.props.item&&this.formRef.current.reset())}render(){let e;void 0!==this.getErrors()&&(e=this.getErrors().map((e=>(0,m.jsx)("div",{className:"mailpoet_notice notice inline error is-dismissible",children:(0,m.jsx)("p",{children:e.message})},`error-${e.message}`))));const t=ee()("mailpoet_form",{mailpoet_form_loading:this.state.loading||this.props.loading});let n=!1,a=!1;void 0!==this.props.beforeFormContent&&(n=this.props.beforeFormContent(this.getValues())),void 0!==this.props.afterFormContent&&(a=this.props.afterFormContent(this.getValues()));const r=this.props.fields.map((e=>{let t=this.handleValueChange;return e.onBeforeChange&&(t=t=>(e.onBeforeChange(t),this.handleValueChange(t))),(0,m.jsx)(yt,{field:e,item:this.getValues(),onValueChange:t,automationId:e.automationId},`field-${e.name}`)}));let i=!1;return i=this.props.children?this.props.children:(0,m.jsx)(o.Button,{type:"submit",isDisabled:this.state.loading,children:(0,Me.__)("Save","mailpoet")}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"mailpoet-form-content-around",children:n}),(0,m.jsxs)("form",{id:this.props.id,ref:this.formRef,className:t,onSubmit:void 0!==this.props.onSubmit?this.props.onSubmit:this.handleSubmit,"data-automation-id":this.props.automationId,children:[e,(0,m.jsxs)("div",{className:"mailpoet-form-grid",children:[r,(0,m.jsx)("div",{className:"mailpoet-form-actions",children:i})]})]}),(0,m.jsx)("div",{className:"mailpoet-form-content-around",children:a})]})}}wt.propTypes={params:Ee().shape({id:Ee().string}),location:Ee().shape({pathname:Ee().string}),item:Ee().object,errors:Ee().arrayOf(Ee().object),endpoint:Ee().string,fields:Ee().arrayOf(Ee().object),messages:Ee().shape({onUpdate:Ee().func,onCreate:Ee().func}),loading:Ee().bool,children:Ee().array,id:Ee().string,automationId:Ee().string,beforeFormContent:Ee().func,afterFormContent:Ee().func,onItemLoad:Ee().func,isValid:Ee().func,onChange:Ee().func,onSubmit:Ee().func,onSuccess:Ee().func,history:Ee().shape({push:Ee().func.isRequired}).isRequired},wt.defaultProps={params:{},location:{},errors:void 0,fields:void 0,item:void 0,onItemLoad:void 0,isValid:void 0,onSuccess:void 0,onChange:void 0,loading:!1,beforeFormContent:void 0,afterFormContent:void 0,children:void 0,id:"",onSubmit:void 0,automationId:"",messages:{onUpdate:()=>{},onCreate:()=>{}},endpoint:void 0};const jt=(0,Ce.EN)(wt);var St=n(48179);const kt=[{name:"email",label:d.x.I18n.t("email"),type:"text",disabled:function(e){return Number(e.wp_user_id>0)||1===Number(e.is_woocommerce_user)}},{name:"first_name",label:d.x.I18n.t("firstname"),type:"text",disabled:function(e){return Number(e.wp_user_id>0)||1===Number(e.is_woocommerce_user)}},{name:"last_name",label:d.x.I18n.t("lastname"),type:"text",disabled:function(e){return Number(e.wp_user_id>0)||1===Number(e.is_woocommerce_user)}},{name:"status",label:d.x.I18n.t("status"),type:"select",automationId:"subscriber-status",values:{subscribed:d.x.I18n.t("subscribed"),unconfirmed:d.x.I18n.t("unconfirmed"),unsubscribed:d.x.I18n.t("unsubscribed"),inactive:d.x.I18n.t("inactive"),bounced:d.x.I18n.t("bounced")}},{name:"segments",label:d.x.I18n.t("lists"),type:"selection",placeholder:d.x.I18n.t("selectList"),tip:d.x.I18n.t("welcomeEmailTip"),api_version:window.mailpoet_api_version,endpoint:"segments",multiple:!0,selected:function(e){return!1===Array.isArray(e.subscriptions)?null:e.subscriptions.filter((e=>"subscribed"===e.status)).map((e=>e.segment_id))},filter:function(e){return!e.deleted_at&&"default"===e.type},getLabel:function(e){return e.name},getCount:function(e){return e.subscribers},getSearchLabel:function(e,t){let n="";return void 0!==t.subscriptions&&t.subscriptions.forEach((t=>{if(e.id===t.segment_id&&(n=e.name,"unsubscribed"===t.status)){const e=d.x.Date.format(t.updated_at);n+=" (%1$s)".replace("%1$s",d.x.I18n.t("unsubscribedOn").replace("%1$s",e))}})),n}},{name:"tags",label:d.x.I18n.t("tags"),type:"tokenField",placeholder:d.x.I18n.t("addNewTag"),suggestedValues:[],endpoint:"tags",getName:function(e){return Object.prototype.hasOwnProperty.call(e,"name")?e.name:e}}];(window.mailpoet_custom_fields||[]).forEach((e=>{const t={name:`cf_${e.id}`,label:e.name,type:e.type};switch(e.params&&(t.params=e.params,e.params.values&&(t.values=e.params.values)),e.type){case"date":t.year_placeholder=d.x.I18n.t("year"),t.month_placeholder=d.x.I18n.t("month"),t.day_placeholder=d.x.I18n.t("day");break;case"select":t.placeholder="-";break;default:t.placeholder=""}kt.push(t)}));const Nt={onUpdate:function(){d.x.Notice.success(d.x.I18n.t("subscriberUpdated"))},onCreate:function(){d.x.Notice.success(d.x.I18n.t("subscriberAdded")),d.x.trackEvent("Subscribers > Add new")}};function Ct(e){if(Number(e.wp_user_id)>0)return(0,m.jsx)("p",{className:"description",children:x()(d.x.I18n.t("WPUserEditNotice"),/\[link\](.*?)\[\/link\]/g,((t,n)=>(0,m.jsx)("a",{href:`user-edit.php?user_id=${e.wp_user_id}`,children:t},n)))})}function It(e){var t;return(0,m.jsxs)(m.Fragment,{children:[null==e||null===(t=e.unsubscribes)||void 0===t?void 0:t.map((e=>{const t=Xe()(e.createdAt.date).format("dddd MMMM Do YYYY [at] h:mm:ss a");let n;return n="admin"===e.source?d.x.I18n.t("unsubscribedAdmin").replace("%1$d",t).replace("%2$d",e.meta):"manage"===e.source?d.x.I18n.t("unsubscribedManage").replace("%1$d",t):"newsletter"===e.source?x()(d.x.I18n.t("unsubscribedNewsletter").replace("%1$d",t),/\[link\]/g,((t,n)=>(0,m.jsx)("a",{href:`admin.php?page=mailpoet-newsletter-editor&id=${e.newsletterId}`,children:e.newsletterSubject},n))):"mp_api"===e.source?d.x.I18n.t("unsubscribedMpApi").replace("%1$d",t):d.x.I18n.t("unsubscribedUnknown").replace("%1$d",t),(0,m.jsx)("p",{className:"description",children:n},n)})),(0,m.jsxs)("p",{className:"description",children:[(0,m.jsx)("strong",{children:d.x.I18n.t("tip")})," ",d.x.I18n.t("customFieldsTip")]})]})}function Tt(e){var t;let{match:n}=e;const a=(0,Ce.TH)(),r=(0,Ce.k6)(),i=(null===(t=a.state)||void 0===t?void 0:t.backUrl)||"/";return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(St.B,{}),(0,m.jsxs)(_t.X,{level:1,className:"mailpoet-title",children:[(0,m.jsx)("span",{children:d.x.I18n.t("subscriber")}),(0,m.jsx)(Ne.Link,{className:"mailpoet-button button button-secondary button-small",to:i,children:d.x.I18n.t("backToList")})]}),(0,m.jsx)(_,{}),(0,m.jsx)(jt,{automationId:"subscriber_edit_form",endpoint:"subscribers",fields:kt,params:n.params,messages:Nt,beforeFormContent:Ct,afterFormContent:It,onSuccess:()=>r.push(i)})]})}Tt.propTypes={match:Ee().shape({params:Ee().shape({id:Ee().string}).isRequired}).isRequired},Tt.displayName="SubscriberForm";var Dt=n(6427);function Et(e){var t;let{email:n}=e;const a=(null===(t=(0,Ce.TH)().state)||void 0===t?void 0:t.backUrl)||"/";return(0,m.jsxs)(_t.X,{level:1,className:"mailpoet-title",children:[(0,m.jsx)("span",{children:d.x.I18n.t("statsHeading").replace("%s",n)}),(0,m.jsx)(Ne.Link,{className:"mailpoet-button button button-secondary button-small",to:a,children:d.x.I18n.t("backToList")})]})}var Pt=n(79654);function Ot(e){let{totalSent:t,open:n,machineOpen:a,click:r,subscriber:i}=e,s=0,o=0,l=0,c=0;const u=t-(n+a),p=t>0;return p&&(s=Math.round(n/t*100),o=Math.round(a/t*100),l=Math.round(r/t*100),c=Math.round(u/t*100)),(0,m.jsx)("div",{className:"mailpoet-tab-content mailpoet-subscriber-stats-summary",children:(0,m.jsx)("div",{className:"mailpoet-listing",children:(0,m.jsx)("table",{className:"mailpoet-listing-table",children:(0,m.jsxs)("tbody",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:d.x.I18n.t("statsSentEmail")}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:t.toLocaleString()})}),(0,m.jsx)("td",{})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsx)(Pt.V,{children:d.x.I18n.t("statsOpened")})}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:n.toLocaleString()})}),(0,m.jsx)("td",{children:p&&(0,m.jsxs)(m.Fragment,{children:[s,"%"]})})]}),(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{children:[(0,m.jsx)(Pt.V,{children:d.x.I18n.t("statsMachineOpened")}),(0,m.jsx)(Fe.Tooltip,{tooltip:x()(d.x.I18n.t("statsMachineOpenedTooltip"),/\[link](.*?)\[\/link]/,(e=>(0,m.jsx)("span",{style:{pointerEvents:"all"},children:(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/368-what-are-machine-opens",target:"_blank","data-beacon-article":"6124b7fb21ef206e5592e188",rel:"noopener noreferrer",children:e},"kb-link")},"machine-opened-info")))})]}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:a.toLocaleString()})}),(0,m.jsx)("td",{children:p&&(0,m.jsxs)(m.Fragment,{children:[o,"%"]})})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsx)(Pt.V,{isInverted:!0,children:d.x.I18n.t("statsClicked")})}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:r.toLocaleString()})}),(0,m.jsx)("td",{children:p&&(0,m.jsxs)(m.Fragment,{children:[l,"%"]})})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:d.x.I18n.t("statsNotClicked")}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:u.toLocaleString()})}),(0,m.jsx)("td",{children:p&&(0,m.jsxs)(m.Fragment,{children:[c,"%"]})})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:d.x.I18n.t("statisticsColumn")}),(0,m.jsx)("td",{children:(0,m.jsx)("div",{className:"mailpoet-listing-stats",children:(0,m.jsx)(ge,{id:i.id,engagementScore:i.engagement_score})})}),(0,m.jsx)("td",{})]})]})})})})}function Rt(e){let{revenueValue:t,count:n,averageRevenueValue:a}=e;return(0,m.jsx)("div",{className:"mailpoet-tab-content mailpoet-subscriber-stats-summary",children:(0,m.jsx)("div",{className:"mailpoet-listing",children:(0,m.jsx)("table",{className:"mailpoet-listing-table",children:(0,m.jsxs)("tbody",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"Orders created"}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:n.toLocaleString()})})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"Total revenue"}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:t})})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"Average revenue"}),(0,m.jsx)("td",{children:(0,m.jsx)("b",{children:a})})]})]})})})})}var Mt=n(38088),At=n(26305);function Lt(e){let{limitReached:t,limitValue:n,subscribersCountTowardsLimit:a,premiumActive:r,hasValidApiKey:i,hasPremiumSupport:s}=e;return(0,m.jsxs)("table",{className:"mailpoet-listing-table","data-automation-id":"subscriber-stats-no-access",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:d.x.I18n.t("email")}),(0,m.jsx)("th",{children:d.x.I18n.t("columnAction")}),(0,m.jsx)("th",{children:d.x.I18n.t("columnCount")}),(0,m.jsx)("th",{children:d.x.I18n.t("columnActionOn")})]})}),(0,m.jsx)("tbody",{children:(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:4,children:(0,m.jsx)("div",{className:"mailpoet-subscriber-stats-no-access-content",children:(0,m.jsx)(At.K,{title:r&&t?d.x.I18n.t("upgradeRequired"):d.x.I18n.t("premiumFeature"),message:(()=>{let e=d.x.I18n.t("premiumRequired");return r?(e=s?d.x.I18n.t("planLimitReached"):d.x.I18n.t("freeLimitReached"),(0,m.jsx)("p",{children:x()(e,/(\[subscribersCount]|\[subscribersLimit])/g,(e=>"[subscribersCount]"===e?a:n))})):(0,m.jsx)("p",{children:x()(e,/\[link](.*?)\[\/link]/g,(e=>(0,m.jsx)("a",{href:d.x.premiumLink,children:e},e)))})})(),actionButton:r&&t?(0,m.jsx)(Ae.z,{href:i?d.x.MailPoetComUrlFactory.getUpgradeUrl():d.x.MailPoetComUrlFactory.getPurchasePlanUrl(a+1),children:d.x.I18n.t("premiumBannerCtaUpgrade")}):(0,m.jsx)(Ae.z,{href:d.x.MailPoetComUrlFactory.getPurchasePlanUrl(d.x.subscribersCount,d.x.currentWpUserEmail,null,{utm_medium:"stats",utm_campaign:"signup"}),children:d.x.I18n.t("premiumBannerCtaFree")})})})})})})]})}function Ft(e){let{params:t,location:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:4,children:d.x.I18n.t("openedEmailsHeading")}),!d.x.premiumActive||d.x.subscribersLimitReached?(0,m.jsx)(Lt,{limitReached:d.x.subscribersLimitReached,limitValue:d.x.subscribersLimit,subscribersCountTowardsLimit:d.x.subscribersCount,premiumActive:d.x.premiumActive,hasValidApiKey:d.x.hasValidApiKey,hasPremiumSupport:d.x.hasPremiumSupport}):Mt.Hooks.applyFilters("mailpoet_subscribers_opened_emails_stats",t,n)]})}function qt(){const e=(0,Ce.$B)(),t=(0,Ce.TH)(),[n,a]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),o=(0,l.S)(window).notices.error;return(0,s.useEffect)((()=>{d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"subscriberStats",action:"get",data:{subscriber_id:e.params.id}}).done((e=>{a(e.data),i(!1)})).fail((e=>{i(!1),e.errors.length>0&&o((0,m.jsx)(m.Fragment,{children:e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message)))}),{scroll:!0})}))}),[e.params.id,o]),r?(0,m.jsx)(Dt.g,{}):(0,m.jsxs)("div",{className:"mailpoet-subscriber-stats",children:[(0,m.jsx)(Et,{email:n.email}),(0,m.jsxs)("p",{children:[d.x.I18n.t("lastEngagement"),": ",n.last_engagement?d.x.Date.format(n.last_engagement):d.x.I18n.t("never")]}),(0,m.jsxs)("div",{className:"mailpoet-subscriber-stats-summary-grid",children:[(0,m.jsx)(Ot,{click:n.click,open:n.open,machineOpen:n.machine_open,totalSent:n.total_sent,subscriber:{id:Number(e.params.id),engagement_score:n.engagement_score}}),n.woocommerce&&(0,m.jsx)(Rt,{averageRevenueValue:n.woocommerce.formatted_average,count:n.woocommerce.count,revenueValue:n.woocommerce.formatted})]}),(0,m.jsx)(Ft,{params:e.params,location:t})]})}function Wt(){return(0,m.jsx)(l.k.Provider,{value:(0,l.S)(window),children:(0,m.jsxs)(Ne.HashRouter,{children:[(0,m.jsx)(u.w,{}),(0,m.jsxs)(Ce.rs,{children:[(0,m.jsx)(Ce.AW,{path:"/new",render:(0,o.withBoundary)(Tt)}),(0,m.jsx)(Ce.AW,{path:"/edit/:id",render:(0,o.withBoundary)(Tt)}),(0,m.jsx)(Ce.AW,{path:"/stats/:id/(.*)?",component:(0,o.withBoundary)(qt)}),(0,m.jsx)(Ce.AW,{path:"*",component:(0,o.withBoundary)(Ge)})]})]})})}qt.displayName="SubscriberStats";const Bt=document.getElementById("subscribers_container");Bt&&((0,o.registerTranslations)(),i.render((0,m.jsx)(Wt,{}),Bt));var Ut=n(59128),Vt=n(69161);class Zt extends s.PureComponent{render(){const e=this.props.event,t=e.soon;let n;if(this.props.premium)n=(0,m.jsx)("a",{href:"?page=mailpoet-premium",target:"_blank",children:(0,Me.__)("This is a Premium feature","mailpoet")});else if(e.actionButtonLink&&e.actionButtonTitle)n=(0,m.jsx)("a",{href:e.actionButtonLink,target:"_blank",rel:"noopener noreferrer",children:e.actionButtonTitle});else{const a=t?null:ot.ZP.partial(this.props.eventsConfigurator,e.slug);n=(0,m.jsx)(Ae.z,{disabled:t,onClick:a,role:"presentation",automationId:`create_${e.slug}`,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),a())},children:e.actionButtonTitle||(0,Me.__)("Set up","mailpoet")})}return(0,m.jsxs)("div",{"data-type":e.slug,className:"mailpoet-newsletter-type",children:[(0,m.jsx)("div",{className:"mailpoet-newsletter-type-image",children:e.badge&&(0,m.jsx)(Vt.C,{title:e.badge.text})}),(0,m.jsxs)("div",{className:"mailpoet-newsletter-type-content",children:[(0,m.jsxs)(_t.X,{level:4,children:[e.title," ",e.soon&&`(${(0,Me.__)("Soon","mailpoet")})`]}),(0,m.jsx)("p",{children:e.description}),(0,m.jsx)("div",{className:"mailpoet-flex-grow"}),(0,m.jsx)("div",{className:"mailpoet-newsletter-type-action",children:n})]})]})}}Zt.defaultProps={premium:!1},Zt.propTypes={premium:Ee().bool,eventsConfigurator:Ee().func.isRequired,event:Ee().shape({slug:Ee().string.isRequired,actionButtonLink:Ee().string,title:Ee().string.isRequired,soon:Ee().bool,badge:Ee().shape({style:Ee().string,text:Ee().string}),description:Ee().string.isRequired,actionButtonTitle:Ee().string}).isRequired};class $t extends s.Component{constructor(e){super(e),this.email=this.props.email,this.emailEvents=this.email.events,this.eventsConfigurator=this.eventsConfigurator.bind(this)}eventsConfigurator(e){d.x.trackEvent("Emails > Automatic Type selected",{"Email type":e}),this.props.history.push(`/new/${this.email.slug}/${e}/conditions`)}render(){return ot.ZP.map(this.emailEvents,((e,t)=>(0,m.jsx)(Zt,{premium:this.email.premium,event:e,eventsConfigurator:this.eventsConfigurator},t)))}}$t.propTypes={email:Ee().shape({title:Ee().string.isRequired,slug:Ee().string.isRequired,premium:Ee().bool}).isRequired,history:Ee().shape({push:Ee().func.isRequired}).isRequired};const Yt=(0,Ce.EN)($t),Ht={woocommerce:(0,m.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 120 71",style:{enableBackground:"new 0 0 120 71"},children:[(0,m.jsx)("path",{fill:"#9ca6cc",d:"M11.4,0.7h97.1c6.1,0,11.1,4.9,11.1,11v36.7c0,6.1-5,11-11.1,11H73.7L78.5,71l-21-11.6h-46 c-6.1,0-11.1-4.9-11.1-11V11.7C0.3,5.7,5.3,0.7,11.4,0.7z"}),(0,m.jsx)("path",{fill:"#fff",d:"M7.2,10.7c0.7-0.9,1.7-1.4,3.1-1.5c2.5-0.2,3.9,1,4.2,3.5c1.5,10,3.2,18.5,4.9,25.5l10.6-20 c1-1.8,2.2-2.8,3.6-2.9c2.1-0.1,3.4,1.2,4,4c1.2,6.4,2.8,11.8,4.6,16.4c1.3-12.2,3.4-21,6.4-26.4c0.7-1.3,1.8-2,3.2-2.1 c1.1-0.1,2.1,0.2,3.1,1c0.9,0.7,1.4,1.6,1.5,2.7c0,0.9-0.1,1.6-0.5,2.3c-1.9,3.5-3.4,9.3-4.7,17.3c-1.2,7.8-1.6,13.9-1.4,18.3 c0.1,1.2-0.1,2.3-0.6,3.2c-0.6,1.1-1.5,1.6-2.6,1.7c-1.3,0.1-2.6-0.5-3.8-1.8c-4.5-4.6-8.1-11.4-10.7-20.5c-3.2,6.1-5.5,10.8-7,13.8 c-2.9,5.4-5.3,8.2-7.3,8.4c-1.3,0.1-2.4-1-3.4-3.3C11.9,44.1,9.3,32,6.4,14C6.2,12.7,6.5,11.6,7.2,10.7z M111.3,18.3 c-1.7-3-4.3-4.9-7.8-5.6c-0.9-0.2-1.8-0.3-2.6-0.3c-4.7,0-8.4,2.4-11.4,7.2c-2.5,4.1-3.8,8.6-3.8,13.5c0,3.7,0.8,6.9,2.3,9.5 c1.7,3,4.3,4.9,7.8,5.6c0.9,0.2,1.8,0.3,2.6,0.3c4.7,0,8.5-2.4,11.4-7.2c2.5-4.1,3.8-8.6,3.8-13.6C113.7,24,112.9,20.9,111.3,18.3z M105.2,31.6c-0.7,3.2-1.9,5.5-3.7,7.1c-1.4,1.2-2.7,1.8-3.9,1.5c-1.2-0.2-2.1-1.2-2.9-3.1c-0.6-1.5-0.9-3-0.9-4.4 c0-1.2,0.1-2.4,0.3-3.5c0.4-2,1.3-3.9,2.6-5.7c1.6-2.4,3.3-3.3,5-3c1.2,0.2,2.1,1.2,2.9,3.1c0.6,1.5,0.9,3,0.9,4.4 C105.6,29.3,105.5,30.5,105.2,31.6z M81,18.3c-1.7-3-4.4-4.9-7.8-5.6c-0.9-0.2-1.8-0.3-2.6-0.3c-4.7,0-8.4,2.4-11.4,7.2 c-2.5,4.1-3.8,8.6-3.8,13.5c0,3.7,0.8,6.9,2.3,9.5c1.7,3,4.3,4.9,7.8,5.6c0.9,0.2,1.8,0.3,2.6,0.3c4.7,0,8.5-2.4,11.4-7.2 c2.5-4.1,3.8-8.6,3.8-13.6C83.3,24,82.5,20.9,81,18.3z M74.8,31.6c-0.7,3.2-1.9,5.5-3.7,7.1c-1.4,1.2-2.7,1.8-3.9,1.5 c-1.2-0.2-2.1-1.2-2.9-3.1c-0.6-1.5-0.9-3-0.9-4.4c0-1.2,0.1-2.4,0.3-3.5c0.4-2,1.3-3.9,2.6-5.7c1.6-2.4,3.3-3.3,5-3 c1.2,0.2,2.1,1.2,2.9,3.1c0.6,1.5,0.9,3,0.9,4.4C75.2,29.3,75.1,30.5,74.8,31.6z"})]})};var zt=n(80797);function Kt(e){let{errors:t}=e;return t.length<1?null:(0,m.jsx)(p.q,{type:"error",closable:!1,children:t.map((e=>(0,m.jsx)("p",{children:e.message},e.message)))})}var Gt=n(89889);function Qt(e){let{filter:t,history:n,hideClosingButton:a=!1,hideScreenOptions:r=!0}=e;const[i,o]=(0,s.useState)(!1),l=e=>{void 0!==e&&(n.push(`/new/${e}`),d.x.trackEvent("Emails > Type selected",{"Email type":e}))},c=async()=>{d.x.trackEvent("Emails > Type selected",{"Email type":"wc_transactional"});let e=window.mailpoet_woocommerce_transactional_email_id;if(!e)try{e=(await d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"settings",action:"set",data:{"woocommerce.use_mailpoet_editor":1}})).data.woocommerce.transactional_email_id,d.x.trackEvent("Emails > WooCommerce email customizer enabled")}catch(e){return(0,Gt.q)(e)&&e.errors.length>0?(0,m.jsx)(Kt,{errors:e.errors}):null}return window.location.href=`?page=mailpoet-newsletter-editor&id=${e}`,null},u=e=>{const t=!0===window.mailpoet_is_new_user?"mailpoet_badge mailpoet_badge_video":"mailpoet_badge mailpoet_badge_video mailpoet_badge_video_grey";return(0,m.jsxs)("div",{"data-type":e.slug,className:"mailpoet-newsletter-type",children:[(0,m.jsx)("div",{className:"mailpoet-newsletter-type-image"}),(0,m.jsxs)("div",{className:"mailpoet-newsletter-type-content",children:[(0,m.jsxs)(_t.X,{level:4,children:[e.title," ",e.beta?`(${(0,Me.__)("Beta","mailpoet")})`:""]}),(0,m.jsx)("p",{children:e.description}),e.videoGuide&&(0,m.jsxs)("a",{className:t,href:e.videoGuide,"data-beacon-article":e.videoGuideBeacon,target:"_blank",rel:"noopener noreferrer",children:[(0,m.jsx)("span",{className:"dashicons dashicons-format-video"}),(0,Me.__)("See video guide","mailpoet")]}),(0,m.jsx)("div",{className:"mailpoet-flex-grow"}),(0,m.jsx)("div",{className:"mailpoet-newsletter-type-action",children:e.action})]})]},e.slug)},p=()=>{if(!d.x.isWoocommerceActive)return[];const e=[{slug:"wc_transactional",title:(0,Me.__)("WooCommerce Emails Customizer","mailpoet"),description:(0,Me.__)("Customize the template used for your WooCommerce emails using MailPoet's editor. Example of WooCommerce email: Order processing notification, Order failed notification, ...","mailpoet"),action:(0,m.jsx)(Ae.z,{automationId:"customize_woocommerce",onClick:c,tabIndex:0,onKeyDown:async e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),await c())},children:(0,Me.__)("Customize","mailpoet")})}];return d.x.hideAutomations&&e.push((()=>{const e=()=>{d.x.trackEvent("Emails > Type selected",{"Email type":"woocommerce_automatewoo"},{send_immediately:!0},(()=>{window.location.href="edit.php?post_type=aw_workflow#presets"}))};return{slug:"woocommerce_automatewoo",title:(0,Me.__)("Automations","mailpoet"),description:(0,Me.__)("Convert and retain customers with automated marketing that does the hard work for you. AutomateWoo has the tools you need to grow your store and make more money.","mailpoet"),action:(0,m.jsx)(Ae.z,{automationId:"woocommerce_automatewoo",onClick:e,tabIndex:0,onKeyDown:t=>{["keydown","keypress"].includes(t.type)&&["Enter"," "].includes(t.key)&&(t.preventDefault(),e())},children:(0,Me.__)("Set up","mailpoet")})}})()),e},h=ot.ZP.partial((e=>{o(!0),d.x.trackEvent("Emails > Type selected",{"Email type":e}),d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"newsletters",action:"create",data:{type:e,subject:(0,Me.__)("Subject","mailpoet")}}).done((e=>{n.push(`/template/${e.data.id}`)})).fail((e=>(o(!1),e.errors.length>0?(0,m.jsx)(Kt,{errors:e.errors}):null)))}),"standard"),f=ot.ZP.partial(l,"notification"),g=ot.ZP.partial(l,"welcome"),x=ot.ZP.partial(l,"re-engagement"),_=[{slug:"standard",title:(0,Me.__)("Newsletter","mailpoet"),description:(0,Me.__)("Send a newsletter with images, buttons, dividers, and social bookmarks. Or, just send a basic text email.","mailpoet"),action:(0,m.jsx)(Ae.z,{automationId:"create_standard",onClick:h,tabIndex:0,withSpinner:i,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),h())},children:(0,Me.__)("Create","mailpoet")})},{slug:"welcome",title:(0,Me.__)("Welcome Email","mailpoet"),description:(0,Me.__)("Automatically send an email (or series of emails) to new subscribers or WordPress users. Send a day, a week, or a month after they sign up.","mailpoet"),videoGuide:"https://kb.mailpoet.com/article/254-video-guide-to-welcome-emails",videoGuideBeacon:"5b05ebf20428635ba8b2aa53",action:(0,m.jsx)(Ae.z,{onClick:g,automationId:"create_welcome",withSpinner:i,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),g())},tabIndex:0,children:(0,Me.__)("Set up","mailpoet")})},{slug:"notification",title:(0,Me.__)("Latest Post Notifications","mailpoet"),description:(0,Me.__)("Let MailPoet email your subscribers with your latest content. You can send daily, weekly, monthly, or even immediately after publication.","mailpoet"),videoGuide:"https://kb.mailpoet.com/article/210-video-guide-to-post-notifications",videoGuideBeacon:"59ba6fb3042863033a1cd5a5",action:(0,m.jsx)(Ae.z,{automationId:"create_notification",onClick:f,withSpinner:i,tabIndex:0,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),f())},children:(0,Me.__)("Set up","mailpoet")})},{slug:"re_engagement",title:(0,Me.__)("Re-engagement Emails","mailpoet"),description:(0,Me.__)("Automatically email and win back subscribers who have recently lost interest and stopped engaging with your emails.","mailpoet"),action:(0,m.jsx)(Ae.z,{automationId:"create_notification",onClick:x,withSpinner:i,tabIndex:0,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),x())},children:(0,Me.__)("Set up","mailpoet")})}];let b=Mt.Hooks.applyFilters("mailpoet_newsletters_types",[..._],this);t&&(b=b.filter(t));const v=d.x.Ajax.constructGetUrl({api_version:d.x.apiVersion,endpoint:"newsletterTemplates",action:"getAll"});return(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)(St.B,{}),(0,m.jsx)("link",{rel:"prefetch",href:window.mailpoet_editor_javascript_url,as:"script"}),(0,m.jsxs)("div",{className:"mailpoet-newsletter-types",children:[!a&&(0,m.jsx)("div",{className:"mailpoet-newsletter-types-close",children:(0,m.jsx)("button",{type:"button",onClick:()=>n.push("/"),className:"mailpoet-modal-close",children:zt.X})}),b.map((e=>u(e)),this),(()=>{if(!window.mailpoet_woocommerce_automatic_emails)return[];let e=window.mailpoet_woocommerce_automatic_emails;return t&&(e=ot.ZP.filter(e,t)),ot.ZP.map(e,(e=>{const a=e;return(0,m.jsxs)(s.Fragment,{children:[!t&&(0,m.jsxs)("div",{className:"mailpoet-newsletter-types-separator",children:[(0,m.jsx)("div",{className:"mailpoet-newsletter-types-separator-line"}),(0,m.jsx)("div",{className:"mailpoet-newsletter-types-separator-logo",children:Ht[a.slug]||null}),(0,m.jsx)("div",{className:"mailpoet-newsletter-types-separator-line"})]}),"woocommerce"===a.slug&&!d.x.hideAutomations&&(0,m.jsx)(Yt,{email:a,history:n}),"woocommerce"===a.slug&&p().map((e=>u(e)),this)]},a.slug)}))})()]}),(0,m.jsx)("link",{rel:"prefetch",href:v,as:"fetch"})]})}Qt.defaultProps={filter:null,hideScreenOptions:!0,hideClosingButton:!1};const Xt=(0,Ce.EN)(Qt);var Jt=n(59106);function en(e){let{newsletter:t,isSent:n,currentTime:a}=e,r=n;if(void 0===r&&(r=t.statistics&&t.queue&&"scheduled"!==t.queue.status),!r)return null;const i={link:`/stats/${t.id}`,onClick:Mt.Hooks.applyFilters("mailpoet_newsletters_listing_stats_tracking",Ut.gP)},s=Number(t.total_sent||t.queue.count_processed);let l,c,d,u,p,h=0,f=0,g=null;s>0&&(h=100*t.statistics.clicked/s,f=100*t.statistics.opened/s,g=t.statistics.revenue),void 0!==a?(l=6,c=t.queue.scheduled_at||t.queue.created_at,d=Xe()(a).diff(Xe()(c),"hours"),u=d<l,p=!0):(u=!1,p=!1);const x=s>=20&&t.statistics.opened>=5&&!u,_=(e,n)=>((e,t,n,a)=>a<=0||!t.link?e:t.externalLink?(0,m.jsx)("a",{href:t.link,onClick:t.onClick||null,children:e},`stats-${n}`):(0,m.jsx)(Ne.Link,{to:t.link,onClick:t.onClick||null,children:e},`stats-${n}`))(e,i,`${n}-${t.id}`,s),b=(0,m.jsx)(Jt.M,{opened:f,clicked:h,revenues:g&&g.value>0?g.formatted:null,hideBadges:!x,newsletterId:t.id,wrapContentInLink:_}),v=(0,m.jsxs)(m.Fragment,{children:[b,u&&_((0,m.jsx)(o.Tag,{className:"mailpoet-listing-stats-too-early",dimension:"large",variant:"excellent",isInverted:!0,children:(0,Me.__)("Nice job! Check back in %1$d hour(s) for more stats.","mailpoet").replace("%1$d",l-d)}),"check-back")]});let y;return p&&f<5&&d>=24&&s>=10&&(y=(0,m.jsx)("div",{children:(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/191-how-to-improve-my-open-and-click-rates","data-beacon-article":"58f671152c7d3a057f8858e8",target:"_blank",rel:"noopener noreferrer",className:"mailpoet_stat_link_small",children:(0,Me.__)("What can I do to improve this?","mailpoet")})})),(0,m.jsxs)(m.Fragment,{children:[v,y]})}const tn=Ee().shape({clicked:Ee().number,opened:Ee().number,unsubscribed:Ee().number,revenue:Ee().shape({count:Ee().number,currency:Ee().string,formatted:Ee().string,value:Ee().number})}),nn=Ee().shape({status:Ee().string,count_processed:Ee().string.isRequired,count_total:Ee().string.isRequired,created_at:Ee().string,scheduled_at:Ee().string});en.propTypes={newsletter:Ee().shape({id:Ee().number.isRequired,queue:Ee().oneOfType([nn,Ee().bool]),total_sent:Ee().number,statistics:Ee().oneOfType([tn,Ee().bool])}).isRequired,isSent:Ee().bool,currentTime:Ee().string},en.defaultProps={isSent:void 0,currentTime:void 0},en.displayName="NewsletterStatistics";const an=(0,o.withBoundary)(en),rn=d.x.trackingConfig.emailTrackingEnabled,sn=window.mailpoet_woocommerce_automatic_emails||{},on={onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was moved to the trash.","mailpoet"):(0,Me.__)("%1$d emails were moved to the trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was permanently deleted.","mailpoet"):(0,Me.__)("%1$d emails were permanently deleted.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email has been restored from the Trash.","mailpoet"):(0,Me.__)("%1$d emails have been restored from the Trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},ln=[{name:"subject",label:(0,Me.__)("Subject","mailpoet"),sortable:!0},{name:"settings",label:(0,Me.__)("Settings","mailpoet")},{name:"statistics",label:(0,Me.__)("Clicked, Opened","mailpoet"),display:rn},{name:"status",label:(0,Me.__)("Status","mailpoet"),width:145},{name:"updated_at",label:(0,Me.__)("Last modified on","mailpoet"),sortable:!0}],cn=[{name:"trash",label:(0,Me.__)("Move to trash","mailpoet"),onSuccess:on.onTrash}];let dn=[{name:"view",link:function(e){return(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})}},{name:"edit",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Edit","mailpoet"),onClick:Ut.Q2},{name:"duplicate",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Duplicate","mailpoet"),onClick:(e,t)=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success((0,Me.__)('Email "%1$s" has been duplicated.',"mailpoet").replace("%1$s",e.data.subject)),t()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))},{name:"trash",className:"mailpoet-hide-on-mobile"}];dn=(0,Ut.y8)(dn);class un extends s.Component{constructor(e){super(e),(0,et.Z)(this,"updateStatus",((e,t)=>{t.persist(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:Number(t.target.getAttribute("data-id")),status:e?"active":"draft"}}).done((e=>{if("active"===e.data.status){const e=t.target.getAttribute("data-group"),n=sn[e];d.x.Notice.success((0,Me.__)("Your %1s Automatic Email is now activated!","mailpoet").replace("%1s",n.title))}this.forceUpdate()})).fail((n=>{d.x.Notice.showApiErrorNotice(n),t.target.checked=!e}))})),(0,et.Z)(this,"renderStatus",(e=>{const t=parseInt(e.total_sent,10)>-1?(0,Me.__)("Sent to %1$d customers","mailpoet").replace("%1$d",e.total_sent.toLocaleString()):null;return(0,m.jsxs)("div",{children:[(0,m.jsx)(o.Toggle,{className:"mailpoet-listing-status-toggle",onCheck:this.updateStatus,"data-id":e.id,"data-group":e.options.group,dimension:"small",defaultChecked:"active"===e.status}),(0,m.jsxs)("p",{className:"mailpoet-listing-notification-status",children:[t&&(0,m.jsx)(Ne.Link,{to:`/sending-status/${e.id}`,children:t}),!t&&(0,m.jsx)("span",{className:"mailpoet-listing-status-unknown mailpoet-font-extra-small",children:(0,Me.__)("Not sent yet","mailpoet")})]})]})})),(0,et.Z)(this,"renderSettings",(e=>{const t=sn[e.options.group].events[e.options.event];let n;try{n=JSON.parse(e.options.meta||null)}catch(t){n=e.options.meta||null}const a=n&&n.option?ot.ZP.pluck(n.option,"name"):[];if(n&&ot.ZP.isEmpty(a))return(0,m.jsx)("span",{className:"mailpoet-listing-error",children:(0,Me.__)("You need to configure email options before this email can be sent.","mailpoet")});let r,i;if(r=a.length>1&&"listingScheduleDisplayTextPlural"in t?x()(t.listingScheduleDisplayTextPlural,"%s",((e,t)=>(0,m.jsx)(o.StringTags,{strings:a},t))):x()(t.listingScheduleDisplayText,"%s",((e,t)=>(0,m.jsx)(o.StringTags,{strings:a},t))),r&&"immediate"!==e.options.afterTimeType)switch(e.options.afterTimeType){case"minutes":i=(0,Me.__)("%1$d minute(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;case"hours":i=(0,Me.__)("%1$d hour(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;case"days":i=(0,Me.__)("%1$d day(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;case"weeks":i=(0,Me.__)("%1$d week(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;default:i=(0,Me.__)("Invalid sending delay.","mailpoet")}return(0,m.jsxs)("span",{children:[r,i&&(0,m.jsxs)("div",{className:"mailpoet-listing-schedule",children:[(0,m.jsx)("div",{className:"mailpoet-listing-schedule-icon",children:(0,m.jsx)(o.ScheduledIcon,{})}),i]})]})})),(0,et.Z)(this,"renderItem",((e,t)=>{const n=ee()("manage-column","column-primary","has-row-actions");return(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:n,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:`?page=mailpoet-newsletter-editor&id=${e.id}`,onClick:t=>{t.preventDefault(),(0,Ut.Q2)(e)},children:e.subject}),t]}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Settings","mailpoet"),children:this.renderSettings(e)}),!0===rn?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":(0,Me.__)("Clicked, Opened","mailpoet"),children:(0,m.jsx)(an,{newsletter:e,isSent:e.total_sent>0&&!!e.statistics})}):null,(0,m.jsx)("td",{className:"column","data-colname":(0,Me.__)("Status","mailpoet"),children:this.renderStatus(e)}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Last modified on","mailpoet"),children:[d.x.Date.short(e.updated_at),(0,m.jsx)("br",{}),d.x.Date.time(e.updated_at)]})]})})),(0,et.Z)(this,"isItemInactive",(e=>"draft"===e.status)),this.state={eventCounts:{},newslettersCount:void 0},this.afterGetItems=this.afterGetItems.bind(this)}afterGetItems(e){(0,Ut._X)(e),this.countEmailTypes(e)}countEmailTypes(e){const t={woocommerce_product_purchased:0,woocommerce_product_purchased_in_category:0,woocommerce_first_purchase:0};if(Array.isArray(e.items)){const n=e.items.map((e=>e.options.event)).reduce(((e,t)=>(e[t]?e[t]+=1:e[t]=1,e)),t);this.setState({eventCounts:n})}}renderWarning(){const{eventCounts:e}=this.state;return e.woocommerce_product_purchased+e.woocommerce_product_purchased_in_category+e.woocommerce_first_purchase?"1"===window.mailpoet_woocommerce_optin_on_checkout?null:(0,m.jsxs)("div",{className:"notice error",children:[(0,m.jsx)("p",{children:(0,Me.__)("WooCommerce emails won’t be sent to new customers because the opt-in on checkout is disabled. Enable it so they can immediately get your emails after their first purchase.","mailpoet")}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{href:"?page=mailpoet-settings#woocommerce",children:(0,Me.__)("Edit WooCommerce settings","mailpoet")})})]}):null}render(){const{match:e,location:t}=this.props;return(0,m.jsxs)(m.Fragment,{children:[this.renderWarning(),0===this.state.newslettersCount&&(0,m.jsx)(Xt,{filter:e=>"woocommerce"===e.slug,hideScreenOptions:!1,hideClosingButton:!0}),0!==this.state.newslettersCount&&(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:t,params:e.params,endpoint:"newsletters",type:"automatic",base_url:"woocommerce",onRenderItem:this.renderItem,isItemInactive:this.isItemInactive,columns:ln,bulk_actions:cn,item_actions:dn,messages:on,auto_refresh:!0,sort_by:"updated_at",sort_order:"desc",afterGetItems:e=>{if(!e.loading){const t=e.groups.reduce(((e,t)=>e+t.count),0);this.setState({newslettersCount:t})}this.afterGetItems(e)}})]})}}un.propTypes={match:Ee().shape({params:Ee().shape({tab:Ee().string}).isRequired}).isRequired,location:Ee().object.isRequired},un.displayName="ListingsComponent";const pn=(0,Ce.EN)((0,o.withBoundary)(un));var mn=n(37932),hn=n(52181);const fn=(0,Ce.EN)((e=>(0,m.jsx)(hn.b,{...e})));var gn=n(70940),xn=n(12592);class _n extends s.Component{constructor(e){super(e),this.onPreview=this.onPreview.bind(this),this.onDelete=this.onDelete.bind(this),this.onSelect=this.onSelect.bind(this)}onDelete(){const{id:e,name:t,beforeDelete:n,afterDelete:a}=this.props;(0,xn._)({message:(0,Me.__)('You are about to delete the template named "%1$s".',"mailpoet").replace("%1$s",t),onConfirm:()=>{n(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"delete",data:{id:e}}).done((()=>{a(!0,e)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0}),a(!1)}))}})}onPreview(){d.x.Modal.popup({title:this.props.name,template:'<img src="{{ thumbnail }}" />',data:this.props})}onSelect(){const{newsletterId:e,name:t,beforeSelect:n,afterSelect:a}=this.props;n(),d.x.trackEvent("Emails > Template selected",{"Email name":t}),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"save",data:{id:e,template_id:this.props.id}}).done((e=>{a(!0,e.data.id)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0}),a(!1)}))}render(){const{index:e,name:t,thumbnail:n,readonly:a}=this.props;let r="";return"string"==typeof n&&n.length>0&&(r=(0,m.jsxs)("a",{className:"mailpoet-template-preview",href:"#",onClick:e=>{e.preventDefault(),this.onPreview(e)},children:[(0,m.jsx)("div",{className:"mailpoet-template-thumbnail",children:n?(0,m.jsx)("img",{src:n,alt:(0,Me.__)("Template preview","mailpoet"),loading:"lazy"}):""}),(0,m.jsx)("div",{className:"mailpoet-template-preview-overlay",children:(0,m.jsx)(Ae.z,{children:(0,Me.__)("Preview","mailpoet")})})]})),(0,m.jsx)(gn.G,{label:t,onSelect:this.onSelect,onDelete:!1===a?this.onDelete:void 0,automationId:`select_template_${e}`,className:"mailpoet-template-two-lines",children:r})}}_n.contextType=l.k,_n.propTypes={index:Ee().number.isRequired,id:Ee().number.isRequired,newsletterId:Ee().string.isRequired,name:Ee().string.isRequired,thumbnail:Ee().string,readonly:Ee().bool.isRequired,beforeDelete:Ee().func.isRequired,afterDelete:Ee().func.isRequired,beforeSelect:Ee().func.isRequired,afterSelect:Ee().func.isRequired},_n.defaultProps={thumbnail:null},_n.displayName="TemplateBox";class bn extends s.Component{constructor(e){super(e),this.fileRef=(0,s.createRef)(),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){if(e.preventDefault(),ot.ZP.size(this.fileRef.current.files)<=0)return!1;const t=ot.ZP.first(this.fileRef.current.files),n=new FileReader;return n.onload=e=>{try{this.saveTemplate(JSON.parse(e.target.result)),d.x.trackEvent("Emails > Template imported")}catch(e){this.context.notices.error((0,m.jsx)("p",{children:(0,Me.__)("This template file appears to be damaged. Please try another one.","mailpoet")}))}},n.readAsText(t),!0}saveTemplate(e){const t=e,{beforeImport:n,afterImport:a}=this.props;ot.ZP.isUndefined(t.body)||(t.body=JSON.stringify(t.body));try{t.categories=JSON.parse(t.categories)}catch(e){t.categories=[]}-1===t.categories.indexOf("saved")&&t.categories.push("saved"),-1===t.categories.indexOf("standard")&&-1===t.categories.indexOf("welcome")&&-1===t.categories.indexOf("notification")&&t.categories.push("standard"),t.categories=JSON.stringify(t.categories),n(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"save",data:t}).done((e=>{a(!0,e.data)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0}),a(!1)}))}render(){return(0,m.jsxs)("div",{className:"mailpoet-template-import",children:[(0,m.jsxs)("h4",{children:[(0,Me.__)("Import a template","mailpoet"),(0,m.jsx)(Fe.Tooltip,{tooltip:(0,Me.__)("You can only upload .json templates that were originally created with MailPoet.","mailpoet"),place:"right",className:"tooltip-help-import-template"})]}),(0,m.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,m.jsx)("input",{type:"file",placeholder:(0,Me.__)("Select a .json file to upload","mailpoet"),ref:this.fileRef}),(0,m.jsx)("p",{className:"submit",children:(0,m.jsx)("input",{className:"button button-primary",type:"submit",value:(0,Me.__)("Upload","mailpoet")})})]})]})}}bn.contextType=l.k,bn.propTypes={beforeImport:Ee().func.isRequired,afterImport:Ee().func.isRequired};const vn=[];window.mailpoet_newsletters_templates_recently_sent_count&&vn.push({name:"recent",label:(0,Me.__)("Recently sent","mailpoet")}),vn.push({name:"standard",label:(0,Me.__)("Newsletters","mailpoet")},{name:"welcome",label:(0,Me.__)("Welcome Emails","mailpoet")},{name:"notification",label:(0,Me.__)("Post Notifications","mailpoet")},{name:"re_engagement",label:(0,Me.__)("Re-engagement Emails","mailpoet")},{name:"blank",label:(0,Me.__)("Simple text","mailpoet")}),window.mailpoet_woocommerce_active&&vn.push({name:"woocommerce",label:(0,Me.__)("WooCommerce Emails","mailpoet")}),vn.push({name:"saved",label:(0,Me.__)("Your saved templates","mailpoet")});class yn extends s.Component{constructor(e){super(e),this.state={loading:!0,templates:{},emailType:null,emailOptions:{},selectedTab:""},this.templates={},this.addTemplate=this.addTemplate.bind(this),this.afterTemplateDelete=this.afterTemplateDelete.bind(this),this.afterTemplateSelect=this.afterTemplateSelect.bind(this),this.afterTemplateImport=this.afterTemplateImport.bind(this)}componentDidMount(){d.x.Ajax.get({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"getAll"}).done((e=>{0===e.data.length&&(e.data=[{name:(0,Me.__)("MailPoet's Guide","mailpoet"),categories:'["welcome", "notification", "standard", "woocommerce"]',readonly:!0}]),e.data.forEach(this.addTemplate),this.sortTemplates()})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0})})).always((()=>{this.selectInitialTab()}))}addTemplate(e){const t=vn.map((e=>e.name));let n;-1===t.indexOf("woocommerce")&&t.push("woocommerce");try{n=JSON.parse(e.categories).filter((e=>-1!==t.indexOf(e)))}catch(e){n=[]}0===n.length&&n.push("saved"),n.forEach((t=>{void 0===this.templates[t]&&(this.templates[t]=[]),this.templates[t].unshift(e)}))}sortTemplates(){const e=["welcome","notification","standard"];Object.keys(this.templates).forEach((t=>{this.templates[t].sort(((n,a)=>{if(e.includes(t)){if(n.categories.includes('"blank"')&&!a.categories.includes('"blank"'))return-1;if(!n.categories.includes('"blank"')&&a.categories.includes('"blank"'))return 1}return n.id<a.id?1:-1}))}))}selectInitialTab(){let e,t,n="standard";d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:this.props.match.params.id}}).done((a=>{e=a.data.type,t=a.data.options,"automatic"===e&&(e=a.data.options.group||e),window.mailpoet_newsletters_templates_recently_sent_count?n="recent":ot.ZP.findWhere(vn,{name:a.data.type})?n=a.data.type:"automatic"===a.data.type&&ot.ZP.findWhere(vn,{name:a.data.options.group})&&(n=a.data.options.group)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0})})).always((()=>{this.setState({templates:this.templates,emailType:e,emailOptions:t,selectedTab:n,loading:!1})}))}afterTemplateDelete(e,t){e&&Object.keys(this.templates).forEach((e=>{this.templates[e]=this.templates[e].filter((e=>e.id!==t))})),this.setState({templates:this.templates,loading:!1})}afterTemplateSelect(e,t){e?window.location=(e=>{const t=new URLSearchParams(window.location.search).get("context"),n=`admin.php?page=mailpoet-newsletter-editor&id=${e}`;return t?`${n}&context=${t}`:n})(t):this.setState({loading:!1})}afterTemplateImport(e,t){e&&this.addTemplate(t),this.setState({templates:this.templates,selectedTab:e?"saved":"import",loading:!1})}render(){if(this.state.loading)return(0,m.jsx)(Dt.g,{});const e=vn.concat({name:"import",label:(0,Me._x)("Import","Importing template tab title","mailpoet")}).map((e=>Object.assign(e,{automationId:`templates-${e.name.replace(/\s+/g,"-").toLowerCase()}`})));let t=null;if("import"===this.state.selectedTab)t=(0,m.jsx)(bn,{beforeImport:()=>this.setState({loading:!0}),afterImport:this.afterTemplateImport});else{let e=this.state.templates[this.state.selectedTab]||[];e=0===e.length?this.state.loading?null:(0,m.jsx)("p",{children:(0,Me.__)("This category does not contain any template yet!","mailpoet")}):e.map(((e,t)=>(0,m.jsx)(_n,{index:t,newsletterId:this.props.match.params.id,beforeDelete:()=>this.setState({loading:!0}),afterDelete:this.afterTemplateDelete,beforeSelect:()=>this.setState({loading:!0}),afterSelect:this.afterTemplateSelect,id:e.id,name:e.name,thumbnail:e.thumbnail,readonly:e.readonly},e.id))),t=e}let n,a=null;if("automation"===this.state.emailType){var r;const e=null===(r=this.state.emailOptions)||void 0===r?void 0:r.automationId,t=e?`admin.php?page=mailpoet-automation-editor&id=${e}`:"admin.php?page=mailpoet-automation";n=()=>{window.location=t},a=(0,m.jsx)("input",{type:"button",className:"button link-button",onClick:n,value:"Cancel"})}return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(fn,{emailType:this.state.emailType,automationId:"email_template_selection_heading",buttons:a,onLogoClick:n}),(0,m.jsxs)("div",{className:"mailpoet-templates",children:[(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(mn.R,{categories:e,active:this.state.selectedTab,onSelect:e=>this.setState({selectedTab:e})})}),(0,m.jsx)(o.ErrorBoundary,{children:t})]})]})}}yn.contextType=l.k,yn.propTypes={match:Ee().shape({params:Ee().shape({id:Ee().string}).isRequired}).isRequired},yn.display="NewsletterTemplates";var wn=n(61888),jn=n.n(wn),Sn=n(88245),kn=n.n(Sn),Nn=n(81684),Cn=n(81677),In=n.n(Cn),Tn=n(60016),Dn=n(29514),En=n.n(Dn),Pn=n(52764);function On(e){let{dimension:t,isFullWidth:n,iconStart:a,iconEnd:r,...i}=e;return(0,m.jsxs)("div",{className:ee()("mailpoet-datepicker mailpoet-form-input",{[`mailpoet-form-input-${t}`]:t,"mailpoet-disabled":i.disabled,"mailpoet-full-width":n}),children:[a,(0,m.jsx)(In(),{useWeekdaysShort:!0,calendarStartDay:i.calendarStartDay??d.x.wpWeekStartsOn,...i}),r]})}On.displayName="Datepicker";const Rn=(0,Pn.lV)(On),Mn={abbreviated:[(0,Me.__)("Jan","mailpoet"),(0,Me.__)("Feb","mailpoet"),(0,Me.__)("Mar","mailpoet"),(0,Me.__)("Apr","mailpoet"),(0,Me.__)("May","mailpoet"),(0,Me.__)("Jun","mailpoet"),(0,Me.__)("Jul","mailpoet"),(0,Me.__)("Aug","mailpoet"),(0,Me.__)("Sep","mailpoet"),(0,Me.__)("Oct","mailpoet"),(0,Me.__)("Nov","mailpoet"),(0,Me.__)("Dec","mailpoet")],wide:[(0,Me.__)("January","mailpoet"),(0,Me.__)("February","mailpoet"),(0,Me.__)("March","mailpoet"),(0,Me.__)("April","mailpoet"),(0,Me.__)("May","mailpoet"),(0,Me.__)("June","mailpoet"),(0,Me.__)("July","mailpoet"),(0,Me.__)("August","mailpoet"),(0,Me.__)("September","mailpoet"),(0,Me.__)("October","mailpoet"),(0,Me.__)("November","mailpoet"),(0,Me.__)("December","mailpoet")]},An={narrow:[(0,Me._x)("S","Sunday - one letter abbreviation","mailpoet"),(0,Me._x)("M","Monday - one letter abbreviation","mailpoet"),(0,Me._x)("T","Tuesday - one letter abbreviation","mailpoet"),(0,Me._x)("W","Wednesday - one letter abbreviation","mailpoet"),(0,Me._x)("T","Thursday - one letter abbreviation","mailpoet"),(0,Me._x)("F","Friday - one letter abbreviation","mailpoet"),(0,Me._x)("S","Saturday - one letter abbreviation","mailpoet")],abbreviated:[(0,Me.__)("Sun","mailpoet"),(0,Me.__)("Mon","mailpoet"),(0,Me.__)("Tue","mailpoet"),(0,Me.__)("Wed","mailpoet"),(0,Me.__)("Thu","mailpoet"),(0,Me.__)("Fri","mailpoet"),(0,Me.__)("Sat","mailpoet")],wide:[(0,Me.__)("Sunday","mailpoet"),(0,Me.__)("Monday","mailpoet"),(0,Me.__)("Tuesday","mailpoet"),(0,Me.__)("Wednesday","mailpoet"),(0,Me.__)("Thursday","mailpoet"),(0,Me.__)("Friday","mailpoet"),(0,Me.__)("Saturday","mailpoet")]};Tn.Z.localize.month=En()({values:Mn,defaultWidth:"wide"}),Tn.Z.localize.day=En()({values:An,defaultWidth:"wide"}),Tn.Z.options.weekStartsOn=void 0!==d.x.wpWeekStartsOn?d.x.wpWeekStartsOn:1,(0,Cn.registerLocale)("mailpoet",Tn.Z);class Ln extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"onChange",((e,t)=>{const n=t,a=this.getStorageDate(e);n.target.name=this.getFieldName(),n.target.value=a,this.props.onChange(n)})),(0,et.Z)(this,"getFieldName",(()=>this.props.name||"date")),(0,et.Z)(this,"getDisplayDateFormat",(e=>d.x.Date.convertFormat(e).replace(/D/g,"d").replace(/Y/g,"y").replace(/\[/g,"").replace(/\]/g,""))),(0,et.Z)(this,"getDate",(e=>{const t={parseFormat:this.props.storageFormat};return d.x.Date.toDate(e,t)})),(0,et.Z)(this,"getStorageDate",(e=>{const t={format:this.props.storageFormat};return d.x.Date.format(e,t)}))}render(){return(0,m.jsx)(Rn,{name:this.getFieldName(),selected:this.getDate(this.props.value),dateFormat:this.getDisplayDateFormat(this.props.displayFormat),disabled:this.props.disabled,onChange:this.onChange,minDate:this.getDate(window.mailpoet_current_date),maxDate:this.props.maxDate,locale:"mailpoet",...this.props.validation})}}Ln.propTypes={displayFormat:Ee().string.isRequired,onChange:Ee().func.isRequired,name:Ee().string,storageFormat:Ee().string.isRequired,value:Ee().string.isRequired,disabled:Ee().bool.isRequired,validation:Ee().shape({"data-parsley-required":Ee().bool,"data-parsley-required-message":Ee().string,"data-parsley-type":Ee().string,"data-parsley-errors-container":Ee().string,maxLength:Ee().number}).isRequired,maxDate:Ee().instanceOf(Date)},Ln.defaultProps={name:"date",maxDate:null},Ln.displayName="DateText";class Fn extends s.Component{render(){const e=Object.keys(this.props.timeOfDayItems).map((e=>(0,m.jsx)("option",{value:e,children:this.props.timeOfDayItems[e]},`option-${this.props.timeOfDayItems[e]}`)));return(0,m.jsx)(lt.Select,{name:this.props.name||"time",value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,isMinWidth:!0,...this.props.validation,children:e})}}Fn.propTypes={timeOfDayItems:Ee().objectOf(Ee().string).isRequired,name:Ee().string,value:Ee().string.isRequired,disabled:Ee().bool,onChange:Ee().func.isRequired,validation:Ee().object},Fn.defaultProps={name:"time",disabled:!1,validation:{}},Fn.displayName="TimeSelect";class qn extends s.Component{constructor(e){super(e),(0,et.Z)(this,"DATE_TIME_SEPARATOR"," "),(0,et.Z)(this,"getDateTime",(()=>[this.state.date,this.state.time].join(this.DATE_TIME_SEPARATOR))),(0,et.Z)(this,"buildStateFromProps",(e=>{const t=e.value||this.props.defaultDateTime,[n,a]=t.split(this.DATE_TIME_SEPARATOR);return{date:n,time:a}})),(0,et.Z)(this,"handleChange",(e=>{const t={};t[e.target.name]=e.target.value,this.setState(t,this.propagateChange)})),(0,et.Z)(this,"propagateChange",(()=>{this.props.onChange&&this.props.onChange({target:{name:this.props.name||"",value:this.getDateTime()}})})),this.state=this.buildStateFromProps(e)}componentDidUpdate(e){this.props.value===e.value&&this.props.defaultDateTime===e.defaultDateTime||nt()((()=>{this.setState(this.buildStateFromProps(this.props))}))}render(){return(0,m.jsx)(Nn.Grid.Column,{className:"mailpoet-datetime-container",children:(0,m.jsxs)(o.ErrorBoundary,{children:[(0,m.jsx)(Ln,{name:"date",value:this.state.date,onChange:this.handleChange,displayFormat:this.props.dateDisplayFormat,storageFormat:this.props.dateStorageFormat,disabled:this.props.disabled,validation:this.props.dateValidation,maxDate:this.props.maxDate}),(0,m.jsx)(Fn,{name:"time",value:this.state.time,onChange:this.handleChange,disabled:this.props.disabled,validation:this.props.timeValidation,timeOfDayItems:this.props.timeOfDayItems})]})})}}qn.propTypes={value:Ee().string,defaultDateTime:Ee().string.isRequired,dateDisplayFormat:Ee().string.isRequired,dateStorageFormat:Ee().string.isRequired,onChange:Ee().func,name:Ee().string,disabled:Ee().bool,dateValidation:Ee().object.isRequired,timeValidation:Ee().any,timeOfDayItems:Ee().objectOf(Ee().string).isRequired,maxDate:Ee().instanceOf(Date)},qn.defaultProps={onChange:void 0,name:"",disabled:!1,timeValidation:void 0,value:void 0,maxDate:null};var Wn=n(43649),Bn=n(57108),Un=n(14833),Vn=n(31632);class Zn extends s.Component{constructor(e){super(e),(0,et.Z)(this,"isEmailAddressAuthorized",(e=>(window.mailpoet_authorized_emails||[]).includes(e))),(0,et.Z)(this,"showInvalidFromAddressError",(()=>{(0,Bn.Ib)(this.domElementSelector,this.parsleyFieldName," "),this.setState({showAuthEmailsError:!0})})),(0,et.Z)(this,"showSenderFieldError",((e,t)=>{window.mailpoet_mss_active&&((0,Bn.dy)(this.domElementSelector,this.parsleyFieldName),(0,Bn.K0)(this.domElementSelector)?e||this.showInvalidFromAddressError(t):(0,Bn.OP)(this.domElementSelector))})),(0,et.Z)(this,"showSenderDomainError",(e=>{e&&this.setState({showSenderDomainWarning:!0})})),this.state={emailAddress:e.item.sender_address,showSenderDomainWarning:!1,showAuthEmailsError:!1},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),window.mailpoet_sender_address_field_blur=this.onBlur;const t=e.field.id||`field_${e.field.name}`;this.domElementSelector=`#${t}`,this.parsleyFieldName="invalidFromAddress"}componentDidMount(){this.validateEmailAddress()}onChange(e){const t=e.target.value.toLowerCase();this.setState({emailAddress:t}),this.props.onValueChange({...e,target:{...e.target,name:e.target.name,value:t}}),this.setState({showAuthEmailsError:!1,showSenderDomainWarning:!1}),(0,Bn.dy)(this.domElementSelector,this.parsleyFieldName)}onBlur(){this.validateEmailAddress()}validateEmailAddress(){if(!window.mailpoet_mss_active)return;const e=this.state.emailAddress,t=(0,Un.DA)(e);if(window.mailpoet_verified_sender_domains.includes(t))return;const n=this.isEmailAddressAuthorized(e);this.showSenderFieldError(n,e),d.x.freeMailDomains.indexOf(t)>-1||(0,Vn.g)(e).then((t=>{this.showSenderDomainError(t,e)})).catch((()=>{}))}render(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(rt,{item:{...this.props.item,sender_address:this.state.emailAddress},field:this.props.field,onValueChange:this.onChange,onBlurEvent:this.onBlur}),(0,m.jsx)("div",{className:"regular-text regular-text-full-width",children:(0,m.jsx)(Wn.L,{emailAddress:this.state.emailAddress,mssActive:window.mailpoet_mss_active,isEmailAuthorized:!this.state.showAuthEmailsError,showSenderDomainWarning:this.state.showSenderDomainWarning,onSuccessfulEmailOrDomainAuthorization:e=>{"email"===e.type&&(this.setState({showAuthEmailsError:!1}),d.x.trackEvent("MSS in plugin authorize email",{"authorized email source":"newsletter",wasSuccessful:"yes"})),"domain"===e.type&&(this.setState({showSenderDomainWarning:!1}),d.x.trackEvent("MSS in plugin verify sender domain",{"verify sender domain source":"newsletter",wasSuccessful:"yes"})),(0,Bn.dy)(this.domElementSelector,this.parsleyFieldName)}})})]})}}Zn.propTypes={field:Ee().object.isRequired,item:Ee().shape({sender_address:Ee().string.isRequired}).isRequired,onValueChange:Ee().func},Zn.defaultProps={onValueChange:function(){}},Zn.displayName="SenderField";const $n=ot.ZP.once((()=>d.x.trackEvent("User has typed a GA campaign name"))),Yn=x()((0,Me.__)("For example, “Spring email”. [link]Read the guide.[/link]","mailpoet"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,m.jsxs)("span",{children:[(0,m.jsx)("br",{}),(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/187-track-your-newsletters-subscribers-in-google-analytics","data-beacon-article":"58b597d12c7d3a576d359144",target:"_blank",rel:"noopener noreferrer",className:"mailpoet-link",children:e})]},t))),Hn={name:"ga_campaign",label:(0,Me.__)("Google Analytics Campaign","mailpoet"),tip:Yn,type:"text",onBeforeChange:$n};var zn=n(83435),Kn=n(76010);const Gn=window.mailpoet_current_time||"00:00",Qn=`${window.mailpoet_tomorrow_date} 08:00:00`,Xn=window.mailpoet_schedule_time_of_day,Jn=window.mailpoet_date_display_format,ea=window.mailpoet_date_storage_format;class ta extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"getCurrentValue",(()=>{var e;return{isScheduled:"0",scheduledAt:Qn,...(null===(e=this.props.item)||void 0===e?void 0:e[this.props.field.name])??{}}})),(0,et.Z)(this,"getDateValidation",(()=>({"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please enter the scheduled date.","mailpoet"),"data-parsley-errors-container":"#mailpoet_scheduling"}))),(0,et.Z)(this,"isScheduled",(()=>"1"===this.getCurrentValue().isScheduled)),(0,et.Z)(this,"handleCheckboxChange",((e,t)=>{const n={...t};n.target.value=t.target.checked?"1":"0",this.handleValueChange(n)})),(0,et.Z)(this,"handleValueChange",(e=>{const t=this.getCurrentValue(),n={};n[e.target.name]=e.target.value,this.props.onValueChange({target:{name:this.props.field.name,value:{...t,...n}}})}))}render(){let e;const t=new Date;return t.setFullYear(t.getFullYear()+5),this.isScheduled()&&(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{className:"mailpoet-form-schedule-time",children:[(0,Me.__)("Your website’s time is","mailpoet")," ",Gn]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{id:"mailpoet_scheduling",children:(0,m.jsx)(qn,{name:"scheduledAt",value:this.getCurrentValue().scheduledAt,onChange:this.handleValueChange,disabled:this.props.field.disabled,dateValidation:this.getDateValidation(),defaultDateTime:Qn,timeOfDayItems:Xn,dateDisplayFormat:Jn,dateStorageFormat:ea,maxDate:t})})]})),(0,m.jsxs)("div",{children:[(0,m.jsx)(zn.Z,{checked:this.isScheduled(),disabled:this.props.field.disabled,name:"isScheduled",onCheck:this.handleCheckboxChange,automationId:"email-schedule-checkbox"}),e]})}}let na=[{name:"email-header",label:null,tip:null,fields:[{name:"subject",customLabel:(0,Me.__)("Subject","mailpoet"),className:"mailpoet-form-field-subject",placeholder:(0,Me.__)("Type newsletter subject","mailpoet"),tooltip:(0,Me.__)("Be creative! It's the first thing that your subscribers see. Tempt them to open your email.","mailpoet"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please specify a subject","mailpoet"),maxLength:250}},{name:"preheader",customLabel:(0,Me.__)("Preview text","mailpoet"),className:"mailpoet-form-field-preheader",placeholder:(0,Me.__)("Type preview text (usually displayed underneath the subject line in the inbox)","mailpoet"),tooltip:`${(0,Me.__)("This optional text will appear in your subscribers' inboxes, beside the subject line. Write something enticing!","mailpoet")} ${(0,Me.__)("Max length is 250 characters, however, we recommend 80 characters on a single line.","mailpoet")}`,type:"textarea",validation:{maxLength:250}}]},{name:"segments",label:(0,Me.__)("Lists","mailpoet"),tip:(0,Me.__)("Subscribers in multiple lists will only receive one email.","mailpoet"),type:"selection",placeholder:(0,Me.__)("Select a list","mailpoet"),id:"mailpoet_segments",api_version:window.mailpoet_api_version,endpoint:"segments",multiple:!0,filter:function(e){return!e.deleted_at},getLabel:function(e){return e.name},getCount:function(e){return parseInt(e.subscribers,10).toLocaleString()},transformChangedValue:function(e){const t=this.getItems()||[];return e.map((e=>t.find((t=>t.id===e))))},validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please select a list","mailpoet"),"data-parsley-segments-with-subscribers":(0,Me.__)("Please select a list with subscribers.","mailpoet")}},{name:"options",label:(0,Me.__)("Schedule it","mailpoet"),type:"reactComponent",component:(0,o.withBoundary)(ta)},{name:"sender",label:(0,Me.__)("Sender","mailpoet"),tip:(0,Me.__)("Your name and email","mailpoet"),fields:[{name:"sender_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"reactComponent",component:(0,o.withBoundary)(Zn),placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},Hn,{name:"reply-to",label:(0,Me.__)("Reply-to","mailpoet"),tip:(0,Me.__)("When your subscribers reply to your emails, their emails will go to this address.","mailpoet"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet")},{name:"reply_to_address",type:"text",placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-type":"email"}}]}];na=Mt.Hooks.applyFilters("mailpoet_newsletters_3rd_step_fields",na);const aa={getFields:()=>na,getSendButtonOptions:function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=Xe()(window.mailpoet_current_date_time),r="object"==typeof n.options&&"1"===(null===(e=n.options)||void 0===e?void 0:e.isScheduled)&&d.x.Date.isInFuture(null===(t=n.options)||void 0===t?void 0:t.scheduledAt,a),i={value:r?(0,Me.__)("Schedule","mailpoet"):(0,Me.__)("Send","mailpoet")};return n.status!==Kn.sj.Sent&&n.status!==Kn.sj.Sending||(i.disabled="disabled"),i}},ra=window.mailpoet_time_format||"H:i",ia={immediate:(0,Me.__)("immediately","mailpoet"),minutes:(0,Me.__)("minute(s) later","mailpoet"),hours:(0,Me.__)("hour(s) later","mailpoet"),days:(0,Me.__)("day(s) later","mailpoet"),weeks:(0,Me.__)("week(s) later","mailpoet")},sa={daily:(0,Me.__)("Once a day at...","mailpoet"),weekly:(0,Me.__)("Weekly on...","mailpoet"),monthly:(0,Me.__)("Monthly on the...","mailpoet"),nthWeekDay:(0,Me.__)("Monthly every...","mailpoet"),immediately:(0,Me.__)("Immediately","mailpoet")},oa=ot.ZP.object(ot.ZP.map(ot.ZP.times(96,(e=>900*e)),(e=>{const t=new Date(null);return t.setSeconds(e),[e,d.x.Date.format(t,{format:ra,offset:0})]}))),la={0:(0,Me.__)("Sunday","mailpoet"),1:(0,Me.__)("Monday","mailpoet"),2:(0,Me.__)("Tuesday","mailpoet"),3:(0,Me.__)("Wednesday","mailpoet"),4:(0,Me.__)("Thursday","mailpoet"),5:(0,Me.__)("Friday","mailpoet"),6:(0,Me.__)("Saturday","mailpoet")},ca=ot.ZP.object(ot.ZP.map(ot.ZP.times(28,(e=>e)),(e=>{const t={0:(0,Me.__)("1st","mailpoet"),1:(0,Me.__)("2nd","mailpoet"),2:(0,Me.__)("3rd","mailpoet")};let n;return n=void 0!==t[e]?t[e]:(0,Me.__)("%1$dth","mailpoet").replace("%1$d",e+1),[e+1,n]}))),da={1:(0,Me.__)("1st","mailpoet"),2:(0,Me.__)("2nd","mailpoet"),3:(0,Me.__)("3rd","mailpoet"),L:(0,Me._x)("last","e.g. monthly every last Monday","mailpoet")},ua={name:"intervalType",values:sa},pa={name:"timeOfDay",values:oa},ma={name:"weekDay",values:la},ha={name:"monthDay",values:ca},fa={name:"nthWeekDay",values:da};class ga extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"getCurrentValue",(()=>this.props.item[this.props.field.name]||{})),(0,et.Z)(this,"handleValueChanges",(e=>{const t=this.getCurrentValue();return this.props.onValueChange({target:{name:this.props.field.name,value:ot.ZP.extend({},t,e)}})})),(0,et.Z)(this,"handleIntervalChange",(e=>{const t=e.target.value,n={};n.intervalType=t,"monthly"===t&&(n.monthDay="1"),this.handleValueChanges(n)})),(0,et.Z)(this,"handleTimeOfDayChange",(e=>this.handleValueChanges({timeOfDay:e.target.value}))),(0,et.Z)(this,"handleWeekDayChange",(e=>this.handleValueChanges({weekDay:e.target.value}))),(0,et.Z)(this,"handleMonthDayChange",(e=>this.handleValueChanges({monthDay:e.target.value}))),(0,et.Z)(this,"handleNthWeekDayChange",(e=>this.handleValueChanges({nthWeekDay:e.target.value})))}render(){const e=this.getCurrentValue();let t,n,a,r;return"immediately"!==e.intervalType&&(t=(0,m.jsx)(ct,{field:pa,item:this.getCurrentValue(),onValueChange:this.handleTimeOfDayChange})),"weekly"!==e.intervalType&&"nthWeekDay"!==e.intervalType||(n=(0,m.jsx)(ct,{field:ma,item:this.getCurrentValue(),onValueChange:this.handleWeekDayChange})),"monthly"===e.intervalType&&(a=(0,m.jsx)(ct,{field:ha,item:this.getCurrentValue(),onValueChange:this.handleMonthDayChange})),"nthWeekDay"===e.intervalType&&(r=(0,m.jsx)(ct,{field:fa,item:this.getCurrentValue(),onValueChange:this.handleNthWeekDayChange})),(0,m.jsxs)("div",{children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsx)(ct,{field:ua,item:this.getCurrentValue(),onValueChange:this.handleIntervalChange,automationId:"newsletter_interval_type"}),"immediately"===e.intervalType&&(0,m.jsx)("div",{children:(0,m.jsx)("p",{children:(0,Me.__)("after publishing a post","mailpoet")})})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("div",{className:"mailpoet-grid-column mailpoet-flex",children:[r,a,n,t]}),"immediately"!==e.intervalType&&(0,m.jsx)("div",{className:"mailpoet-gap"})]})}}ga.propTypes={item:Ee().object.isRequired,field:Ee().shape({name:Ee().string}).isRequired,onValueChange:Ee().func.isRequired};let xa=[{name:"email-header",label:null,tip:null,fields:[{name:"subject",customLabel:(0,Me.__)("Subject","mailpoet"),className:"mailpoet-form-field-subject",placeholder:(0,Me.__)("Type newsletter subject","mailpoet"),tooltip:(0,Me.__)("Be creative! It's the first thing that your subscribers see. Tempt them to open your email.","mailpoet"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please specify a subject","mailpoet"),maxLength:250}},{name:"preheader",customLabel:(0,Me.__)("Preview text","mailpoet"),className:"mailpoet-form-field-preheader",placeholder:(0,Me.__)("Type preview text (usually displayed underneath the subject line in the inbox)","mailpoet"),tooltip:`${(0,Me.__)("This optional text will appear in your subscribers' inboxes, beside the subject line. Write something enticing!","mailpoet")} ${(0,Me.__)("Max length is 250 characters, however, we recommend 80 characters on a single line.","mailpoet")}`,type:"textarea",validation:{maxLength:250}}]},{name:"options",label:(0,Me.__)("Select a frequency","mailpoet"),type:"reactComponent",component:ga},{name:"segments",label:(0,Me.__)("Lists","mailpoet"),tip:(0,Me.__)("Subscribers in multiple lists will only receive one email.","mailpoet"),type:"selection",placeholder:(0,Me.__)("Select a list","mailpoet"),id:"mailpoet_segments",api_version:window.mailpoet_api_version,endpoint:"segments",multiple:!0,filter:function(e){return!e.deleted_at},getLabel:function(e){return e.name},getCount:function(e){return parseInt(e.subscribers,10).toLocaleString()},transformChangedValue:function(e){const t=this.getItems();return ot.ZP.map(e,(e=>ot.ZP.find(t,(t=>t.id===e))))},validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please select a list","mailpoet")}},{name:"sender",label:(0,Me.__)("Sender","mailpoet"),tip:(0,Me.__)("Your name and email","mailpoet"),fields:[{name:"sender_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"reactComponent",component:(0,o.withBoundary)(Zn),placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},Hn,{name:"reply-to",label:(0,Me.__)("Reply-to","mailpoet"),tip:(0,Me.__)("When your subscribers reply to your emails, their emails will go to this address.","mailpoet"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet")},{name:"reply_to_address",type:"text",placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-type":"email"}}]}];xa=Mt.Hooks.applyFilters("mailpoet_newsletters_3rd_step_fields",xa);const _a={getFields:function(){return xa},getSendButtonOptions:function(){return{value:(0,Me.__)("Activate","mailpoet")}}},ba=window.mailpoet_roles||{},va=ot.ZP.filter(window.mailpoet_segments||[],(e=>"default"===e.type)),ya={name:"event",values:{segment:(0,Me.__)("When someone subscribes to the list...","mailpoet"),user:(0,Me.__)("When a new WordPress user is added to your site...","mailpoet")}},wa={name:"segment",placeholder:(0,Me.__)("Select a list","mailpoet"),forceSelect2:!0,values:va,getCount:e=>parseInt(e.subscribers,10).toLocaleString(),getLabel:e=>e.name,getValue:e=>e.id},ja={name:"role",values:ba},Sa={name:"afterTimeNumber",size:3,validation:{"data-parsley-required":!0,"data-parsley-errors-container":".mailpoet-form-errors","data-parsley-scheduled-at":(0,Me.__)("An email can only be scheduled up to 5 years in the future. Please choose a shorter period.","mailpoet")}},ka={name:"afterTimeType",values:ia};class Na extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"getCurrentValue",(()=>this.props.item[this.props.field.name]||{})),(0,et.Z)(this,"handleValueChange",((e,t)=>{const n=this.getCurrentValue(),a={};let r=t;return"afterTimeNumber"===e&&(r=parseInt(t,10),r=Number.isNaN(r)?"":r),a[e]=r,this.props.onValueChange({target:{name:this.props.field.name,value:ot.ZP.extend({},n,a)}})})),(0,et.Z)(this,"handleEventChange",(e=>this.handleValueChange("event",e.target.value))),(0,et.Z)(this,"handleSegmentChange",(e=>this.handleValueChange("segment",e.target.value))),(0,et.Z)(this,"handleRoleChange",(e=>this.handleValueChange("role",e.target.value))),(0,et.Z)(this,"handleAfterTimeNumberChange",(e=>this.handleValueChange("afterTimeNumber",e.target.value))),(0,et.Z)(this,"handleAfterTimeTypeChange",(e=>this.handleValueChange("afterTimeType",e.target.value)))}render(){const e=this.getCurrentValue();let t,n;return t="user"===e.event?(0,m.jsx)(ct,{field:ja,item:this.getCurrentValue(),onValueChange:this.handleRoleChange}):(0,m.jsx)(Re.Y,{field:wa,item:this.getCurrentValue(),onValueChange:this.handleSegmentChange}),"immediate"!==e.afterTimeType&&(n=(0,m.jsx)(rt,{field:Sa,item:this.getCurrentValue(),onValueChange:this.handleAfterTimeNumberChange})),(0,m.jsxs)("div",{children:[(0,m.jsx)(ct,{field:ya,item:this.getCurrentValue(),onValueChange:this.handleEventChange}),(0,m.jsx)("div",{className:"mailpoet-gap"}),t,(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("div",{className:"mailpoet-grid-column mailpoet-flex",children:[n,(0,m.jsx)(ct,{field:ka,item:this.getCurrentValue(),onValueChange:this.handleAfterTimeTypeChange})]}),(0,m.jsx)("div",{className:"mailpoet-form-errors"}),(0,m.jsx)("div",{className:"mailpoet-gap"})]})}}Na.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired,item:Ee().object.isRequired,field:Ee().shape({name:Ee().string}).isRequired,onValueChange:Ee().func.isRequired},Na.displayName="WelcomeScheduling";const Ca=(0,Ce.EN)(Na);let Ia=[{name:"email-header",label:null,tip:null,fields:[{name:"subject",customLabel:(0,Me.__)("Subject","mailpoet"),className:"mailpoet-form-field-subject",placeholder:(0,Me.__)("Type newsletter subject","mailpoet"),tooltip:(0,Me.__)("Be creative! It's the first thing that your subscribers see. Tempt them to open your email.","mailpoet"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please specify a subject","mailpoet"),maxLength:250}},{name:"preheader",customLabel:(0,Me.__)("Preview text","mailpoet"),className:"mailpoet-form-field-preheader",placeholder:(0,Me.__)("Type preview text (usually displayed underneath the subject line in the inbox)","mailpoet"),tooltip:`${(0,Me.__)("This optional text will appear in your subscribers' inboxes, beside the subject line. Write something enticing!","mailpoet")} ${(0,Me.__)("Max length is 250 characters, however, we recommend 80 characters on a single line.","mailpoet")}`,type:"textarea",validation:{maxLength:250}}]},{name:"options",label:(0,Me.__)("When to send this welcome email?","mailpoet"),type:"reactComponent",component:(0,o.withBoundary)(Ca)},Hn,{name:"sender",label:(0,Me.__)("Sender","mailpoet"),tip:(0,Me.__)("Your name and email","mailpoet"),fields:[{name:"sender_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"reactComponent",component:(0,o.withBoundary)(Zn),placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},{name:"empty",type:"empty"},{name:"reply-to",label:(0,Me.__)("Reply-to","mailpoet"),tip:(0,Me.__)("When your subscribers reply to your emails, their emails will go to this address.","mailpoet"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet")},{name:"reply_to_address",type:"text",placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-type":"email"}}]}];Ia=Mt.Hooks.applyFilters("mailpoet_newsletters_3rd_step_fields",Ia);const Ta={getFields:function(){return Ia},getSendButtonOptions:function(){return{value:(0,Me.__)("Activate","mailpoet")}}};class Da extends s.Component{constructor(e){super(e);const{item:t,event:n}=this.props;this.handleChange=this.handleChange.bind(this);const a=t.afterTimeType||n.defaultAfterTimeType||"immediate",r="minutes"===a?30:1,i=t.afterTimeNumber||r;this.state={afterTimeType:a,afterTimeNumber:i},t.afterTimeNumber===i&&t.afterTimeType===a||this.propagateChange(this.state)}handleChange(e,t){let{value:n}=e.target;"afterTimeNumber"===t&&(n=parseInt(e.target.value,10),n=Number.isNaN(n)?null:n);const a={[t]:n},{afterTimeType:r}=this.state;"afterTimeType"===t&&r!==n&&("minutes"===r&&(a.afterTimeNumber=1),"minutes"===n&&(a.afterTimeNumber=30)),this.setState(a,this.propagateChange(a))}displayAfterTimeTypeOptions(){const{event:e}=this.props;let t=ia;e.timeDelayValues&&(t=Object.entries(e.timeDelayValues).reduce(((e,t)=>{let[n,a]=t;return e[n]=a.text,e}),{}));const{afterTimeType:n}=this.state,a={field:{id:"scheduling_time_interval",name:"scheduling_time_interval",forceSelect2:!0,values:ot.ZP.map(t,((e,t)=>({name:e,id:t}))),extendSelect2Options:{minimumResultsForSearch:1/0},selected:()=>n},onValueChange:ot.ZP.partial(this.handleChange,ot.ZP,"afterTimeType")};return(0,m.jsx)(Re.Y,{field:a.field,onValueChange:a.onValueChange})}displayAfterTimeNumberField(){const{afterTimeNumberSize:e,event:t}=this.props,{afterTimeType:n,afterTimeNumber:a}=this.state;if("immediate"===n)return null;if(t.timeDelayValues&&t.timeDelayValues[n]&&!t.timeDelayValues[n].displayAfterTimeNumberField)return null;const r={field:{id:"scheduling_time_duration",name:"scheduling_time_duration",className:"mailpoet-form-input-small",defaultValue:a?a.toString():"",size:e,validation:{"data-parsley-required":!0,"data-parsley-errors-container":".mailpoet-form-errors","data-parsley-scheduled-at":(0,Me.__)("An email can only be scheduled up to 5 years in the future. Please choose a shorter period.","mailpoet")}},item:{},onValueChange:ot.ZP.partial(this.handleChange,ot.ZP,"afterTimeNumber")};return(0,m.jsx)(rt,{field:r.field,item:r.item,onValueChange:r.onValueChange})}propagateChange(e){const{onValueChange:t}=this.props;t&&t(e)}render(){const{event:e}=this.props;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("h4",{children:[" ",(0,Me.__)("When to send this email?","mailpoet")," "]}),(0,m.jsxs)(Nn.Grid.CenteredRow,{className:"mailpoet-re-engagement-scheduling",children:[this.displayAfterTimeNumberField(),this.displayAfterTimeTypeOptions(),e.afterDelayText&&(0,m.jsx)("p",{children:e.afterDelayText})]}),(0,m.jsx)("div",{className:"mailpoet-form-errors"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),e.schedulingReadMoreLink&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("a",{href:e.schedulingReadMoreLink.link,target:"_blank",rel:"noopener noreferrer",className:"event-scheduling-read-more-link",children:e.schedulingReadMoreLink.text}),(0,m.jsx)("div",{className:"mailpoet-gap"})]})]})}}function Ea(e){const t=e&&e.values?e.values:[];return t?t.map((e=>({id:e.id,name:e.name}))):t}function Pa(e){let{eventOptions:t,eventSlug:n,selected:a,onValueChange:r}=e;function i(e){r&&r({eventOptionValue:e.target.value})}return(0,m.jsx)("div",{children:(0,m.jsx)("div",{className:"event-option-selection",children:function(){if(!t)return null;const e={field:{name:`event_options_${n}`,forceSelect2:!0,endpoint:t.endpoint,resetSelect2OnUpdate:!0,values:Ea(t),multiple:t.multiple||!1,placeholder:t.placeholder||!1,transformChangedValue:(e,t)=>ot.ZP.map(t,(e=>({id:e.id,name:e.text}))),selected:()=>a,getLabel:ot.ZP.property("name"),getValue:ot.ZP.property("id"),validation:{"data-parsley-required":!0}},onValueChange:i,item:{action:""}};return"product_categories"===t.endpoint&&(e.field.name="category_ids",e.item={action:"purchasedCategory"}),"products"===t.endpoint&&(e.field.name="product_ids",e.item={action:"purchasedProduct"}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Re.Y,{field:e.field,onValueChange:e.onValueChange,item:e.item}),(0,m.jsx)("div",{className:"mailpoet-gap"})]})}()})})}Da.propTypes={item:Ee().shape({afterTimeType:Ee().string.isRequired,afterTimeNumber:Ee().number}).isRequired,afterTimeNumberSize:Ee().number,onValueChange:Ee().func,event:Ee().shape({defaultAfterTimeType:Ee().string,afterDelayText:Ee().string,timeDelayValues:Ee().objectOf(Ee().shape({text:Ee().string,displayAfterTimeNumberField:Ee().bool})),schedulingReadMoreLink:Ee().shape({link:Ee().string.isRequired,text:Ee().string.isRequired})}).isRequired},Da.defaultProps={afterTimeNumberSize:3,onValueChange:null},Da.displayName="EventScheduling",Pa.displayName="EventOptions";const Oa=(0,o.withBoundary)(Pa);class Ra extends s.Component{constructor(e){super(e);const{field:t}=e;this.handleChange=this.handleChange.bind(this),this.email=t.email,this.emailOptions=t.emailOptions,this.events=ot.ZP.indexBy(this.email.events,"slug"),this.segments=ot.ZP.filter(window.mailpoet_segments,(e=>null===e.deleted_at));const n=this.events[this.emailOptions.event],a=this.emailOptions.afterTimeType||n.defaultAfterTimeType||"immediate";this.state={event:n,afterTimeType:a,eventSlug:this.emailOptions.event,eventOptionValue:null,afterTimeNumber:this.emailOptions.afterTimeNumber||1,segment:this.emailOptions.segment?this.emailOptions.segment:null}}handleChange(e){const{afterTimeNumber:t}=this.state,n=e;n.afterTimeType&&"immediate"===n.afterTimeType?n.afterTimeNumber=null:!n.afterTimeType||n.afterTimeNumber||t||(n.afterTimeNumber=1),this.setState(e,this.propagateChange)}displayScheduling(){const{afterTimeNumber:e,afterTimeType:t,event:n}=this.state,a={item:{afterTimeNumber:e,afterTimeType:t},event:n,onValueChange:this.handleChange};return(0,m.jsx)(Da,{item:a.item,event:a.event,onValueChange:a.onValueChange})}displaySegments(){const{segment:e}=this.state;if("user"===this.emailOptions.sendTo)return null;const t={field:{id:"segments",forceSelect2:!0,values:this.segments,extendSelect2Options:{minimumResultsForSearch:1/0},selected:()=>e},onValueChange:e=>this.handleChange({segment:e.target.value})};return(0,m.jsx)("div",{className:"event-segment-selection",children:(0,m.jsx)(Re.Y,{field:t.field,onValueChange:t.onValueChange})})}displayEventOptions(){const{event:e,eventSlug:t}=this.state;let n;try{n=JSON.parse(this.emailOptions.meta||null)}catch(e){n=this.emailOptions.meta||null}const a={emailSlug:this.email.slug,eventSlug:t,onValueChange:this.handleChange,eventOptions:e.options||null};return n&&n.option&&("remote"===a.eventOptions.type&&(a.eventOptions.values=n.option),a.selected=ot.ZP.map(n.option,(e=>e.id))),(0,m.jsx)(Oa,{emailSlug:a.emailSlug,eventSlug:a.eventSlug,eventOptions:a.eventOptions,onValueChange:a.onValueChange,selected:a.selected})}displayHeader(){const{event:e}=this.state;return e.title}propagateChange(){const{eventSlug:e,afterTimeType:t,afterTimeNumber:n,segment:a,eventOptionValue:r}=this.state,{onValueChange:i}=this.props;if(!i)return;const s={group:this.email.slug,event:e,afterTimeType:t};n&&(s.afterTimeNumber=n),a&&(s.segment=a),r&&(s.meta=JSON.stringify({option:this.state.eventOptionValue})),i({target:{name:"options",value:s}})}render(){return(0,m.jsxs)("div",{children:[(0,m.jsx)(_t.X,{level:5,children:this.displayHeader()}),this.displayEventOptions(),this.displaySegments(),this.displayScheduling()]})}}Ra.propTypes={field:Ee().shape({email:Ee().shape({events:Ee().object.isRequired}).isRequired,emailOptions:Ee().object.isRequired}).isRequired,onValueChange:Ee().func},Ra.defaultProps={onValueChange:null},Ra.displayName="SendEventConditions";const Ma=window.mailpoet_woocommerce_automatic_emails||[],Aa={getFields:function(e){return(e=>{const t=Ma[e.options.group];if(!t)return!1;const n=e.options;return[{name:"email-header",label:null,tip:null,fields:[{name:"subject",customLabel:(0,Me.__)("Subject","mailpoet"),className:"mailpoet-form-field-subject",placeholder:(0,Me.__)("Type newsletter subject","mailpoet"),tooltip:(0,Me.__)("Be creative! It's the first thing that your subscribers see. Tempt them to open your email.","mailpoet"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please specify a subject","mailpoet"),maxLength:250}},{name:"preheader",customLabel:(0,Me.__)("Preview text","mailpoet"),className:"mailpoet-form-field-preheader",placeholder:(0,Me.__)("Type preview text (usually displayed underneath the subject line in the inbox)","mailpoet"),tooltip:`${(0,Me.__)("This optional text will appear in your subscribers' inboxes, beside the subject line. Write something enticing!","mailpoet")} ${(0,Me.__)("Max length is 250 characters, however, we recommend 80 characters on a single line.","mailpoet")}`,type:"textarea",validation:{maxLength:250}}]},{name:"options",label:(0,Me.__)("Send this %1s Automatic Email when...","mailpoet").replace("%1s",t.title),type:"reactComponent",component:(0,o.withBoundary)(Ra),email:t,emailOptions:n},Hn,{name:"sender",label:(0,Me.__)("Sender","mailpoet"),tip:(0,Me.__)("Your name and email","mailpoet"),fields:[{name:"sender_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"text",placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},{name:"empty",type:"empty"},{name:"reply-to",label:(0,Me.__)("Reply-to","mailpoet"),tip:(0,Me.__)("When your subscribers reply to your emails, their emails will go to this address.","mailpoet"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet")},{name:"reply_to_address",type:"text",placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-type":"email"}}]}]})(e)},getSendButtonOptions:function(){return{value:(0,Me.__)("Activate","mailpoet")}}};var La=n(30211);function Fa(e){let{afterTimeNumber:t,afterTimeType:n,updateAfterTimeNumber:a,updateAfterTimeType:r,inactiveSubscribersPeriod:i}=e;const s="weeks"===n?7:30,o=Number(t)*s;let l=i;return 365===i&&(l=360),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:4,children:(0,Me.__)("When to send this re-engagement email?","mailpoet")}),(0,m.jsxs)(Nn.Grid.CenteredRow,{className:"mailpoet-re-engagement-scheduling",children:[(0,m.jsx)("p",{children:(0,Me.__)("After no activity for","mailpoet")}),(0,m.jsx)(at.I,{type:"text",placeholder:(0,Me.__)("count","mailpoet"),value:t,onChange:(0,Un.z2)(a)}),(0,m.jsxs)(lt.Select,{value:n,onChange:(0,Un.z2)(r),children:[(0,m.jsx)("option",{value:"weeks",children:"weeks"}),(0,m.jsx)("option",{value:"months",children:"months"})]})]}),!!i&&l<=o&&(0,m.jsx)("p",{className:"mailpoet-re-engagement-scheduling-note",children:x()((0,Me.__)("Disengaged subscribers will [link]become inactive[/link] after {$months} months and won’t receive this email. Please select a shorter period.","mailpoet").replace("{$months}",`${Math.floor(i/30)}`),/\[link\](.*?)\[\/link\]/g,(e=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/264-inactive-subscribers",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5cbf19622c7d3a026fd3efe1",children:e},"link")))})]})}const qa=[{name:"email-header",label:null,tip:null,fields:[{name:"subject",customLabel:(0,Me.__)("Subject","mailpoet"),className:"mailpoet-form-field-subject",placeholder:(0,Me.__)("Type newsletter subject","mailpoet"),tooltip:(0,Me.__)("Be creative! It's the first thing that your subscribers see. Tempt them to open your email.","mailpoet"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please specify a subject","mailpoet"),maxLength:250}},{name:"preheader",customLabel:(0,Me.__)("Preview text","mailpoet"),className:"mailpoet-form-field-preheader",placeholder:(0,Me.__)("Type preview text (usually displayed underneath the subject line in the inbox)","mailpoet"),tooltip:`${(0,Me.__)("This optional text will appear in your subscribers' inboxes, beside the subject line. Write something enticing!","mailpoet")} ${(0,Me.__)("Max length is 250 characters, however, we recommend 80 characters on a single line.","mailpoet")}`,type:"textarea",validation:{maxLength:250}}]},{name:"options",type:"reactComponent",component:function(e){return(0,m.jsx)(Fa,{afterTimeNumber:e.item.options.afterTimeNumber.toString(),afterTimeType:e.item.options.afterTimeType,inactiveSubscribersPeriod:Number(d.x.deactivateSubscriberAfterInactiveDays),updateAfterTimeNumber:t=>{e.onValueChange({target:{name:"options",value:(0,La.assoc)("afterTimeNumber",t,e.item.options)}})},updateAfterTimeType:t=>{e.onValueChange({target:{name:"options",value:(0,La.assoc)("afterTimeType",t,e.item.options)}})}})}},{name:"segments",label:(0,Me.__)("Lists","mailpoet"),tip:(0,Me.__)("Subscribers in multiple lists will only receive one email.","mailpoet"),type:"selection",placeholder:(0,Me.__)("Select a list","mailpoet"),id:"mailpoet_segments",api_version:d.x.apiVersion,endpoint:"segments",multiple:!0,filter:function(e){return!e.deleted_at&&"dynamic"!==e.type},getLabel:function(e){return e.name},getCount:function(e){return parseInt(e.subscribers,10).toLocaleString()},transformChangedValue:function(e){const t=this.getItems();return(0,La.map)((e=>(0,La.find)((t=>t.id===e),t)),e)},validation:{"data-parsley-required":!0,"data-parsley-required-message":(0,Me.__)("Please select a list","mailpoet")}},{name:"sender",label:(0,Me.__)("Sender","mailpoet"),tip:(0,Me.__)("Your name and email","mailpoet"),fields:[{name:"sender_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"reactComponent",component:Zn,placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},{name:"reply-to",label:(0,Me.__)("Reply-to","mailpoet"),tip:(0,Me.__)("When your subscribers reply to your emails, their emails will go to this address.","mailpoet"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:(0,Me.__)("John Doe","mailpoet")},{name:"reply_to_address",type:"text",placeholder:(0,Me.__)("john.doe@email.com","mailpoet"),validation:{"data-parsley-type":"email"}}]},Hn],Wa={getFields:()=>qa,getSendButtonOptions:()=>({value:(0,Me.__)("Activate","mailpoet")})};var Ba=n(41435);let Ua=null;var Va=n(47478);function Za(e){let{toggleLoadingState:t,updatePendingState:n}=e;const a=(0,s.useCallback)((async()=>{try{const{success:e,res:t}=await(0,o.callApi)({endpoint:"services",action:"refreshMSSKeyStatus"});!0===e?n(!(0,o.isTruthy)(t.data.result.data.is_approved)):d.x.Notice.showApiErrorNotice(t)}catch(e){d.x.Notice.showApiErrorNotice(e)}}),[n]),[r,i]=(0,s.useState)(!0),l=async e=>{e.preventDefault(),t(!0),await a(),i(!1),t(!1)};return(0,m.jsxs)("div",{className:"mailpoet_error",children:[x()((0,Me.__)("You’ll soon be able to send once our team reviews your account. In the meantime, you can send previews to [link]your authorized emails[/link].","mailpoet"),(0,o.getLinkRegex)(),(e=>(0,m.jsx)("a",{href:"https://account.mailpoet.com/authorization",target:"_blank",rel:"noopener noreferrer",children:e})))," ",r&&x()((0,Me.__)("If you have already received approval email, click [link]here[/link] to update the status.","mailpoet"),(0,o.getLinkRegex)(),(e=>(0,m.jsx)("a",{href:"#",onClick:l,children:e})))]})}Za.displayName="PendingNewsletterMessage";const $a=(0,o.withBoundary)(Za),Ya=window.mailpoet_woocommerce_automatic_emails||{},Ha=(e,t)=>`${kn()(t,{strict:!0,lower:!0})||"email"}-${e}`,za=e=>"immediate"===e.afterTimeType?"immediate":`${e.afterTimeNumber} ${e.afterTimeType}`;function Ka(e){let t,n;return e&&e.body&&e.body.content&&(n=e.body.content,t=JSON.stringify(e.body.content),!n.blocks||!Array.isArray(n.blocks)||0===n.blocks.length)?(0,Me.__)("Poet, please add prose to your masterpiece before you send it to your followers.","mailpoet"):window.mailpoet_mss_active&&t.indexOf("[link:subscription_unsubscribe_url]")<0&&t.indexOf("[link:subscription_unsubscribe]")<0?(0,Me.__)('All emails must include an "Unsubscribe" link. Add a footer widget to your email to continue.',"mailpoet"):"re_engagement"===e.type&&t.indexOf("[link:subscription_re_engage_url]")<0?(0,Me.__)("A re-engagement email must include a link with [link:subscription_re_engage_url] shortcode.","mailpoet"):"notification"===e.type&&t.indexOf('"type":"automatedLatestContent"')<0&&t.indexOf('"type":"automatedLatestContentLayout"')<0?(0,Me._x)("Please add an “Automatic Latest Content” widget to the email from the right sidebar.","(Please reuse the current translation used for the string “Automatic Latest Content”) This Error message is displayed when a user tries to send a “Post Notification” email without any “Automatic Latest Content” widget inside","mailpoet"):"standard"===e.type&&"sent"===e.status?(0,Me.__)("This email has already been sent. It can be edited, but not sent again. Duplicate this email if you want to send it again.","mailpoet"):"re_engagement"!==e.type||d.x.trackingConfig.emailTrackingEnabled?void 0:(0,m.jsx)("span",{style:{pointerEvents:"all"},children:x()((0,Me.__)("Re-engagement emails are disabled because [link]open and click tracking[/link] is disabled.","mailpoet"),/\[link\](.*?)\[\/link\]/g,(e=>(0,m.jsx)("a",{href:"?page=mailpoet-settings#/advanced",rel:"noopener noreferrer",children:e},"advancedSettingsTabLink")))})}class Ga extends s.Component{constructor(e){super(e),(0,et.Z)(this,"getFieldsByNewsletter",(e=>this.getSubtype(e).getFields(e))),(0,et.Z)(this,"getSendButtonOptions",(()=>this.getSubtype(this.state.item).getSendButtonOptions(this.state.item))),(0,et.Z)(this,"getSubtype",(e=>{if(e.type===Kn.j9.Automatic&&Ya[e.options.group])return Aa;switch(e.type){case"notification":return _a;case"welcome":return Ta;case"re_engagement":return Wa;default:return aa}})),(0,et.Z)(this,"getThumbnailPromise",(e=>{var t;return(null===(t=this.state)||void 0===t?void 0:t.thumbnailPromise)??(0,Ba.W0)(e)})),(0,et.Z)(this,"isValid",(()=>Te()("#mailpoet_newsletter").parsley().isValid())),(0,et.Z)(this,"isValidFromAddress",(async()=>{if("MailPoet"!==window.mailpoet_mta_method)return!0;const e=await this.loadVerifiedSenderDomains(),t=(0,Un.DA)(this.state.item.sender_address);if(-1!==e.indexOf(t))return!0;const n=await this.loadAuthorizedEmailAddresses(),a=this.state.item.sender_address;return-1!==n.indexOf(a)})),(0,et.Z)(this,"isGaFieldDisabled",(()=>!window.mailpoet_premium_active)),(0,et.Z)(this,"loadItem",(e=>(this.setState({loading:!0}),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:e}}).done((e=>{const t="draft"===e.data.status?this.getThumbnailPromise(e.meta.preview_url):null,n=e.data;if(n.type===Kn.j9.Automation){var a;const e=null===(a=n.options)||void 0===a?void 0:a.automationId,t=e?`admin.php?page=mailpoet-automation-editor&id=${e}`:"/new";return this.setState({item:{}},(()=>{this.props.history.push(t)}))}return n.ga_campaign||this.isGaFieldDisabled()||(n.ga_campaign=Ha(n.id,n.subject)),this.setState({item:e.data,fields:this.getFieldsByNewsletter(e.data),thumbnailPromise:t,validationError:Ka(e.data)}),!0})).fail((()=>{this.setState({item:{}},(()=>{this.props.history.push("/new")}))}))))),(0,et.Z)(this,"saveTemplate",((e,t)=>{this.getThumbnailPromise(e.meta.preview_url).then((n=>{d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"save",data:{newsletter_id:e.data.id,name:e.data.subject,thumbnail_data:n,body:JSON.stringify(e.data.body),categories:'["recent"]'}}).fail((e=>{this.showError(e),this.setState({loading:!1}),d.x.Modal.loading(!1)})),t()})).catch((e=>{this.showError({errors:[e]})}))})),(0,et.Z)(this,"loadAuthorizedEmailAddresses",(async()=>{if("MailPoet"!==window.mailpoet_mta_method)return[];const e=(await d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"mailer",action:"getAuthorizedEmailAddresses"})).data||[];return window.mailpoet_authorized_emails=e,e})),(0,et.Z)(this,"loadVerifiedSenderDomains",(async()=>"MailPoet"!==window.mailpoet_mta_method?[]:(await d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"mailer",action:"getVerifiedSenderDomains"})).data||[])),(0,et.Z)(this,"handleSend",(e=>(e.preventDefault(),this.isValid()?(d.x.Modal.loading(!0),this.isValidFromAddress().then((e=>{e?this.saveNewsletter().done((()=>{this.setState({loading:!0})})).done((e=>{switch(e.data.type){case"notification":case"welcome":case"automatic":case"re_engagement":this.activateNewsletter(e);break;default:this.sendNewsletter(e)}})).fail((e=>{this.showError(e),this.setState({loading:!1}),d.x.Modal.loading(!1)})):(window.mailpoet_sender_address_field_blur(),d.x.Modal.loading(!1))}))):Te()("#mailpoet_newsletter").parsley().validate()))),(0,et.Z)(this,"sendNewsletter",(e=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"sendingQueue",action:"add",data:{newsletter_id:this.state.item.id}}).done((t=>{this.saveTemplate(e,(()=>{if(window.mailpoet_show_congratulate_after_first_newsletter)return d.x.Modal.loading(!1),void this.props.history.push(`/send/congratulate/${this.state.item.id}`);this.props.history.push(`/${this.state.item.type||""}`);let n=[];e.data.segments.map((e=>n.push(...e.filters))),n=jn().uniqWith(n,((e,t)=>e.action===t.action&&e.type===t.type));const a=n.map((e=>function(e){const t=e.action,n=e.type;if("email"===n)switch(t){case"machineOpensAbsoluteCount":return"# of machine-opens";case"opensAbsoluteCount":return"# of opens";case"numberOfOrders":return"# of orders";case"clicked":return"clicked";case"clickedAny":return"clicked any email";case"opened":return"opened";case"machineOpened":return"machine-opened";default:return""}if("userRole"===n)switch(t){case"subscriberTag":return"subscriber tags";case"subscribedToList":return"subscribed to list";case"subscriberScore":return"score";case"wordpressRole":return"WordPress user role";case"mailpoetCustomField":return"MailPoet custom field";default:return""}if("woocommerce"===n)switch(t){case"customerInCountry":return"is in country";case"purchasedCategory":return"purchased in category";case"purchasedProduct":return"purchased product";case"subscribedDate":return"subscribed date";case"totalSpent":return"total spent";default:return""}return"woocommerceSubscription"===n&&"hasActiveSubscription"===t?"has an active subscription":"woocommerceMembership"===n&&"isMemberOf"===t?"is active member of":""}(e))).join(", ");"scheduled"===t.data.status?(this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("The newsletter has been scheduled.","mailpoet")})),d.x.trackEvent("Emails > Newsletter sent",{scheduled:!0,segments:a})):(this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("The newsletter is being sent...","mailpoet")}),{id:"mailpoet_notice_being_sent"}),d.x.trackEvent("Emails > Newsletter sent",{scheduled:!1,segments:a})),d.x.Modal.loading(!1)}))})).fail((e=>{this.showError(e),this.setState({loading:!1}),d.x.Modal.loading(!1)})))),(0,et.Z)(this,"activateNewsletter",(e=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:this.props.match.params.id,status:"active"}}).done((t=>{this.saveTemplate(e,(()=>{if(window.mailpoet_show_congratulate_after_first_newsletter)return d.x.Modal.loading(!1),void this.props.history.push(`/send/congratulate/${this.state.item.id}`);const e=this.state.item.options;var n;this.props.history.push("automatic"===this.state.item.type?`/${e.group}`:`/${this.state.item.type||""}`),"automatic"===this.state.item.type&&Ya[e.group]?(this.context.notices.success((0,m.jsx)("p",{children:(0,Me.sprintf)((0,Me.__)("Your %1s Automatic Email is now activated!","mailpoet"),(null===(n=Ya[e.group])||void 0===n?void 0:n.title)??"")})),d.x.trackEvent("Emails > Automatic email activated",{Type:kn()(`${e.group}-${e.event}`),Delay:za(e)})):"welcome"===t.data.type?(this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("Your Welcome Email is now activated!","mailpoet")})),d.x.trackEvent("Emails > Welcome email activated",{"List type":e.event,Delay:za(e)})):"re_engagement"===t.data.type?(this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("Your Re-engagement Email is now activated!","mailpoet")})),d.x.trackEvent("Emails > Re-engagement email activated",{Inactivity:za(e)})):"notification"===t.data.type&&(this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("Your post notification is now active!","mailpoet")})),d.x.trackEvent("Emails > Post notifications activated",{Frequency:e.intervalType})),d.x.Modal.loading(!1)}))})).fail((e=>{this.showError(e),this.setState({loading:!1}),d.x.Modal.loading(!1)})))),(0,et.Z)(this,"handleResume",(e=>(e.preventDefault(),this.isValid()?this.saveNewsletter().done((()=>{this.setState({loading:!0})})).done((()=>{d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"sendingQueue",action:"resume",data:{newsletter_id:this.state.item.id}}).done((()=>{this.props.history.push(`/${this.state.item.type||""}`),this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("The newsletter sending has been resumed.","mailpoet")}))})).fail((e=>{this.showError(e)}))})).fail((e=>{this.showError(e)})).always((()=>{this.setState({loading:!1})})):Te()("#mailpoet_newsletter").parsley().validate(),!1))),(0,et.Z)(this,"handleSave",(e=>{e.preventDefault(),this.saveNewsletter().done((()=>{this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("Email was updated successfully!","mailpoet")}))})).done((()=>{const e="automatic"===this.state.item.type?this.state.item.options.group:this.state.item.type;this.props.history.push(`/${e||""}`)})).fail((e=>{this.showError(e)}))})),(0,et.Z)(this,"handleRedirectToDesign",(e=>{e.preventDefault();const t=e.target.href;this.saveNewsletter().done((()=>{this.context.notices.success((0,m.jsx)("p",{children:(0,Me.__)("Email was updated successfully!","mailpoet")}))})).done((()=>{window.location=t})).fail((e=>{this.showError(e)}))})),(0,et.Z)(this,"saveNewsletter",(()=>{const e=this.state.item;e.queue=void 0,this.setState({loading:!0});const t=jn().omit(e,["body","created_at","deleted_at","hash","status","updated_at","type"]);return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"save",data:t})})),(0,et.Z)(this,"showError",(e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0,timeout:!1})})),(0,et.Z)(this,"handleFormChange",(e=>{const t=e.target.name,n=e.target.value;return this.setState((e=>{const a=e.item,r=a.subject,i=a.ga_campaign;return a[t]=n,"subject"===t&&i===Ha(a.id,r)&&(a.ga_campaign=Ha(a.id,n)),"reply_to_address"===t&&(a[t]=n.toLowerCase()),{item:a}})),!0})),(0,et.Z)(this,"handleSaveDraft",(()=>{Te()("#mailpoet_newsletter").parsley().destroy()})),(0,et.Z)(this,"disableSegmentsSelectorWhenPaused",(e=>t=>"segments"===t.name||"options"===t.name?{...t,disabled:e}:t)),(0,et.Z)(this,"disableGAIfPremiumInactive",(e=>t=>{if("ga_campaign"===t.name){let n=()=>{};return e()&&(n=()=>this.setState({showPremiumModal:!0})),{...t,disabled:e,onWrapperClick:n}}return t})),(0,et.Z)(this,"getPreparedFields",((e,t)=>Array.isArray(this.state.fields)?this.state.fields.map(this.disableSegmentsSelectorWhenPaused(e)).map(this.disableGAIfPremiumInactive(t)):[])),(0,et.Z)(this,"closePremiumModal",(()=>this.setState({showPremiumModal:!1}))),(0,et.Z)(this,"toggleLoadingState",(e=>this.setState({loading:e}))),(0,et.Z)(this,"updatePendingApprovalState",(e=>this.setState({mssKeyPendingApproval:e}))),this.state={fields:[],item:{},loading:!0,thumbnailPromise:null,showPremiumModal:!1,mssKeyPendingApproval:window.mailpoet_mss_key_pending_approval}}componentDidMount(){this.loadItem(this.props.match.params.id).always((()=>{this.setState({loading:!1})})),Te()("#mailpoet_newsletter").parsley({successClass:""})}componentDidUpdate(e){this.props.match.params.id!==e.match.params.id&&this.loadItem(this.props.match.params.id).always((()=>{this.setState({loading:!1})}))}render(){const{showPremiumModal:e,item:{status:t,queue:n,type:a,options:r},mssKeyPendingApproval:i}=this.state,s="sending"===t&&n&&"paused"===n.status,l=this.getSendButtonOptions(),c=this.getPreparedFields(s,this.isGaFieldDisabled),d=!(!window.mailpoet_subscribers_limit_reached&&!i&&void 0===this.state.validationError);let u=a;return u===Kn.j9.Automatic&&(u=r.group||u),(0,m.jsxs)("div",{className:"mailpoet-form-send-email",children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(fn,{emailType:u,automationId:"newsletter_send_heading"}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsxs)(jt,{id:"mailpoet_newsletter",fields:c,automationId:"newsletter_send_form",item:this.state.item,loading:this.state.loading,onChange:this.handleFormChange,onSubmit:this.handleSave,children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{className:"send-newsletter-buttons",children:[(0,m.jsx)(o.Button,{variant:"secondary",type:"submit",automationId:"email-save-draft",onClick:this.handleSaveDraft,isDisabled:this.state.loading,children:(0,Me.__)("Save as draft and close","mailpoet")}),s?(0,m.jsx)(o.Button,{type:"button",onClick:this.handleResume,isDisabled:d||this.state.loading,automationId:"email-resume",children:(0,Me.__)("Resume","mailpoet")}):(0,m.jsx)(o.Button,{type:"button",onClick:this.handleSend,...l,isDisabled:d||this.state.loading,automationId:"email-submit",children:l.value||(0,Me.__)("Send","mailpoet")}),void 0!==this.state.validationError&&(0,m.jsx)(Fe.Tooltip,{tooltip:(0,m.jsx)("div",{children:this.state.validationError}),tooltipId:"helpTooltipSendEmail"})]}),(0,m.jsxs)("p",{children:[(0,Me.__)("or simply","mailpoet")," ",(0,m.jsx)("a",{className:"mailpoet-link",href:`?page=mailpoet-newsletter-editor&id=${this.props.match.params.id}`,onClick:this.handleRedirectToDesign,children:(0,Me.__)("go back to the Design page","mailpoet")}),"."]}),i&&(0,m.jsx)($a,{toggleLoadingState:this.toggleLoadingState,updatePendingState:this.updatePendingApprovalState}),e&&(0,m.jsx)(Va.ZG,{onRequestClose:this.closePremiumModal,children:(0,Me.__)("Google Analytics tracking is not available in the free version of the MailPoet plugin.","mailpoet")})]})})]})}}Ga.contextType=l.k;const Qa=(0,Ce.EN)(Ga);function Xa(e){const[t,n]=(0,s.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:0,children:(0,Me.__)("Congratulations!","mailpoet")}),(0,m.jsx)(_t.X,{level:3,children:(a=e.newsletter,"welcome"===a.type?(0,Me.__)("Your Welcome Email is now active.","mailpoet"):"notification"===a.type?(0,Me.__)("Your Post Notification is now active.","mailpoet"):"automatic"===a.type?(0,Me.__)("Your WooCommerce email has been activated.","mailpoet"):"scheduled"===a.status?(0,Me.__)("Your newsletter is scheduled to be sent.","mailpoet"):(0,Me.__)("Your newsletter is being sent!","mailpoet"))}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)("img",{src:e.illustrationImageUrl,alt:"",width:"500"}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)(o.Button,{type:"button",dimension:"small",onClick:()=>{e.successClicked(),n(!0)},withSpinner:t,children:(0,Me.__)("Close","mailpoet")})]});var a}function Ja(e){return(0,m.jsxs)("div",{className:"mailpoet-wizard-step",children:[(0,m.jsx)("div",{className:"mailpoet-wizard-step-illustration",children:(0,m.jsx)("img",{src:e.illustrationUrl,width:"500",alt:""})}),(0,m.jsx)("div",{className:"mailpoet-wizard-step-content",children:e.children})]})}function er(){return(0,m.jsxs)(o.List,{children:[(0,m.jsx)("li",{children:(0,Me.__)("Reliable marketing and transactional email delivery. Reach inboxes, not spam boxes","mailpoet")}),(0,m.jsx)("li",{children:(0,Me.__)("Send your emails super fast (up to 50,000 emails per hour)","mailpoet")}),(0,m.jsx)("li",{children:(0,Me.__)("Maintain your sender reputation and improve engagement levels with automated bounce and complaint handling. Stop sending to non-deliverable and complaining addresses, automatically","mailpoet")}),(0,m.jsx)("li",{children:(0,Me.__)("Authenticate your emails (with SPF and DKIM) to improve deliverability and avoid spam boxes","mailpoet")})]})}function tr(e){const[t,n]=(0,s.useState)(!1),a=()=>{e.onFinish(),n(!0)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.Heading,{level:1,children:(r=e.newsletter.type,{standard:(0,Me.__)("Your email has been sent!","mailpoet"),welcome:(0,Me.__)("You are all set up and ready to go!","mailpoet"),notification:(0,Me.__)("You are all set up and ready to go!","mailpoet"),woocommerce:(0,Me.__)("You are all set up and ready to go!","mailpoet")}[r]||(0,Me.__)("You are all set up and ready to go!","mailpoet"))}),(0,m.jsx)(Ja,{illustrationUrl:e.MSSPitchIllustrationUrl,children:(0,m.jsxs)("div",{className:"mailpoet-welcome-wizard-step-content",children:[(0,m.jsx)(o.Heading,{level:4,children:(0,Me.__)("What’s next? Sign up to the MailPoet Starter plan for fast and reliable email delivery","mailpoet")}),(0,m.jsx)("p",{children:e.subscribersCount<1e3?(0,Me._x)("Did you know? Users with 1,000 subscribers or less get the Starter plan for free.","Promotion for our email sending service: Paragraph","mailpoet"):(0,Me._x)("Starting at only $10 per month, MailPoet Business offers the following features","Promotion for our email sending service: Paragraph","mailpoet")}),(0,m.jsxs)(o.Heading,{level:5,children:[(0,Me._x)("You’ll get","Promotion for our email sending service: Paragraph","mailpoet"),":"]}),(0,m.jsx)(er,{}),(0,m.jsx)("p",{children:x()((0,Me.__)("Please enter your key in [link]the Settings[/link] if you have already purchased it.","mailpoet"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,m.jsx)("a",{href:"admin.php?page=mailpoet-settings#/premium",children:e},t)))}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(o.Button,{isFullWidth:!0,href:e.purchaseUrl,target:"_blank",rel:"noopener noreferrer",onClick:t=>{t.preventDefault(),window.open(e.purchaseUrl),a()},children:(0,Me._x)("Sign up for free","Promotion for our email sending service: Button","mailpoet")}),(0,m.jsx)(o.Button,{isFullWidth:!0,variant:"tertiary",onClick:a,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),a())},withSpinner:t,children:(0,Me._x)("No thanks!","Promotion for our email sending service: Skip link","mailpoet")})]})})]});var r}function nr(e){return window.has_mss_key_specified?(0,m.jsx)(Xa,{successClicked:e.successClicked,illustrationImageUrl:e.illustrationImageUrl,newsletter:e.newsletter}):(0,m.jsx)(tr,{MSSPitchIllustrationUrl:e.MSSPitchIllustrationUrl,onFinish:e.successClicked,subscribersCount:e.subscribersCount,purchaseUrl:e.purchaseUrl,newsletter:e.newsletter})}function ar(e){const[t,n]=(0,s.useState)(!1);return(0,m.jsxs)("div",{children:[(0,m.jsx)(_t.X,{level:1,children:(0,Me.__)("Oops! We can’t send your newsletter","mailpoet")}),(0,m.jsx)(_t.X,{level:3,children:x()((0,Me.__)("Rest assured, this is fairly common and is usually fixed quickly. [link]See our quick guide[/link] to help you solve this and get your website sending.","mailpoet"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,m.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://kb.mailpoet.com/article/231-sending-does-not-work","data-beacon-article":"5a0257ac2c7d3a272c0d7ad6",children:e},t)))}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)("img",{src:window.mailpoet_congratulations_error_image,alt:"",width:"500"}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)(o.Button,{dimension:"small",type:"button",onClick:()=>{e.failClicked(),n(!0)},withSpinner:t,children:(0,Me.__)("Close","mailpoet")})]})}Xa.propTypes={successClicked:Ee().func.isRequired,illustrationImageUrl:Ee().string.isRequired,newsletter:Ee().shape({status:Ee().string.isRequired,type:Ee().string.isRequired}).isRequired},Ja.propTypes={illustrationUrl:Ee().string.isRequired,children:Ee().oneOfType([Ee().arrayOf(Ee().node),Ee().node]).isRequired},nr.propTypes={successClicked:Ee().func.isRequired,illustrationImageUrl:Ee().string.isRequired,MSSPitchIllustrationUrl:Ee().string.isRequired,newsletter:Ee().shape({status:Ee().string.isRequired,type:Ee().string.isRequired}).isRequired,subscribersCount:Ee().number.isRequired,purchaseUrl:Ee().string.isRequired},ar.propTypes={failClicked:Ee().func.isRequired};var rr=n(81918);function ir(e){return(0,m.jsx)("div",{className:"mailpoet-congratulate-loading",children:e.showRichLoadingScreen&&(0,m.jsxs)("div",{children:[(0,m.jsx)(_t.X,{level:0,children:(0,Me.__)("Verification","mailpoet")}),(0,m.jsx)(_t.X,{level:3,children:(0,Me.__)("Congrats, you’re sending your first newsletter! We’re doing a quick verification to make sure everything works fine.","mailpoet")}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)("div",{className:"mailpoet-gap-large"}),(0,m.jsx)(rr.a,{size:64})]})})}ir.propTypes={showRichLoadingScreen:Ee().bool.isRequired};const sr=Math.floor(4*Math.random());function or(){return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"set",data:{show_congratulate_after_first_newsletter:!1}}).always((()=>{window.location=window.mailpoet_emails_page}))}class lr extends s.Component{constructor(e){super(e),this.state={loading:!0,newsletter:null,testingPassed:!1,timeStart:Xe()(),minimumLoadingTimePassed:!1},this.tick=this.tick.bind(this)}componentDidMount(){this.loadNewsletter(this.props.match.params.id),this.tick()}componentDidUpdate(e){e.match.params.id!==this.props.match.params.id&&this.loadNewsletter(this.props.match.params.id)}tick(){Xe()().subtract(20,"second").isAfter(this.state.timeStart)&&this.setState({error:!0,loading:!1}),this.state.loading&&this.loadNewsletter(this.props.match.params.id),Xe()().subtract(6,"seconds").isAfter(this.state.timeStart)&&this.setState({minimumLoadingTimePassed:!0}),!this.state.loading&&this.state.minimumLoadingTimePassed||setTimeout(this.tick,2e3)}loadNewsletter(e){d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:e}}).done((e=>this.newsletterLoaded(e.data)))}newsletterLoaded(e){"standard"!==e.type||"scheduled"===e.status?this.setState({newsletter:e,loading:!1,minimumLoadingTimePassed:!0}):"sent"===e.status||"sending"===e.status?this.setState({newsletter:e,loading:!1,testingPassed:!0}):this.setState({newsletter:e})}renderContent(){return this.state.loading||!this.state.minimumLoadingTimePassed?(e=!this.state.newsletter,(0,m.jsx)(ir,{illustrationImageUrl:window.mailpoet_congratulations_loading_image,successClicked:or,showRichLoadingScreen:e})):this.state.error?(d.x.trackEvent("Cron testing done",{"Cron is working":"false"}),(0,m.jsx)(ar,{failClicked:()=>{window.location=window.mailpoet_emails_page}})):(t=this.state.newsletter,this.state.testingPassed&&d.x.trackEvent("Cron testing done",{"Cron is working":"true"}),(0,m.jsx)(nr,{illustrationImageUrl:window.mailpoet_congratulations_success_images[sr],MSSPitchIllustrationUrl:window.mailpoet_congratulations_success_images[sr],successClicked:or,newsletter:t,isWoocommerceActive:window.mailpoet_woocommerce_active,subscribersCount:window.mailpoet_subscribers_count,purchaseUrl:d.x.MailPoetComUrlFactory.getPurchasePlanUrl(d.x.subscribersCount,d.x.currentWpUserEmail,"starter",{utm_medium:"first-newsletter-congratulations",utm_campaign:"purchase"})}));var e,t}render(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("style",{dangerouslySetInnerHTML:{__html:"body { background: #fff; overflow-x: hidden; }"}}),(0,m.jsxs)("div",{className:"mailpoet-congratulate",children:[(0,m.jsx)("div",{className:"mailpoet-gap-large"}),this.renderContent()]})]})}}lr.propTypes={match:Ee().shape({params:Ee().shape({id:Ee().string}).isRequired}).isRequired},lr.displayName="Congratulate";class cr extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"showTemplateSelection",(e=>{this.props.history.push(`/template/${e}`)}))}componentDidMount(){d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:{type:"standard"}}).done((e=>{this.showTemplateSelection(e.data.id)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0})}))}render(){return(0,m.jsx)("div",{children:(0,m.jsx)(fn,{emailType:"standard",automationId:"standard_newsletter_creation_heading"})})}}cr.contextType=l.k,cr.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired},cr.displayName="NewsletterStandard";const dr=(0,Ce.EN)(cr),ur={name:"options",type:"reactComponent",component:ga};class pr extends s.Component{constructor(e){super(e),(0,et.Z)(this,"handleValueChange",(e=>{const t=this.state;t[e.target.name]=e.target.value,this.setState(t)})),(0,et.Z)(this,"handleNext",(()=>{d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:ot.ZP.extend({},this.state,{type:"notification",subject:(0,Me.__)("The last [newsletter:total] posts from our blog","mailpoet")})}).done((e=>{this.showTemplateSelection(e.data.id)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0})}))})),(0,et.Z)(this,"showTemplateSelection",(e=>{this.props.history.push(`/template/${e}`)})),this.state={options:{intervalType:"daily",timeOfDay:0,weekDay:1,monthDay:0,nthWeekDay:1}}}render(){return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(fn,{emailType:"notification",automationId:"post_notification_creation_heading"}),(0,m.jsxs)(Nn.Grid.Column,{align:"center",className:"mailpoet-schedule-email",children:[(0,m.jsx)(_t.X,{level:4,children:(0,Me.__)("When to send this post notification email?","mailpoet")}),(0,m.jsx)(ga,{item:this.state,field:ur,onValueChange:this.handleValueChange}),(0,m.jsx)(Ae.z,{isFullWidth:!0,onClick:this.handleNext,type:"button",children:(0,Me.__)("Next","mailpoet")})]})]})}}pr.contextType=l.k,pr.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired},pr.displayName="NewsletterNotification";const mr=(0,Ce.EN)(pr),hr={name:"options",label:"Event",type:"reactComponent",component:Ca};class fr extends s.Component{constructor(e){super(e),(0,et.Z)(this,"isValid",(()=>Te()("#welcome_scheduling").parsley().isValid())),(0,et.Z)(this,"validate",(()=>Te()("#welcome_scheduling").parsley().validate()));let t=window.mailpoet_segments||[],n=1;t=t.filter((e=>"default"===e.type)),ot.ZP.size(t)>0&&(n=ot.ZP.first(t).id),this.state={options:{event:"segment",segment:n,role:"subscriber",afterTimeNumber:1,afterTimeType:"immediate"}},this.handleValueChange=this.handleValueChange.bind(this),this.handleNext=this.handleNext.bind(this)}handleValueChange(e){const{state:t}=this;t[e.target.name]=e.target.value,this.setState(t)}handleNext(e){e.preventDefault(),this.isValid()?d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:ot.ZP.extend({},this.state,{type:"welcome",subject:(0,Me.__)("Subject","mailpoet")})}).done((e=>{this.showTemplateSelection(e.data.id)})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})})):this.validate()}showTemplateSelection(e){this.props.history.push(`/template/${e}`)}render(){return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(fn,{emailType:"welcome",automationId:"welcome_email_creation_heading"}),(0,m.jsxs)(Nn.Grid.Column,{align:"center",className:"mailpoet-schedule-email",children:[(0,m.jsx)(_t.X,{level:4,children:(0,Me.__)("When to send this welcome email?","mailpoet")}),(0,m.jsxs)("form",{id:"welcome_scheduling",children:[(0,m.jsx)(Ca,{item:this.state,field:hr,onValueChange:this.handleValueChange}),(0,m.jsx)(Ae.z,{isFullWidth:!0,type:"submit",onClick:this.handleNext,children:(0,Me.__)("Next","mailpoet")})]})]})]})}}function gr(){let e="";d.x.deactivateSubscriberAfterInactiveDays&&(e=(Math.floor(Number(d.x.deactivateSubscriberAfterInactiveDays)/30)-1).toString());const[t,n]=(0,s.useState)({afterTimeNumber:e,afterTimeType:"months"}),[a,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(!1),l=(0,Ce.k6)();return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),a&&(0,m.jsx)(Kt,{errors:a}),(0,m.jsx)(fn,{emailType:"re_engagement",automationId:"re_engagement_heading_creation_heading"}),(0,m.jsxs)(Nn.Grid.Column,{align:"center",className:"mailpoet-schedule-email",children:[(0,m.jsx)(Fa,{afterTimeNumber:t.afterTimeNumber,afterTimeType:t.afterTimeType,inactiveSubscribersPeriod:Number(d.x.deactivateSubscriberAfterInactiveDays),updateAfterTimeNumber:(0,La.compose)([n,(0,La.assoc)("afterTimeNumber",La.__,t)]),updateAfterTimeType:(0,La.compose)([n,(0,La.assoc)("afterTimeType",La.__,t)])}),(0,m.jsx)(Ae.z,{isFullWidth:!0,onClick:()=>(r([]),o(!0),void d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"newsletters",action:"create",data:{type:"re_engagement",subject:(0,Me.__)("Subject","mailpoet"),options:t}}).done((e=>{var t;t=e.data.id,l.push(`/template/${t}`)})).fail((e=>{o(!1),e.errors&&r(e.errors)}))),type:"button",isDisabled:!t.afterTimeNumber||i,withSpinner:i,children:(0,Me.__)("Next","mailpoet")})]})]})}fr.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired},fr.displayName="NewsletterWelcome",gr.displayName="NewsletterTypeReEngagement";class xr extends s.Component{static getEventOptions(e){return e.options||null}static getEventOptionsFirstValue(e){return e&&ot.ZP.isArray(e.values)&&e.values[0].id?e.values[0].id:null}constructor(e){super(e),(0,et.Z)(this,"isValid",(()=>!Te()("#newsletter_scheduling").parsley()||Te()("#newsletter_scheduling").parsley().isValid())),(0,et.Z)(this,"validate",(()=>{Te()("#newsletter_scheduling").parsley()&&Te()("#newsletter_scheduling").parsley().validate()})),(0,et.Z)(this,"resetValidationErrors",(()=>{Te()("#newsletter_scheduling").parsley()&&Te()("#newsletter_scheduling").parsley().reset()}));const{email:t,name:n}=e;this.handleChange=this.handleChange.bind(this),this.handleNextStep=this.handleNextStep.bind(this),this.email=t,this.emailEvents=this.email.events,this.segments=ot.ZP.filter(window.mailpoet_segments,(e=>null===e.deleted_at));const a=this.getEvent(n),r=this.constructor.getEventOptions(a),i=this.constructor.getEventOptionsFirstValue(r);this.state={event:a,eventSlug:a.slug,eventOptionValue:i,segment:a.sendToLists?this.getFirstSegment():null,afterTimeType:a.defaultAfterTimeType||"immediate",afterTimeNumber:null}}handleChange(e){const{segment:t,afterTimeNumber:n}=this.state,a=e;if(a.eventSlug){a.event=this.getEvent(a.eventSlug),a.segment=a.event.sendToLists?t||this.getFirstSegment():null;const e=this.constructor.getEventOptions(a.event);a.eventOptionValue=e?this.constructor.getEventOptionsFirstValue(e):null}a.afterTimeType&&"immediate"===a.afterTimeType?a.afterTimeNumber=null:!a.afterTimeType||a.afterTimeNumber||n||(a.afterTimeNumber=1),this.setState(a),this.resetValidationErrors(),this.isValid()&&this.validate()}handleNextStep(e){if(e.preventDefault(),!this.isValid())return void this.validate();const{history:t}=this.props,{eventSlug:n,afterTimeType:a,afterTimeNumber:r,event:i,segment:s,eventOptionValue:o}=this.state,l={group:this.email.slug,event:n,afterTimeType:a};r&&(l.afterTimeNumber=r),l.sendTo=i.sendToLists?"segment":"user",s&&(l.segment=s),o&&(l.meta=JSON.stringify({option:o})),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:{type:"automatic",subject:(0,Me.__)("Subject","mailpoet"),options:l}}).done((e=>{d.x.trackEvent("Emails > New Automatic Email Created",{"Event type":l.event,"Schedule type":l.afterTimeType,"Schedule value":l.afterTimeNumber}),t.push(`/template/${e.data.id}`)})).fail((e=>{e.errors.length>0&&this.context.notices.error(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0})}))}getEvent(e){return this.emailEvents[e]}getFirstSegment(){return ot.ZP.isArray(this.segments)&&this.segments[0].id?this.segments[0].id:null}displayHeader(){const{event:e}=this.state;return e.title}displayEventOptions(){const{eventSlug:e,event:t}=this.state,n={emailSlug:this.email.slug,eventSlug:e,eventOptions:this.constructor.getEventOptions(t),onValueChange:this.handleChange};return(0,m.jsx)(Oa,{emailSlug:n.emailSlug,eventSlug:n.eventSlug,eventOptions:n.eventOptions,onValueChange:n.onValueChange})}displaySegments(){const{event:e}=this.state;if(!e.sendToLists)return null;const t={field:{id:"segments",forceSelect2:!0,values:this.segments,extendSelect2Options:{minimumResultsForSearch:1/0}},onValueChange:e=>this.handleChange({segment:e.target.value})};return(0,m.jsx)("div",{className:"event-segment-selection",children:(0,m.jsx)(Re.Y,{field:t.field,onValueChange:t.onValueChange})})}displayScheduling(){const{afterTimeNumber:e,afterTimeType:t,event:n}=this.state,a={item:{afterTimeNumber:e,afterTimeType:t},event:n,onValueChange:this.handleChange};return(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Da,{item:a.item,event:a.event,onValueChange:a.onValueChange})})}displayEventTip(){const{event:e}=this.state;return e.tip?(0,m.jsxs)("p",{className:"description",children:[(0,m.jsx)("strong",{children:(0,Me.__)("Tip:","mailpoet")})," ",e.tip]}):null}render(){return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(fn,{emailType:"woocommerce",automationId:"woocommerce_email_creation_heading"}),(0,m.jsx)(Nn.Grid.Column,{align:"center",className:"mailpoet-schedule-email",children:(0,m.jsxs)("form",{id:"newsletter_scheduling",children:[(0,m.jsx)(_t.X,{level:4,children:this.displayHeader()}),(0,m.jsx)("div",{children:this.displayEventOptions()}),(0,m.jsx)("div",{children:this.displaySegments()}),(0,m.jsx)("div",{children:this.displayScheduling()}),(0,m.jsx)(Ae.z,{isFullWidth:!0,onClick:this.handleNextStep,type:"submit",children:(0,Me._x)("Next","Button label: Next step","mailpoet")})]})}),this.displayEventTip()]})}}xr.contextType=l.k,xr.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired,name:Ee().string.isRequired,email:Ee().shape({title:Ee().string.isRequired,slug:Ee().string.isRequired}).isRequired},xr.displayName="EventsConditions";var _r=n(6369),br=n(84188),vr=n(50281);function yr(e){let{newsletter:t}=e;const[n,a]=(0,s.useState)("paused"===t.queue.status),[r,i]=(0,s.useState)([]),l=async()=>{i([]),await(async()=>{await d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"sendingQueue",action:"resume",data:{newsletter_id:t.id}}).done((()=>a(!1))).fail((e=>i(e.errors)))})()};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Kt,{errors:r}),n&&(0,m.jsx)(Ae.z,{dimension:"small",onClick:t.status===Kn.sj.Corrupt?async()=>{(0,o.confirmAlert)({message:(0,Me.__)("The was an issue sending this email before, please confirm the issues are fixed to proceed."),onConfirm:l})}:l,children:(0,Me.__)("Resume","mailpoet")}),!n&&(0,m.jsx)(Ae.z,{dimension:"small",onClick:async()=>{i([]),await d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"sendingQueue",action:"pause",data:{newsletter_id:t.id}}).done((()=>a(!0))).fail((e=>i(e.errors)))},children:(0,Me.__)("Pause","mailpoet")})]})}function wr(e){let{newsletter:t,mailerLog:n}=e;const a=t.sent_at||t.queue.scheduled_at,r=a?(0,br.default)(a,"yyyy-MM-dd HH:mm:ss",new Date):void 0,i=t.queue&&"scheduled"!==t.queue.status,s="paused"===n.status,o=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Ne.Link,{to:`/sending-status/${t.id}`,"data-automation-id":`sending_status_${t.id}`,children:(0,m.jsx)(vr.sj,{processed:parseInt(t.queue.count_processed,10),scheduledFor:r,total:parseInt(t.queue.count_total,10),isPaused:s,status:t.status,logs:t.logs})}),"completed"!==t.queue.status&&!s&&(0,m.jsx)(yr,{newsletter:t})]}),l=(0,m.jsx)(vr.sj,{scheduledFor:r,isPaused:"scheduled"===t.queue.status&&s,status:t.status,logs:t.logs});return(0,m.jsxs)(m.Fragment,{children:[i&&o,!i&&l]})}wr.displayName="QueueStatus";const jr=(0,o.withBoundary)(wr),Sr=d.x.trackingConfig.emailTrackingEnabled,kr={onNoItemsFound:(e,t)=>t?(0,Me.__)("No emails found.","mailpoet"):(0,Me.__)("Nothing here yet! But, don't fret - there's no reason to get upset. Pretty soon, you’ll be sending emails faster than a turbo-jet.","mailpoet"),onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was moved to the trash.","mailpoet"):(0,Me.__)("%1$d emails were moved to the trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was permanently deleted.","mailpoet"):(0,Me.__)("%1$d emails were permanently deleted.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email has been restored from the Trash.","mailpoet"):(0,Me.__)("%1$d emails have been restored from the Trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},Nr=[{name:"subject",label:(0,Me.__)("Subject","mailpoet"),sortable:!0},{name:"status",label:(0,Me.__)("Status","mailpoet")},{name:"segments",label:(0,Me.__)("Lists","mailpoet")},{name:"statistics",label:(0,Me.__)("Clicked, Opened","mailpoet"),display:Sr},{name:"sent_at",label:(0,Me.__)("Sent on","mailpoet"),sortable:!0}],Cr=[{name:"trash",label:(0,Me.__)("Move to trash","mailpoet"),onSuccess:kr.onTrash}],Ir=e=>{const t=`?page=mailpoet-newsletter-editor&id=${e.id}`;e.queue&&"sending"===e.status&&null===e.queue.status?(0,xn._)({message:(0,Me.__)("Sending is in progress. Do you want to pause sending and edit the newsletter?","mailpoet"),onConfirm:()=>{window.location.href=`${t}&pauseConfirmed=yes`}}):window.location.href=t};let Tr=[{name:"view",link:function(e){return(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})}},{name:"edit",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Edit","mailpoet"),onClick:Ir},{name:"duplicate",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Duplicate","mailpoet"),onClick:function(e,t){return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success((0,Me.__)('Email "%1$s" has been duplicated.',"mailpoet").replace("%1$s",e.data.subject)),t()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}},{name:"trash",className:"mailpoet-hide-on-mobile"}];Tr=(0,Ut.y8)(Tr);class Dr extends s.Component{constructor(e){super(e),(0,et.Z)(this,"renderItem",((e,t,n)=>{const a=ee()("manage-column","column-primary","has-row-actions");return(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:a,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:"#",onClick:t=>{t.preventDefault(),Ir(e)},children:e.queue.newsletter_rendered_subject||e.subject}),t]}),(0,m.jsx)("td",{className:"column mailpoet-listing-status-column","data-colname":(0,Me.__)("Status","mailpoet"),children:(0,m.jsx)(jr,{newsletter:e,mailerLog:n.mta_log})}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Lists","mailpoet"),children:(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(_r.Eg,{segments:e.segments,dimension:"large"})})}),!0===Sr?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":(0,Me.__)("Clicked, Opened","mailpoet"),children:(0,m.jsx)(an,{newsletter:e,currentTime:n.current_time})}):null,(0,m.jsx)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Sent on","mailpoet"),children:e.sent_at?(0,m.jsxs)(m.Fragment,{children:[d.x.Date.short(e.sent_at),(0,m.jsx)("br",{}),d.x.Date.time(e.sent_at)]}):null})]})})),(0,et.Z)(this,"isItemInactive",(e=>"draft"===e.status)),this.state={newslettersCount:void 0}}render(){return(0,m.jsxs)(m.Fragment,{children:[0===this.state.newslettersCount&&(0,m.jsx)(Xt,{filter:e=>"standard"===e.slug,hideScreenOptions:!1,hideClosingButton:!0}),0!==this.state.newslettersCount&&(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"standard",base_url:"standard",onRenderItem:this.renderItem,isItemInactive:this.isItemInactive,columns:Nr,bulk_actions:Cr,item_actions:Tr,messages:kr,auto_refresh:!0,sort_by:"sent_at",sort_order:"desc",afterGetItems:e=>{if(!e.loading){const t=e.groups.reduce(((e,t)=>e+t.count),0);this.setState({newslettersCount:t})}(0,Ut._X)(e),(0,Ut.bF)(e)}})]})}}Dr.contextType=l.k,Dr.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},Dr.displayName="NewsletterListStandard";const Er=(0,Ce.EN)((0,o.withBoundary)(Dr));var Pr=n(54441);const Or=window.mailpoet_roles||{},Rr=window.mailpoet_segments||{},Mr=d.x.trackingConfig.emailTrackingEnabled,Ar={onNoItemsFound:(e,t)=>t?(0,Me.__)("No emails found.","mailpoet"):(0,Me.__)("Nothing here yet! But, don't fret - there's no reason to get upset. Pretty soon, you’ll be sending emails faster than a turbo-jet.","mailpoet"),onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was moved to the trash.","mailpoet"):(0,Me.__)("%1$d emails were moved to the trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was permanently deleted.","mailpoet"):(0,Me.__)("%1$d emails were permanently deleted.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email has been restored from the Trash.","mailpoet"):(0,Me.__)("%1$d emails have been restored from the Trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},Lr=[{name:"subject",label:(0,Me.__)("Subject","mailpoet"),sortable:!0},{name:"settings",label:(0,Me.__)("Settings","mailpoet")},{name:"statistics",label:(0,Me.__)("Statistics","mailpoet"),display:Mr},{name:"status",label:(0,Me.__)("Status","mailpoet"),width:145},{name:"updated_at",label:(0,Me.__)("Last modified on","mailpoet"),sortable:!0}],Fr=[{name:"trash",label:(0,Me.__)("Move to trash","mailpoet"),onSuccess:Ar.onTrash}];let qr=[{name:"view",link:function(e){return(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})}},{name:"duplicate",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Duplicate","mailpoet"),onClick:(e,t)=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success((0,Me.__)('Email "%1$s" has been duplicated.',"mailpoet").replace("%1$s",e.data.subject)),t()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))},{name:"edit",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Edit","mailpoet"),onClick:Ut.Q2},{name:"trash",className:"mailpoet-hide-on-mobile"}];qr=(0,Ut.y8)(qr);class Wr extends s.Component{constructor(e){super(e),(0,et.Z)(this,"updateStatus",((e,t)=>{t.persist(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:Number(t.target.getAttribute("data-id")),status:e?"active":"draft"}}).done((e=>{"active"===e.data.status&&d.x.Notice.success((0,Me.__)("Your Welcome Email is now activated!","mailpoet")),this.forceUpdate()})).fail((n=>{d.x.Notice.showApiErrorNotice(n),t.target.checked=!e}))})),(0,et.Z)(this,"renderStatus",(e=>{const t=(0,Me._x)("%1$d sent","number of welcome emails sent","mailpoet").replace("%1$d",e.total_sent.toLocaleString()),n=(0,Me._x)("%1$d scheduled","number of welcome emails scheduled to be sent","mailpoet").replace("%1$d",e.total_scheduled.toLocaleString());return(0,m.jsxs)("div",{children:[(0,m.jsx)(zn.Z,{className:"mailpoet-listing-status-toggle",onCheck:this.updateStatus,"data-id":e.id,dimension:"small",defaultChecked:"active"===e.status}),(0,m.jsxs)("p",{className:"mailpoet-listing-stats-description",children:[(0,m.jsx)(Ne.Link,{to:`/sending-status/${e.id}`,"data-automation-id":`sending_status_${e.id}`,children:t})," ",(0,m.jsx)("br",{}),n]})]})})),(0,et.Z)(this,"renderSettings",(e=>{let t,n,a;if("user"===e.options.event)t="mailpoet_all"===e.options.role?(0,Me.__)("Sent when a new WordPress user is added to your site.","mailpoet"):x()((0,Me.__)("Sent when a new WordPress user with the role %1$s is added to your site.","mailpoet"),"%1$s",((t,n)=>(0,m.jsx)(Pt.V,{variant:"list",children:Or[e.options.role]},n)));else{if(a=ot.ZP.find(Rr,(t=>Number(t.id)===Number(e.options.segment))),void 0===a)return(0,m.jsx)(Ne.Link,{className:"mailpoet-listing-error",to:`/send/${e.id}`,children:(0,Me.__)("You need to select a list to send to.","mailpoet")});t=x()((0,Me.__)("Sent when someone subscribes to the list: %1$s.","mailpoet"),"%1$s",((e,t)=>(0,m.jsx)(Pt.V,{variant:"list",children:a.name},t)))}if(t&&"immediate"!==e.options.afterTimeType)switch(e.options.afterTimeType){case"minutes":n=(0,Me.__)("%1$d minute(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;case"hours":n=(0,Me.__)("%1$d hour(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;case"days":n=(0,Me.__)("%1$d day(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;case"weeks":n=(0,Me.__)("%1$d week(s) later","mailpoet").replace("%1$d",e.options.afterTimeNumber);break;default:n=(0,Me.__)("Invalid sending delay.","mailpoet")}return(0,m.jsxs)("span",{children:[t,n&&(0,m.jsxs)("div",{className:"mailpoet-listing-schedule",children:[(0,m.jsx)("div",{className:"mailpoet-listing-schedule-icon",children:(0,m.jsx)(Pr.P,{})}),n]})]})})),(0,et.Z)(this,"renderItem",((e,t)=>{const n=ee()("manage-column","column-primary","has-row-actions");return(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:n,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:`?page=mailpoet-newsletter-editor&id=${e.id}`,onClick:t=>{t.preventDefault(),(0,Ut.Q2)(e)},children:e.subject}),t]}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Settings","mailpoet"),children:this.renderSettings(e)}),!0===Mr?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":(0,Me.__)("Clicked, Opened","mailpoet"),children:(0,m.jsx)(an,{newsletter:e,isSent:e.total_sent>0&&!!e.statistics})}):null,(0,m.jsx)("td",{className:"column","data-colname":(0,Me.__)("Status","mailpoet"),children:this.renderStatus(e)}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Last modified on","mailpoet"),children:[d.x.Date.short(e.updated_at),(0,m.jsx)("br",{}),d.x.Date.time(e.updated_at)]})]})})),(0,et.Z)(this,"isItemInactive",(e=>"draft"===e.status)),this.state={newslettersCount:void 0}}render(){return(0,m.jsxs)(m.Fragment,{children:[0===this.state.newslettersCount&&(0,m.jsx)(Xt,{filter:e=>"welcome"===e.slug,hideScreenOptions:!1,hideClosingButton:!0}),0!==this.state.newslettersCount&&(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"welcome",base_url:"welcome",onRenderItem:this.renderItem,isItemInactive:this.isItemInactive,columns:Lr,bulk_actions:Fr,item_actions:qr,messages:Ar,auto_refresh:!0,sort_by:"updated_at",sort_order:"desc",afterGetItems:e=>{if(!e.loading){const t=e.groups.reduce(((e,t)=>e+t.count),0);this.setState({newslettersCount:t})}(0,Ut._X)(e),(0,Ut.bF)(e)}})]})}}Wr.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},Wr.displayName="NewsletterListWelcome";const Br=(0,Ce.EN)((0,o.withBoundary)(Wr)),Ur={onNoItemsFound:(e,t)=>t?(0,Me.__)("No emails found.","mailpoet"):(0,Me.__)("Nothing here yet! But, don't fret - there's no reason to get upset. Pretty soon, you’ll be sending emails faster than a turbo-jet.","mailpoet"),onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was moved to the trash.","mailpoet"):(0,Me.__)("%1$d emails were moved to the trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was permanently deleted.","mailpoet"):(0,Me.__)("%1$d emails were permanently deleted.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email has been restored from the Trash.","mailpoet"):(0,Me.__)("%1$d emails have been restored from the Trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},Vr=[{name:"subject",label:(0,Me.__)("Subject","mailpoet"),sortable:!0},{name:"settings",label:(0,Me.__)("Settings","mailpoet")},{name:"history",label:(0,Me.__)("History","mailpoet"),width:100},{name:"status",label:(0,Me.__)("Status","mailpoet"),width:100},{name:"updated_at",label:(0,Me.__)("Last modified on","mailpoet"),sortable:!0}],Zr=[{name:"trash",label:(0,Me.__)("Move to trash","mailpoet"),onSuccess:Ur.onTrash}],$r=[{name:"view",link:function(e){return(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})}},{name:"edit",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Edit","mailpoet"),onClick:Ut.Q2},{name:"duplicate",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Duplicate","mailpoet"),onClick:function(e,t){return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success((0,Me.__)('Email "%1$s" has been duplicated.',"mailpoet").replace("%1$s",e.data.subject)),t()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}},{name:"trash",className:"mailpoet-hide-on-mobile"}];class Yr extends s.Component{constructor(e){super(e),(0,et.Z)(this,"updateStatus",((e,t)=>{t.persist(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:Number(t.target.getAttribute("data-id")),status:e?"active":"draft"}}).done((e=>{"active"===e.data.status&&d.x.Notice.success((0,Me.__)("Your post notification is now active!","mailpoet")),this.forceUpdate()})).fail((n=>{d.x.Notice.showApiErrorNotice(n),t.target.checked=!e}))})),(0,et.Z)(this,"renderStatus",(e=>(0,m.jsx)(zn.Z,{className:"mailpoet-listing-status-toggle",onCheck:this.updateStatus,"data-id":e.id,dimension:"small",defaultChecked:"active"===e.status}))),(0,et.Z)(this,"renderSettings",(e=>{let t;if(0===e.segments.length)return(0,m.jsx)(Ne.Link,{className:"mailpoet-listing-error",to:`/send/${e.id}`,children:(0,Me.__)("You need to select a list to send to.","mailpoet")});const n=x()((0,Me.__)("Send to %1$s","mailpoet"),"%1$s",((t,n)=>(0,m.jsx)(_r.Eg,{segments:e.segments},n)));switch(e.options.intervalType){case"daily":t=(0,Me.__)("Daily at %1$s","mailpoet").replace("%1$s",oa[e.options.timeOfDay]);break;case"weekly":t=(0,Me.__)("Weekly on %1$s at %2$s","mailpoet").replace("%1$s",la[e.options.weekDay]).replace("%2$s",oa[e.options.timeOfDay]);break;case"monthly":t=(0,Me.__)("Monthly on the %1$s at %2$s","mailpoet").replace("%1$s",ca[e.options.monthDay]).replace("%2$s",oa[e.options.timeOfDay]);break;case"nthWeekDay":t=(0,Me.__)("Every %1$s %2$s of the month at %3$s","mailpoet").replace("%1$s",da[e.options.nthWeekDay]).replace("%2$s",la[e.options.weekDay]).replace("%3$s",oa[e.options.timeOfDay]);break;case"immediately":t=(0,Me.__)("Immediately","mailpoet");break;default:t="Invalid sending frequency"}return(0,m.jsxs)("span",{children:[n,(0,m.jsxs)("div",{className:"mailpoet-listing-schedule",children:[(0,m.jsx)("div",{className:"mailpoet-listing-schedule-icon",children:(0,m.jsx)(Pr.P,{})}),t]})]})})),(0,et.Z)(this,"renderHistoryLink",(e=>0===Number(e.children_count)?(0,m.jsx)("span",{className:"mailpoet-listing-status-unknown mailpoet-font-extra-small mailpoet-listing-notification-status",children:(0,Me.__)("Not sent yet","mailpoet")}):(0,m.jsxs)(Ne.Link,{className:"mailpoet-nowrap","data-automation-id":`history-${e.id}`,to:`/notification/history/${e.id}`,children:[(0,m.jsx)(Ae.z,{className:"mailpoet-hide-on-mobile",dimension:"small",children:(0,Me.__)("View history","mailpoet")}),(0,m.jsx)(Ae.z,{className:"mailpoet-show-on-mobile mailpoet-listing-notification-status",dimension:"small",variant:"secondary",children:(0,Me.__)("View history","mailpoet")})]}))),(0,et.Z)(this,"renderItem",((e,t)=>{const n=ee()("manage-column","column-primary","has-row-actions");return(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:n,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:`?page=mailpoet-newsletter-editor&id=${e.id}`,onClick:t=>{t.preventDefault(),(0,Ut.Q2)(e)},children:e.subject}),t]}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Settings","mailpoet"),children:this.renderSettings(e)}),(0,m.jsx)("td",{className:"column","data-colname":(0,Me.__)("History","mailpoet"),children:this.renderHistoryLink(e)}),(0,m.jsx)("td",{className:"column","data-colname":(0,Me.__)("Status","mailpoet"),children:this.renderStatus(e)}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Last modified on","mailpoet"),children:[d.x.Date.short(e.updated_at),(0,m.jsx)("br",{}),d.x.Date.time(e.updated_at)]})]})})),(0,et.Z)(this,"isItemInactive",(e=>"draft"===e.status)),this.state={newslettersCount:void 0}}render(){return(0,m.jsxs)(m.Fragment,{children:[0===this.state.newslettersCount&&(0,m.jsx)(Xt,{filter:e=>"notification"===e.slug,hideScreenOptions:!1,hideClosingButton:!0}),0!==this.state.newslettersCount&&(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"notification",base_url:"notification",onRenderItem:this.renderItem,isItemInactive:this.isItemInactive,columns:Vr,bulk_actions:Zr,item_actions:$r,messages:Ur,auto_refresh:!0,sort_by:"updated_at",sort_order:"desc",afterGetItems:e=>{if(!e.loading){const t=e.groups.reduce(((e,t)=>e+t.count),0);this.setState({newslettersCount:t})}(0,Ut._X)(e),(0,Ut.bF)(e)}})]})}}Yr.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},Yr.displayName="NewsletterListNotification";const Hr=(0,Ce.EN)((0,o.withBoundary)(Yr)),zr=d.x.trackingConfig.emailTrackingEnabled,Kr={onNoItemsFound:(e,t)=>t?(0,Me.__)("No emails found.","mailpoet"):(0,Me.__)("Nothing here yet! But, don't fret - there's no reason to get upset. Pretty soon, you’ll be sending emails faster than a turbo-jet.","mailpoet"),onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was moved to the trash.","mailpoet"):(0,Me.__)("%1$d emails were moved to the trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was permanently deleted.","mailpoet"):(0,Me.__)("%1$d emails were permanently deleted.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email has been restored from the Trash.","mailpoet"):(0,Me.__)("%1$d emails have been restored from the Trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},Gr=[{name:"subject",label:(0,Me.__)("Subject","mailpoet"),sortable:!0},{name:"settings",label:(0,Me.__)("Settings","mailpoet")},{name:"statistics",label:(0,Me.__)("Clicked, Opened","mailpoet"),display:zr},{name:"status",label:(0,Me.__)("Status","mailpoet"),width:145},{name:"updated_at",label:(0,Me.__)("Last modified on","mailpoet"),sortable:!0}],Qr=[{name:"trash",label:(0,Me.__)("Move to trash","mailpoet"),onSuccess:Kr.onTrash}];let Xr=[{name:"view",link:function(e){return(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})}},{name:"duplicate",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Duplicate","mailpoet"),onClick:(e,t)=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success((0,Me.__)('Email "%1$s" has been duplicated.',"mailpoet").replace("%1$s",e.data.subject)),t()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))},{name:"edit",className:"mailpoet-hide-on-mobile",label:(0,Me.__)("Edit","mailpoet"),onClick:Ut.Q2},{name:"trash",className:"mailpoet-hide-on-mobile"}];Xr=(0,Ut.y8)(Xr);class Jr extends s.Component{constructor(e){super(e),(0,et.Z)(this,"updateStatus",((e,t)=>{t.persist(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:Number(t.target.getAttribute("data-id")),status:e?"active":"draft"}}).done((e=>{"active"===e.data.status&&d.x.Notice.success((0,Me.__)("Your Re-engagement Email is now activated!","mailpoet")),this.forceUpdate()})).fail((n=>{d.x.Notice.showApiErrorNotice(n),t.target.checked=!e}))})),(0,et.Z)(this,"renderStatus",(e=>{const t=(0,Me._x)("%1$d sent","number of welcome emails sent","mailpoet").replace("%1$d",e.total_sent.toLocaleString());return(0,m.jsxs)("div",{children:[(0,m.jsx)(zn.Z,{className:"mailpoet-listing-status-toggle",onCheck:this.updateStatus,"data-id":e.id,dimension:"small",defaultChecked:"active"===e.status}),(0,m.jsx)("p",{className:"mailpoet-listing-stats-description",children:(0,m.jsx)(Ne.Link,{to:`/sending-status/${e.id}`,"data-automation-id":`sending_status_${e.id}`,children:t})})]})})),(0,et.Z)(this,"renderSettings",(e=>{if(0===e.segments.length)return(0,m.jsx)(Ne.Link,{className:"mailpoet-listing-error",to:`/send/${e.id}`,children:(0,Me.__)("You need to select a list to send to.","mailpoet")});const t=x()((0,Me.__)("Send to %1$s","mailpoet"),"%1$s",((t,n)=>(0,m.jsx)(_r.Eg,{segments:e.segments},n)));let n=(0,Me._x)("month",'month in the sentence "1 month after inactivity"',"mailpoet");e.options.afterTimeNumber>1&&"months"===e.options.afterTimeType?n=(0,Me._x)("months",'months in the sentence "5 months after inactivity"',"mailpoet"):e.options.afterTimeNumber>1&&"weeks"===e.options.afterTimeType?n=(0,Me._x)("weeks",'weeks in the sentence "5 weeks after inactivity"',"mailpoet"):1===e.options.afterTimeNumber&&"weeks"===e.options.afterTimeType&&(n=(0,Me._x)("week",'week in the sentence "1 week after inactivity"',"mailpoet"));const a=(0,Me._x)("{$count} {$frequency} after inactivity",'example: "5 months after inactivity"',"mailpoet").replace("{$count}",e.options.afterTimeNumber).replace("{$frequency}",n);return(0,m.jsxs)("span",{children:[t,(0,m.jsxs)("div",{className:"mailpoet-listing-schedule",children:[(0,m.jsx)("div",{className:"mailpoet-listing-schedule-icon",children:(0,m.jsx)(Pr.P,{})}),a]})]})})),(0,et.Z)(this,"renderItem",((e,t)=>{const n=ee()("manage-column","column-primary","has-row-actions");return(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:n,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:`?page=mailpoet-newsletter-editor&id=${e.id}`,onClick:t=>{t.preventDefault(),(0,Ut.Q2)(e)},children:e.subject}),t]}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Settings","mailpoet"),children:this.renderSettings(e)}),!0===zr?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":(0,Me.__)("Clicked, Opened","mailpoet"),children:(0,m.jsx)(an,{newsletter:e,isSent:e.total_sent>0&&!!e.statistics})}):null,(0,m.jsx)("td",{className:"column","data-colname":(0,Me.__)("Status","mailpoet"),children:this.renderStatus(e)}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Last modified on","mailpoet"),children:[d.x.Date.short(e.updated_at),(0,m.jsx)("br",{}),d.x.Date.time(e.updated_at)]})]})})),(0,et.Z)(this,"isItemInactive",(e=>"draft"===e.status)),this.state={newslettersCount:void 0}}render(){return(0,m.jsxs)(m.Fragment,{children:[0===this.state.newslettersCount&&(0,m.jsx)(Xt,{filter:e=>"re_engagement"===e.slug,hideScreenOptions:!1,hideClosingButton:!0}),0!==this.state.newslettersCount&&(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"re_engagement",base_url:"re_engagement",onRenderItem:this.renderItem,isItemInactive:this.isItemInactive,columns:Gr,bulk_actions:Qr,item_actions:Xr,messages:Kr,auto_refresh:!0,sort_by:"updated_at",sort_order:"desc",afterGetItems:e=>{if(!e.loading){const t=e.groups.reduce(((e,t)=>e+t.count),0);this.setState({newslettersCount:t})}(0,Ut._X)(e),(0,Ut.bF)(e)}})]})}}Jr.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},Jr.displayName="NewsletterListReEngagement";const ei=(0,Ce.EN)((0,o.withBoundary)(Jr)),ti=d.x.trackingConfig.emailTrackingEnabled,ni=[{name:"subject",label:(0,Me.__)("Subject","mailpoet")},{name:"status",label:(0,Me.__)("Status","mailpoet")},{name:"segments",label:(0,Me.__)("Lists","mailpoet")},{name:"statistics",label:(0,Me.__)("Clicked, Opened","mailpoet"),display:ti},{name:"sent_at",label:(0,Me.__)("Sent on","mailpoet"),sortable:!0}],ai={onNoItemsFound:(e,t)=>t?(0,Me.__)("No emails found.","mailpoet"):(0,Me.__)("Nothing here yet! But, don't fret - there's no reason to get upset. Pretty soon, you’ll be sending emails faster than a turbo-jet.","mailpoet"),onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was moved to the trash.","mailpoet"):(0,Me.__)("%1$d emails were moved to the trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email was permanently deleted.","mailpoet"):(0,Me.__)("%1$d emails were permanently deleted.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?(0,Me.__)("1 email has been restored from the Trash.","mailpoet"):(0,Me.__)("%1$d emails have been restored from the Trash.","mailpoet").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},ri=[{name:"trash",label:(0,Me.__)("Move to trash","mailpoet"),onSuccess:ai.onTrash}],ii=(0,Ut.y8)([{name:"view",link:function(e){return(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})}},{name:"trash",className:"mailpoet-hide-on-mobile"}]),si=(e,t,n)=>{const a=ee()("manage-column","column-primary","has-row-actions");return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("td",{className:a,children:[(0,m.jsx)("strong",{children:(0,m.jsx)("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",children:e.queue.newsletter_rendered_subject||e.subject})}),t]}),(0,m.jsx)("td",{className:"column mailpoet-listing-status-column","data-colname":(0,Me.__)("Status","mailpoet"),children:(0,m.jsx)(jr,{newsletter:e,mailerLog:n.mta_log})}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Lists","mailpoet"),children:(0,m.jsx)(_r.Eg,{segments:e.segments,dimension:"large"})}),!0===ti?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":(0,Me.__)("Clicked, Opened","mailpoet"),children:(0,m.jsx)(an,{newsletter:e,currentTime:n.current_time})}):null,(0,m.jsx)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":(0,Me.__)("Sent on","mailpoet"),children:e.sent_at?(0,m.jsxs)(m.Fragment,{children:[d.x.Date.short(e.sent_at),(0,m.jsx)("br",{}),d.x.Date.time(e.sent_at)]}):null})]})};function oi(e){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Ne.Link,{className:"mailpoet-button button button-secondary button-small",to:"/notification",children:(0,Me.__)("Back to Post notifications","mailpoet")}),(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:e.location,params:{...e.match.params,parentId:e.parentId},endpoint:"newsletters",type:"notification_history",base_url:"notification/history/:parentId",onRenderItem:si,columns:ni,messages:ai,item_actions:ii,bulk_actions:ri,auto_refresh:!0,sort_by:"sent_at",sort_order:"desc",afterGetItems:e=>{(0,Ut._X)(e),(0,Ut.bF)(e)}})]})}oi.propTypes={parentId:Ee().string.isRequired,location:Ee().shape({pathname:Ee().string}).isRequired,match:Ee().shape({params:Ee().shape({id:Ee().node}).isRequired}).isRequired},oi.displayName="NewsletterListNotificationHistory";const li=(0,Ce.EN)((0,o.withBoundary)(oi)),ci=[{name:"subscriber_id",label:(0,Me.__)("Subscriber","mailpoet"),sortable:!0},{name:"status",label:(0,Me._x)("Sending status","an email sending status: unprocessed, sent or failed.","mailpoet")},{name:"failureReason",label:(0,Me.__)("Failure reason (if applicable)","mailpoet")}],di={onNoItemsFound:()=>(0,Me.__)("No sending task found.","mailpoet")};function ui(e){const[t,n]=(0,s.useState)({id:e.match.params.id,subject:"",sent:!1});return(0,s.useEffect)((()=>{d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:t.id}}).done((e=>n({id:t.id,subject:e.data.subject,sent:null!==e.data.sent_at}))).fail((e=>d.x.Notice.showApiErrorNotice(e)))}),[t.id]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h1",{children:(0,Me._x)("Sending status","Page title. This page displays a list of emails along with their sending status: unprocessed, sent or failed.","mailpoet")}),(0,m.jsx)(fi,{newsletter:t}),(0,m.jsx)(hi,{location:e.location,params:e.match.params})]})}ui.propTypes={location:Ee().shape({pathname:Ee().string}).isRequired,match:Ee().shape({params:Ee().shape({id:Ee().string.isRequired}).isRequired}).isRequired},ui.displayName="SendingStatus";const pi=(e,t)=>e.location.pathname===t.location.pathname&&e.params.id===t.params.id,mi=e=>(0,m.jsx)("div",{children:(0,m.jsx)(gi,{...e})}),hi=(0,s.memo)((e=>{let{location:t,params:n}=e;return(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:t,params:n,endpoint:"sending_task_subscribers",base_url:"sending-status/:id",onRenderItem:mi,getListingItemKey:e=>`${e.taskId}-${e.subscriberId}`,columns:ci,messages:di,auto_refresh:!0,sort_by:"failed",sort_order:"desc",afterGetItems:e=>{(0,Ut._X)(e),(0,Ut.bF)(e)}})}),pi);function fi(e){let{newsletter:t}=e;return t.id&&t.subject&&t.sent?(0,m.jsx)("p",{children:(0,m.jsx)(Ne.Link,{to:`/stats/${t.id}`,children:t.subject})}):null}function gi(e){let{error:t,failed:n,taskId:a,processed:r,email:i,subscriberId:s,lastName:o,firstName:l}=e;const c=ee()("manage-column","column-primary","has-row-actions");let u=(0,Me._x)("Unprocessed","status when the sending of a newsletter has not been processed","mailpoet");return r&&(u=n?(0,m.jsxs)("span",{children:[(0,Me._x)("Failed","status when the sending of a newsletter has failed","mailpoet"),(0,m.jsx)("br",{}),(0,m.jsx)("a",{className:"button",href:"#",onClick:e=>{e.preventDefault(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"sending_task_subscribers",action:"resend",data:{taskId:a,subscriberId:s}}).done((()=>window.mailpoet_listing.forceUpdate())).fail((e=>d.x.Notice.showApiErrorNotice(e)))},children:(0,Me.__)("Resend","mailpoet")})]}):(0,Me._x)("Sent","status when a newsletter has been sent","mailpoet")),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("td",{"data-automation-id":`name_${a}_${s}`,className:c,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:`admin.php?page=mailpoet-subscribers#/edit/${s}`,children:i}),(0,m.jsx)("div",{className:"mailpoet-listing-subtitle",children:`${l} ${o}`})]}),(0,m.jsx)("td",{className:"column","data-automation-id":`status_${a}_${s}`,"data-colname":(0,Me._x)("Sending status","an email sending status: unprocessed, sent or failed.","mailpoet"),children:u}),(0,m.jsx)("td",{className:"column","data-automation-id":`error_${a}_${s}`,"data-colname":(0,Me.__)("Failure reason (if applicable)","mailpoet"),children:t})]})}hi.propTypes={location:Ee().shape({pathname:Ee().string}).isRequired,params:Ee().shape({id:Ee().string.isRequired}).isRequired},fi.propTypes={newsletter:Ee().shape({id:Ee().string,subject:Ee().string,sent:Ee().bool})},fi.defaultProps={newsletter:{id:null,subject:null,sent:!1}},gi.propTypes={error:Ee().string,email:Ee().string.isRequired,failed:Ee().number.isRequired,taskId:Ee().number.isRequired,lastName:Ee().string.isRequired,firstName:Ee().string.isRequired,processed:Ee().number.isRequired,subscriberId:Ee().number.isRequired},gi.defaultProps={error:""},gi.displayName="ListingItem",ui.displayName="SendingStatus";var xi=n(35642),_i=n(52249),bi=n(23064),vi=n.n(bi);function yi(e){const t=e.installedDaysAgo,n=t>30?d.x.I18n.t("reviewRequestUsingForMonths").replace("[months]",Math.round(t/30)):d.x.I18n.t("reviewRequestUsingForDays").replace("[days]",t);return(0,m.jsxs)("div",{className:"mailpoet_review_request",children:[(0,m.jsx)("img",{src:e.reviewRequestIllustrationUrl,height:"280",width:"280",alt:""}),(0,m.jsx)("h2",{children:d.x.I18n.t("reviewRequestHeading")}),(0,m.jsx)("p",{children:d.x.I18n.t("reviewRequestDidYouKnow").replace("[username]",e.username)}),(0,m.jsx)("p",{children:n}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{href:"http://bit.ly/2Bi124o",target:"_blank",rel:"noopener noreferrer",className:"button button-primary",children:d.x.I18n.t("reviewRequestRateUsNow")})}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{id:"mailpoet_review_request_not_now",children:d.x.I18n.t("reviewRequestNotNow")})})]})}yi.propTypes={installedDaysAgo:Ee().number.isRequired,reviewRequestIllustrationUrl:Ee().string.isRequired,username:Ee().string.isRequired};const wi=()=>((0,s.useLayoutEffect)((()=>{window.mailpoet_display_nps_poll&&d.x.libs3rdPartyEnabled&&(Ua||(Ua=d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"analytics",action:"getTrackingData"})),Ua).then((e=>{let{data:t}=e;return(e=>{let t;t=window.mailpoet_display_nps_form?"EqOgKsgZd832Sz9w":window.mailpoet_is_new_user?"6L479eVPXk7pBn6S":"k0aJAsQAWI2ERyGv",vi()({writeKey:t,userId:window.mailpoet_current_wp_user.ID+window.mailpoet_site_url,traits:{name:window.mailpoet_current_wp_user.user_nicename,email:window.mailpoet_current_wp_user.user_email,mailpoetVersion:window.mailpoet_version,mailpoetPremiumIsActive:window.mailpoet_premium_active,createdAt:e.installedAtIso,newslettersSent:e.newslettersSent,welcomeEmails:e.welcomeEmails,postnotificationEmails:e.postnotificationEmails,woocommerceEmails:e.woocommerceEmails,subscribers:e.subscribers,lists:e.lists,sendingMethod:e.sendingMethod,woocommerceIsInstalled:e.woocommerceIsInstalled},events:{submit:e=>{e.rating>=9&&e.completed&&d.x.Modal.popup({width:800,template:_i.renderToString(yi({username:window.mailpoet_current_wp_user_firstname||window.mailpoet_current_wp_user.user_login,reviewRequestIllustrationUrl:window.mailpoet_review_request_illustration_url,installedDaysAgo:window.mailpoet_installed_days_ago})),onInit:()=>{document.getElementById("mailpoet_review_request_not_now").addEventListener("click",(()=>d.x.Modal.close()))}})}}})})(t)}))}),[]),null),ji=e=>function(t){return wi(),(0,m.jsx)(e,{...t})};function Si(){return(0,m.jsx)(c.Q,{children:(0,m.jsxs)(Ne.Link,{id:"mailpoet-new-email",className:"mailpoet-button button-secondary",to:"/new",onClick:()=>d.x.trackEvent("Emails > Add New"),"data-automation-id":"new_email",children:[We.R,(0,m.jsx)("span",{children:(0,Me.__)("New email","mailpoet")})]})})}function ki(e){let{children:t,location:n}=e;return null!==(0,hn.X)(n)||(e=>e.hash.match(/^#\/new/)||e.pathname.match(/^\/new/))(n)?null:t}ki.propTypes={location:Ee().string.isRequired,children:Ee().node.isRequired};const Ni=(0,Ce.EN)(ki);function Ci(){return(0,m.jsx)("style",{dangerouslySetInnerHTML:{__html:".wrap { margin: 0 !important; }"}})}var Ii=n(69218),Ti=n(76379),Di=n(19231);const Ei=e=>{const t=e<.1?2:1;return d.x.Num.toLocaleFixed(e,t)},Pi=e=>+(+e).toFixed(1);function Oi(e){let{newsletter:t,isWoocommerceActive:n}=e;const a=t.total_sent||0;let r=0,i=0,s=0,o=0,l=0;a>0&&(r=100*t.statistics.clicked/a,i=100*t.statistics.opened/a,s=100*t.statistics.machineOpened/a,o=100*t.statistics.unsubscribed/a,l=100*t.statistics.bounced/a);const c=Ei(r),d=Ei(i),u=Ei(s),p=Ei(o),h=Ei(l),f=a>=20&&t.statistics.opened>=5,g=t.statistics.unsubscribed>=5&&a>=100,_=t.statistics.bounced>=5&&a>=100,b=(0,Di.y)("opened",i)||"",v=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-statistics-value-small",children:[(0,m.jsxs)("span",{className:`mailpoet-statistics-value-number mailpoet-statistics-value-number-${b}`,children:[d,"% "]}),(0,Me._x)("opened","Percentage of subscribers that opened a newsletter link","mailpoet")]}),f&&(0,m.jsx)(Di.$,{isInverted:!1,stat:"opened",rate:i,tooltipId:`opened-${t.id||"0"}`,tooltipPlace:"right"})]}),y=(0,m.jsxs)("div",{className:"mailpoet-statistics-value-small",children:[(0,m.jsxs)("span",{className:"mailpoet-statistics-value-number",children:[u,"% "]}),(0,Me._x)("machine-opened","Percentage of newsletters that were opened by a machine","mailpoet"),(0,m.jsx)(Fe.Tooltip,{tooltip:x()((0,Me.__)("A machine-opened email is an email opened by a computer in the background without the user’s explicit request or knowledge. [link]Read more[/link]","mailpoet"),/\[link](.*?)\[\/link]/,(e=>(0,m.jsx)("span",{style:{pointerEvents:"all"},children:(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/368-what-are-machine-opens",target:"_blank","data-beacon-article":"6124b7fb21ef206e5592e188",rel:"noopener noreferrer",children:e},"kb-link")},"machine-opened-tooltip")))})]}),w=Pi(o),j=g?(0,Di.y)("unsubscribed",w):"",S=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-statistics-value-small",children:[(0,m.jsxs)("span",{className:`mailpoet-statistics-value-number mailpoet-statistics-value-number-${j}`,children:[p,"% "]}),(0,Me._x)("unsubscribed","Percentage of subscribers that unsubscribed from a newsletter","mailpoet")]}),g&&(0,m.jsx)(Di.$,{isInverted:!1,stat:"unsubscribed",rate:w,tooltipId:`unsubscribed-${t.id||"0"}`,tooltipPlace:"right"})]}),k=Pi(l),N=_?(0,Di.y)("bounced",k):"",C=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-statistics-value-small",children:[(0,m.jsxs)("span",{className:`mailpoet-statistics-value-number mailpoet-statistics-value-number-${N}`,children:[h,"% "]}),(0,Me._x)("bounced","Percentage of subscribers that bounced from a newsletter","mailpoet")]}),_&&(0,m.jsx)(Di.$,{isInverted:!1,stat:"bounced",rate:k,tooltipId:`bounced-${t.id||"0"}`,tooltipPlace:"right"})]}),I=(0,Di.y)("clicked",r),T=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-statistics-value",children:[(0,m.jsxs)("span",{className:`mailpoet-statistics-value-number mailpoet-statistics-value-number-${I}`,children:[c,"% "]}),(0,Me._x)("clicked","Percentage of subscribers that clicked a newsletter link","mailpoet")]}),f&&(0,m.jsx)(Di.$,{isInverted:!1,stat:"clicked",rate:r,tooltipId:`clicked-${t.id||"0"}`,tooltipPlace:"right"})]});return(0,m.jsxs)("div",{className:"mailpoet-stats-general",children:[(0,m.jsxs)(Nn.Grid.ThreeColumns,{className:"mailpoet-stats-general-top-row",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"mailpoet-statistics-value-small",children:[(0,Me.__)("Sent to","mailpoet"),": ",(0,m.jsx)("span",{className:"mailpoet-statistics-value-number",children:a.toLocaleString()})]})}),(0,m.jsx)("div",{className:"mailpoet-statistics-with-left-separator",children:S}),(0,m.jsx)("div",{className:"mailpoet-statistics-with-left-separator",children:C})]}),(0,m.jsxs)(Nn.Grid.ThreeColumns,{children:[(0,m.jsx)("div",{children:T}),(0,m.jsxs)("div",{className:"mailpoet-statistics-with-left-separator",children:[v,y]}),n&&(0,m.jsx)("div",{className:"mailpoet-statistics-with-left-separator",children:Mt.Hooks.applyFilters("mailpoet_newsletters_revenues_stats",null,t.statistics.revenue)}),!n&&(0,m.jsx)("div",{})]}),(0,m.jsx)("p",{className:"mailpoet-stats-general-read-more",children:(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/190-whats-a-good-email-open-rate",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"58f671152c7d3a057f8858e8",children:(0,Me.__)("Read more on stats.","mailpoet")})})]})}function Ri(e){let{newsletter:t}=e;const n=t.queue.scheduled_at||t.queue.created_at;return(0,m.jsxs)(Nn.Grid.ThreeColumns,{className:"mailpoet-stats-info",children:[(0,m.jsxs)("div",{className:"mailpoet-grid-span-two-columns",children:[(0,m.jsx)(_t.X,{level:1,children:t.subject}),(0,m.jsx)("div",{children:(0,m.jsxs)("b",{children:[d.x.Date.short(n)," • ",d.x.Date.time(n)]})}),Array.isArray(t.segments)&&t.segments.length&&(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"mailpoet-stats-info-key",children:(0,Me.__)("To","mailpoet")}),": ",(0,m.jsx)(o.SegmentTags,{dimension:"large",segments:t.segments})]})]}),(0,m.jsxs)("div",{className:"mailpoet-stats-info-sender-preview",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"mailpoet-stats-info-key-value",children:[(0,m.jsxs)("span",{className:"mailpoet-stats-info-key",children:[(0,Me.__)("From","mailpoet"),": "]}),t.sender_address?t.sender_address:"-"]}),(0,m.jsxs)("div",{className:"mailpoet-stats-info-key-value",children:[(0,m.jsxs)("span",{className:"mailpoet-stats-info-key",children:[(0,Me.__)("Reply-to","mailpoet"),": "]}),t.reply_to_address?t.reply_to_address:"-"]}),(0,m.jsxs)("div",{className:"mailpoet-stats-info-key-value",children:[(0,m.jsxs)("span",{className:"mailpoet-stats-info-key",children:[(0,Me.__)("GA campaign","mailpoet"),": "]}),t.ga_campaign?t.ga_campaign:"-"]})]}),(0,m.jsx)("div",{children:(0,m.jsx)(o.Button,{href:t.preview_url,target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Preview","mailpoet")})})]})]})}function Mi(){const e=(0,m.jsx)(Ae.z,{href:d.x.MailPoetComUrlFactory.getPurchasePlanUrl(d.x.subscribersCount,d.x.currentWpUserEmail,"starter",{utm_medium:"stats",utm_campaign:"signup"}),target:"_blank",rel:"noopener noreferrer",children:(0,Me.__)("Upgrade","mailpoet")}),t=(0,m.jsxs)("p",{children:[(0,Me.__)("Learn more about your subscribers and optimize your campaigns. See who opened your emails, which links they clicked, and then use the data to make your emails even better. And if you run a WooCommerce store, you’ll also see the revenue earned per email. All starting $10 per month.","mailpoet")," ",(0,m.jsx)("a",{href:"admin.php?page=mailpoet-upgrade",children:(0,Me.__)("Learn more","mailpoet")}),"."]});return(0,m.jsx)("div",{className:"mailpoet-stats-premium-required",children:(0,m.jsx)(At.K,{title:(0,Me.__)("This is a Premium feature","mailpoet"),message:t,actionButton:e})})}function Ai(){if(!window.mailpoet_display_detailed_stats)return(0,m.jsx)(Mi,{});if(window.mailpoet_subscribers_limit_reached){const e=window.mailpoet_has_valid_api_key,t=(0,Me.__)("Upgrade required","mailpoet"),n=e?(0,Me.__)("Congratulations, you now have [subscribersCount] subscribers! Your plan is limited to [subscribersLimit] subscribers. You need to upgrade now to be able to continue using MailPoet.","mailpoet"):(0,Me.__)("Congratulations, you now have [subscribersCount] subscribers! Our free version is limited to [subscribersLimit] subscribers. You need to upgrade now to be able to continue using MailPoet.","mailpoet").replace("[subscribersLimit]",window.mailpoet_subscribers_limit).replace("[subscribersCount]",window.mailpoet_subscribers_count),a=e?d.x.MailPoetComUrlFactory.getUpgradeUrl(d.x.pluginPartialKey):d.x.MailPoetComUrlFactory.getPurchasePlanUrl(window.mailpoet_subscribers_count+1);return(0,m.jsx)("div",{className:"mailpoet-stats-premium-required",children:(0,m.jsx)(At.K,{title:t,message:(0,m.jsx)("p",{children:n}),actionButton:(0,m.jsx)(Ae.z,{target:"_blank",rel:"noopener noreferrer",href:a,children:(0,Me.__)("Upgrade Now","mailpoet")})})})}return null}Oi.displayName="NewsletterGeneralStats",Ri.displayName="NewsletterStatsInfo",Ai.displayName="PremiumBanner";const Li=(0,o.withBoundary)(Ai);function Fi(e){let{match:t,history:n,location:a}=e;const[r,i]=(0,s.useState)({item:void 0,loading:!0}),l=(0,s.useCallback)((e=>{i({loading:!0,item:r.item}),d.x.Modal.loading(!0),d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:window.mailpoet_display_detailed_stats?"stats":"newsletters",action:window.mailpoet_display_detailed_stats?"get":"getWithStats",data:{id:e}}).always((()=>{d.x.Modal.loading(!1)})).done((e=>{i({loading:!1,item:e.data})})).fail((e=>{d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0}),i({loading:!1}),n.push("/")}))}),[n,r.item]);(0,s.useEffect)((()=>{var e;window.scrollTo(0,0),(null===(e=r.item)||void 0===e?void 0:e.id)!==t.params.id&&l(t.params.id)}),[t.params.id,l,r.item]);const{item:u,loading:p}=r,h=u;return p?null:null==h||!h.subject||null!=h&&h.queue?h?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(St.B,{}),(0,m.jsx)(Ci,{}),(0,m.jsx)(c.Q,{}),(0,m.jsxs)("div",{className:"mailpoet-stats-page",children:[(0,m.jsx)(j,{}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Ri,{newsletter:h})}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Oi,{newsletter:h,isWoocommerceActive:d.x.isWoocommerceActive})}),(0,m.jsxs)(Ii.m,{activeKey:"clicked",children:[(0,m.jsx)(Ti.O,{title:(0,Me.__)("Clicked Links","mailpoet"),children:Mt.Hooks.applyFilters("mailpoet_newsletters_clicked_links_table",(0,m.jsx)(Li,{}),h.clicked_links)},"clicked"),Mt.Hooks.applyFilters("mailpoet_newsletters_purchased_products",null,h),(0,m.jsx)(Ti.O,{title:(0,Me.__)("Subscriber Engagement","mailpoet"),automationId:"engagement-tab",children:Mt.Hooks.applyFilters("mailpoet_newsletters_subscriber_engagement",(0,m.jsx)(Li,{}),a,t.params,h)},"engagement"),(0,m.jsx)(Ti.O,{title:(0,Me._x)("Bounces","A tab title for the list of bounces (w.wiki/45Qc)","mailpoet"),automationId:"bounces-tab",children:Mt.Hooks.applyFilters("mailpoet_newsletters_bounces",(0,m.jsx)(Li,{}),a,t.params)},"bounces")]})]})]}):(0,m.jsxs)("h3",{children:[" ",(0,Me.__)("This email does not exist.","mailpoet")," "]}):(0,m.jsx)("div",{children:(0,m.jsx)(_t.X,{level:1,children:h.subject})})}Fi.displayName="CampaignStatsPage";const qi=(0,Ce.EN)(Fi);function Wi(e){let{newsletters:t}=e;return(0,m.jsxs)(p.q,{type:"error",timeout:!1,closable:!1,renderInPlace:!0,children:[(0,m.jsx)("h3",{children:(0,Me.__)("Paused emails","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("There was problem sending the following email(s), please fix the issues described for each email and resume.","mailpoet")}),(0,m.jsx)("ul",{children:t.map((e=>{let{id:t,subject:n}=e;return(0,m.jsx)("li",{children:n},t)}))})]})}Wi.displayName="CorruptEmailNotice";const Bi=window.mailpoet_woocommerce_automatic_emails||[],Ui=ji((()=>{const{parentId:e}=(0,Ce.UO)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Ni,{children:(0,m.jsx)(Si,{})}),d.x.corrupt_newsletters.length>0&&(0,m.jsx)(Wi,{newsletters:d.x.corrupt_newsletters}),(0,m.jsxs)(xi.t,{activeKey:"standard",routerType:"switch-only",onSwitch:e=>(e=>d.x.trackEvent(`Tab Emails > ${e} clicked`))(e),automationId:"newsletters_listing_tabs",children:[(0,m.jsx)(o.Tab,{route:"standard/(.*)?",title:(0,Me.__)("Newsletters","mailpoet"),automationId:`tab-${(0,Me.__)("Newsletters","mailpoet")}`,children:(0,m.jsx)(Er,{})},"standard"),(0,m.jsx)(o.Tab,{route:"welcome/(.*)?",title:(0,Me.__)("Welcome Emails","mailpoet"),automationId:`tab-${(0,Me.__)("Welcome Emails","mailpoet")}`,children:(0,m.jsx)(Br,{})},"welcome"),(0,m.jsx)(o.Tab,{route:"notification/(.*)?",title:(0,Me.__)("Post Notifications","mailpoet"),automationId:`tab-${(0,Me.__)("Post Notifications","mailpoet")}`,children:e?(0,m.jsx)(li,{parentId:e}):(0,m.jsx)(Hr,{})},"notification"),(0,m.jsx)(o.Tab,{route:"re_engagement/(.*)?",title:(0,Me.__)("Re-engagement Emails","mailpoet"),automationId:`tab-${(0,Me.__)("Re-engagement Emails","mailpoet")}`,children:(0,m.jsx)(ei,{})},"re_engagement"),window.mailpoet_woocommerce_active&&!d.x.hideAutomations&&ot.ZP.map(Bi,(e=>(0,m.jsx)(o.Tab,{route:`${e.slug}/(.*)?`,title:e.title,automationId:`tab-${e.title}`,children:(0,m.jsx)(pn,{})},e.slug)))]})]})}));function Vi(e){let{history:t}=e;return(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Xt,{history:t,hideClosingButton:0===window.mailpoet_newsletters_count})})}Ui.displayName="NewsletterTabs",Vi.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired},Vi.displayName="NewNewsletter";const Zi=[...(()=>{const e=[];return ot.ZP.each(Bi,(t=>{e.push({path:`/${t.slug}/(.*)?`,component:(0,o.withBoundary)(Ui)});const{events:n}=t;ot.ZP.isObject(n)&&ot.ZP.each(n,(n=>{e.push({path:`/new/${t.slug}/${n.slug}/conditions`,render:e=>{const a={...e,email:t,name:n.slug};return(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(xr,{...a})})}})})),e.push({path:`/new/${t.slug}`,render:e=>{const n={...e,email:t};return(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Yt,{...n})})}})})),e})(),{path:"/notification/history/:parentId/(.*)?",render:(0,o.withBoundary)(Ui)},{path:"/(standard|welcome|notification|re_engagement)/(.*)?",render:(0,o.withBoundary)(Ui)},{path:"/new/standard",render:(0,o.withBoundary)(dr)},{path:"/new/notification",render:(0,o.withBoundary)(mr)},{path:"/new/welcome",render:(0,o.withBoundary)(fr)},{path:"/new/re-engagement",render:(0,o.withBoundary)(gr)},{path:"/new",render:(0,o.withBoundary)(Vi)},{name:"template",path:"/template/:id",render:(0,o.withBoundary)(yn)},{path:"/send/congratulate/:id",render:(0,o.withBoundary)(lr)},{path:"/send/:id",render:(0,o.withBoundary)(Qa)},{path:"/sending-status/:id/(.*)?",render:(0,o.withBoundary)(ui)},{path:"/stats/:id/(.*)?",render:(0,o.withBoundary)(qi)}];function $i(){return(0,m.jsx)(l.k.Provider,{value:(0,l.S)(window),children:(0,m.jsxs)(Ne.HashRouter,{children:[(0,m.jsx)(u.w,{}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(h,{mailpoetInstalledDaysAgo:d.x.installedDaysAgo,sendTransactionalEmails:d.x.transactionalEmailsEnabled,mtaMethod:d.x.mtaMethod,apiVersion:d.x.apiVersion,noticeDismissed:d.x.transactionalEmailsOptInNoticeDismissed})}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(j,{})}),(0,m.jsxs)(Ce.rs,{children:[(0,m.jsx)(Ce.AW,{exact:!0,path:"/",render:()=>(0,m.jsx)(Ce.l_,{to:0===window.mailpoet_newsletters_count?"/new":"/standard"})}),Zi.map((e=>(0,m.jsx)(Ce.AW,{path:e.path,component:e.component,name:e.name||null,data:e.data||null,render:e.render},e.path)))]})]})})}const Yi=document.getElementById("newsletters_container");Yi&&((0,o.registerTranslations)(),window.mailpoet_listing=i.render((0,m.jsx)($i,{}),Yi));var Hi=n(7969);const zi=e=>"wp_users"===e.type,Ki=e=>"woocommerce_users"===e.type,Gi=e=>zi(e)||Ki(e),Qi=d.x.trackingConfig.emailTrackingEnabled,Xi=[{name:"name",label:d.x.I18n.t("name"),sortable:!0},{name:"description",label:d.x.I18n.t("description")},{name:"average_subscriber_score",label:d.x.I18n.t("listScore"),display:Qi},{name:"subscribed",label:d.x.I18n.t("subscribed"),className:"mailpoet-listing-column-narrow"},{name:"unconfirmed",label:d.x.I18n.t("unconfirmed"),className:"mailpoet-listing-column-narrow"},{name:"unsubscribed",label:d.x.I18n.t("unsubscribed"),className:"mailpoet-listing-column-narrow"},{name:"inactive",label:d.x.I18n.t("inactive"),className:"mailpoet-listing-column-narrow"},{name:"bounced",label:d.x.I18n.t("bounced"),className:"mailpoet-listing-column-narrow"},{name:"created_at",label:d.x.I18n.t("createdOn"),sortable:!0}],Ji={onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneSegmentTrashed"):d.x.I18n.t("multipleSegmentsTrashed").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneSegmentDeleted"):d.x.I18n.t("multipleSegmentsDeleted").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneSegmentRestored"):d.x.I18n.t("multipleSegmentsRestored").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},es=[{name:"trash",label:d.x.I18n.t("moveToTrash"),onSuccess:Ji.onTrash}],ts=e=>!Gi(e),ns=[{name:"edit",className:"mailpoet-hide-on-mobile",link:function(e){return(0,m.jsx)(Ne.Link,{to:`/edit/${e.id}`,children:d.x.I18n.t("edit")})},display:function(e){return!Gi(e)}},{name:"duplicate_segment",className:"mailpoet-hide-on-mobile",label:d.x.I18n.t("duplicate"),onClick:(e,t)=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"segments",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success(d.x.I18n.t("listDuplicated").replace("%1$s",(0,Hi.r)(e.data.name))),t()})).fail((e=>{d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})})),display:function(e){return!Gi(e)}},{name:"read_more",className:"mailpoet-hide-on-mobile",link:function(){return(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/133-the-wordpress-users-list",target:"_blank",rel:"noopener noreferrer",children:d.x.I18n.t("readMore")})},display:function(e){return zi(e)}},{name:"synchronize_segment",label:d.x.I18n.t("forceSync"),onClick:function(e,t){d.x.Modal.loading(!0),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"segments",action:"synchronize",data:{type:e.type}}).done((()=>{let n=d.x.I18n.t("listSynchronized").replace("%1$s",e.name);"woocommerce_users"===e.type&&(n=d.x.I18n.t("listSynchronizationWasScheduled").replace("%1$s",e.name)),d.x.Modal.loading(!1),d.x.Notice.success(n),t()})).fail((e=>{d.x.Modal.loading(!1),e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))},display:function(e){return zi(e)||Ki(e)}},{name:"view_subscribers",link:function(e){return(0,m.jsx)("a",{href:e.subscribers_url,"data-automation-id":`view_subscribers_${e.name}`,children:d.x.I18n.t("viewSubscribers")})}},{name:"trash",className:"mailpoet-hide-on-mobile",display:function(e){return!Ki(e)}}];class as extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"renderItem",((e,t)=>{const n=ee()("manage-column","column-primary","has-row-actions"),a=Number(e.subscribers_count.subscribed||0),r=Number(e.subscribers_count.unconfirmed||0),i=Number(e.subscribers_count.unsubscribed||0),s=Number(e.subscribers_count.inactive||0),o=Number(e.subscribers_count.bounced||0);let l;return l=Gi(e)?(0,m.jsx)("span",{className:"mailpoet-listing-title",children:(0,Hi.r)(e.name)}):(0,m.jsx)(Ne.Link,{className:"mailpoet-listing-title",to:`/edit/${e.id}`,children:(0,Hi.r)(e.name)}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("td",{className:n,"data-automation-id":`segment_name_${(0,Hi.kb)(e.name)}`,children:[l,t]}),(0,m.jsx)("td",{"data-colname":d.x.I18n.t("description"),children:(0,m.jsx)("abbr",{children:(0,Hi.r)(e.description)})}),Qi?(0,m.jsx)("td",{className:"column mailpoet-listing-stats-column","data-colname":d.x.I18n.t("averageScore"),children:(0,m.jsx)("div",{className:"mailpoet-listing-stats",children:(0,m.jsx)(ge,{id:e.id,engagementScore:e.average_engagement_score})})}):null,(0,m.jsx)("td",{className:"mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("subscribed"),children:(0,m.jsx)("abbr",{children:a.toLocaleString()})}),(0,m.jsx)("td",{className:"mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("unconfirmed"),children:(0,m.jsx)("abbr",{children:r.toLocaleString()})}),(0,m.jsx)("td",{className:"mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("unsubscribed"),children:(0,m.jsx)("abbr",{children:i.toLocaleString()})}),(0,m.jsx)("td",{className:"mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("inactive"),children:(0,m.jsx)("abbr",{children:s.toLocaleString()})}),(0,m.jsx)("td",{className:"mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("bounced"),children:(0,m.jsx)("abbr",{children:o.toLocaleString()})}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("createdOn"),children:[d.x.Date.short(e.created_at),(0,m.jsx)("br",{}),d.x.Date.time(e.created_at)]})]})}))}render(){return(0,m.jsx)("div",{className:"mailpoet-segments-listing",children:(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,messages:Ji,search:!1,endpoint:"segments",base_url:"lists",onRenderItem:this.renderItem,columns:Xi,bulk_actions:es,item_actions:ns,sort_by:"name",sort_order:"asc",isItemDeletable:ts,isItemToggleable:zi})})}}as.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},as.displayName="SegmentList";const rs=(0,Ce.EN)(as),is=[{name:"name",label:d.x.I18n.t("name"),type:"text"},{name:"description",label:d.x.I18n.t("description"),type:"textarea",tip:d.x.I18n.t("segmentDescriptionTip")},{name:"showInManageSubscriptionPage",label:d.x.I18n.t("showInManageSubscriptionPage"),type:"checkbox",values:{showInManageSubscriptionPage:d.x.I18n.t("showInManageSubscriptionPageTip")},isChecked:!0}],ss={onUpdate:function(){d.x.Notice.success(d.x.I18n.t("segmentUpdated"))},onCreate:function(){d.x.Notice.success(d.x.I18n.t("segmentAdded")),d.x.trackEvent("Lists > Add new")}};function os(e){return(0,m.jsxs)("div",{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(St.B,{}),(0,m.jsxs)(_t.X,{level:1,className:"mailpoet-title",children:[(0,m.jsx)("span",{children:d.x.I18n.t("segment")}),(0,m.jsx)(Ne.Link,{className:"mailpoet-button button button-secondary button-small",to:"/",children:d.x.I18n.t("backToList")})]}),(0,m.jsx)(_,{}),(0,m.jsx)(jt,{endpoint:"segments",fields:is,params:e.match.params,messages:ss})]})}os.propTypes={match:Ee().shape({params:Ee().shape({id:Ee().string}).isRequired}).isRequired},os.displayName="SegmentForm";var ls=n(34835),cs=n(50889),ds=n(67631);function us(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getNewslettersList()),[]),o=null==i?void 0:i.map((e=>{const t=e.sent_at?d.x.Date.format(e.sent_at):d.x.I18n.t("notSentYet");return{label:e.subject,tag:t,value:Number(e.id)}}));return(0,s.useEffect)((()=>{n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t),n.action===cs.zd.MACHINE_OPENED&&n.operator===cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[n.action,n.operator,t,a]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{isFullWidth:!0,value:n.operator,onChange:e=>{r("operator",t,e)},children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),n.action!==cs.zd.MACHINE_OPENED?(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")}):null]},"select")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,isMulti:!0,placeholder:d.x.I18n.t("selectNewsletterPlaceholder"),options:o,automationId:"segment-email",value:(0,La.filter)((e=>{if(!n.newsletters)return;const t=e.value;return-1!==n.newsletters.indexOf(t)}),o),onChange:e=>{a({newsletters:(0,La.map)((0,La.parseInt)(10),(0,La.map)("value",e))},t)}})})]})}const ps=e=>!!e;function ms(e){return d.x.I18n.t("emailActionOpensDaysSentence").split(/({days})/gim).map(e)}function hs(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{void 0===n.operator&&a({operator:"more"},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(i=e=>"{condition}"===e?(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{r("operator",t,e)},children:[(0,m.jsx)("option",{value:"more",children:d.x.I18n.t("moreThan")}),(0,m.jsx)("option",{value:"less",children:d.x.I18n.t("lessThan")}),(0,m.jsx)("option",{value:"equals",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"not_equals",children:d.x.I18n.t("notEquals")})]},"select"):"{opens}"===e?(0,m.jsx)(at.I,{type:"number",value:n.opens||"","data-automation-id":"segment-number-of-opens",onChange:e=>{r("opens",t,e)},min:"0",placeholder:d.x.I18n.t("emailActionOpens")},"input"):"string"==typeof e&&e.trim().length>1?(0,m.jsx)("div",{children:e},"opens"):null,d.x.I18n.t("emailActionOpensSentence").split(/({condition})|({opens})|(\b[a-zA-Z]+\b)/gim).map(i))}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:ms((e=>"{days}"===e?(0,m.jsx)(at.I,{type:"number",value:n.days||"","data-automation-id":"segment-number-of-days",onChange:e=>{r("days",t,e)},min:"0",placeholder:d.x.I18n.t("emailActionDays")},"input"):"string"==typeof e&&e.trim().length>1?(0,m.jsx)("div",{children:e},e):null))})]});var i}const fs={[cs.zd.OPENS_ABSOLUTE_COUNT]:hs,[cs.zd.MACHINE_OPENS_ABSOLUTE_COUNT]:hs,[cs.zd.CLICKED]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getNewslettersList()),[]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[p,h]=(0,s.useState)(!1),f=null==i?void 0:i.map((e=>{const t=e.sent_at?d.x.Date.format(e.sent_at):(0,Me.__)("Not sent yet","mailpoet");return{label:e.subject,tag:t,value:Number(e.id)}})),g=(0,s.useCallback)((()=>{var e;ps(n.newsletter_id)&&(u([]),e=n.newsletter_id,l([]),h(!0),d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"newsletter_links",action:"get",data:{newsletterId:e}}).then((e=>{const{data:t}=e,n=t.map((e=>({value:e.id,label:e.url})));h(!1),u(n)})).fail((e=>{l(e.errors)})))}),[n.newsletter_id]);return(0,s.useEffect)((()=>{g()}),[g,n.newsletter_id]),(0,s.useEffect)((()=>{n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[n.operator,t,a]),(0,m.jsxs)(m.Fragment,{children:[o.length>0&&(0,m.jsx)(Kt,{errors:o}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectNewsletterPlaceholder"),options:f,value:(0,La.find)(["value",n.newsletter_id],f),onChange:e=>{a({newsletter_id:e.value,link_ids:[]},t)},automationId:"segment-email"})}),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{isMinWidth:!0,value:n.operator,onChange:e=>r("operator",t,e),automationId:"select-operator",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator"),p&&(0,m.jsx)("span",{children:d.x.I18n.t("loadingDynamicSegmentItems")}),!p&&ps(n.newsletter_id)&&(0,m.jsx)(ls.ReactSelect,{isMulti:!0,dimension:"small",isFullWidth:!0,automationId:"segment-link-select",placeholder:d.x.I18n.t("allLinksPlaceholder"),options:c.length?c:[{value:0,label:d.x.I18n.t("noLinksHint"),isDisabled:!0}],value:(0,La.filter)((e=>!!n.link_ids&&-1!==n.link_ids.indexOf(e.value)),c),onChange:e=>{a({link_ids:(e||[]).map((e=>e.value))},t)}})]})]})},[cs.zd.OPENED]:us,[cs.zd.WAS_SENT]:us,[cs.zd.MACHINE_OPENED]:us,[cs.zd.CLICKED_ANY]:null};var gs=n(30091),xs=n(47612);let _s;!function(e){e.BEFORE="before",e.AFTER="after",e.ON="on",e.NOT_ON="notOn",e.IN_THE_LAST="inTheLast",e.NOT_IN_THE_LAST="notInTheLast"}(_s||(_s={}));const bs=[_s.BEFORE,_s.AFTER,_s.ON,_s.NOT_ON,_s.IN_THE_LAST,_s.NOT_IN_THE_LAST],vs=e=>{if(null!==e){if(Array.isArray(e))throw new Error("convertDateToString can process only single date array given");return d.x.Date.format(e,{format:"Y-m-d"})}},ys=e=>{const t=(0,gs.default)(e);if((0,xs.default)(t))return t};function ws(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{bs.includes(n.operator)||a({operator:_s.BEFORE},t),n.operator!==_s.BEFORE&&n.operator!==_s.AFTER&&n.operator!==_s.ON&&n.operator!==_s.NOT_ON||void 0!==ys(n.value)&&/^\d+-\d+-\d+$/.test(n.value)||a({value:vs(new Date)},t),n.operator!==_s.IN_THE_LAST&&n.operator!==_s.NOT_IN_THE_LAST||"string"!=typeof n.value||/^\d*$/.exec(n.value)||a({value:""},t)}),[a,n,t]),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{r("operator",t,e)},children:[(0,m.jsx)("option",{value:_s.BEFORE,children:d.x.I18n.t("before")}),(0,m.jsx)("option",{value:_s.AFTER,children:d.x.I18n.t("after")}),(0,m.jsx)("option",{value:_s.ON,children:d.x.I18n.t("on")}),(0,m.jsx)("option",{value:_s.NOT_ON,children:d.x.I18n.t("notOn")}),(0,m.jsx)("option",{value:_s.IN_THE_LAST,children:d.x.I18n.t("inTheLast")}),(0,m.jsx)("option",{value:_s.NOT_IN_THE_LAST,children:d.x.I18n.t("notInTheLast")})]},"select"),(n.operator===_s.BEFORE||n.operator===_s.AFTER||n.operator===_s.ON||n.operator===_s.NOT_ON)&&(0,m.jsx)(Rn,{dateFormat:"MMM d, yyyy",onChange:e=>{a({value:vs(e)},t)},selected:n.value?ys(n.value):void 0}),(n.operator===_s.IN_THE_LAST||n.operator===_s.NOT_IN_THE_LAST)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(at.I,{type:"number",value:n.value,onChange:e=>{r("value",t,e)},min:"1",placeholder:d.x.I18n.t("daysPlaceholder")},"input"),(0,m.jsx)("span",{children:d.x.I18n.t("daysPlaceholder")})]})]})}function js(e){return!(!e.operator||!e.value)&&([_s.BEFORE,_s.AFTER,_s.ON,_s.NOT_ON].includes(e.operator)?/^\d+-\d+-\d+$/.test(e.value):!![_s.IN_THE_LAST,_s.NOT_IN_THE_LAST].includes(e.operator)&&(/^\d+$/.test(e.value)&&Number(e.value)>0))}var Ss=n(69027);const ks={[Ss.wq.CUSTOMER_IN_COUNTRY]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a}=(0,he.Z)(ds.t),r=(0,k.Z)((e=>e(ds.t).getWooCommerceCountries()),[]).map((e=>({value:e.code,label:e.name})));return(0,s.useEffect)((()=>{n.operator!==cs.f5.ANY&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{a({operator:e.target.value},t)},automationId:"select-operator-country",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator-country")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,isMulti:!0,placeholder:d.x.I18n.t("selectWooCountry"),options:r,value:(0,La.filter)((e=>{if(n.country_code)return-1!==n.country_code.indexOf(e.value)}),r),onChange:e=>{a({country_code:(e||[]).map((e=>e.value))},t)},automationId:"select-segment-country"},"select-segment-country")})]})},[Ss.wq.NUMBER_OF_ORDERS]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{void 0===n.number_of_orders_type&&a({number_of_orders_type:"="},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.number_of_orders_type,onChange:e=>{r("number_of_orders_type",t,e)},automationId:"select-number-of-orders-type",children:[(0,m.jsx)("option",{value:"=",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"!=",children:d.x.I18n.t("notEquals")}),(0,m.jsx)("option",{value:">",children:d.x.I18n.t("moreThan")}),(0,m.jsx)("option",{value:"<",children:d.x.I18n.t("lessThan")})]},"select"),(0,m.jsx)(at.I,{"data-automation-id":"input-number-of-orders-count",type:"number",min:0,value:n.number_of_orders_count||"",placeholder:d.x.I18n.t("wooNumberOfOrdersCount"),onChange:e=>{r("number_of_orders_count",t,e)}}),(0,m.jsx)("div",{children:d.x.I18n.t("wooNumberOfOrdersOrders")})]}),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsx)("div",{children:d.x.I18n.t("inTheLast")}),(0,m.jsx)(at.I,{"data-automation-id":"input-number-of-orders-days",type:"number",min:1,value:n.number_of_orders_days||"",placeholder:d.x.I18n.t("daysPlaceholder"),onChange:e=>{r("number_of_orders_days",t,e)}}),(0,m.jsx)("div",{children:d.x.I18n.t("days")})]})]})},[Ss.wq.PURCHASE_DATE]:ws,[Ss.wq.PURCHASED_PRODUCT]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a}=(0,he.Z)(ds.t),r=(0,k.Z)((e=>e(ds.t).getProducts()),[]).map((e=>({value:e.id,label:e.name})));return(0,s.useEffect)((()=>{n.operator!==cs.f5.ALL&&n.operator!==cs.f5.ANY&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{a({operator:e.target.value},t)},automationId:"select-operator",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{isMulti:!0,dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectWooPurchasedProduct"),options:r,value:(0,La.filter)((e=>{if(void 0!==n.product_ids&&0!==n.product_ids.length)return-1!==n.product_ids.indexOf(e.value)}),r),onChange:e=>{a({product_ids:(e||[]).map((e=>e.value))},t)},automationId:"select-segment-products"},"select-segment-products")})]})},[Ss.wq.PURCHASED_CATEGORY]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a}=(0,he.Z)(ds.t),r=(0,k.Z)((e=>e(ds.t).getProductCategories()),[]).map((e=>({value:e.id,label:e.name})));return(0,s.useEffect)((()=>{n.operator!==cs.f5.ALL&&n.operator!==cs.f5.ANY&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{a({operator:e.target.value},t)},automationId:"select-operator",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{isMulti:!0,dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectWooPurchasedCategory"),options:r,value:(0,La.filter)((e=>{if(void 0!==n.category_ids&&0!==n.category_ids.length)return-1!==n.category_ids.indexOf(e.value)}),r),onChange:e=>{a({category_ids:(e||[]).map((e=>e.value))},t)},automationId:"select-segment-category"},"select-segment-category")})]})},[Ss.wq.SINGLE_ORDER_VALUE]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getWooCommerceCurrencySymbol()),[]);return(0,s.useEffect)((()=>{void 0===n.single_order_value_type&&a({single_order_value_type:">"},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.single_order_value_type,onChange:e=>{r("single_order_value_type",t,e)},automationId:"select-single-order-value-type",children:[(0,m.jsx)("option",{value:">",children:d.x.I18n.t("moreThan")}),(0,m.jsx)("option",{value:">=",children:d.x.I18n.t("moreThanOrEqual")}),(0,m.jsx)("option",{value:"=",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"!=",children:d.x.I18n.t("notEquals")}),(0,m.jsx)("option",{value:"<=",children:d.x.I18n.t("lessThanOrEqual")}),(0,m.jsx)("option",{value:"<",children:d.x.I18n.t("lessThan")})]},"select"),(0,m.jsx)(at.I,{"data-automation-id":"input-single-order-value-amount",type:"number",min:0,step:.01,value:n.single_order_value_amount||"",placeholder:d.x.I18n.t("wooSpentAmount"),onChange:e=>{r("single_order_value_amount",t,e)}}),(0,m.jsx)("div",{children:i})]}),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsx)("div",{children:d.x.I18n.t("inTheLast")}),(0,m.jsx)(at.I,{"data-automation-id":"input-single-order-value-days",type:"number",min:1,value:n.single_order_value_days||"",placeholder:d.x.I18n.t("daysPlaceholder"),onChange:e=>{r("single_order_value_days",t,e)}}),(0,m.jsx)("div",{children:d.x.I18n.t("days")})]})]})},[Ss.wq.TOTAL_SPENT]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getWooCommerceCurrencySymbol()),[]);return(0,s.useEffect)((()=>{void 0===n.total_spent_type&&a({total_spent_type:">"},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.total_spent_type,onChange:e=>{r("total_spent_type",t,e)},automationId:"select-total-spent-type",children:[(0,m.jsx)("option",{value:"=",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"!=",children:d.x.I18n.t("notEquals")}),(0,m.jsx)("option",{value:">",children:d.x.I18n.t("moreThan")}),(0,m.jsx)("option",{value:"<",children:d.x.I18n.t("lessThan")})]},"select"),(0,m.jsx)(at.I,{"data-automation-id":"input-total-spent-amount",type:"number",min:0,step:.01,value:n.total_spent_amount||"",placeholder:d.x.I18n.t("wooSpentAmount"),onChange:e=>{r("total_spent_amount",t,e)}}),(0,m.jsx)("div",{children:i})]}),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsx)("div",{children:d.x.I18n.t("inTheLast")}),(0,m.jsx)(at.I,{"data-automation-id":"input-total-spent-days",type:"number",min:1,value:n.total_spent_days||"",placeholder:d.x.I18n.t("daysPlaceholder"),onChange:e=>{r("total_spent_days",t,e)}}),(0,m.jsx)("div",{children:d.x.I18n.t("days")})]})]})},[Ss.wq.AVERAGE_SPENT]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getWooCommerceCurrencySymbol()),[]);return(0,s.useEffect)((()=>{[">",">=","=","!=","<=","<"].includes(n.average_spent_type)||a({average_spent_type:">"},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.average_spent_type,onChange:e=>{r("average_spent_type",t,e)},automationId:"select-average-spent-type",children:[(0,m.jsx)("option",{value:">",children:d.x.I18n.t("moreThan")}),(0,m.jsx)("option",{value:">=",children:d.x.I18n.t("moreThanOrEqual")}),(0,m.jsx)("option",{value:"=",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"!=",children:d.x.I18n.t("notEquals")}),(0,m.jsx)("option",{value:"<=",children:d.x.I18n.t("lessThanOrEqual")}),(0,m.jsx)("option",{value:"<",children:d.x.I18n.t("lessThan")})]},"select"),(0,m.jsx)(at.I,{"data-automation-id":"input-average-spent-amount",type:"number",min:0,step:.01,value:n.average_spent_amount||"",placeholder:d.x.I18n.t("wooSpentAmount"),onChange:e=>{r("average_spent_amount",t,e)}}),(0,m.jsx)("div",{children:i})]}),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsx)("div",{children:d.x.I18n.t("inTheLast")}),(0,m.jsx)(at.I,{"data-automation-id":"input-average-spent-days",type:"number",min:1,step:1,value:n.average_spent_days||"",placeholder:d.x.I18n.t("daysPlaceholder"),onChange:e=>{r("average_spent_days",t,e)}}),(0,m.jsx)("div",{children:d.x.I18n.t("days")})]})]})},[Ss.wq.USED_PAYMENT_METHOD]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getPaymentMethods()),[]).map((e=>({value:e.id,label:e.name})));return(0,s.useEffect)((()=>{n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{isMaxContentWidth:!0,value:n.operator,onChange:e=>{a({operator:e.target.value},t)},automationId:"select-operator-used-payment-methods",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator-used-payment-methods"),(0,m.jsx)(ls.ReactSelect,{isFullWidth:!0,isMulti:!0,placeholder:d.x.I18n.t("selectWooPaymentMethods"),options:i,value:(0,La.filter)((e=>{if(n.payment_methods)return-1!==n.payment_methods.indexOf(e.value)}),i),onChange:e=>{a({payment_methods:(e||[]).map((e=>e.value))},t)},automationId:"select-payment-methods"},"select-payment-methods")]}),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsx)("div",{children:d.x.I18n.t("inTheLast")}),(0,m.jsx)(at.I,{"data-automation-id":"input-used-payment-days",type:"number",min:1,value:n.used_payment_method_days||"",placeholder:d.x.I18n.t("daysPlaceholder"),onChange:e=>{r("used_payment_method_days",t,e)}}),(0,m.jsx)("div",{children:d.x.I18n.t("days")})]})]})}};function Ns(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t);(0,s.useEffect)((()=>{n.action===cs.jx.WORDPRESS_ROLE&&n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]);const i=(0,k.Z)((e=>e(ds.t).getWordpressRoles()),[]).map((e=>({value:e.role_id,label:e.role_name})));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{isFullWidth:!0,value:n.operator,onChange:e=>{r("operator",t,e)},children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,isMulti:!0,automationId:"segment-wordpress-role",placeholder:d.x.I18n.t("selectUserRolePlaceholder"),options:i,value:(0,La.filter)((e=>{if(n.wordpressRole)return-1!==n.wordpressRole.indexOf(e.value)}),i),onChange:e=>{a({wordpressRole:(0,La.map)("value",e)},t)}})})]})}let Cs;!function(e){e.HIGHER_THAN="higherThan",e.LOWER_THAN="lowerThan",e.EQUALS="equals",e.NOT_EQUALS="not_equals",e.UNKNOWN="unknown",e.NOT_UNKNOWN="not_unknown"}(Cs||(Cs={}));const Is=[Cs.HIGHER_THAN,Cs.LOWER_THAN,Cs.EQUALS,Cs.NOT_EQUALS,Cs.UNKNOWN,Cs.NOT_UNKNOWN];function Ts(e){return"string"==typeof e.value&&e.value.length>0&&("equals"===e.operator||"contains"===e.operator||"not_equals"===e.operator||"more_than"===e.operator||"less_than"===e.operator)}function Ds(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilterFromEvent:a,updateSegmentFilter:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{void 0===n.operator&&r({operator:"equals",value:""},t)}),[r,n,t]),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{automationId:"text-custom-field-operator",value:n.operator,onChange:e=>{a("operator",t,e)},children:[(0,m.jsx)("option",{value:"equals",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"not_equals",children:d.x.I18n.t("notEquals")}),(0,m.jsx)("option",{value:"contains",children:d.x.I18n.t("contains")}),(0,m.jsx)("option",{value:"more_than",children:d.x.I18n.t("moreThan")}),(0,m.jsx)("option",{value:"less_than",children:d.x.I18n.t("lessThan")})]},"select"),(0,m.jsx)(at.I,{"data-automation-id":"text-custom-field-value",value:n.value||"",onChange:e=>{a("value",t,e)},placeholder:d.x.I18n.t("value")},"input")]})}function Es(e){return"string"==typeof e.value&&e.value.length>0}function Ps(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a}=(0,he.Z)(ds.t),r=(0,k.Z)((e=>e(ds.t).getCustomFieldsList()),[]),i=(0,La.find)({id:Number(n.custom_field_id)},r);if(!i)return null;const s=i.params;if(!s||!Array.isArray(s.values))return null;const o=s.values.map((e=>({value:e.value,label:e.value})));return(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectValue"),options:o,value:n.value?{value:n.value,label:n.value}:null,onChange:e=>{a({value:e.value,operator:"equals"},t)},automationId:"segment-wordpress-role"})}var Os=n(42384),Rs=n(95822);const Ms=e=>{if(null!==e){if(Array.isArray(e))throw new Error("convertDateToString can process only single date array given");return(0,Rs.default)(e,"yyyy-MM-dd 00:00:00")}},As=e=>{const t=(0,gs.default)(e);if((0,xs.default)(t))return t},Ls={month:function(e){let{onChange:t,item:n,filterIndex:a}=e;return(0,s.useEffect)((()=>{void 0!==n.value&&""!==n.value||t((0,La.assign)(n,{value:"2017-01-01 00:00:00"}),a)}),[t,n,a]),(0,m.jsxs)(lt.Select,{value:n.value,onChange:e=>{t((0,La.assign)(n,{value:e.target.value}),a)},children:[(0,m.jsx)("option",{value:"2017-01-01 00:00:00",children:d.x.I18n.t("january")}),(0,m.jsx)("option",{value:"2017-02-01 00:00:00",children:d.x.I18n.t("february")}),(0,m.jsx)("option",{value:"2017-03-01 00:00:00",children:d.x.I18n.t("march")}),(0,m.jsx)("option",{value:"2017-04-01 00:00:00",children:d.x.I18n.t("april")}),(0,m.jsx)("option",{value:"2017-05-01 00:00:00",children:d.x.I18n.t("may")}),(0,m.jsx)("option",{value:"2017-06-01 00:00:00",children:d.x.I18n.t("june")}),(0,m.jsx)("option",{value:"2017-07-01 00:00:00",children:d.x.I18n.t("july")}),(0,m.jsx)("option",{value:"2017-08-01 00:00:00",children:d.x.I18n.t("august")}),(0,m.jsx)("option",{value:"2017-09-01 00:00:00",children:d.x.I18n.t("september")}),(0,m.jsx)("option",{value:"2017-10-01 00:00:00",children:d.x.I18n.t("october")}),(0,m.jsx)("option",{value:"2017-11-01 00:00:00",children:d.x.I18n.t("november")}),(0,m.jsx)("option",{value:"2017-12-01 00:00:00",children:d.x.I18n.t("december")})]},"select")},year:function(e){let{onChange:t,item:n,filterIndex:a}=e;const r=(0,Os.default)(new Date);return(0,s.useEffect)((()=>{void 0!==n.value&&""!==n.value||t((0,La.assign)(n,{value:`${r}-01-01 00:00:00`,operator:"equals"}),a)}),[r,t,n,a]),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{t((0,La.assign)(n,{operator:e.target.value}),a)},children:[(0,m.jsx)("option",{value:"equals",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"before",children:d.x.I18n.t("before")}),(0,m.jsx)("option",{value:"after",children:d.x.I18n.t("after")})]},"select-operator"),(0,m.jsx)(lt.Select,{value:n.value,onChange:e=>{t((0,La.assign)(n,{value:e.target.value}),a)},children:(0,La.range)(0,100).map((e=>(0,m.jsx)("option",{value:r-e+"-01-01 00:00:00",children:r-e},r-e)))},"select-year")]})},year_month:function(e){let{onChange:t,item:n,filterIndex:a}=e;return(0,s.useEffect)((()=>{void 0!==n.value&&""!==n.value||t((0,La.assign)(n,{value:`${(0,Rs.default)(new Date,"yyyy-MM-dd")} 00:00:00`,operator:"equals"}),a)}),[t,n,a]),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{t((0,La.assign)(n,{operator:e.target.value}),a)},children:[(0,m.jsx)("option",{value:"equals",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"before",children:d.x.I18n.t("before")}),(0,m.jsx)("option",{value:"after",children:d.x.I18n.t("after")})]},"select-operator"),(0,m.jsx)(Rn,{onChange:e=>t((0,La.assign)(n,{value:Ms(e)}),a),selected:n.value?As(n.value):void 0,dateFormat:"MM/yyyy",showMonthYearPicker:!0})]})},year_month_day:function(e){let{onChange:t,item:n,filterIndex:a}=e;return(0,s.useEffect)((()=>{void 0!==n.value&&""!==n.value||t((0,La.assign)(n,{value:`${(0,Rs.default)(new Date,"yyyy-MM-dd")} 00:00:00`,operator:"equals"}),a)}),[t,n,a]),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>{t((0,La.assign)(n,{operator:e.target.value}),a)},children:[(0,m.jsx)("option",{value:"equals",children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:"before",children:d.x.I18n.t("before")}),(0,m.jsx)("option",{value:"after",children:d.x.I18n.t("after")})]},"select-operator"),(0,m.jsx)(Rn,{dateFormat:"MMM d, yyyy",onChange:e=>t((0,La.assign)(n,{value:Ms(e)}),a),selected:n.value?As(n.value):void 0})]})}};var Fs;!function(e){e.DATE="date",e.TEXT="text",e.TEXTAREA="textarea",e.RADIO="radio",e.CHECKBOX="checkbox",e.SELECT="select"}(Fs||(Fs={}));const qs={[Fs.TEXT]:Ts,[Fs.TEXTAREA]:Ts,[Fs.RADIO]:Es,[Fs.SELECT]:Es,[Fs.CHECKBOX]:function(e){return"1"===e.value||"0"===e.value},[Fs.DATE]:function(e){return("month"===e.date_type||!("string"!=typeof e.operator||e.operator.length<1))&&"string"==typeof e.value&&e.value.length>1}},Ws={[Fs.TEXT]:Ds,[Fs.TEXTAREA]:Ds,[Fs.RADIO]:Ps,[Fs.SELECT]:Ps,[Fs.CHECKBOX]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilterFromEvent:a,updateSegmentFilter:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{"1"!==n.value&&"0"!==n.value&&r({operator:"equals",value:"1"},t)}),[r,n,t]),(0,m.jsxs)(lt.Select,{value:n.value,onChange:e=>a("value",t,e),children:[(0,m.jsx)("option",{value:"1",children:d.x.I18n.t("checked")}),(0,m.jsx)("option",{value:"0",children:d.x.I18n.t("unchecked")})]},"select")},[Fs.DATE]:function(e){let{customField:t,filterIndex:n}=e;const a=(0,k.Z)((e=>e(ds.t).getSegmentFilter(n)),[n]),{updateSegmentFilter:r}=(0,he.Z)(ds.t);(0,s.useEffect)((()=>{a.date_type!==t.params.date_type&&r({date_type:t.params.date_type,value:""},n)}),[a.date_type,r,t.params.date_type,n]);const i=Ls[t.params.date_type];return i?(0,m.jsx)(i,{item:a,onChange:r,filterIndex:n}):null}},{subscribersLimitReached:Bs,subscribersLimit:Us,subscribersCount:Vs,premiumActive:Zs,hasValidApiKey:$s,hasValidPremiumKey:Ys,isPremiumPluginInstalled:Hs,premiumPluginDownloadUrl:zs,premiumPluginActivationUrl:Ks,pluginPartialKey:Gs}=d.x,Qs=$s||Ys,Xs=e=>(0,m.jsx)("p",{children:x()(e,/(\[subscribersCount]|\[subscribersLimit])/g,(e=>"[subscribersCount]"===e?Vs:Us))}),Js=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_blank";return(0,m.jsx)(Ae.z,{href:t,target:n,rel:"noopener noreferrer",children:e})};function eo(e){let t,n,{message:a,actionButton:r}=e;if(Qs&&!Zs)t=Xs((0,Me.__)("Your current MailPoet plan includes advanced features, but they require the MailPoet Premium plugin to be installed and activated.","mailpoet")),n=Hs?Js((0,Me.__)("Activate MailPoet Premium plugin","mailpoet"),Ks,"_self"):Js((0,Me.__)("Download MailPoet Premium plugin","mailpoet"),zs);else if(Bs){t=Xs((0,Me.__)("Congratulations, you now have [subscribersCount] subscribers! Your plan is limited to [subscribersLimit] subscribers. You need to upgrade now to be able to continue using MailPoet.","mailpoet"));const e=Qs?d.x.MailPoetComUrlFactory.getUpgradeUrl(Gs):d.x.MailPoetComUrlFactory.getPurchasePlanUrl(+Vs+1);n=Js((0,Me.__)("Upgrade your plan","mailpoet"),e)}else t=a,n=r;return(0,m.jsx)(At.K,{title:(0,Me.__)("This is a Premium feature","mailpoet"),message:t,actionButton:n})}function to(){return(0,m.jsx)(eo,{message:(()=>{const e=d.x.I18n.t("premiumFeatureMultipleConditions");return(0,m.jsx)("p",{children:x()(e,/\[link](.*?)\[\/link]/g,(e=>(0,m.jsx)("a",{href:d.x.premiumLink,target:"_blank",rel:"noopener noreferrer",children:e},e)))})})(),actionButton:(0,m.jsx)(Ae.z,{href:d.x.MailPoetComUrlFactory.getPurchasePlanUrl(d.x.subscribersCount,d.x.currentWpUserEmail,null,{utm_medium:"segments",utm_campaign:"signup"}),target:"_blank",rel:"noopener noreferrer",children:d.x.I18n.t("premiumBannerCtaFree")})})}const no=["is","isNot","contains","notContains","startsWith","notStartsWith","endsWith","notEndsWith"];function ao(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilterFromEvent:a,updateSegmentFilter:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{no.includes(n.operator)||r({operator:"is",value:""},t)}),[r,n,t]),(0,m.jsxs)(Nn.Grid.CenteredRow,{children:[(0,m.jsxs)(lt.Select,{automationId:"subscriber-text-field-select",value:n.operator,onChange:e=>{a("operator",t,e)},children:[(0,m.jsx)("option",{value:"is",children:d.x.I18n.t("is")}),(0,m.jsx)("option",{value:"isNot",children:d.x.I18n.t("isNot")}),(0,m.jsx)("option",{value:"contains",children:d.x.I18n.t("contains")}),(0,m.jsx)("option",{value:"notContains",children:d.x.I18n.t("notContains")}),(0,m.jsx)("option",{value:"startsWith",children:d.x.I18n.t("startsWith")}),(0,m.jsx)("option",{value:"notStartsWith",children:d.x.I18n.t("notStartsWith")}),(0,m.jsx)("option",{value:"endsWith",children:d.x.I18n.t("endsWith")}),(0,m.jsx)("option",{value:"notEndsWith",children:d.x.I18n.t("notEndsWith")})]},"select"),(0,m.jsx)(at.I,{"data-automation-id":"text-custom-field-value",value:n.value||"",onChange:e=>{a("value",t,e)},placeholder:d.x.I18n.t("value")},"input")]})}const ro={[cs.jx.WORDPRESS_ROLE]:Ns,[cs.jx.SUBSCRIBER_SCORE]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{Is.includes(n.operator)||a({operator:Cs.HIGHER_THAN},t),n.operator!==Cs.HIGHER_THAN&&n.operator!==Cs.LOWER_THAN&&n.operator!==Cs.EQUALS&&n.operator!==Cs.NOT_EQUALS||void 0!==n.value||a({value:""},t),n.operator!==Cs.UNKNOWN&&n.operator!==Cs.NOT_UNKNOWN||a({value:null},t)}),[a,n,t]),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(i=e=>"{condition}"===e?(0,m.jsxs)(lt.Select,{value:n.operator,automationId:"segment-subscriber-score-operator",onChange:e=>{r("operator",t,e)},children:[(0,m.jsx)("option",{value:Cs.HIGHER_THAN,children:d.x.I18n.t("higherThan")}),(0,m.jsx)("option",{value:Cs.LOWER_THAN,children:d.x.I18n.t("lowerThan")}),(0,m.jsx)("option",{value:Cs.EQUALS,children:d.x.I18n.t("equals")}),(0,m.jsx)("option",{value:Cs.NOT_EQUALS,children:d.x.I18n.t("notEquals")}),(0,m.jsx)("option",{value:Cs.UNKNOWN,children:d.x.I18n.t("unknown")}),(0,m.jsx)("option",{value:Cs.NOT_UNKNOWN,children:d.x.I18n.t("notUnknown")})]},"select"):"{score}"===e?(n.operator===Cs.HIGHER_THAN||n.operator===Cs.LOWER_THAN||n.operator===Cs.EQUALS||n.operator===Cs.NOT_EQUALS)&&(0,m.jsx)(at.I,{type:"number",value:n.value||"","data-automation-id":"segment-subscriber-score-value",onChange:e=>{r("value",t,e)},min:"0",placeholder:d.x.I18n.t("subscriberScorePlaceholder")},"input"):"string"==typeof e&&e.trim().length>0?n.operator!==Cs.UNKNOWN&&n.operator!==Cs.NOT_UNKNOWN&&(0,m.jsx)("div",{children:e},"score"):null,d.x.I18n.t("subscriberScoreSentence").split(/({condition})|({score})|(\b%\b)/gim).map(i))});var i},[cs.jx.SUBSCRIBED_DATE]:ws,[cs.jx.MAILPOET_CUSTOM_FIELD]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a}=(0,he.Z)(ds.t),r=(0,k.Z)((e=>e(ds.t).getCustomFieldsList()),[]),i=(0,La.find)({id:Number(n.custom_field_id)},r),s=r.map((e=>({value:e.id.toString(),label:e.name}))),o=Ws[n.custom_field_type];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectCustomFieldPlaceholder"),options:s,automationId:"select-custom-field",value:(0,La.find)((e=>{if(n.custom_field_id)return n.custom_field_id===e.value}),s),onChange:e=>{const n=(0,La.find)({id:Number(e.value)},r);n&&a({custom_field_id:e.value,custom_field_type:n.type,operator:void 0,value:void 0},t)}})}),(0,m.jsx)("div",{children:o&&(0,m.jsx)(o,{customField:i,filterIndex:t})})]})},[cs.jx.SUBSCRIBED_TO_LIST]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),a=(0,k.Z)((e=>e(ds.t).getStaticSegmentsList()),[]),{updateSegmentFilter:r,updateSegmentFilterFromEvent:i}=(0,he.Z)(ds.t);(0,s.useEffect)((()=>{n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&r({operator:cs.f5.ANY},t)}),[r,n,t]);const o=a.map((e=>({value:e.id,label:e.name})));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{isFullWidth:!0,value:n.operator,onChange:e=>{i("operator",t,e)},children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,isMulti:!0,placeholder:d.x.I18n.t("searchLists"),options:o,value:(0,La.filter)((e=>{if(!n.segments)return;const t=e.value;return-1!==n.segments.indexOf(t)}),o),onChange:e=>{r({segments:(0,La.map)((0,La.parseInt)(10),(0,La.map)("value",e))},t)}})})]})},[cs.jx.SUBSCRIBER_TAG]:function(e){let{filterIndex:t}=e;return Mt.Hooks.applyFilters("mailpoet_dynamic_segments_filter_subscriber_tag",(0,m.jsx)(to,{}),t)},[cs.jx.SUBSCRIBER_FIRST_NAME]:ao,[cs.jx.SUBSCRIBER_LAST_NAME]:ao,[cs.jx.SUBSCRIBER_EMAIL]:ao,[cs.jx.SUBSCRIBED_VIA_FORM]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),a=(0,k.Z)((e=>e(ds.t).getSignupForms()),[]),{updateSegmentFilter:r,updateSegmentFilterFromEvent:i}=(0,he.Z)(ds.t);(0,s.useEffect)((()=>{n.operator!==cs.f5.ANY&&n.operator!==cs.f5.NONE&&r({operator:cs.f5.ANY},t)}),[r,n,t]);const o=a.map((e=>({value:e.id,label:e.name})));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{isFullWidth:!0,value:n.operator,onChange:e=>{i("operator",t,e)},children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",isFullWidth:!0,isMulti:!0,placeholder:d.x.I18n.t("searchForms"),options:o,value:o.filter((e=>{if(!n.form_ids)return;const t=e.value;return-1!==n.form_ids.indexOf(t)})),onChange:e=>{r({form_ids:e.map((e=>e.value))},t)}})})]})}},io={[cs.Bt.Email]:function(e){return!!Object.values(cs.zd).some((t=>t===e.action))&&(e.action===cs.zd.CLICKED_ANY||(e.action===cs.zd.CLICKED?!!e.newsletter_id:e.action!==cs.zd.OPENS_ABSOLUTE_COUNT&&e.action!==cs.zd.MACHINE_OPENS_ABSOLUTE_COUNT?Array.isArray(e.newsletters)&&e.newsletters.length>0:!!e.days&&!!e.opens&&!!e.operator))},[cs.Bt.WooCommerce]:function(e){if(!Object.values(Ss.wq).some((t=>t===e.action)))return!1;const t=void 0===e.category_ids||0===e.category_ids.length||!e.operator;if(e.action===Ss.wq.PURCHASED_CATEGORY&&t)return!1;const n=void 0===e.product_ids||0===e.product_ids.length||!e.operator;if(e.action===Ss.wq.PURCHASED_PRODUCT&&n)return!1;const a=void 0===e.country_code||0===e.country_code.length;if(e.action===Ss.wq.CUSTOMER_IN_COUNTRY&&a)return!1;const r=!e.number_of_orders_count||!e.number_of_orders_days||!e.number_of_orders_type;return(e.action!==Ss.wq.NUMBER_OF_ORDERS||!r)&&!!(e.action!==Ss.wq.TOTAL_SPENT||e.total_spent_amount&&e.total_spent_days&&e.total_spent_type)&&!!(e.action!==Ss.wq.SINGLE_ORDER_VALUE||e.single_order_value_amount&&e.single_order_value_days&&e.single_order_value_type)&&!!(e.action!==Ss.wq.AVERAGE_SPENT||e.average_spent_amount&&e.average_spent_type&&e.average_spent_days)&&(e.action!==Ss.wq.USED_PAYMENT_METHOD||!(!e.payment_methods||e.payment_methods.length<1||!e.operator||!e.used_payment_method_days||parseInt(e.used_payment_method_days,10)<1))&&(e.action!==Ss.wq.PURCHASE_DATE||js(e))},[cs.Bt.WordPressRole]:function(e){return e.action&&e.action!==cs.jx.WORDPRESS_ROLE?e.action===cs.jx.MAILPOET_CUSTOM_FIELD?function(e){const t=qs[e.custom_field_type];return!!t&&t(e)}(e):e.action===cs.jx.SUBSCRIBER_SCORE?function(e){if(e.operator===Cs.HIGHER_THAN||e.operator===Cs.LOWER_THAN||e.operator===Cs.EQUALS||e.operator===Cs.NOT_EQUALS){const t=Number(e.value),n=Number(parseFloat(e.value));return!Number.isNaN(t)&&!Number.isNaN(n)&&t>=0&&t<=100}return e.operator===Cs.UNKNOWN||e.operator===Cs.NOT_UNKNOWN}(e):e.action===cs.jx.SUBSCRIBED_TO_LIST?function(e){return(e.operator===cs.f5.ANY||e.operator===cs.f5.ALL||e.operator===cs.f5.NONE)&&Array.isArray(e.segments)&&e.segments.length>0}(e):e.action===cs.jx.SUBSCRIBER_TAG?function(e){return Mt.Hooks.applyFilters("mailpoet_dynamic_segments_filter_subscriber_tag_validate",!1,e)}(e):[cs.jx.SUBSCRIBER_FIRST_NAME,cs.jx.SUBSCRIBER_LAST_NAME,cs.jx.SUBSCRIBER_EMAIL].includes(e.action)?function(e){return!!no.includes(e.operator)&&"string"==typeof e.value&&e.value.length>0}(e):e.action===cs.jx.SUBSCRIBED_VIA_FORM?function(e){return(e.operator===cs.f5.ANY||e.operator===cs.f5.NONE)&&Array.isArray(e.form_ids)&&e.form_ids.length>0}(e):!(!e.operator||!e.value)&&!!Object.values(_s).includes(e.operator)&&js(e):Array.isArray(e.wordpressRole)&&e.wordpressRole.length>0},[cs.Bt.WooCommerceMembership]:function(e){const t=!e.plan_ids||!e.plan_ids.length||!e.operator;return e.action!==Ss.hs.MEMBER_OF||!t},[cs.Bt.WooCommerceSubscription]:function(e){const t=!e.product_ids||!e.product_ids.length||!e.operator;return e.action!==Ss.ht.ACTIVE_SUBSCRIPTIONS||!t}};function so(e){return!(e.length<1)&&0===e.map((e=>void 0!==io[e.segmentType]&&io[e.segmentType](e))).filter((e=>!1===e)).length}let oo,lo;function co(){const e=(0,k.Z)((e=>e(ds.t).getSegment()),[]),t=(0,k.Z)((e=>e(ds.t).getSubscriberCount()),[]),{updateSubscriberCount:n}=(0,he.Z)(ds.t),a=JSON.stringify(e),r=(0,s.useRef)(1),i=(0,s.useRef)(null),o=(0,s.useRef)(!1),l=(0,s.useRef)((0,wn.debounce)((function e(t){if(o.current)return void(i.current=t);i.current=null,r.current+=1;const a=r.current;o.current=!0,function(e){const t={filters:e.filters,filters_connect:e.filters_connect};return jn().isEqual(t,oo)?Promise.resolve(lo):(oo={filters:[...e.filters],filters_connect:e.filters_connect},d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"dynamic_segments",action:"getCount",data:e,timeout:2e4}).then((e=>{const{data:t}=e;return lo={count:t.count,errors:void 0},lo})))}(t).then((t=>{if(o.current=!1,i.current)return void e(i.current);if(a!==r.current)return;const s={loading:!1};t&&(s.count=t.count,s.errors=t.errors),n(s)}),(e=>{o.current=!1;const t={},a=e.errors.map((e=>e.message));t.loading=!1,t.count=void 0,t.errors=a,n(t)}))}),2e3,{trailing:!0}));return(0,s.useEffect)((()=>{so(e.filters)?(n({loading:!0,count:void 0,errors:void 0}),(0,l.current)(e)):n({count:void 0,loading:!1})}),[e,a,n]),t.errors?(0,m.jsx)("div",{className:"mailpoet-form-field",children:(0,m.jsxs)("span",{className:"mailpoet-form-error-message",children:[d.x.I18n.t("dynamicSegmentSizeCalculatingTimeout")," ",(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/237-guide-to-subscriber-segmentation?utm_source=plugin&utm_medium=segments","data-beacon-article":"5a574bd92c7d3a194368233e",target:"_blank",className:"mailpoet-form-error-message",rel:"noopener noreferrer",children:d.x.I18n.t("learnMore")})]})}):t.loading||void 0!==t.count?t.loading?(0,m.jsx)("div",{className:"mailpoet-form-field",children:(0,m.jsx)("span",{className:"mailpoet-form-notice-message",children:d.x.I18n.t("dynamicSegmentSizeIsCalculated")})}):(0,m.jsx)("div",{className:"mailpoet-form-field",children:(0,m.jsx)("span",{className:"mailpoet-form-notice-message",children:d.x.I18n.t("dynamicSegmentSize").replace("%1$d",t.count.toLocaleString())})}):(0,m.jsx)("span",{})}const uo={[cs.Bt.Email]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),a=fs[n.action];return a?(0,m.jsx)(a,{filterIndex:t}):null},[cs.Bt.WooCommerce]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),a=ks[n.action];return(0,m.jsx)(a,{filterIndex:t})},[cs.Bt.WordPressRole]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]);let a;return a=n.action?ro[n.action]:Ns,a?(0,m.jsx)(a,{filterIndex:t}):null},[cs.Bt.WooCommerceMembership]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getMembershipPlans()),[]).map((e=>({value:e.id,label:e.name})));return(0,s.useEffect)((()=>{n.action===Ss.hs.MEMBER_OF&&n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>r("operator",t,e),automationId:"select-operator",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{isMulti:!0,dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectWooMembership"),options:i,value:(0,La.filter)((e=>!!n.plan_ids&&-1!==n.plan_ids.indexOf(e.value)),i),onChange:e=>{a({plan_ids:(e||[]).map((e=>e.value))},t)},automationId:"select-segment-plans"},"select-segment-membership-plan")})]})},[cs.Bt.WooCommerceSubscription]:function(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]),{updateSegmentFilter:a,updateSegmentFilterFromEvent:r}=(0,he.Z)(ds.t),i=(0,k.Z)((e=>e(ds.t).getSubscriptionProducts()),[]).map((e=>({value:e.id,label:e.name})));return(0,s.useEffect)((()=>{n.action===Ss.ht.ACTIVE_SUBSCRIPTIONS&&n.operator!==cs.f5.ANY&&n.operator!==cs.f5.ALL&&n.operator!==cs.f5.NONE&&a({operator:cs.f5.ANY},t)}),[a,n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsxs)(lt.Select,{value:n.operator,onChange:e=>r("operator",t,e),automationId:"select-operator",children:[(0,m.jsx)("option",{value:cs.f5.ANY,children:d.x.I18n.t("anyOf")}),(0,m.jsx)("option",{value:cs.f5.ALL,children:d.x.I18n.t("allOf")}),(0,m.jsx)("option",{value:cs.f5.NONE,children:d.x.I18n.t("noneOf")})]},"select-operator")}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{isMulti:!0,dimension:"small",isFullWidth:!0,placeholder:d.x.I18n.t("selectWooSubscription"),options:i,value:(0,La.filter)((e=>!!n.product_ids&&-1!==n.product_ids.indexOf(e.value)),i),onChange:e=>{a({product_ids:(e||[]).map((e=>e.value))},t)},automationId:"select-segment-products"},"select-segment-category")})]})}};function po(e){let{filterIndex:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegmentFilter(t)),[t]);if(void 0===n||void 0===uo[n.segmentType])return null;const a=uo[n.segmentType];return(0,m.jsx)(a,{filterIndex:t})}function mo(){const e=(0,k.Z)((e=>e(ds.t).getSegment()),[]),t=[cs.zd.OPENED,cs.zd.OPENS_ABSOLUTE_COUNT,cs.zd.MACHINE_OPENED,cs.zd.MACHINE_OPENS_ABSOLUTE_COUNT];let n=!1;return e.filters.forEach((e=>{t.includes(e.action)&&(n=!0)})),n?(0,m.jsx)("div",{className:"mailpoet-form-field",children:(0,m.jsx)("span",{className:"mailpoet-form-notice-message",children:d.x.I18n.t("privacyProtectionNotice")})}):(0,m.jsx)("span",{})}const ho=Mt.Hooks.applyFilters("mailpoet_dynamic_segments_form_filters_before",(()=>null)),fo=Mt.Hooks.applyFilters("mailpoet_dynamic_filters_filter_before",(()=>null)),go=Mt.Hooks.applyFilters("mailpoet_dynamic_filters_filter_after",(()=>(0,m.jsx)("div",{className:"mailpoet-gap"})));function xo(e){let{segmentId:t}=e;const n=(0,k.Z)((e=>e(ds.t).getSegment()),[]),a=(0,k.Z)((e=>e(ds.t).getAvailableFilters()),[]),r=(0,k.Z)((e=>e(ds.t).findFiltersValueForSegment(n)),[n]),i=(0,k.Z)((e=>e(ds.t).getSubscriberCount()),[]),o=(0,k.Z)((e=>e(ds.t).getErrors()),[]),{updateSegment:l,updateSegmentFilter:c,handleSave:u}=(0,he.Z)(ds.t),[p,h]=(0,s.useState)(!1),f=Mt.Hooks.applyFilters("mailpoet_dynamic_segments_form_add_condition_action",(()=>{h(!0)}));return(0,m.jsxs)("form",{className:"mailpoet_form",children:[o.length>0&&(0,m.jsx)(Kt,{errors:o.map((e=>({message:e})))}),(0,m.jsxs)("div",{className:"mailpoet-form-grid",children:[(0,m.jsxs)("div",{className:"mailpoet-form-field-name form-field-row-name mailpoet-segments-name-section",children:[(0,m.jsx)(_t.X,{level:4,children:(0,m.jsx)("label",{htmlFor:"field_name",children:d.x.I18n.t("name")})}),(0,m.jsx)("div",{className:"mailpoet-form-field",children:(0,m.jsx)(at.I,{isFullWidth:!0,type:"text",name:"name",id:"field_name",defaultValue:n.name,"data-automation-id":"input-name",onChange:e=>{l({name:e.target.value})}})})]}),(0,m.jsxs)("div",{className:"mailpoet-form-field-description form-field-row-description mailpoet-segments-description-section",children:[(0,m.jsx)(_t.X,{level:4,children:(0,m.jsx)("label",{htmlFor:"field_description",children:d.x.I18n.t("description")})}),(0,m.jsx)("p",{className:"mailpoet-form-description",children:d.x.I18n.t("segmentDescriptionTip")}),(0,m.jsx)("div",{className:"mailpoet-form-field",children:(0,m.jsx)(it.g,{isFullWidth:!0,name:"description",id:"field_description",value:n.description,"data-automation-id":"input-description",onChange:e=>{l({description:e.target.value})}})})]}),(0,m.jsxs)("div",{className:"mailpoet-segments-segments-section",children:[(0,m.jsx)(_t.X,{level:4,children:(0,m.jsx)("label",{htmlFor:"field_filters",children:d.x.I18n.t("formPageTitle")})}),(0,m.jsx)(ho,{}),Array.isArray(r)&&r.map(((e,t)=>(0,m.jsxs)(s.Fragment,{children:[(0,m.jsxs)(Nn.Grid.ThreeColumns,{className:"mailpoet-segments-grid",automationId:`filter-row-${t}`,children:[(0,m.jsx)(fo,{filterRows:r,index:t}),(0,m.jsx)(Nn.Grid.CenteredRow,{children:(0,m.jsx)(ls.ReactSelect,{dimension:"small",placeholder:d.x.I18n.t("selectActionPlaceholder"),options:a,value:e.filterValue,onChange:e=>{c({segmentType:e.group,action:e.value},t)},automationId:"select-segment-action",isFullWidth:!0})}),void 0!==e.index&&(0,m.jsx)(po,{filterIndex:e.index})]}),(0,m.jsx)(go,{index:t})]},e.index))),(0,m.jsx)(Ae.z,{type:"button",variant:"tertiary",iconStart:We.R,onClick:e=>{e.preventDefault(),f(n,l)},children:d.x.I18n.t("addCondition")})]}),p&&(0,m.jsx)("div",{className:"mailpoet-grid-span-two-columns",children:(0,m.jsx)(to,{})}),(0,m.jsxs)("div",{className:"mailpoet-segments-counter-section",children:[(0,m.jsx)(co,{}),(0,m.jsx)(mo,{})]}),(0,m.jsx)("div",{className:"mailpoet-form-actions",children:(0,m.jsx)(Ae.z,{type:"submit",onClick:e=>{e.preventDefault(),u(t)},isDisabled:!so(n.filters)||void 0===i.count,children:d.x.I18n.t("save")})})]})]})}function _o(){const e=(0,Ce.$B)();(0,ds.M)();const{pageLoaded:t}=(0,he.Z)(ds.t);return(0,s.useEffect)((()=>{t(e.params.id)}),[e.params.id,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(St.B,{}),(0,m.jsxs)(_t.X,{level:1,className:"mailpoet-title",children:[(0,m.jsx)("span",{children:d.x.I18n.t("formPageTitle")}),(0,m.jsx)(Ne.Link,{className:"mailpoet-button button button-secondary button-small",to:"/segments",children:d.x.I18n.t("backToList")})]}),(0,m.jsx)(xo,{segmentId:Number(e.params.id)})]})}_o.displayName="SegmentEditor";const bo=[{name:"name",label:d.x.I18n.t("nameColumn"),sortable:!0},{name:"description",label:d.x.I18n.t("description"),sortable:!1},{name:"count",label:d.x.I18n.t("subscribersCountColumn"),sortable:!1},{name:"subscribed",label:d.x.I18n.t("subscribed"),sortable:!1},{name:"updated_at",label:d.x.I18n.t("updatedAtColumn"),sortable:!0}],vo={onLoadingItems:()=>d.x.I18n.t("loadingDynamicSegmentItems"),onNoItemsFound:()=>d.x.I18n.t("noDynamicSegmentItemsFound"),onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneDynamicSegmentTrashed"):d.x.I18n.t("multipleDynamicSegmentsTrashed").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneDynamicSegmentDeleted"):d.x.I18n.t("multipleDynamicSegmentsDeleted").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneDynamicSegmentRestored"):d.x.I18n.t("multipleDynamicSegmentsRestored").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)}},yo=[{name:"edit",className:"mailpoet-hide-on-mobile",link:e=>(0,m.jsx)(Ne.Link,{to:`/edit-segment/${e.id}`,children:d.x.I18n.t("edit")}),display:e=>!e.is_plugin_missing},{name:"duplicate_segment",className:"mailpoet-hide-on-mobile",label:d.x.I18n.t("duplicate"),onClick:(e,t)=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"dynamic_segments",action:"duplicate",data:{id:e.id}}).done((e=>{d.x.Notice.success(d.x.I18n.t("segmentDuplicated").replace("%1$s",(0,Hi.r)(e.data.name),{scroll:!0})),t()})).fail((e=>{d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))},{name:"edit_disabled",className:"mailpoet-hide-on-mobile mailpoet-disabled",link:e=>(0,m.jsx)(Ne.Link,{to:`/edit-segment/${e.id}`,children:d.x.I18n.t("edit")}),display:e=>e.is_plugin_missing},{name:"view_subscribers",link:e=>(0,m.jsx)("a",{href:e.subscribers_url,children:d.x.I18n.t("viewSubscribers")})},{name:"trash",className:"mailpoet-hide-on-mobile"}],wo=[{name:"trash",label:d.x.I18n.t("moveToTrash"),onSuccess:vo.onTrash}];function jo(e,t){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("td",{className:"column-primary","data-colname":d.x.I18n.t("nameColumn"),children:[(0,m.jsx)("span",{className:"mailpoet-listing-title",children:e.name}),t]}),(0,m.jsx)("td",{"data-colname":d.x.I18n.t("description"),children:(0,m.jsx)("abbr",{children:e.description})}),e.is_plugin_missing?(0,m.jsx)("td",{colSpan:"2",className:"column mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("missingPluginMessageColumn"),children:e.missing_plugin_message&&e.missing_plugin_message.message&&e.missing_plugin_message.link?x()(e.missing_plugin_message.message,/\[link](.*?)\[\/link]/g,(t=>(0,m.jsx)("a",{className:"mailpoet-listing-link-important",href:e.missing_plugin_message.link,target:"_blank",rel:"noopener noreferrer",children:t},"missingPluginMessageLink"))):e.missing_plugin_message}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("subscribersCountColumn"),children:parseInt(e.count_all,10).toLocaleString()}),(0,m.jsx)("td",{className:"column mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("subscribed"),children:parseInt(e.count_subscribed,10).toLocaleString()})]}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("updatedAtColumn"),children:[d.x.Date.short(e.created_at),(0,m.jsx)("br",{}),d.x.Date.time(e.created_at)]})]})}function So(e){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,location:e.location,params:e.match.params,search:!0,onRenderItem:jo,endpoint:"dynamic_segments",base_url:"segments",columns:bo,messages:vo,sort_by:"created_at",sort_order:"desc",item_actions:yo,bulk_actions:wo}),(0,m.jsxs)("p",{className:"mailpoet_sending_methods_help help",children:[(0,m.jsxs)("b",{children:[d.x.I18n.t("segmentsTip"),":"]})," ",d.x.I18n.t("segmentsTipText")," ",(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/237-guide-to-subscriber-segmentation?utm_source=plugin&utm_medium=segments&utm_campaign=helpdocs","data-beacon-article":"5a574bd92c7d3a194368233e",target:"_blank",rel:"noopener noreferrer",children:d.x.I18n.t("segmentsTipLink")})]})]})}So.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},So.displayName="DynamicSegmentList";const ko=(0,Ce.EN)(So);function No(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(c.Q,{children:[(0,m.jsxs)(Ne.Link,{className:"mailpoet-button button-secondary",to:"/new",children:[We.R,(0,m.jsx)("span",{children:d.x.I18n.t("new")})]}),(0,m.jsxs)(Ne.Link,{className:"mailpoet-button button-secondary",to:"/new-segment","data-automation-id":"new-segment",children:[We.R,(0,m.jsx)("span",{children:d.x.I18n.t("newSegment")})]})]}),(0,m.jsx)(qe,{subscribersInPlan:d.x.subscribersCount,subscribersInPlanLimit:d.x.subscribersLimit}),(0,m.jsx)(Le,{cacheCalculation:window.mailpoet_subscribers_counts_cache_created_at}),(0,m.jsx)(j,{})]})}const Co=document.getElementById("segments_container");function Io(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(No,{}),(0,m.jsxs)(xi.t,{activeKey:"lists",routerType:"switch-only",children:[(0,m.jsx)(Ti.O,{route:"lists/(.*)?",title:d.x.I18n.t("pageTitle"),children:(0,m.jsx)(rs,{})},"lists"),(0,m.jsx)(Ti.O,{route:"segments/(.*)?",title:d.x.I18n.t("pageTitleSegments"),automationId:"dynamic-segments-tab",children:(0,m.jsx)(ko,{})},"segments")]})]})}function To(){return(0,m.jsx)(l.k.Provider,{value:(0,l.S)(window),children:(0,m.jsxs)(Ne.HashRouter,{children:[(0,m.jsx)(u.w,{}),(0,m.jsxs)(Ce.rs,{children:[(0,m.jsx)(Ce.AW,{exact:!0,path:"/",render:()=>(0,m.jsx)(Ce.l_,{to:"/lists"})}),(0,m.jsx)(Ce.AW,{path:"/new",render:(0,o.withBoundary)(os)}),(0,m.jsx)(Ce.AW,{path:"/edit/:id",render:(0,o.withBoundary)(os)}),(0,m.jsx)(Ce.AW,{path:"/new-segment",render:(0,o.withBoundary)(_o)}),(0,m.jsx)(Ce.AW,{path:"/edit-segment/:id",render:(0,o.withBoundary)(_o)}),(0,m.jsx)(Ce.AW,{path:"/segments/(.*)?",render:(0,o.withBoundary)(Io)}),(0,m.jsx)(Ce.AW,{path:"/lists/(.*)?",render:(0,o.withBoundary)(Io)})]})]})})}Io.displayName="SegmentTabs",Co&&((0,o.registerTranslations)(),i.render((0,m.jsx)(To,{}),Co));const Do=()=>{d.x.trackEvent("Forms > Add New"),setTimeout((()=>{window.location=window.mailpoet_form_template_selection_url}),200)};function Eo(){const[e,t]=(0,s.useState)(!1);return(0,m.jsx)(c.Q,{children:(0,m.jsx)(Ae.z,{onClick:()=>{t(!0),Do()},withSpinner:e,automationId:"create_new_form",variant:"secondary",iconStart:We.R,children:d.x.I18n.t("new")})})}Eo.displayName="FormsHeading";const Po=[{name:"name",label:d.x.I18n.t("formName"),sortable:!0},{name:"segments",label:d.x.I18n.t("segments")},{name:"type",label:d.x.I18n.t("type")},{name:"status",label:d.x.I18n.t("status")},{name:"updated_at",label:d.x.I18n.t("updatedAt"),sortable:!0}],Oo={onTrash:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneFormTrashed"):d.x.I18n.t("multipleFormsTrashed").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onDelete:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneFormDeleted"):d.x.I18n.t("multipleFormsDeleted").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onRestore:e=>{const t=Number(e.meta.count);let n=null;n=1===t?d.x.I18n.t("oneFormRestored"):d.x.I18n.t("multipleFormsRestored").replace("%1$d",t.toLocaleString()),d.x.Notice.success(n)},onNoItemsFound:()=>(0,m.jsxs)("div",{className:"mailpoet-forms-add-new-row",children:[(0,m.jsx)("p",{children:d.x.I18n.t("noItemsFound")}),(0,m.jsx)(o.Button,{onClick:Do,automationId:"add_new_form",iconStart:We.R,children:d.x.I18n.t("new")})]})},Ro=[{name:"trash",label:d.x.I18n.t("moveToTrash"),onSuccess:Oo.onTrash}],Mo=[{name:"edit",className:"mailpoet-hide-on-mobile",label:d.x.I18n.t("edit"),link:function(e){return(0,m.jsx)("a",{href:`admin.php?page=mailpoet-form-editor&id=${e.id}`,children:d.x.I18n.t("edit")})}},{name:"duplicate",className:"mailpoet-hide-on-mobile",label:d.x.I18n.t("duplicate"),onClick:function(e,t){return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"forms",action:"duplicate",data:{id:e.id}}).done((e=>{const n=e.data.name?e.data.name:d.x.I18n.t("noName");d.x.Notice.success(d.x.I18n.t("formDuplicated").replace("%1$s",(0,Hi.r)(n))),t()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}},{name:"trash",className:"mailpoet-hide-on-mobile"}];class Ao extends s.Component{constructor(){super(...arguments),(0,et.Z)(this,"updateStatus",((e,t)=>{t.persist(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"forms",action:"setStatus",data:{id:Number(t.target.getAttribute("data-id")),status:e?"enabled":"disabled"}}).done((e=>{"enabled"===e.data.status&&d.x.Notice.success(d.x.I18n.t("formActivated"))})).fail((n=>{d.x.Notice.showApiErrorNotice(n),t.target.checked=!e}))})),(0,et.Z)(this,"isItemInactive",(e=>"disabled"===e.status)),(0,et.Z)(this,"renderItem",((e,t)=>{var n;null===e.settings&&d.x.Notice.error(d.x.I18n.t("formSettingsCorrupted").replace("%1$s",(0,Hi.r)(e.name)).replace("[link]",`<a class="mailpoet-link" href="admin.php?page=mailpoet-form-editor&id=${parseInt(e.id,10)}">`).replace("[/link]","</a>"));const a=ee()("manage-column","column-primary","has-row-actions"),r=window.mailpoet_segments.filter((t=>-1!==Te().inArray(t.id,e.segments))),i=function(e){var t,n,a,r,i,s,o,l;const c=[];return"1"===(null==e||null===(t=e.form_placement)||void 0===t||null===(n=t.fixed_bar)||void 0===n?void 0:n.enabled)&&c.push(d.x.I18n.t("placeFixedBarFormOnPages")),"1"===(null==e||null===(a=e.form_placement)||void 0===a||null===(r=a.below_posts)||void 0===r?void 0:r.enabled)&&c.push(d.x.I18n.t("placeFormBellowPages")),"1"===(null==e||null===(i=e.form_placement)||void 0===i||null===(s=i.popup)||void 0===s?void 0:s.enabled)&&c.push(d.x.I18n.t("placePopupFormOnPages")),"1"===(null==e||null===(o=e.form_placement)||void 0===o||null===(l=o.slide_in)||void 0===l?void 0:l.enabled)&&c.push(d.x.I18n.t("placeSlideInFormOnPages")),c.length>0?c.join(", "):d.x.I18n.t("placeFormOthers")}(e.settings);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("td",{className:a,children:[(0,m.jsx)("a",{className:"mailpoet-listing-title",href:`admin.php?page=mailpoet-form-editor&id=${e.id}`,children:e.name?e.name:`(${d.x.I18n.t("noName")})`}),t]}),(0,m.jsx)("td",{className:"column","data-colname":d.x.I18n.t("segments"),children:(0,m.jsx)(_r.Eg,{segments:r,dimension:"large",children:"user"===(null===(n=e.settings)||void 0===n?void 0:n.segments_selected_by)&&(0,m.jsx)("span",{className:"mailpoet-tags-prefix",children:d.x.I18n.t("userChoice")})})}),(0,m.jsx)("td",{className:"column","data-colname":d.x.I18n.t("type"),children:i}),(0,m.jsx)("td",{className:"column","data-colname":d.x.I18n.t("status"),children:this.renderStatus(e)}),(0,m.jsxs)("td",{className:"column-date mailpoet-hide-on-mobile","data-colname":d.x.I18n.t("updatedAt"),children:[d.x.Date.short(e.updated_at),(0,m.jsx)("br",{}),d.x.Date.time(e.updated_at)]})]})}))}renderStatus(e){return(0,m.jsxs)("div",{children:[(0,m.jsx)(zn.Z,{onCheck:this.updateStatus,"data-id":e.id,dimension:"small",defaultChecked:"enabled"===e.status}),(0,m.jsxs)("p",{children:[d.x.I18n.t("signups"),": ",e.signups.toLocaleString()]})]})}render(){return(0,m.jsxs)("div",{className:"mailpoet-listing-no-actions-on-mobile",children:[(0,m.jsx)(Eo,{}),(0,m.jsx)(Pe.N,{limit:window.mailpoet_listing_per_page,className:"mailpoet-forms-listing",location:this.props.location,params:this.props.match.params,messages:Oo,search:!1,endpoint:"forms",onRenderItem:this.renderItem,isItemInactive:this.isItemInactive,columns:Po,bulk_actions:Ro,item_actions:Mo})]})}}Ao.propTypes={location:Ee().object.isRequired,match:Ee().shape({params:Ee().object}).isRequired},Ao.displayName="FormList";const Lo=ji(Ao);function Fo(){return(0,m.jsx)(l.k.Provider,{value:(0,l.S)(window),children:(0,m.jsxs)(Ne.HashRouter,{children:[(0,m.jsx)(u.w,{}),(0,m.jsx)(Ce.AW,{path:"*",render:(0,o.withBoundary)(Lo)})]})})}const qo=document.getElementById("forms_container");function Wo(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:d.x.I18n.t("knowledgeBaseIntro")}),(0,m.jsxs)("ul",{className:"mailpoet-text-links",children:[(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/116-common-problems",children:"Common Problems"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/165-newsletters",children:"Newsletters"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/156-migration-questions",children:"Migration Questions"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/149-sending-methods",children:"Sending Methods"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/139-subscription-forms",children:"Subscription Forms"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/114-getting-started",children:"Getting Started"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/123-newsletter-designer",children:"Newsletter Designer"})}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/category/121-subscribers-and-lists",children:"Subscribers and Lists"})})]}),(0,m.jsx)(Ae.z,{target:"_blank",rel:"noreferrer noopener",href:"https://kb.mailpoet.com/",children:d.x.I18n.t("knowledgeBaseButton")})]})}function Bo(e){e.target.select()}function Uo(e,t){if(ot.ZP.isObject(e)){const n=Object.keys(e).map((t=>`${t}: ${e[t]}`));return(0,m.jsx)("textarea",{readOnly:!0,id:t,onFocus:Bo,value:n.join("\n"),style:{width:"100%",height:"400px"}})}return(0,m.jsx)("p",{children:d.x.I18n.t("systemInfoDataError")})}function Vo(){const[e,t]=(0,s.useState)(null),n="mailpoet-system-info",a=window.systemInfoData;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mailpoet_notice notice inline",children:(0,m.jsx)("p",{children:d.x.I18n.t("systemInfoIntro")})}),Uo(a,n),(0,m.jsx)(o.Button,{variant:"secondary",onClick:()=>{!async function(e,t){const n=document.querySelector("#mailpoet-system-info");if(n){if(navigator.clipboard){const e=n.value;return await navigator.clipboard.writeText(e),void t(!0)}n.focus(),n.select(),document.execCommand("copy")?t(!0):t(!1)}else t(!1)}(0,t)},children:d.x.I18n.t("copyToClipboard")}),!0===e&&(0,m.jsx)(p.q,{type:"info",children:(0,m.jsx)("p",{children:d.x.I18n.t("copyToClipboardSuccess")})}),!1===e&&(0,m.jsx)(p.q,{type:"warning",children:(0,m.jsx)("p",{children:d.x.I18n.t("copyToClipboardFailure")})})]})}function Zo(e){return(0,m.jsx)("table",{className:"widefat fixed",style:{maxWidth:e.max_width},children:(0,m.jsx)("tbody",{children:e.rows.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"row-title",children:e.key}),(0,m.jsx)("td",{children:e.value})]},`row_${e.key}`)))})})}function $o(e){return(0,m.jsx)("span",{children:!0===e.children&&e.truthy||!1===e.children&&e.falsy||e.unknown})}function Yo(e){const t=e.status_data,n={active:d.x.I18n.t("running"),inactive:d.x.I18n.t("cronWaiting")},a=Array.isArray(t.last_error)?(0,m.jsx)(m.Fragment,{children:t.last_error.map((e=>(0,m.jsxs)("div",{children:[e.worker,": ",(0,m.jsx)("i",{children:e.message})]},e.worker)))}):t.last_error;return(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:d.x.I18n.t("systemStatusCronStatusTitle")}),(0,m.jsx)(Zo,{max_width:"400px",rows:[{key:d.x.I18n.t("accessible"),value:(0,m.jsx)($o,{children:t.accessible})},{key:d.x.I18n.t("status"),value:n[t.status]?n[t.status]:d.x.I18n.t("unknown")},{key:d.x.I18n.t("lastUpdated"),value:t.updated_at?d.x.Date.full(1e3*t.updated_at):d.x.I18n.t("unknown")},{key:d.x.I18n.t("lastRunStarted"),value:t.run_accessed_at?d.x.Date.full(1e3*t.run_started_at):d.x.I18n.t("unknown")},{key:d.x.I18n.t("lastRunCompleted"),value:t.run_completed_at?d.x.Date.full(1e3*t.run_completed_at):d.x.I18n.t("unknown")},{key:d.x.I18n.t("lastSeenError"),value:a||d.x.I18n.t("none")},{key:d.x.I18n.t("lastSeenErrorDate"),value:t.last_error_date?d.x.Date.full(1e3*t.last_error_date):d.x.I18n.t("unknown")}]})]})}function Ho(e){let t=e.task.scheduled_at;t&&(t=(0,br.default)(t,"yyyy-MM-dd HH:mm:ss",new Date));const n=(0,br.default)(e.task.updated_at,"yyyy-MM-dd HH:mm:ss",new Date);return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"column column-primary",children:e.task.id}),(0,m.jsx)("td",{className:"column",children:e.task.type}),(0,m.jsx)("td",{className:"column",children:e.task.newsletter?(0,m.jsx)("a",{href:e.task.newsletter.preview_url,"data-newsletter-id":e.task.newsletter.newsletter_id,"data-queue-id":e.task.newsletter.queue_id,target:"_blank",rel:"noopener noreferrer",children:e.task.newsletter.subject||d.x.I18n.t("preview")}):d.x.I18n.t("none")}),(0,m.jsx)("td",{className:"column",children:e.task.priority}),e.show_scheduled_at?(0,m.jsx)("td",{className:"column-date",children:(0,m.jsx)("abbr",{children:`${d.x.Date.short(t)} ${d.x.Date.time(t)}`})}):null,(0,m.jsx)("td",{className:"column-date",children:(0,m.jsx)("abbr",{children:`${d.x.Date.short(n)} ${d.x.Date.time(n)}`})})]})}function zo(e){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"row-title",children:"Id"}),(0,m.jsx)("th",{className:"row-title",children:d.x.I18n.t("type")}),(0,m.jsx)("th",{className:"row-title",children:d.x.I18n.t("email")}),(0,m.jsx)("th",{className:"row-title",children:d.x.I18n.t("priority")}),e.show_scheduled_at?(0,m.jsx)("th",{className:"row-title",children:d.x.I18n.t("scheduledAt")}):null,(0,m.jsx)("th",{className:"row-title",children:d.x.I18n.t("updatedAt")})]})}function Ko(e){const t=e.show_scheduled_at?6:5;return(0,m.jsxs)("table",{className:"widefat fixed striped",children:[(0,m.jsx)("thead",{children:(0,m.jsx)(zo,{show_scheduled_at:e.show_scheduled_at})}),(0,m.jsx)("tbody",{children:e.tasks.length?e.tasks.map((t=>(0,m.jsx)(Ho,{task:t,show_scheduled_at:e.show_scheduled_at},t.id))):(0,m.jsx)("tr",{className:"mailpoet-listing-no-items",children:(0,m.jsx)("td",{colSpan:t,children:d.x.I18n.t("nothingToShow")})})}),(0,m.jsx)("tfoot",{children:(0,m.jsx)(zo,{show_scheduled_at:e.show_scheduled_at})})]})}function Go(e){const t=e.status_data;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h4",{children:d.x.I18n.t("systemStatusQueueTitle")}),(0,m.jsx)(Zo,{max_width:"400px",rows:[{key:d.x.I18n.t("status"),value:"paused"===t.status?d.x.I18n.t("paused"):d.x.I18n.t("running")},{key:d.x.I18n.t("startedAt"),value:t.started?d.x.Date.full(1e3*t.started):d.x.I18n.t("unknown")},{key:d.x.I18n.t("sentEmails"),value:t.sent||0},{key:d.x.I18n.t("retryAttempt"),value:t.retry_attempt||d.x.I18n.t("none")},{key:d.x.I18n.t("retryAt"),value:t.retry_at?d.x.Date.full(1e3*t.retry_at):d.x.I18n.t("none")},{key:d.x.I18n.t("error"),value:t.error?t.error.error_message:d.x.I18n.t("none")},{key:d.x.I18n.t("totalCompletedTasks"),value:t.tasksStatusCounts.completed},{key:d.x.I18n.t("totalRunningTasks"),value:t.tasksStatusCounts.running},{key:d.x.I18n.t("totalPausedTasks"),value:t.tasksStatusCounts.paused},{key:d.x.I18n.t("totalScheduledTasks"),value:t.tasksStatusCounts.scheduled}]}),(0,m.jsx)("h5",{children:d.x.I18n.t("scheduledTasks")}),(0,m.jsx)(Ko,{show_scheduled_at:!0,tasks:t.latestTasks.filter((e=>"scheduled"===e.status))}),(0,m.jsx)("h5",{children:d.x.I18n.t("runningTasks")}),(0,m.jsx)(Ko,{tasks:t.latestTasks.filter((e=>null===e.status))}),(0,m.jsx)("h5",{children:d.x.I18n.t("completedTasks")}),(0,m.jsx)(Ko,{tasks:t.latestTasks.filter((e=>"completed"===e.status))})]})}function Qo(e){let{version:t,storage:n,latestTrigger:a,latestCompletedTrigger:r,latestCompletedRun:i}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h4",{children:d.x.I18n.t("actionSchedulerStatus")}),(0,m.jsx)(Zo,{max_width:"400px",rows:[{key:d.x.I18n.t("version"),value:t},{key:d.x.I18n.t("storage"),value:n},{key:d.x.I18n.t("latestActionSchedulerTrigger"),value:d.x.Date.full(Xe().utc(a).local())},{key:d.x.I18n.t("latestActionSchedulerCompletedTrigger"),value:d.x.Date.full(Xe().utc(r).local())},{key:d.x.I18n.t("latestActionSchedulerCompletedRun"),value:d.x.Date.full(Xe().utc(i).local())}]})]})}function Xo(e,t,n,a,r,i){const s=e?"success":"error";let o=e?t:n;return a&&(o=x()(o,/\[link\](.*?)\[\/link\]/g,(e=>(0,m.jsx)("a",{className:"mailpoet-text-link",href:a,"data-beacon-article":r,children:e},"kb-link")))),(0,m.jsxs)("div",{className:`mailpoet_notice notice inline notice-${s}`,children:[(0,m.jsx)("p",{children:o}),i?(0,m.jsx)("p",{children:(0,m.jsx)("i",{children:i})}):null]})}function Jo(e){const t=e.cron.isReachable,n=e.cron.url,a=`${d.x.I18n.t("systemStatusConnectionUnsuccessful")} ${d.x.I18n.t("systemStatusCronConnectionUnsuccessfulInfo")}`,r=d.x.I18n.t("systemStatusConnectionSuccessful"),i=t?null:e.cron.pingResponse;return(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:d.x.I18n.t("systemStatusCronTitle")}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{className:"mailpoet-text-link",href:n,target:"_blank",rel:"noopener noreferrer",children:n})}),Xo(t,r,a,"https://kb.mailpoet.com/article/231-sending-does-not-work","5a0257ac2c7d3a272c0d7ad6",i)]})}function el(e){const t=e.mss.enabled?`${d.x.I18n.t("systemStatusConnectionUnsuccessful")} ${d.x.I18n.t("systemStatusMSSConnectionUnsuccessfulInfo")}`:d.x.I18n.t("systemStatusMSSConnectionCanNotConnect"),n=e.mss.enabled?d.x.I18n.t("systemStatusConnectionSuccessful"):d.x.I18n.t("systemStatusMSSConnectionCanConnect");return(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:d.x.I18n.t("systemStatusMSSTitle")}),Xo(e.mss.isReachable,n,t,"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key","5ef1da9d2c7d3a10cba966c5",null)]})}function tl(){const e=window.systemStatusData,t=window.actionSchedulerData;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mailpoet_notice notice inline",children:(0,m.jsx)("p",{children:e.mss.enabled?d.x.I18n.t("systemStatusIntroCronMSS"):d.x.I18n.t("systemStatusIntroCron")})}),Jo(e),el(e),(0,m.jsx)(Yo,{status_data:e.cronStatus}),(0,m.jsx)(Qo,{...t}),t?(0,m.jsx)(Go,{status_data:e.queueStatus}):null]})}function nl(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:d.x.I18n.t("yourPrivacyContent1")}),(0,m.jsx)("p",{children:d.x.I18n.t("yourPrivacyContent2")}),(0,m.jsx)("p",{children:d.x.I18n.t("yourPrivacyContent3")}),(0,m.jsx)(Ae.z,{target:"_blank",rel:"noreferrer noopener",href:"https://www.mailpoet.com/privacy-notice/",children:d.x.I18n.t("yourPrivacyButton")})]})}function al(){return(0,m.jsxs)(l.k.Provider,{value:(0,l.S)(window),children:[(0,m.jsx)(c.D,{}),(0,m.jsx)(u.w,{}),(0,m.jsxs)(xi.t,{activeKey:"knowledgeBase",children:[(0,m.jsx)(o.Tab,{title:d.x.I18n.t("tabKnowledgeBaseTitle"),children:(0,m.jsx)(Wo,{})},"knowledgeBase"),(0,m.jsx)(o.Tab,{title:d.x.I18n.t("tabSystemStatusTitle"),children:(0,m.jsx)(tl,{})},"systemStatus"),(0,m.jsx)(o.Tab,{title:d.x.I18n.t("tabSystemInfoTitle"),children:(0,m.jsx)(Vo,{})},"systemInfo"),(0,m.jsx)(o.Tab,{title:d.x.I18n.t("tabYourPrivacyTitle"),children:(0,m.jsx)(nl,{})},"yourPrivacy")]})]})}qo&&((0,o.registerTranslations)(),i.render((0,m.jsx)(Fo,{}),qo)),Zo.propTypes={max_width:Ee().string,rows:Ee().arrayOf(Ee().shape({key:Ee().string.isRequired,value:Ee().oneOfType([Ee().string,Ee().number,Ee().element]).isRequired})).isRequired},Zo.defaultProps={max_width:"auto"},$o.propTypes={truthy:Ee().string,falsy:Ee().string,unknown:Ee().string,children:Ee().bool},$o.defaultProps={truthy:(0,Me.__)("Yes","mailpoet"),falsy:(0,Me.__)("No","mailpoet"),unknown:(0,Me.__)("Unknown","mailpoet"),children:null},Yo.propTypes={status_data:Ee().shape({accessible:Ee().bool,last_error_date:Ee().string,status:Ee().string,updated_at:Ee().number,run_accessed_at:Ee().number,run_completed_at:Ee().number,run_started_at:Ee().number,last_error:Ee().oneOfType([Ee().string,Ee().array])}).isRequired},Ho.propTypes={show_scheduled_at:Ee().bool,task:Ee().shape({id:Ee().number.isRequired,type:Ee().string.isRequired,priority:Ee().number.isRequired,updated_at:Ee().string.isRequired,scheduled_at:Ee().string,status:Ee().string,newsletter:Ee().shape({newsletter_id:Ee().number.isRequired,queue_id:Ee().number.isRequired,preview_url:Ee().string.isRequired,subject:Ee().string})}).isRequired},Ho.defaultProps={show_scheduled_at:!1},zo.propTypes={show_scheduled_at:Ee().bool},zo.defaultProps={show_scheduled_at:!1},Ko.propTypes={show_scheduled_at:Ee().bool,tasks:Ee().arrayOf(Ho.propTypes.task).isRequired},Ko.defaultProps={show_scheduled_at:!1},Go.propTypes={status_data:Ee().shape({status:Ee().string,started:Ee().number,sent:Ee().number,retry_attempt:Ee().number,retry_at:Ee().number,error:Ee().shape({operation:Ee().string,error_message:Ee().string}),tasksStatusCounts:Ee().shape({completed:Ee().number.isRequired,running:Ee().number.isRequired,paused:Ee().number.isRequired,scheduled:Ee().number.isRequired}).isRequired,latestTasks:Ee().arrayOf(Ho.propTypes.task).isRequired}).isRequired};const rl=document.getElementById("help_container");function il(e){let{children:t,location:{pathname:n}}=e;return(0,s.useEffect)((()=>{window.scrollTo(0,0)}),[n]),t||null}rl&&((0,o.registerTranslations)(),i.render((0,m.jsx)(al,{}),rl)),il.propTypes={location:Ee().shape({pathname:Ee().string.isRequired}).isRequired,children:Ee().node.isRequired},il.displayName="ScrollToTopComponent";const sl=(0,Ce.EN)((0,Pn.lV)(il));function ol(e){let{activeMethod:t,onMethodChange:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,m.jsx)("span",{className:"mailpoet_import_heading",children:d.x.I18n.t("methodSelectionHead")}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/242-video-guide-importing-subscribers-using-a-csv-file","data-beacon-article":"5a8e8f0204286305fbc9be9a",target:"_blank",rel:"noopener noreferrer",children:(0,m.jsx)(Pt.V,{dimension:"large",variant:"excellent",isInverted:!0,children:d.x.I18n.t("seeVideo")})})})]}),(0,m.jsxs)("div",{className:"mailpoet-settings-inputs",children:[(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,m.jsx)(dt.Y,{name:"select_method",automationId:"import-paste-method",id:"import-paste-method",checked:"paste-method"===t,value:"paste-method",onCheck:n}),(0,m.jsx)("label",{htmlFor:"import-paste-method",children:d.x.I18n.t("methodPaste")})]}),(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,m.jsx)(dt.Y,{name:"select_method",automationId:"import-csv-method",id:"import-csv-method",checked:"file-method"===t,value:"file-method",onCheck:n}),(0,m.jsx)("label",{htmlFor:"import-csv-method",children:d.x.I18n.t("methodUpload")})]}),(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,m.jsx)(dt.Y,{name:"select_method",automationId:"import-mailchimp-method",id:"import-mailchimp-method",checked:"mailchimp-method"===t,value:"mailchimp-method",onCheck:n}),(0,m.jsx)("label",{htmlFor:"import-mailchimp-method",children:d.x.I18n.t("methodMailChimp")})]})]})]})}function ll(e){let{hidePrevious:t,isLastStep:n,canGoNext:a,onPreviousAction:r,onNextAction:i}=e;return(0,m.jsxs)("div",{className:"mailpoet-settings-save",children:[!t&&(0,m.jsx)(Ae.z,{type:"button",variant:"secondary",onClick:r,children:d.x.I18n.t("previousStep")}),(0,m.jsx)(Ae.z,{type:"button",automationId:"import-next-step",isDisabled:!a,onClick:()=>{a&&i()},children:d.x.I18n.t(n?"import":"nextStep")})]})}function cl(e){let{onValueChange:t,canFinish:n,onFinish:a,data:r,onPrevious:i}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,m.jsx)("label",{htmlFor:"paste_input",children:d.x.I18n.t("pasteLabel")}),(0,m.jsx)("p",{className:"description",children:x()(d.x.I18n.t("pasteDescription"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/126-importing-subscribers-with-csv-files","data-beacon-article":"57ce079f903360649f6e56fc",target:"_blank",rel:"noopener noreferrer",children:e},"kb-link")))})]}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsx)(it.g,{id:"paste_input",rows:"15",placeholder:"Email, First Name, Last Name\njohn@doe.com, John, Doe\nmary@smith.com, Mary, Smith\njohnny@walker.com, Johnny, Walker",isCode:!0,onChange:e=>{t(e.target.value)},defaultValue:r})}),(0,m.jsx)(ll,{canGoNext:n,onPreviousAction:i,onNextAction:a})]})}function dl(e){let{onValueChange:t,canFinish:n,onFinish:a,onPrevious:r}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,m.jsx)("label",{htmlFor:"file_local",children:d.x.I18n.t("methodUpload")}),(0,m.jsx)("p",{className:"description",children:x()(d.x.I18n.t("pasteDescription"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/126-importing-subscribers-with-csv-files","data-beacon-article":"57ce079f903360649f6e56fc",target:"_blank",rel:"noopener noreferrer",children:e},"kb-link")))})]}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsx)(at.I,{type:"file",id:"file_local",accept:".csv","data-automation-id":"import-file-upload-input",onChange:e=>{const n=e.target.value.match(/[^.]+$/);d.x.Notice.hide(),null===n||"csv"!==n[0].toLowerCase()?(d.x.Notice.error(d.x.I18n.t("wrongFileFormat")),t("")):t(e.target.files[0])}})}),(0,m.jsx)(ll,{canGoNext:n,onPreviousAction:r,onNextAction:a})]})}function ul(e){let{onFinish:t,onPrevious:n}=e;const[a,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(void 0),[l,c]=(0,s.useState)([]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mailpoet-settings-label",children:(0,m.jsxs)("label",{htmlFor:"mailpoet_mailchimp_key_input",children:[(0,m.jsx)("span",{className:"mailpoet_import_heading",children:d.x.I18n.t("methodMailChimpLabel")}),(0,m.jsx)("p",{className:"description",children:x()(d.x.I18n.t("methodMailChimpDescription"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/255-migrating-from-mailchimp-to-mailpoet#api","data-beacon-article":"5b16db842c7d3a0fa9a2aa15",target:"_blank",rel:"noopener noreferrer",children:e},"kb-link")))})]})}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered",children:[(0,m.jsx)(at.I,{dimension:"small",id:"mailpoet_mailchimp_key_input",type:"text",onChange:e=>{r(e.target.value),""===e.target.value.trim()&&o(void 0)}}),(0,m.jsx)("span",{className:"mailpoet-gap"}),(0,m.jsx)(Ae.z,{type:"button",dimension:"small",onClick:()=>{d.x.Modal.loading(!0),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"importExport",action:"getMailChimpLists",data:{api_key:a}}).always((()=>{d.x.Modal.loading(!1)})).done((e=>o(e.data))).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))},children:d.x.I18n.t("methodMailChimpVerify")}),(0,m.jsx)("span",{className:"mailpoet-gap"}),(0,m.jsx)("span",{children:Array.isArray(i)&&0===i.length?d.x.I18n.t("noMailChimpLists"):null})]})}),i?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mailpoet-settings-label",children:d.x.I18n.t("methodMailChimpSelectList")}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsx)(Re.Y,{field:{id:"segments",name:"list-selection",multiple:!0,placeholder:d.x.I18n.t("methodMailChimpSelectPlaceholder"),forceSelect2:!0,values:i},onValueChange:e=>c(e.target.value)})})]}):null,(0,m.jsx)(ll,{canGoNext:Array.isArray(l)&&l.length>0,onPreviousAction:n,onNextAction:()=>{d.x.Modal.loading(!0),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"importExport",action:"getMailChimpSubscribers",data:{api_key:a,lists:l}}).always((()=>{d.x.Modal.loading(!1)})).done((e=>t(e.data))).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}})]})}ol.propTypes={activeMethod:Ee().string,onMethodChange:Ee().func.isRequired},ol.defaultProps={activeMethod:void 0},ol.displayName="SelectImportMethod",ll.propTypes={canGoNext:Ee().bool,hidePrevious:Ee().bool,isLastStep:Ee().bool,onPreviousAction:Ee().func,onNextAction:Ee().func},ll.defaultProps={hidePrevious:!1,isLastStep:!1,canGoNext:!0,onPreviousAction:()=>{},onNextAction:()=>{}},ll.displayName="PreviousNextStepButtons",cl.propTypes={onFinish:Ee().func,onPrevious:Ee().func,canFinish:Ee().bool.isRequired,onValueChange:Ee().func.isRequired,data:Ee().string},cl.defaultProps={onFinish:()=>{},onPrevious:()=>{},data:""},cl.displayName="MethodPaste",dl.propTypes={canFinish:Ee().bool.isRequired,onFinish:Ee().func,onPrevious:Ee().func,onValueChange:Ee().func.isRequired},dl.defaultProps={onFinish:()=>{},onPrevious:()=>{}},dl.displayName="MethodUpload",ul.propTypes={onFinish:Ee().func,onPrevious:Ee().func},ul.defaultProps={onFinish:()=>{},onPrevious:()=>{}},ul.displayName="MethodMailChimp";var pl=n(71906),ml=n.n(pl);const hl=e=>window.roleBasedEmails.findIndex((t=>e.startsWith(`${t}@`)))>=0,fl=e=>{let t,n=ot.ZP.unescape(e);return n=n.toLowerCase().replace(/^["';.,\s]+|[^\x20-\x7E]+$|["';.,_\s]+$/g,"").replace(/\s+|%\d+|,+/g,""),t=/<(.*?)>/.exec(n),t&&(n=t[1].trim()),t=/mailto:(?:\s+)?(.*)/.exec(n),t&&(n=t[1].trim()),!!window.mailpoet_email_regex.test(n)&&!hl(n)&&n};function gl(e){let{history:t,setStepMethodSelectionData:n,subscribersLimitForValidation:a}=e;const[r,i]=(0,s.useState)(void 0),[l,c]=(0,s.useState)(""),[u,p]=(0,s.useState)(void 0),h=e=>{n(e),t.push(((e,t,n)=>void 0===e||void 0===e.subscribersCount||e.subscribersCount<t||"mailchimp-method"===n?"step_data_manipulation":"step_input_validation")(e,a,r))},f=()=>{t.push("/step_clean_list")},g=()=>{((e,t)=>{const n=encodeURI(e).split(/%..|./).length-1;d.x.Notice.hide(),n>window.maxPostSizeBytes?d.x.Notice.error(d.x.I18n.t("maxPostSizeNotice")):(d.x.Modal.loading(!0),ml().parse(e,function(e){return{skipEmptyLines:!0,error(){d.x.Notice.hide(),d.x.Notice.error(d.x.I18n.t("dataProcessingError"))},complete(t){const n=function(e){let t=[];const n=[],a=[],r=[],i=[];let s,o,l,c,d=null,u=null,p=!1;return Object.keys(e).forEach((m=>{l=e[m].map((e=>e.trim())),c=l.length,null===u&&(u=c),c===u&&(null===d?(Object.keys(l).forEach((e=>{o=fl(l[e]),null===d&&window.mailpoet_email_regex.test(o)&&(d=e,n[o]=!0,l[e]=o,t[o]=l)})),null===d&&0===parseInt(m,10)&&(p=!0,t[0]=l)):""!==l[d]&&(s=fl(l[d]),ot.ZP.has(n,s)?a.push(s):hl(l[d])?i.push(l[d]):window.mailpoet_email_regex.test(s)?(n[s]=!0,l[d]=s,t[s]=l):r.push(l[d])))})),t=ot.ZP.values(t),t&&(p&&t.length>=2||!p&&t.length>=1)?{header:window.mailpoet_email_regex.test(t[0][d])?null:t.shift(),subscribers:t,subscribersCount:t.length,duplicate:ot.ZP.uniq(a),invalid:ot.ZP.uniq(r),role:ot.ZP.uniq(i)}:null}(t.data);if(n)e(n);else{let e=d.x.I18n.t("noValidRecords");e=e.replace("[link]",'<a href="https://kb.mailpoet.com/article/126-importing-subscribers-with-csv-files" data-beacon-article="57ce079f903360649f6e56fc">'),e=e.replace("[/link]","</a>"),d.x.Notice.error(e)}d.x.Modal.loading(!1)}}}((e=>{d.x.trackEvent("Subscribers import started",{source:"file-method"===r?"file upload":"pasted data"}),h(e)}))))})("paste-method"===r?l:u)};return(0,m.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(ol,{activeMethod:r,onMethodChange:i})}),"paste-method"===r&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(cl,{onPrevious:f,onValueChange:c,onFinish:g,canFinish:!!l.trim(),data:l})}),"file-method"===r&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(dl,{onPrevious:f,onValueChange:p,onFinish:g,canFinish:!!u,data:u})}),"mailchimp-method"===r&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(ul,{onPrevious:f,onFinish:e=>{d.x.trackEvent("Subscribers import started",{source:"MailChimp"}),h(e)}})}),void 0===r&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(ll,{canGoNext:!1,onPreviousAction:f})})]})}gl.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired,setStepMethodSelectionData:Ee().func.isRequired,subscribersLimitForValidation:Ee().number.isRequired},gl.diplayName="StepMethodSelection";const xl=(0,Ce.EN)(gl);function _l(e){let{onProceed:t}=e;return(0,m.jsxs)("div",{className:"mailpoet-clean-list-step-container",children:[(0,m.jsx)("p",{children:d.x.I18n.t("cleanListText1")}),(0,m.jsx)("p",{children:d.x.I18n.t("cleanListText2")}),(0,m.jsxs)("p",{children:[t&&(0,m.jsx)(Ae.z,{onClick:t,variant:"tertiary",children:d.x.I18n.t("listCleaningGotIt")}),(0,m.jsx)(Ae.z,{target:"_blank",href:"https://kb.mailpoet.com/article/287-list-cleaning-services",children:d.x.I18n.t("tryListCleaning")})]})]})}function bl(e){let{onSubmit:t,history:n}=e;const[a,r]=(0,s.useState)(void 0);return(0,m.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,m.jsx)("div",{className:"mailpoet-settings-label",children:d.x.I18n.t("validationStepHeading")}),(0,m.jsxs)("div",{className:"mailpoet-settings-inputs",children:[(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,m.jsx)(dt.Y,{automationId:"mailpoet_import_validation_step_option1",id:"existing-list",checked:"existing-list"===a,value:"existing-list",onCheck:r}),(0,m.jsx)("label",{htmlFor:"existing-list",children:d.x.I18n.t("validationStepRadio1")})]}),(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,m.jsx)(dt.Y,{automationId:"mailpoet_import_validation_step_option2",id:"address-book",checked:"address-book"===a,value:"address-book",onCheck:r}),(0,m.jsx)("label",{htmlFor:"address-book",children:d.x.I18n.t("validationStepRadio2")})]})]}),(0,m.jsx)(ll,{canGoNext:void 0!==a,onPreviousAction:()=>n.push("step_method_selection"),onNextAction:()=>t(a)})]})}function vl(){return(0,m.jsxs)("div",{className:"mailpoet-clean-list-step-container","data-automation-id":"import_wrong_source_block",children:[(0,m.jsx)("p",{children:d.x.I18n.t("validationStepBlock1")}),(0,m.jsx)("p",{children:d.x.I18n.t("validationStepBlock2")}),(0,m.jsx)("p",{children:(0,m.jsx)(Ae.z,{href:"https://kb.mailpoet.com/article/269-reconfirm-subscribers-to-your-list",target:"_blank",rel:"noopener noreferrer",children:d.x.I18n.t("validationStepBlockButton")})})]})}function yl(e){let{onSubmit:t}=e;const[n,a]=(0,s.useState)("over2years"),r=(0,s.useCallback)((e=>{a(e.target.value)}),[a]),i=(0,s.useCallback)((()=>{t("over2years"===n||"1to2years"===n?"notRecently":"recently")}),[t,n]);return(0,m.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,m.jsx)("div",{className:"mailpoet-settings-label",children:d.x.I18n.t("validationStepLastSentHeading")}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsxs)(lt.Select,{defaultValue:n,onChange:r,automationId:"last_sent_to_list",children:[(0,m.jsx)("option",{value:"over2years",children:d.x.I18n.t("validationStepLastSentOption1")}),(0,m.jsx)("option",{value:"1to2years",children:d.x.I18n.t("validationStepLastSentOption2")}),(0,m.jsx)("option",{value:"less1year",children:d.x.I18n.t("validationStepLastSentOption3")}),(0,m.jsx)("option",{value:"less3months",children:d.x.I18n.t("validationStepLastSentOption4")})]})}),(0,m.jsx)("div",{className:"mailpoet-settings-save",children:(0,m.jsx)(Ae.z,{type:"button",automationId:"last_sent_to_list_next",onClick:i,children:d.x.I18n.t("validationStepLastSentNext")})})]})}function wl(e){let{stepMethodSelectionData:t,history:n}=e;const[a,r]=(0,s.useState)(void 0),[i,l]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{void 0===t&&n.replace("step_method_selection")}),[t,n]);const c=(0,s.useCallback)((e=>{l(e),"recently"===e&&n.push("step_data_manipulation")}),[n,l]);return(0,m.jsxs)(m.Fragment,{children:[void 0===a&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(bl,{onSubmit:r,history:n})}),"address-book"===a&&(0,m.jsx)(vl,{}),"existing-list"===a&&void 0===i&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(yl,{onSubmit:c})}),"existing-list"===a&&"notRecently"===i&&(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(_l,{})})]})}_l.displayName="CleanList",bl.propTypes={history:Ee().shape({push:Ee().func.isRequired}).isRequired,onSubmit:Ee().func.isRequired},bl.displayName="InitialQuestion",yl.propTypes={onSubmit:Ee().func.isRequired},yl.displayName="LastSentQuestion",wl.propTypes={history:Ee().shape({push:Ee().func.isRequired,replace:Ee().func.isRequired}).isRequired,stepMethodSelectionData:Ee().shape({duplicate:Ee().arrayOf(Ee().string),header:Ee().arrayOf(Ee().string),invalid:Ee().arrayOf(Ee().string),role:Ee().arrayOf(Ee().string),subscribersCount:Ee().number,subscribers:Ee().arrayOf(Ee().arrayOf(Ee().string))})},wl.defaultProps={stepMethodSelectionData:void 0};const jl=(0,Ce.EN)(wl);function Sl(e){let{translation:t,subscribers:n}=e,a="";return n.length&&(a=x()(t.replace("%2$s",n.join(", ")),"%1$s",(()=>(0,m.jsx)("strong",{children:n.length.toLocaleString()},t))),a=(0,m.jsx)("p",{children:a})),a}function kl(e){let{stepMethodSelectionData:t}=e;const{invalid:n,duplicate:a,role:r}=t,[i,o]=(0,s.useState)(!1),l=ee()("mailpoet_subscribers_data_parse_results_details",{mailpoet_hidden:!i}),c=(0,m.jsx)(Sl,{translation:d.x.I18n.t("importNoticeInvalid"),subscribers:n}),u=(0,m.jsx)(Sl,{translation:d.x.I18n.t("importNoticeDuplicate"),subscribers:a});let p="";if(r.length&&(p=x()(d.x.I18n.t("importNoticeRoleBased"),/(%1\$s|\[link\].*\[\/link\]|%2\$s)/,(e=>"%1$s"===e?(0,m.jsx)("strong",{children:r.length.toLocaleString()},"role-length"):"%2$s"===e?r.join(", "):(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/270-role-based-email-addresses-are-not-allowed","data-beacon-article":"5d0a1da404286318cac46fe5",target:"_blank",rel:"noopener noreferrer",children:e.replace("[link]","").replace("[/link]","")},e))),p=(0,m.jsx)("p",{children:p})),n.length||a.length||r.length){const e=n.length+a.length+r.length;return(0,m.jsxs)("div",{className:"error",children:[(0,m.jsxs)("p",{children:[x()(d.x.I18n.t("importNoticeSkipped"),"%1$s",(()=>(0,m.jsx)("strong",{children:e.toLocaleString()},"lengths")))," ",(0,m.jsx)("a",{className:"mailpoet_subscribers_data_parse_results_details_show","data-automation-id":"show-more-details",onClick:()=>o(!i),role:"button",tabIndex:0,onKeyDown:e=>{["keydown","keypress"].includes(e.type)&&["Enter"," "].includes(e.key)&&(e.preventDefault(),o(!i))},children:d.x.I18n.t("showMoreDetails")})]}),(0,m.jsxs)("div",{className:l,children:[(0,m.jsx)("hr",{}),c,u,p]})]})}return null}function Nl(e){let{header:t,subscribers:n}=e;const a=((e,t)=>{const n=[],a=[];let r,i,s,o;return Object.keys(e[0]).forEach((l=>{r=e[0][l],i="ignore",r%1!=0&&window.mailpoet_email_regex.test(r)?i="email":t&&(s=t[l],o=window.mailpoetColumns.map((e=>e.name)).indexOf(s),-1!==o?i=window.mailpoetColumns[o].id:s&&(/first|first name|given name/i.test(s)?i="first_name":/last|last name/i.test(s)&&(i="last_name"))),i="ignore"!==i&&-1===a.indexOf(i)?i:"ignore",n[l]={column_id:i},a.push(i)})),n})(n,t);return(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:d.x.I18n.t("matchData")}),a.map(((e,t)=>(0,m.jsx)("th",{children:(0,m.jsx)("select",{className:"mailpoet_subscribers_column_data_match","data-column-id":e.column_id,"data-column-index":t,id:`column_${t}`})},e.column_id+t)))]})}function Cl(e){let{header:t}=e;return(0,m.jsxs)("tr",{className:"mailpoet_header",children:[(0,m.jsx)("td",{}),t.map((e=>(0,m.jsx)("td",{children:e},e)))]})}function Il(e){let{subscriber:t,index:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{children:n}),t.map(((e,t)=>(0,m.jsx)("td",{children:e},`${e}-${n}-${t}`)))]})}function Tl(e){let{subscribers:t,subscribersCount:n}=e;const a=". . .",r=Array(t[0].length).fill(a);return(0,m.jsxs)(m.Fragment,{children:[t.slice(0,10).map(((e,t)=>(0,m.jsx)("tr",{children:(0,m.jsx)(Il,{subscriber:e,index:t+1})},`${e[0]}-${t}`))),n>11?(0,m.jsx)("tr",{children:(0,m.jsx)(Il,{subscriber:r,index:a})},"filler"):null,n>10?(0,m.jsx)("tr",{children:(0,m.jsx)(Il,{subscriber:t[n-1],index:n})},t[n-1][0]):null]})}function Dl(e){let{subscribersCount:t,subscribers:n,header:a}=e;return(0,s.useLayoutEffect)((()=>{(()=>{const e={data:window.mailpoetColumnsSelect2,width:"15em"};Te()("select.mailpoet_subscribers_column_data_match").select2(e).on("select2:selecting",(t=>{const n=t.currentTarget,a=t.params.args.data.id;"create"===a?(t.preventDefault(),Te()(n).select2("close"),d.x.Modal.popup({title:d.x.I18n.t("addNewField"),template:Te()("#form_template_field_form").html()}),Te()("#form_field_new").parsley().on("form:submit",(()=>{const t=Te()("#form_field_new").mailpoetSerializeObject();return d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"customFields",action:"save",data:t}).done((t=>{const a={id:t.data.id,name:t.data.name,text:t.data.name,type:t.data.type,params:t.data.params,custom:!0};2===window.mailpoetColumnsSelect2.length&&window.mailpoetColumnsSelect2.push({name:d.x.I18n.t("userColumns"),children:[]}),window.mailpoetColumnsSelect2[2].children.push(a),window.mailpoetColumns.push(a),Te()("select.mailpoet_subscribers_column_data_match").each((()=>{Te()(n).html("").select2("destroy").select2(e)})),Te()(n).data("column-id",a.id),d.x.Modal.close()})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{positionAfter:"#field_name"})})),!1}))):Te()("select.mailpoet_subscribers_column_data_match").each((()=>{const e=n,r=Te()(e).val();r===a&&"ignore"!==r&&(confirm(`${d.x.I18n.t("selectedValueAlreadyMatched")} ${d.x.I18n.t("confirmCorrespondingColumn")}`)?Te()(e).data("column-id","ignore"):(t.preventDefault(),Te()(n).select2("close")))}))})).on("select2:select",(e=>{const t=e.currentTarget,n=e.params.data.id;Te()(t).data("column-id",n)})).on("select2:open",(()=>{const e=document.querySelectorAll(".select2-search__field[aria-controls]");0!==e.length&&e[e.length-1].focus()})),Te().map(Te()(".mailpoet_subscribers_column_data_match"),(e=>{const t=Te()(e).data("column-id");Te()(e).val(t).trigger("change")}))})()})),(0,m.jsx)("div",{className:"subscribers_data",children:(0,m.jsxs)("table",{className:"mailpoet_subscribers widefat fixed",children:[(0,m.jsx)("thead",{children:(0,m.jsx)(Nl,{header:a,subscribers:n})}),(0,m.jsxs)("tbody",{children:[a?(0,m.jsx)(Cl,{header:a}):null,(0,m.jsx)(Tl,{subscribers:n,subscribersCount:t})]})]})})}function El(e){let{setSelectedSegments:t}=e;const{segments:n}=(0,s.useContext)(l.k),{all:a,updateAll:r}=n,[i,o]=(0,s.useState)(a);(0,s.useLayoutEffect)((()=>{!function(e,n){const a=Te()("select#mailpoet_segments_select");if(a.data("select2"))return;const r=e=>{let t=`<span class="mailpoet-form-select2-text"><span>${e.name}</span></span>`;return e.count&&(t+=`<span class="mailpoet-form-select2-count">${e.count}</span>`),t};a.html(""),a.select2({data:e.map((e=>({...e,text:e.name}))),dropdownCssClass:"mailpoet-form-select2-dropdown",escapeMarkup:e=>e,templateResult:r,templateSelection:r}).on("change",(e=>{const n=Te()('[data-id="notice_segmentSelection"]');e.currentTarget.value?Te()('[data-id="notice_segmentSelection"]').remove():n.length||d.x.Notice.error(d.x.I18n.t("segmentSelectionRequired"),{static:!0,scroll:!0,id:"notice_segmentSelection",hideClose:!0});(e=>{t(e)})(ot.ZP.pluck(a.select2("data"),"id"))}))}(i)}),[i,t]);const c=e=>{!function(){const e=Te()("select#mailpoet_segments_select");e.data("select2")&&(e.select2("destroy"),e.find("option").remove(),e.off("select2:unselecting").off("change").off("select2:opening"))}(),t([]),o([...i,e]),r([...i,e])};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mailpoet-settings-label",children:(0,m.jsxs)("label",{htmlFor:"mailpoet_segments_select",children:[d.x.I18n.t("pickLists"),(0,m.jsx)("p",{className:"description",children:d.x.I18n.t("pickListsDescription")})]})}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsxs)("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered",children:[(0,m.jsx)("div",{className:"mailpoet-form-select mailpoet-form-input",children:(0,m.jsx)("select",{id:"mailpoet_segments_select","data-placeholder":d.x.I18n.t("select"),multiple:"multiple",children:(0,m.jsx)("option",{})})}),(0,m.jsx)(Ae.z,{variant:"tertiary",onClick:()=>{return e=c,d.x.Modal.popup({title:d.x.I18n.t("addNewList"),template:Te()("#new_segment_template").html()}),Te()("#new_segment_name").on("keypress",(e=>{13===e.which&&Te()("#new_segment_process").trigger("click")})),Te()("#new_segment_process").on("click",(()=>{const t=Te()("#new_segment_name").val().trim(),n=Te()("#new_segment_description").val().trim();d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"ImportExport",action:"addSegment",data:{name:t,description:n}}).done((t=>{e({id:t.data.id,name:t.data.name,text:t.data.name,subscriberCount:0}),d.x.Modal.close()})).fail((e=>{e.errors.length>0&&(d.x.Notice.hide(),d.x.Notice.error(e.errors.map((e=>e.message)),{positionAfter:"#new_segment_name"}))}))})),void Te()("#new_segment_cancel").on("click",(()=>{d.x.Modal.close()}));var e},children:d.x.I18n.t("createANewList")})]})})]})}function Pl(){return(0,m.jsx)("p",{className:"description",children:x()(d.x.I18n.t("consentSubscribed"),/\[link](.*?)\[\/link]/,(e=>(0,m.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/357-why-express-consent-is-important",target:"_blank","data-beacon-article":"605ca22ac44f5d025f447f39",rel:"noopener noreferrer",children:e},"kb-link")))})}function Ol(e){let{newSubscribersStatus:t,setNewSubscribersStatus:n}=e;const a=(0,s.useCallback)((e=>{n(e.target.value)}),[n]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,m.jsx)("label",{htmlFor:"new_subscribers_status",children:d.x.I18n.t("newSubscribersStatus")}),(0,m.jsx)(Pl,{})]}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsxs)(lt.Select,{id:"new_subscribers_status",placeholder:d.x.I18n.t("select"),name:"new_subscribers_status",onChange:a,defaultValue:t,children:[(0,m.jsx)("option",{value:"subscribed",children:d.x.I18n.t("subscribed")}),(0,m.jsx)("option",{value:"inactive",children:d.x.I18n.t("inactive")}),(0,m.jsx)("option",{value:"unsubscribed",children:d.x.I18n.t("unsubscribed")})]})})]})}function Rl(e){let{existingSubscribersStatus:t,setExistingSubscribersStatus:n}=e;const a=(0,s.useCallback)((e=>{n(e.target.value)}),[n]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,m.jsx)("label",{htmlFor:"existing_subscribers_status",children:d.x.I18n.t("existingSubscribersStatus")}),(0,m.jsx)(Pl,{})]}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs",children:(0,m.jsxs)(lt.Select,{id:"existing_subscribers_status",placeholder:d.x.I18n.t("select"),name:"existing_subscribers_status",onChange:a,defaultValue:t,children:[(0,m.jsx)("option",{value:"dont_update",children:d.x.I18n.t("dontUpdate")}),(0,m.jsx)("option",{value:"subscribed",children:d.x.I18n.t("subscribed")}),(0,m.jsx)("option",{value:"inactive",children:d.x.I18n.t("inactive")}),(0,m.jsx)("option",{value:"unsubscribed",children:d.x.I18n.t("unsubscribed")})]})})]})}function Ml(e){let{updateExistingSubscribers:t,setUpdateExistingSubscribers:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mailpoet-settings-label",children:d.x.I18n.t("updateExistingSubscribers")}),(0,m.jsxs)("div",{className:"mailpoet-settings-inputs",children:[(0,m.jsx)(dt.Y,{id:"update_existing_subscribers",name:"update_existing_subscribers",value:"1",checked:t,onCheck:()=>n(!0)}),(0,m.jsx)("label",{htmlFor:"update_existing_subscribers",children:d.x.I18n.t("updateExistingSubscribersYes")}),(0,m.jsx)("span",{className:"mailpoet-gap"}),(0,m.jsx)(dt.Y,{id:"dont_update_existing_subscribers",name:"update_existing_subscribers",value:"",checked:!t,onCheck:()=>n(!1)}),(0,m.jsx)("label",{htmlFor:"dont_update_existing_subscribers",children:d.x.I18n.t("updateExistingSubscribersNo")})]})]})}function Al(e){let{selectedTags:t,setSelectedTags:n}=e;const a=(0,s.useCallback)((e=>{let{value:t}=e;n(t)}),[n]),r=d.x.tags.map((e=>e.name));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mailpoet-settings-label",children:[d.x.I18n.t("assignTagsLabel"),(0,m.jsx)("p",{className:"description",children:d.x.I18n.t("assignTagsDescription")})]}),(0,m.jsx)("div",{className:"mailpoet-settings-inputs mailpoet-import-tags",children:(0,m.jsx)(bt.T,{name:"tags",onChange:a,suggestedValues:r,selectedValues:t,placeholder:d.x.I18n.t("addNewTag")})})]})}function Ll(e){let{history:t,stepMethodSelectionData:n,subscribersLimitForValidation:a,setStepDataManipulationData:r}=e;const[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[u,p]=(0,s.useState)("subscribed"),[h,f]=(0,s.useState)("dontUpdate"),[g,x]=(0,s.useState)([]);return(0,s.useEffect)((()=>{void 0===n&&t.replace("step_method_selection")}),[n,t]),void 0===n?null:(0,m.jsxs)("div",{"data-automation-id":"import_data_manipulation_step",children:[(0,m.jsx)(kl,{stepMethodSelectionData:n}),(0,m.jsx)(Dl,{subscribersCount:n.subscribersCount,subscribers:n.subscribers,header:n.header}),(0,m.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,m.jsx)(El,{setSelectedSegments:o}),(0,m.jsx)(Ol,{newSubscribersStatus:u,setNewSubscribersStatus:p}),(0,m.jsx)(Rl,{existingSubscribersStatus:h,setExistingSubscribersStatus:f}),(0,m.jsx)(Ml,{setUpdateExistingSubscribers:c,updateExistingSubscribers:l}),(0,m.jsx)(Al,{selectedTags:g,setSelectedTags:x}),(0,m.jsx)(ll,{canGoNext:i.length>0,onPreviousAction:()=>t.push(function(e,t){return void 0===e||void 0===e.subscribersCount||e.subscribersCount<t?"step_method_selection":"step_input_validation"}(n,a)),onNextAction:()=>{((e,n,a,i,s,o,l)=>{const c={},u=new(Te().AsyncQueue);let p=0;const m=Date.now()/1e3,h={created:0,updated:0,errors:[],segments:[],tags:[]};d.x.Modal.loading(!0);const f=(2e3,e.reduce(((e,t,n)=>(n%2e3==0&&e.push([]),e[e.length-1].push(t),e)),[]));ot.ZP.each(Te()("select.mailpoet_subscribers_column_data_match"),((e,t)=>{const n=Te()(e).data("column-id");"ignore"!==n&&(c[n]={index:t})})),ot.ZP.each(f,(()=>{u.add((e=>{e.pause(),d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"ImportExport",action:"processImport",data:JSON.stringify({columns:c,subscribers:f[p],timestamp:m,segments:n,newSubscribersStatus:a,existingSubscribersStatus:i,updateSubscribers:s,tags:o})}).done((t=>{const n=t.data.added_to_segment_with_welcome_notification;h.created+=t.data.created,h.updated+=t.data.updated,h.segments=t.data.segments,h.added_to_segment_with_welcome_notification=n,e.run()})).fail((e=>{d.x.Modal.loading(!1),e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})})),p+=1}))})),u.run(),u.onComplete((()=>{d.x.Modal.loading(!1),h.errors.length>0&&!h.updated&&!h.created?d.x.Notice.error(ot.ZP.flatten(h.errors)):(h.segments=ot.ZP.map(ot.ZP.filter(h.segments,(e=>n.includes(e.id))),(e=>e.name)),r(h),t.push("step_results"))}))})(n.subscribers,i,u,h,l,g)},isLastStep:!0})]})]})}Sl.propTypes={translation:Ee().string.isRequired,subscribers:Ee().arrayOf(Ee().string).isRequired},kl.propTypes={stepMethodSelectionData:Ee().shape({duplicate:Ee().arrayOf(Ee().string),invalid:Ee().arrayOf(Ee().string),role:Ee().arrayOf(Ee().string)})},kl.defaultProps={stepMethodSelectionData:{invalid:[],duplicate:[],role:[]}},Nl.propTypes={subscribers:Ee().arrayOf(Ee().arrayOf(Ee().oneOfType([Ee().string,Ee().number]))).isRequired,header:Ee().arrayOf(Ee().string)},Nl.defaultProps={header:[]},Cl.propTypes={header:Ee().arrayOf(Ee().string).isRequired},Il.propTypes={subscriber:Ee().arrayOf(Ee().oneOfType([Ee().string,Ee().number])).isRequired,index:Ee().node.isRequired},Tl.propTypes={subscribersCount:Ee().number.isRequired,subscribers:Ee().arrayOf(Ee().arrayOf(Ee().oneOfType([Ee().string,Ee().number]))).isRequired},Dl.propTypes={subscribersCount:Ee().number,subscribers:Ee().arrayOf(Ee().arrayOf(Ee().oneOfType([Ee().string,Ee().number]))),header:Ee().arrayOf(Ee().string)},Dl.defaultProps={subscribersCount:0,subscribers:[],header:[]},El.propTypes={setSelectedSegments:Ee().func.isRequired},Ml.propTypes={setUpdateExistingSubscribers:Ee().func.isRequired,updateExistingSubscribers:Ee().bool.isRequired},n(49868),Ll.propTypes={history:Ee().shape({push:Ee().func.isRequired,replace:Ee().func.isRequired}).isRequired,stepMethodSelectionData:Ee().shape({duplicate:Ee().arrayOf(Ee().string),header:Ee().arrayOf(Ee().string),invalid:Ee().arrayOf(Ee().string),role:Ee().arrayOf(Ee().string),subscribersCount:Ee().number,subscribers:Ee().arrayOf(Ee().arrayOf(Ee().oneOfType([Ee().string,Ee().number])))}),subscribersLimitForValidation:Ee().number.isRequired,setStepDataManipulationData:Ee().func.isRequired},Ll.defaultProps={stepMethodSelectionData:void 0};const Fl=(0,Ce.EN)(Ll);function ql(e){let{subscribersCount:t,segments:n,initialMessage:a}=e;if(t){let e=x()(a,"%1$s",(()=>(0,m.jsx)("strong",{children:t.toLocaleString()},"%1$s")));return e=x()(e,"%2$s",(()=>`"${n.join('", "')}"`)),(0,m.jsx)("p",{children:e})}return null}function Wl(e){let{createdSubscribers:t,updatedSubscribers:n}=e;return t||n?null:(0,m.jsx)("p",{children:d.x.I18n.t("importNoAction")})}function Bl(e){let{createdSubscribers:t,updatedSubscribers:n}=e;return t||n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:(0,m.jsx)("b",{children:d.x.I18n.t("congratulationResult")})}),(0,m.jsx)("p",{children:x()(d.x.I18n.t("suppressionListReminder"),/\[link](.*?)\[\/link]/,(e=>(0,m.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/359-how-to-import-a-suppression-list","data-beacon-article":"6064973ce0324b5fdfd0650c",target:"_blank",rel:"noopener noreferrer",children:e},"kb-link")))})]}):null}function Ul(e){let{addedToSegmentWithWelcomeNotification:t}=e;return t?(0,m.jsx)("p",{children:d.x.I18n.t("importNoWelcomeEmail")}):null}function Vl(e){let{errors:t,createdSubscribers:n,updatedSubscribers:a,segments:r,addedToSegmentWithWelcomeNotification:i,history:l}=e;return(0,s.useEffect)((()=>{void 0===r&&0===t.length&&void 0===n&&void 0===a&&l.replace("step_method_selection")}),[r,n,t.length,l,a]),t.length&&d.x.Notice.error(ot.ZP.flatten(t)),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsxs)("div",{className:"updated",children:[(0,m.jsx)(ql,{subscribersCount:n,segments:r,initialMessage:d.x.I18n.t("subscribersCreated")}),(0,m.jsx)(ql,{subscribersCount:a,segments:r,initialMessage:d.x.I18n.t("subscribersUpdated")}),(0,m.jsx)(Wl,{createdSubscribers:n,updatedSubscribers:a}),(0,m.jsx)(Ul,{addedToSegmentWithWelcomeNotification:i})]})}),(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Bl,{createdSubscribers:n,updatedSubscribers:a})}),(0,m.jsx)("div",{className:"mailpoet-settings-grid",children:(0,m.jsxs)("div",{className:"mailpoet-settings-save",children:[(0,m.jsx)(Ae.z,{variant:"secondary",type:"button",onClick:()=>l.push("step_method_selection"),children:d.x.I18n.t("importAgain")}),(0,m.jsx)(Ae.z,{type:"button",onClick:()=>{window.location.href="admin.php?page=mailpoet-subscribers"},children:d.x.I18n.t("viewSubscribers")})]})})]})}ql.propTypes={segments:Ee().arrayOf(Ee().string.isRequired),subscribersCount:Ee().number,initialMessage:Ee().string},ql.defaultProps={segments:[],subscribersCount:0,initialMessage:""},ql.displayName="ResultMessage",Wl.propTypes={createdSubscribers:Ee().number,updatedSubscribers:Ee().number},Wl.defaultProps={createdSubscribers:0,updatedSubscribers:0},Wl.displayName="NoAction",Bl.propTypes={createdSubscribers:Ee().number,updatedSubscribers:Ee().number},Bl.defaultProps={createdSubscribers:0,updatedSubscribers:0},Bl.displayName="SuppressionListReminder",Ul.propTypes={addedToSegmentWithWelcomeNotification:Ee().bool},Ul.defaultProps={addedToSegmentWithWelcomeNotification:!1},Ul.diplayName="NoWelcomeEmail",Vl.propTypes={history:Ee().shape({push:Ee().func.isRequired,replace:Ee().func.isRequired}).isRequired,errors:Ee().arrayOf(Ee().string.isRequired),segments:Ee().arrayOf(Ee().string.isRequired),createdSubscribers:Ee().number,updatedSubscribers:Ee().number,addedToSegmentWithWelcomeNotification:Ee().bool},Vl.defaultProps={errors:[],segments:void 0,createdSubscribers:void 0,updatedSubscribers:void 0,addedToSegmentWithWelcomeNotification:void 0},Vl.displayName="StepResultsComponent";const Zl=(0,Ce.EN)(Vl);function $l(e){let{history:t}=e;return(0,m.jsx)(_l,{onProceed:()=>t.push("step_method_selection")})}$l.displayName="StepCleanList";const Yl=document.getElementById("import_container");function Hl(){const[e,t]=(0,s.useState)(void 0),[n,a]=(0,s.useState)({}),r=(0,l.S)(window);return(0,m.jsx)(l.k.Provider,{value:r,children:(0,m.jsxs)(Ne.HashRouter,{children:[(0,m.jsx)(u.w,{}),(0,m.jsx)(sl,{children:(0,m.jsxs)(Ce.rs,{children:[(0,m.jsx)(Ce.AW,{path:"/step_clean_list",render:(0,o.withBoundary)($l)}),(0,m.jsx)(Ce.AW,{path:"/step_method_selection",render:e=>(0,m.jsx)(xl,{...e,setStepMethodSelectionData:t,subscribersLimitForValidation:100})}),(0,m.jsx)(Ce.AW,{path:"/step_input_validation",render:t=>(0,m.jsx)(jl,{...t,stepMethodSelectionData:e})}),(0,m.jsx)(Ce.AW,{path:"/step_data_manipulation",render:t=>(0,m.jsx)(Fl,{...t,stepMethodSelectionData:e,subscribersLimitForValidation:100,setStepDataManipulationData:a})}),(0,m.jsx)(Ce.AW,{path:"/step_results",render:e=>(0,m.jsx)(Zl,{...e,errors:n.errors,createdSubscribers:n.created,updatedSubscribers:n.updated,segments:n.segments,addedToSegmentWithWelcomeNotification:n.added_to_segment_with_welcome_notification})}),(0,m.jsx)(Ce.AW,{path:"*",render:()=>(0,m.jsx)(Ce.l_,{to:"/step_clean_list"})})]})})]})})}Yl&&((0,o.registerTranslations)(),i.render((0,m.jsx)(Hl,{}),Yl));var zl=n(88525),Kl=n.n(zl);Te()(document).ready((()=>{let e;if(!Te()("#mailpoet_subscribers_export").length)return;if(!window.exportData.segments)return;const t=Kl().compile(Te()("#mailpoet_subscribers_export_template").html());function n(t){const n="mailpoet-disabled";"on"===t?e.removeClass(n):e.addClass(n)}Te()("#mailpoet-export").html(t(window.exportData));const a=Te()("#export_lists"),r=Te()("#export_columns");function i(e){let t=`<span class="mailpoet-form-select2-text"><span>${e.name}</span></span>`;return void 0!==e.count&&(t+=`<span class="mailpoet-form-select2-count">${e.count}</span>`),t}function s(e,t){e.data("select2")&&e.html("").select2("destroy"),e.select2({data:t,width:"20em",dropdownCssClass:"mailpoet-form-select2-dropdown",escapeMarkup:e=>e,templateResult:i,templateSelection:i}).on("select2:selecting",(t=>{const n=t.params.args.data.id,a=["select","deselect"];let r;ot.ZP.contains(a,n)&&(t.preventDefault(),"deselect"===n?Te()(t.target).val("").trigger("change"):(r=[],ot.ZP.each(e.find("option"),(e=>{const t=e.value;ot.ZP.contains(a,t)||r.push(t)})),Te()(t.target).val(r).trigger("change")),Te()(t.target).select2("close"))})).on("change",(()=>{window.exportData.segments&&a.select2("data").length&&r.select2("data").length||!window.exportData.segments&&r.select2("data").length?n("on"):n("off")}))}e=Te()("#mailpoet-export-button"),window.segments.forEach((e=>{a.append(Te()("<option></option>").attr("value",e.id).text(e.name))})),window.subscriberFieldsSelect2.forEach((e=>{e.text=e.name,e.children.forEach((e=>{e.name=(0,Hi.r)(e.name),e.text=(0,Hi.r)(e.name)}))})),s(a,window.segments),s(r,window.subscriberFieldsSelect2),r.val(["email","first_name","last_name","list_status","global_status","subscribed_ip","created_at","confirmed_at","confirmed_ip"]).trigger("change"),e.on("click",(e=>{if(Te()(e.target).hasClass("mailpoet-disabled"))return;d.x.Modal.loading(!0);const t=Te()(':radio[name="option_format"]:checked').val();d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"ImportExport",action:"processExport",data:JSON.stringify({export_format_option:t,segments:!!window.exportData.segments&&a.val(),subscriber_fields:r.val()})}).always((()=>{d.x.Modal.loading(!1)})).done((e=>{const n=d.x.I18n.t("exportMessage").replace("%1$s",`<strong>${parseInt(e.data.totalExported,10).toLocaleString()}</strong>`).replace("[link]",`<a href="${e.data.exportFileURL}" target="_blank" >`).replace("[/link]","</a>");Te()("#export_result_notice").html(`<p>${n}</p>`).show(),window.location.href=e.data.exportFileURL,d.x.trackEvent("Subscribers export completed",{"Total exported":e.data.totalExported,"File Format":t})})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}))}));var Gl=n(34466),Ql=n(86796);function Xl(e){let{children:t}=e;return(0,m.jsx)("div",{className:"mailpoet-steps-content",children:t})}const Jl=(0,m.jsx)("svg",{width:"13",height:"11",viewBox:"0 0 13 11",children:(0,m.jsx)("path",{fill:"currentColor",d:"M9.967.638c.483-.698 1.405-.846 2.06-.33.654.515.793 1.499.31 2.197l-5.44 7.857c-.55.794-1.64.857-2.267.132l-3.4-3.928c-.552-.638-.515-1.632.083-2.22.598-.59 1.53-.55 2.082.088l2.19 2.532L9.968.638z"})}),ec=(0,m.jsx)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",children:(0,m.jsx)("path",{fill:"currentColor",d:"M12.407 3.31c.576.576.576 1.509 0 2.084L9.914 7.888l2.411 2.412c.586.585.586 1.535 0 2.121-.585.586-1.535.586-2.12 0l-2.413-2.412L5.3 12.503c-.576.575-1.509.575-2.084 0-.575-.575-.575-1.508 0-2.083l2.493-2.495-2.41-2.41c-.587-.587-.587-1.536 0-2.122.585-.586 1.535-.586 2.12 0L7.83 5.804l2.494-2.493c.575-.576 1.508-.576 2.083 0z"})});function tc(e){let{onCheck:t,showError:n,checked:a,automationId:r,...i}=e;return(0,m.jsxs)("div",{className:ee()({"mailpoet-form-yesno":!0,"mailpoet-form-yesno-error":n,"mailpoet-disabled":i.disabled}),"data-automation-id":r,children:[(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",checked:!0===a,onChange:()=>t(!0),...i}),(0,m.jsx)("span",{className:"mailpoet-form-yesno-control mailpoet-form-yesno-yes",children:Jl})]}),(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",checked:!1===a,onChange:()=>t(!1),...i}),(0,m.jsx)("span",{className:"mailpoet-form-yesno-control mailpoet-form-yesno-no",children:ec})]})]})}function nc(e){let{submitForm:t,loading:n,showCustomersImportSetting:a,isWizardStep:r=!1}=e;const[i,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1===a?"unsubscribed":null),[p,h]=(0,s.useState)(!1),f=r?d.x.I18n.t("continue"):d.x.I18n.t("wooCommerceSetupFinishButtonTextStandalone");let g;return"subscribed"===c&&(g=!0),"unsubscribed"===c&&(g=!1),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.TypographyHeading,{level:1,children:d.x.I18n.t("wooCommerceSetupTitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("p",{children:d.x.I18n.t("wooCommerceSetupInfo")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("form",{onSubmit:e=>(e.preventDefault(),h(!0),null===c||null===i||t(c,i),!1),children:[(0,m.jsxs)("div",{children:[a?(0,m.jsxs)("div",{className:"mailpoet-wizard-woocommerce-option",children:[(0,m.jsx)("div",{className:"mailpoet-wizard-woocommerce-toggle",children:(0,m.jsx)(tc,{showError:p&&null===c,checked:g,onCheck:e=>u(e?"subscribed":"unsubscribed"),name:"mailpoet_woocommerce_import_type",automationId:"woocommerce_import_type"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{children:x()(d.x.I18n.t("wooCommerceSetupImportInfo"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/284-import-old-customers-to-the-woocommerce-customers-list","data-beacon-article":"5d722c7104286364bc8ecf19",rel:"noopener noreferrer",target:"_blank",children:e},e)))}),(0,m.jsxs)("div",{className:"mailpoet-wizard-note",children:[(0,m.jsx)("span",{children:"GDPR"}),d.x.I18n.t("wooCommerceSetupImportGDPRInfo")]})]})]}):null,(0,m.jsxs)("div",{className:"mailpoet-wizard-woocommerce-option",children:[(0,m.jsx)("div",{className:"mailpoet-wizard-woocommerce-toggle",children:(0,m.jsx)(tc,{showError:p&&null===i,checked:i,onCheck:e=>l(e),name:"mailpoet_woocommerce_tracking",automationId:"woocommerce_tracking"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{children:x()(d.x.I18n.t("wooCommerceSetupTrackingInfo"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/280-woocommerce-cookie-tracking","data-beacon-article":"5d5fa44c2c7d3a7a4d778906",rel:"noopener noreferrer",target:"_blank",children:e},e)))}),(0,m.jsxs)("div",{className:"mailpoet-wizard-note",children:[(0,m.jsx)("span",{children:"GDPR"}),d.x.I18n.t("wooCommerceSetupTrackingGDPRInfo")]})]})]})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(o.Button,{className:"mailpoet-wizard-continue-button",isFullWidth:!0,type:"submit",withSpinner:n,disabled:n,automationId:"submit_woocommerce_setup",children:f})]})]})}function ac(e){return(0,m.jsx)(Ja,{illustrationUrl:e.illustrationUrl,children:e.children})}function rc(e){let{isWizardStep:t=!1,redirectToNextStep:n=null}=e;const[a,r]=(0,s.useState)(!1),[i,l]=(0,Ql.yu)("woocommerce"),c=(0,Ql.yu)("tracking")[1],u=(0,Ql.yu)("woocommerce_import_screen_displayed")[1],p=(0,Ql.yu)("mailpoet_subscribe_old_woocommerce_customers")[1],h=e=>{r(!1),d.x.Notice.showApiErrorNotice(e,{scroll:!0})},f=e=>d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"set",data:e}).fail(h),g=(0,m.jsx)(ac,{illustrationUrl:window.wizard_woocommerce_illustration_url,children:(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(nc,{loading:a,submitForm:async(e,a)=>{r(!0);const s="basic"===d.x.trackingConfig.level?"basic":"partial",o={level:a?"full":s},m={enabled:"subscribed"===e?"1":""},g={woocommerce_import_screen_displayed:1,"mailpoet_subscribe_old_woocommerce_customers.enabled":m.enabled,"tracking.level":o.level,"woocommerce.accept_cookie_revenue_tracking.set":"1"};await f(g),c(o),p(m),l({...i,accept_cookie_revenue_tracking:{...i.accept_cookie_revenue_tracking||{},set:"1"}}),u("1"),await d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"importExport",action:"setupWooCommerceInitialImport"}).fail(h),t?n():await(async()=>{t?await f({version:window.mailpoet_version}).then((()=>{window.location.href=window.finish_wizard_url})):window.location.href=window.finish_wizard_url})()},isWizardStep:t,showCustomersImportSetting:window.mailpoet_show_customers_import})})});return t?g:(0,m.jsx)(Xl,{children:g})}function ic(e){let{skipStep:t,loading:n,update_sender:a,submit_sender:r,sender:i=null}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:1,children:d.x.I18n.t("welcomeWizardLetsStartTitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("p",{children:[(0,m.jsx)("b",{children:d.x.I18n.t("welcomeWizardSenderTitle")}),(0,m.jsx)("br",{}),d.x.I18n.t("welcomeWizardSenderText")]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("form",{id:"mailpoet_sender_form",onSubmit:e=>{e.preventDefault(),Te()("#mailpoet_sender_form").parsley().validate()&&r()},children:[(0,m.jsxs)(Nn.Grid.TwoColumns,{children:[(0,m.jsxs)("label",{htmlFor:"senderName",children:[(0,m.jsx)("span",{className:"mailpoet-wizard-label",children:d.x.I18n.t("senderName")}),(0,m.jsx)(o.Input,{isFullWidth:!0,name:"senderName",type:"text",placeholder:"John Doe",value:i?i.name:"","data-parsley-required":!0,onChange:e=>a({name:e.target.value})})]}),(0,m.jsxs)("label",{htmlFor:"senderAddress",children:[(0,m.jsx)("span",{className:"mailpoet-wizard-label",children:d.x.I18n.t("senderAddress")}),(0,m.jsx)(o.Input,{isFullWidth:!0,name:"senderAddress",type:"text",placeholder:"john@doe.com",value:i?i.address:"","data-parsley-required":!0,"data-parsley-type":"email",onChange:e=>a({address:e.target.value})})]})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(o.Button,{className:"mailpoet-wizard-continue-button",isFullWidth:!0,type:"submit",withSpinner:n,children:d.x.I18n.t("continue")}),(0,m.jsx)(o.Button,{href:"#skipStep",isDisabled:n,isFullWidth:!0,onClick:t,variant:"tertiary",children:d.x.I18n.t("skipStep")})]})]})}ac.propTypes={illustrationUrl:Ee().string.isRequired,children:Ee().oneOfType([Ee().arrayOf(Ee().node),Ee().node]).isRequired},rc.displayName="WooCommerceController",ic.displayName="WelcomeWizardSenderStep";const sc=e=>null==e;function oc(e){let{loading:t,submitForm:n}=e;const[a,r]=(0,s.useState)({tracking:void 0,libs3rdParty:void 0}),[i,o]=(0,s.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:1,children:d.x.I18n.t("welcomeWizardUsageTrackingStepTitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("form",{onSubmit:function(e){return e.preventDefault(),o(!0),sc(a.libs3rdParty)||sc(a.tracking)||n(a.tracking,a.libs3rdParty),!1},children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{id:"mailpoet-wizard-3rd-party-libs",className:"mailpoet-wizard-woocommerce-option",children:[(0,m.jsx)("div",{className:"mailpoet-wizard-woocommerce-toggle",children:(0,m.jsx)(tc,{showError:i&&sc(a.libs3rdParty),onCheck:e=>{const t={libs3rdParty:e};r((e=>({...e,...t})))},checked:a.libs3rdParty,name:"mailpoet_libs_3rdParty"})}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{children:[d.x.I18n.t("welcomeWizardUsageTrackingStepLibs3rdPartyLabel")," "]}),(0,m.jsxs)("div",{className:"mailpoet-wizard-note",children:[(0,m.jsx)("span",{children:d.x.I18n.t("welcomeWizardUsageTrackingStepLibs3rdPartyLabelNoteNote")}),x()(d.x.I18n.t("welcomeWizardUsageTrackingStepLibs3rdPartyLabelNote"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/338-what-3rd-party-libraries-we-use","data-beacon-article":"5f7c7dd94cedfd0017dcece8",target:"_blank",rel:"noopener noreferrer",children:e},t)))]})]})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("div",{id:"mailpoet-wizard-tracking",className:"mailpoet-wizard-woocommerce-option",children:[(0,m.jsx)("div",{className:"mailpoet-wizard-woocommerce-toggle",children:(0,m.jsx)(tc,{showError:i&&sc(a.tracking),onCheck:e=>{const t={tracking:e};r((e=>({...e,...t})))},checked:a.tracking,name:"mailpoet_tracking"})}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{children:[d.x.I18n.t("welcomeWizardUsageTrackingStepTrackingLabel")," "]}),(0,m.jsxs)("div",{className:"mailpoet-wizard-note",children:[(0,m.jsx)("span",{children:d.x.I18n.t("welcomeWizardUsageTrackingStepTrackingLabelNoteNote")}),x()(d.x.I18n.t("welcomeWizardUsageTrackingStepTrackingLabelNote"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/article/130-sharing-your-data-with-us","data-beacon-article":"57ce0aaac6979108399a0454",target:"_blank",rel:"noopener noreferrer",children:e},t)))]})]})]})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(Ae.z,{className:"mailpoet-wizard-continue-button",isFullWidth:!0,type:"submit",withSpinner:t,disabled:t,children:d.x.I18n.t("continue")})]})]})}oc.propTypes={loading:Ee().bool.isRequired,submitForm:Ee().func.isRequired},oc.displayName="WelcomeWizardUsageTrackingStep";var lc=n(85180),cc=n(6198),dc=n(14134);async function uc(e){await d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"set",data:e}).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}async function pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await uc({version:window.mailpoet_version}),window.location.href=e||window.finish_wizard_url}function mc(){const[e,t]=(0,s.useState)(!1),n=e=>{e.preventDefault(),t(!0)},a=()=>t(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:x()(d.x.I18n.t("welcomeWizardMSSAdvancedUsers"),/\[link](.*?)\[\/link]/g,((e,t)=>(0,m.jsx)("a",{onClick:n,href:"#",children:e},t)))}),e&&(0,m.jsxs)(dc.Z,{className:"mailpoet-welcome-wizard-confirmation-modal",title:d.x.I18n.t("welcomeWizardMSSConfirmationModalTitle"),onRequestClose:a,children:[(0,m.jsx)("p",{children:d.x.mailFunctionEnabled?d.x.I18n.t("welcomeWizardMSSConfirmationModalFirstParagraph"):d.x.I18n.t("welcomeWizardMSSConfirmationModalFirstParagraphWithoutMailFunction")}),(0,m.jsx)("p",{children:d.x.I18n.t("welcomeWizardMSSConfirmationModalSecondParagraph")}),(0,m.jsxs)("div",{className:"mailpoet-welcome-wizard-confirmation-modal-buttons",children:[(0,m.jsx)(o.Button,{variant:"secondary",onClick:a,children:d.x.I18n.t("welcomeWizardMSSConfirmationModalGoBackButton")}),(0,m.jsx)(o.Button,{onClick:async e=>{e.preventDefault(),await pc("admin.php?page=mailpoet-settings#/mta/other")},children:d.x.I18n.t("welcomeWizardMSSConfirmationModalOkButton")})]})]})]})}const hc="https://account.mailpoet.com/?ref=plugin-wizard&utm_source=plugin&utm_medium=onboarding&utm_campaign=purchase";function fc(){const e=(0,Ce.k6)(),{step:t}=(0,Ce.UO)(),n=(0,Ql.v9)("getKeyActivationState")();return(0,s.useEffect)((()=>{!0===n.isKeyValid&&e.replace(`/steps/${t}/part/3`)}),[n.isKeyValid,e,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:1,children:d.x.I18n.t("welcomeWizardMSSFirstPartTitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("p",{children:d.x.I18n.t("welcomeWizardMSSFirstPartSubtitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-welcome-wizard-mss-list",children:(0,m.jsxs)(o.List,{children:[(0,m.jsx)("li",{children:d.x.I18n.t("welcomeWizardMSSList1")}),(0,m.jsx)("li",{children:d.x.I18n.t("welcomeWizardMSSList2")}),d.x.subscribersCount<1e3?(0,m.jsx)("li",{children:d.x.I18n.t("welcomeWizardMSSList3Free")}):(0,m.jsx)("li",{children:d.x.I18n.t("welcomeWizardMSSList3Paid")})]})}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(o.Button,{className:"mailpoet-wizard-continue-button",isFullWidth:!0,href:hc,target:"_blank",rel:"noopener noreferrer",onClick:n=>function(e,t,n){e.preventDefault(),window.open(hc),t.push(`/steps/${n}/part/2`)}(n,e,t),iconEnd:(0,m.jsx)(lc.Z,{icon:cc.Z}),children:d.x.I18n.t("welcomeWizardMSSFirstPartButton")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(mc,{})]})}var gc=n(11478),xc=n(18151);function _c(){const e=(0,Ce.k6)(),{step:t}=(0,Ce.UO)(),n=(0,Ql.v9)("getKeyActivationState")();return(0,s.useEffect)((()=>{!0===n.isKeyValid&&e.push(`/steps/${t}/part/3`)}),[n.isKeyValid,e,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.Heading,{level:1,children:d.x.I18n.t("welcomeWizardMSSSecondPartTitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("p",{children:d.x.I18n.t("welcomeWizardMSSSecondPartEnterKey")}),(0,m.jsx)("p",{children:x()(d.x.I18n.t("welcomeWizardMSSSecondPartNoAccount"),/\[link](.*?)\[\/link]/g,((e,t)=>(0,m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://account.mailpoet.com/?ref=plugin-wizard&utm_source=plugin&utm_medium=onboarding&utm_campaign=purchase",children:e},t)))}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("label",{htmlFor:"mailpoet_premium_key",children:[(0,m.jsx)("span",{className:"mailpoet-wizard-label",children:d.x.I18n.t("welcomeWizardMSSSecondPartInputLabel")}),(0,m.jsx)(xc.c,{placeholder:d.x.I18n.t("welcomeWizardMSSSecondPartInputPlaceholder"),isFullWidth:!0})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(gc.X,{label:d.x.I18n.t("welcomeWizardMSSSecondPartButton"),isFullWidth:!0}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(mc,{})]})}function bc(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_t.X,{level:1,children:d.x.I18n.t("welcomeWizardMSSThirdPartTitle")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("p",{children:d.x.I18n.t("welcomeWizardMSSThirdPartFirstParagraph")}),(0,m.jsx)("p",{children:d.x.I18n.t("welcomeWizardMSSThirdPartSecondParagraph")}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(o.Button,{className:"mailpoet-wizard-continue-button",type:"button",onClick:()=>pc(),isFullWidth:!0,children:d.x.I18n.t("welcomeWizardMSSThirdPartButton")})]})}function vc(){const{path:e}=(0,Ce.$B)(),{step:t}=(0,Ce.UO)();return(0,m.jsxs)(Ce.rs,{children:[(0,m.jsx)(Ce.AW,{exact:!0,path:`${e}`,children:(0,m.jsx)(Ce.l_,{to:`/steps/${t}/part/1`})}),(0,m.jsx)(Ce.AW,{path:`${e}/part/1`,children:(0,m.jsx)(fc,{})}),(0,m.jsx)(Ce.AW,{path:`${e}/part/2`,children:(0,m.jsx)(_c,{})}),(0,m.jsx)(Ce.AW,{path:`${e}/part/3`,children:(0,m.jsx)(bc,{})})]})}const yc=e=>{let{name:t,address:n}=e;const a=n.split("@").pop().toLowerCase();return window.mailpoet_free_domains.indexOf(a)>-1?(e=>{let{name:t,address:n}=e;const a=`wordpress@${window.location.hostname.replace("www.","")}`;return{sender:{name:t,address:a},reply_to:{name:t,address:n},"signup_confirmation.from.address":a,"signup_confirmation.from.name":t,"signup_confirmation.reply_to.address":n,"signup_confirmation.reply_to.name":t}})({name:t,address:n}):(e=>{let{name:t,address:n}=e;return{sender:{name:t,address:n},reply_to:{name:t,address:n},"signup_confirmation.from.address":n,"signup_confirmation.from.name":t,"signup_confirmation.reply_to.address":n,"signup_confirmation.reply_to.name":t}})({name:t,address:n})},wc=()=>{let e=3;return window.mailpoet_woocommerce_active&&(e+=1),e},jc=(e,t,n)=>{n<wc()?e.push(`/steps/${n+1}`):t()};var Sc=n(4918);function kc(e){let{match:t,history:n}=e;const a=wc(),r=parseInt(t.params.step,10),[i,l]=(0,s.useState)(!1),[d,u]=(0,Ql.yu)("sender"),p=(0,Ql.yu)("analytics")[1],h=(0,Ql.yu)("3rd_party_libs")[1];(0,s.useEffect)((()=>{(r>a||r<1)&&n.push("/steps/1")}),[r,a,n]);const f=(0,ot.r$)(jc,n,pc),g=(0,s.useCallback)((async(e,t)=>{l(!0);const n={enabled:e?"1":""},a={enabled:t?"1":""},i={analytics:n,"3rd_party_libs":a};await uc(i),p(n),h(a),f(r),l(!1)}),[f,r,p,h]),x=(0,s.useCallback)((e=>{u({...d,...e})}),[d,u]),_=(0,s.useCallback)((async()=>{l(!0),await uc(yc(d)).then((()=>f(r))),l(!1)}),[f,d,r]),b=(0,s.useCallback)((async e=>{e.preventDefault(),l(!0);const t={address:window.admin_email,name:""};await uc(yc(t)).then((()=>{u(t),f(r)})),l(!1)}),[f,r,u]),v=1===(y=r)?"WelcomeWizardSenderStep":2===y?"WelcomeWizardUsageTrackingStep":window.mailpoet_woocommerce_active&&3===y?"WizardWooCommerceStep":"WelcomeWizardPitchMSSStep";var y;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(St.B,{}),(0,m.jsx)(c.D,{logoWithLink:!1,children:(0,m.jsx)(Sc.R,{count:a,current:r})}),(0,m.jsxs)(Xl,{children:["WelcomeWizardSenderStep"===v?(0,m.jsx)(ac,{illustrationUrl:window.wizard_sender_illustration_url,children:(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(ic,{update_sender:x,submit_sender:_,skipStep:b,loading:i,sender:d})})}):null,"WelcomeWizardUsageTrackingStep"===v?(0,m.jsx)(ac,{illustrationUrl:window.wizard_tracking_illustration_url,children:(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(oc,{loading:i,submitForm:g})})}):null,"WelcomeWizardPitchMSSStep"===v?(0,m.jsx)(ac,{illustrationUrl:window.wizard_MSS_pitch_illustration_url,children:(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(vc,{})})}):null,"WizardWooCommerceStep"===v?(0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(rc,{isWizardStep:!0,redirectToNextStep:()=>f(r)})}):null]})]})}function Nc(){let e="/steps/1";window.location.search.includes("woocommerce-setup")&&(e="/woocommerce");const t=(0,l.S)(window);return(0,m.jsx)(l.k.Provider,{value:t,children:(0,m.jsxs)(Ne.HashRouter,{children:[(0,m.jsx)(u.w,{}),(0,m.jsxs)(Ce.rs,{children:[(0,m.jsx)(Ce.AW,{path:"/steps/:step",component:(0,o.withBoundary)(kc)}),(0,m.jsx)(Ce.AW,{path:"/woocommerce",component:(0,o.withBoundary)(rc)}),(0,m.jsx)(Ce.AW,{render:()=>(0,m.jsx)(Ce.l_,{to:e})})]})]})})}kc.displayName="WelcomeWizardStepsController";const Cc=document.getElementById("mailpoet-wizard-container");function Ic(){const[e,t]=(0,s.useState)(null),n=(0,l.S)(window),a=n.notices.error;function r(r){const i=r.target.name,s=r.target.checked;d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"featureFlags",action:"set",data:{[i]:s?1:0}}).done((()=>{const a=e[i];a.value=s,t({...e,[i]:a});const r=`Feature '${i}' was ${s?"enabled":"disabled"}.`;n.notices.success((0,m.jsx)("p",{children:r}))})).fail((e=>{e.errors.length>0&&a(e.errors.map((e=>(0,m.jsx)("p",{children:e.message},e.message))),{scroll:!0})}))}return(0,s.useEffect)((()=>{d.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"featureFlags",action:"getAll"}).done((e=>{const n=e.data.reduce(((e,t)=>({...e,[t.name]:t})),{});t(n)})).fail((e=>{e.errors.length>0&&a((0,m.jsx)(m.Fragment,{children:e.errors.map((e=>(0,m.jsx)("p",{children:e.message})))}),{scroll:!0})}))}),[a]),null===e?(0,m.jsx)("p",{children:"Loading experimental features..."}):0===Object.values(e).length?(0,m.jsx)("p",{children:"There are no experimental features at the moment."}):(0,m.jsx)(l.k.Provider,{value:n,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.w,{}),Object.values(e).map((e=>{const t=`experimental-feature-${e.name}`;return(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:t,children:[(0,m.jsx)("input",{id:t,type:"checkbox",name:e.name,defaultChecked:e.value,onChange:r})," ",e.name]})},e.name)}))]})})}Cc&&((0,o.registerTranslations)(),(0,Gl.N)(),i.render((0,m.jsx)(Nc,{}),Cc));const Tc=document.getElementById("experimental_features_container");Ic.displayName="ExperimentalFeatures",Tc&&((0,o.registerTranslations)(),i.render((0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Ic,{})}),Tc));var Dc=n(3657);function Ec(e){let{message:t,editing:n}=e;return n?(0,m.jsx)("textarea",{value:t,className:"mailpoet-logs-full-message",readOnly:!0}):(0,m.jsx)(m.Fragment,{children:`${t.substr(0,150)}…`})}function Pc(e){let{log:t}=e;const[n,a]=(0,s.useState)(!1);return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{role:"gridcell",children:t.name}),(0,m.jsx)("td",{onClick:function(e){(function(e){return(e.ctrlKey||e.metaKey)&&!e.altKey})(e)&&(n||a(!0))},role:"gridcell",children:(0,m.jsx)(Ec,{message:t.message,editing:n})}),(0,m.jsx)("td",{role:"gridcell",children:d.x.Date.full(t.created_at)})]},`log-row-${t.id}`)}function Oc(e){let{logs:t,onFilter:n,originalFrom:a,originalTo:r,originalSearch:i,originalOffset:l,originalLimit:c}=e;const[u,p]=(0,s.useState)(a??void 0),[h,f]=(0,s.useState)(r??void 0),[g,x]=(0,s.useState)(l??""),[_,b]=(0,s.useState)(c??""),[v,y]=(0,s.useState)(i||""),w=(0,wn.curry)(((e,t)=>{e(null!==t?d.x.Date.format(t,{format:"Y-m-d"}):void 0)})),j=(0,s.useCallback)((()=>{const e={};u&&(e.from=u),h&&(e.to=h),g&&""!==g.trim()&&(e.offset=g),_&&""!==_.trim()&&(e.limit=_),v&&""!==v.trim()&&(e.search=v.trim()),n(e)}),[u,_,g,v,h,n]);return(0,m.jsxs)("div",{className:"mailpoet-listing mailpoet-logs",children:[(0,m.jsxs)("div",{className:"mailpoet-listing-header",children:[(0,m.jsxs)("div",{className:"mailpoet-listing-search",children:[(0,m.jsx)("label",{htmlFor:"search_input",className:"screen-reader-text",children:d.x.I18n.t("searchLabel")}),(0,m.jsx)(o.Input,{dimension:"small",iconStart:Dc.J,type:"search",id:"search_input",name:"s",onChange:e=>y(e.target.value),value:v,placeholder:d.x.I18n.t("searchLabel")})]}),(0,m.jsxs)("div",{className:"mailpoet-listing-filters",children:[`${d.x.I18n.t("from")}:`,(0,m.jsxs)(o.ErrorBoundary,{children:[(0,m.jsx)(Rn,{dateFormat:"MMMM d, yyyy",onChange:w(p),maxDate:new Date,selected:u?(0,gs.default)(u):void 0,dimension:"small"}),`${d.x.I18n.t("to")}:`,(0,m.jsx)(Rn,{dateFormat:"MMMM d, yyyy",onChange:w(f),maxDate:new Date,selected:h?(0,gs.default)(h):void 0,dimension:"small"})]})]}),(0,m.jsxs)("div",{className:"mailpoet-logs-limit",children:[(0,m.jsx)("label",{htmlFor:"offset_input",className:"screen-reader-text",children:d.x.I18n.t("offsetLabel")}),(0,m.jsx)(o.Input,{dimension:"small",id:"offset_input",name:"o",type:"number",onChange:e=>x(e.target.value),value:g,placeholder:d.x.I18n.t("offsetLabel")})]}),(0,m.jsxs)("div",{className:"mailpoet-logs-limit",children:[(0,m.jsx)("label",{htmlFor:"limit_input",className:"screen-reader-text",children:d.x.I18n.t("limitLabel")}),(0,m.jsx)(o.Input,{dimension:"small",id:"limit_input",name:"l",type:"number",onChange:e=>b(e.target.value),value:_,placeholder:d.x.I18n.t("limitLabel")})]}),(0,m.jsx)(o.Button,{dimension:"small",onClick:j,children:d.x.I18n.t("filter")})]}),(0,m.jsxs)("table",{className:"mailpoet-listing-table widefat striped",role:"grid",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:d.x.I18n.t("tableHeaderName")}),(0,m.jsx)("th",{children:d.x.I18n.t("tableHeaderMessage")}),(0,m.jsx)("th",{children:d.x.I18n.t("tableHeaderCreatedOn")})]})}),(0,m.jsx)("tbody",{children:(0,m.jsx)(o.ErrorBoundary,{children:t.map((e=>(0,m.jsx)(Pc,{log:e},`log-${e.id}`)))})})]})]})}Pc.displayName="Log",Oc.displayName="LogsList";const Rc=document.getElementById("mailpoet_logs_container");if(Rc){const e=new URL(window.location.href);i.render((0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(Oc,{logs:window.mailpoet_logs,originalFrom:e.searchParams.get("from"),originalTo:e.searchParams.get("to"),originalSearch:e.searchParams.get("search"),originalOffset:e.searchParams.get("offset"),originalLimit:e.searchParams.get("limit"),onFilter:t=>{e.searchParams.delete("from"),e.searchParams.delete("to"),e.searchParams.delete("search"),e.searchParams.delete("offset"),e.searchParams.delete("limit"),Object.entries(t).forEach((t=>{let[n,a]=t;e.searchParams.append(n,a)})),window.location.href=e.href}})}),Rc)}var Mc=n(88437);function Ac(e){let{onRequestClose:t}=e;const[n,a]=(0,s.useState)(!1);return Te()((e=>{e(document).on("click",".notice .mailpoet-js-button-fix-this",(()=>{a(!0)}))})),(0,m.jsxs)(l.k.Provider,{value:(0,l.S)(window),children:[(0,m.jsx)(u.w,{}),n&&(0,m.jsx)(Mc.d,{onRequestClose:()=>{a(!1),t()}})]})}Ac.defaultProps={onRequestClose:wn.noop};const Lc=document.getElementById("mailpoet_set_from_address_modal");Lc&&i.render((0,m.jsx)(Ac,{onRequestClose:()=>{window.location.href.includes("?page=mailpoet-settings")&&window.location.reload()}}),Lc);const Fc=e=>(async e=>{if("MailPoet"!==d.x.mtaMethod)return!0;const t=await(async()=>"MailPoet"!==d.x.mtaMethod?[]:(await d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"mailer",action:"getVerifiedSenderDomains"})).data||[])(),n=(0,Un.DA)(e);return-1!==t.indexOf(n)||-1!==(await(async()=>"MailPoet"!==d.x.mtaMethod?[]:(await d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"mailer",action:"getAuthorizedEmailAddresses"})).data||[])()).indexOf(e)})(e).then((e=>{if(!e)return d.x.Notice.error(d.x.I18n.t("mailerSendingNotResumedUnauthorized"),{scroll:!0}),d.x.trackEvent("Unauthorized email used",{"Unauthorized email source":"send"}),!1;d.x.Ajax.post({api_version:d.x.apiVersion,endpoint:"mailer",action:"resumeSending"}).done((()=>{d.x.Notice.success(d.x.I18n.t("mailerSendingResumedNotice"))})).fail((e=>{e.errors.length>0&&d.x.Notice.error(e.errors.map((e=>e.message)),{scroll:!0})}))}));Te()((e=>{e(document).on("click",".notice .mailpoet-js-button-resume-sending",(e=>{Fc(e.target.value)}))}));var qc=n(98764);const Wc=e=>{const t=window.location.href.includes("?page=mailpoet-settings"),n=window.location.href.includes("?page=mailpoet-newsletters#/send");(e=>{const t=`${(0,Un.HD)()||"some other"} page`;e&&e.type&&"email"===e.type?d.x.trackEvent("MSS in plugin authorize email",{"authorized email source":"modal","original page":t,wasSuccessful:"yes"}):e&&e.type&&"domain"===e.type&&d.x.trackEvent("MSS in plugin verify sender domain",{"verify sender domain source":"modal","original page":t,wasSuccessful:"yes"})})(e),(t||n)&&window.location.reload()};function Bc(){const[e,t]=(0,s.useState)(""),[n,a]=(0,s.useState)("email");return(0,s.useEffect)((()=>{const e=e=>{var n,r,i,s;e.preventDefault();const o=String((null==e||null===(n=e.target)||void 0===n||null===(r=n.dataset)||void 0===r?void 0:r.email)||""),l=String((null==e||null===(i=e.target)||void 0===i||null===(s=i.dataset)||void 0===s?void 0:s.type)||"");a(l||"email"),t(o)};Te()((t=>{t(document).on("click",".mailpoet-js-button-authorize-email-and-sender-domain",e)}))}),[]),(0,m.jsx)(m.Fragment,{children:e&&(0,m.jsx)(qc.h,{senderEmail:e,onRequestClose:()=>{t("")},onSuccessAction:Wc,showSenderEmailTab:"email"===n,showSenderDomainTab:"domain"===n,initialTab:"domain"===n?"sender_domain":"sender_email"})})}const Uc=document.getElementById("mailpoet_authorize_sender_email_modal");Uc&&i.render((0,m.jsx)(Bc,{}),Uc);var Vc=n(83653),Zc=n(11135);const $c=()=>{window.location.href=window.mailpoet_welcome_wizard_url},Yc="landing_page_cta_display",Hc="landing_page_cta_display_variant_begin_setup",zc="landing_page_cta_display_variant_get_started_for_free";function Kc(){return(0,m.jsxs)(Vc.Experiment,{name:Yc,children:[(0,m.jsx)(Vc.Variant,{name:Hc,children:(0,m.jsx)(o.Button,{onClick:()=>{Vc.emitter.emitWin(Yc)},children:(0,Me.__)("Begin setup","mailpoet")})}),(0,m.jsx)(Vc.Variant,{name:zc,children:(0,m.jsx)(o.Button,{onClick:()=>{Vc.emitter.emitWin(Yc)},children:(0,Me.__)("Get started for free","mailpoet")})})]})}function Gc(){return(0,m.jsx)("section",{className:"landing-header",children:(0,m.jsxs)("div",{className:"mailpoet-content-center",children:[(0,m.jsx)(_t.X,{level:0,children:(0,Me.__)("Better email — without leaving WordPress","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("Whether you’re just starting out or have already established your business, we’ve got what you need to reach customers where they are.","mailpoet")}),(0,m.jsx)(Kc,{})]})})}function Qc(){return(0,m.jsx)("section",{className:"landing-footer",children:(0,m.jsxs)("div",{className:"landing-footer-content mailpoet-content-center",children:[(0,m.jsxs)(_t.X,{level:4,children:[" ",(0,Me.__)("Ready to start using MailPoet?","mailpoet")," "]}),(0,m.jsx)(Kc,{})]})})}function Xc(){const e=[{slug:"item-1",title:(0,Me.__)("What types of campaigns can I create with MailPoet?","mailpoet"),text:(0,Me.__)("MailPoet allows you to create five different types of emails: Newsletter, Welcome Email, Latest Post Notifications, Re-engagement Emails and WooCommerce.","mailpoet"),readMoreText:(0,Me.__)("Read More","mailpoet"),readMoreLink:"https://kb.mailpoet.com/article/141-create-an-email-types-of-campaigns"},{slug:"item-2",title:(0,Me.__)("How do I send a newsletter?","mailpoet"),text:(0,Me.__)("You can manually create a standard newsletter to be sent immediately or scheduled to be sent at a later time. Simply go to MailPoet > Emails and click on the “+ New Email” button to select “Newsletter”.","mailpoet"),readMoreText:(0,Me.__)("Read More","mailpoet"),readMoreLink:"https://kb.mailpoet.com/article/344-create-a-standard-newsletter"},{slug:"item-3",title:(0,Me.__)("Do I need a paid plan?","mailpoet"),text:(0,Me.__)("When you install the MailPoet plugin, you can use it for free up to 1,000 subscribers. If you have more than 1,000 subscribers, you'll need one of our paid plans: Creator, Business, or Agency. The best choice of plan type will depend on whether you want to send with our MailPoet Sending Service or your own sending method, as well as the number of sites you will be using MailPoet on.","mailpoet"),readMoreText:(0,Me.__)("Read More","mailpoet"),readMoreLink:"https://kb.mailpoet.com/article/349-choosing-your-mailpoet-plan"},{slug:"item-4",title:(0,Me.__)("How do I import my customers from WooCommerce?","mailpoet"),text:(0,Me.__)('The WooCommerce Customers list is a list automatically created by MailPoet with all of your WooCommerce customers. It also includes “Guest" customers. If WooCommerce is active, users that installed or updated the plugin should have chosen if they wanted to add the customers as “Subscribed” or “Unsubscribed” to the WooCommerce Customers list.',"mailpoet"),readMoreText:(0,Me.__)("Read More","mailpoet"),readMoreLink:"https://kb.mailpoet.com/article/284-import-old-customers-to-the-woocommerce-customers-list"},{slug:"item-5",title:(0,Me.__)("How do I customize emails for my store?","mailpoet"),text:(0,Me.__)("You can create and send the following 4 WooCommerce Automatic emails with MailPoet: Abandoned Shopping Cart, First Purchase, Purchased In This Category, Purchased This Product. You can read more about each in our article.","mailpoet"),readMoreText:(0,Me.__)("Read More","mailpoet"),readMoreLink:"https://kb.mailpoet.com/article/277-woocommerce-automatic-emails"}];return(0,m.jsxs)("section",{className:"landing-faq",children:[(0,m.jsxs)("div",{className:"mailpoet-content-center landing-faq-header",children:[(0,m.jsxs)(_t.X,{level:2,children:[" ",(0,Me.__)("Frequently asked questions","mailpoet")," "]}),(0,m.jsx)("p",{children:x()((0,Me.__)("Here are some common questions on getting started. Can't find what you're looking for? [link]View all resources[/link]","mailpoet"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/",rel:"noopener noreferrer",target:"_blank",children:e},e)))})]}),(0,m.jsx)("div",{className:"mailpoet-content-center landing-faq-mobile",children:(0,m.jsx)(_t.X,{level:2,children:(0,Me.__)("FAQ","mailpoet")})}),(0,m.jsx)("div",{className:"mailpoet-faq-accordion",children:e.map((e=>(0,m.jsxs)("details",{children:[(0,m.jsxs)("summary",{children:[" ",(0,m.jsxs)("strong",{children:[" ",e.title," "]})," "]}),(0,m.jsxs)("div",{className:"content",children:[(0,m.jsx)("p",{children:e.text}),(0,m.jsx)("p",{children:(0,m.jsx)("a",{href:e.readMoreLink,rel:"noopener noreferrer",target:"_blank",children:e.readMoreText})})]})]},e.slug)))}),(0,m.jsxs)("div",{className:"mailpoet-content-center landing-faq-mobile",children:[(0,m.jsx)("p",{children:(0,Me.__)("Can’t find what you’re looking for?","mailpoet")}),(0,m.jsx)("p",{children:x()((0,Me.__)("[link]View all resources[/link]","mailpoet"),/\[link\](.*?)\[\/link\]/,(e=>(0,m.jsx)("a",{href:"https://kb.mailpoet.com/",rel:"noopener noreferrer",target:"_blank",children:e},e)))})]})]})}Vc.emitter.addPlayListener(((e,t)=>{(0,Zc.KN)("Experiment Display",{experiment:e,variant:t},Zc.BY)})),Vc.emitter.addWinListener(((e,t)=>{(0,Zc.KN)("Experiment Win",{experiment:e,variant:t},Zc.BY,$c)})),Vc.emitter.defineVariants(Yc,[Hc,zc],[50,50]),Vc.experimentDebugger.setDebuggerAvailable(d.x.FeaturesController.isSupported("landingpage_ab_test_debugger")),Vc.experimentDebugger.enable(),Kc.displayName="Landingpage Ab Test",Gc.displayName="Landingpage Header",Qc.displayName="Landingpage Footer",Xc.displayName="Landingpage FAQ";const Jc={heroImage:`${d.x.cdnUrl}landingpage/landingpage-hero-image.png`,featureImages:{icon_1:`${d.x.cdnUrl}landingpage/feature_icon_1.png`,icon_2:`${d.x.cdnUrl}landingpage/feature_icon_2.png`,icon_3:`${d.x.cdnUrl}landingpage/feature_icon_3.png`},wooCommerceFeatureImages:{feature_1:`${d.x.cdnUrl}landingpage/woo_feature_automate_your_marketing.png`,feature_2:`${d.x.cdnUrl}landingpage/woo_feature_measure_revenue_per_email.png`,feature_3:`${d.x.cdnUrl}landingpage/woo_feature_let_your_brand_shine.png`}};function ed(){return(0,m.jsxs)("section",{className:"landing-content",children:[(0,m.jsxs)("div",{className:"hero-section mailpoet-content-center",children:[(0,m.jsx)("img",{src:Jc.heroImage,alt:"",className:"hero-image landingpage-images"}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(_t.X,{level:4,children:(0,Me.__)("Powering email marketing for 600,000+ websites","mailpoet")}),(0,m.jsx)("br",{}),(0,m.jsxs)(Nn.Grid.ThreeColumns,{className:"landingpage-general-features",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{src:Jc.featureImages.icon_1,alt:"",className:"landingpage-feature-icon"}),(0,m.jsx)("strong",{children:(0,Me.__)("Deliver beautiful emails","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("Choose from our pre-built templates or create your own with our drag-and-drop email builder.","mailpoet")})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{src:Jc.featureImages.icon_2,alt:"",className:"landingpage-feature-icon"}),(0,m.jsx)("strong",{children:(0,Me.__)("Grow your mailing list","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("Use our custom sign-up forms to reach more subscribers while you deliver engaging content.","mailpoet")})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{src:Jc.featureImages.icon_3,alt:"",className:"landingpage-feature-icon"}),(0,m.jsx)("strong",{children:(0,Me.__)("Reach the right people","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("From the first hello to repeated purchases, send emails to the right people at the right time.","mailpoet")})]})]})]}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsxs)("div",{className:"landingpage-wooCommerce-features",children:[(0,m.jsxs)("div",{className:"mailpoet-content-center",children:[(0,m.jsx)(_t.X,{level:2,children:(0,Me.__)("MailPoet + WooCommerce","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("Hyper-relevant content for every stage of the customer’s journey","mailpoet")})]}),(0,m.jsx)("br",{}),(0,m.jsxs)(Nn.Grid.TwoColumns,{className:"landingpage-wooCommerce-feature-item",children:[(0,m.jsx)("div",{children:(0,m.jsx)("img",{src:Jc.wooCommerceFeatureImages.feature_1,alt:(0,Me.__)("Automate your marketing feature Image","mailpoet"),className:"landingpage-images"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:(0,Me.__)("Automate your marketing","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("Drive sales and build loyalty through automated marketing messages that respond to your customer’s purchase data.","mailpoet")})]})]}),(0,m.jsxs)(Nn.Grid.TwoColumns,{className:"landingpage-wooCommerce-feature-item",children:[(0,m.jsx)("div",{children:(0,m.jsx)("img",{src:Jc.wooCommerceFeatureImages.feature_2,alt:(0,Me.__)("Measure revenue per email feature Image","mailpoet"),className:"landingpage-images"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:(0,Me.__)("Measure revenue per email","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("See how much revenue your campaign is bringing and make improvements based on auto-generated email statistics.","mailpoet")})]})]}),(0,m.jsxs)(Nn.Grid.TwoColumns,{className:"landingpage-wooCommerce-feature-item",children:[(0,m.jsx)("div",{children:(0,m.jsx)("img",{src:Jc.wooCommerceFeatureImages.feature_3,alt:(0,Me.__)("Let your brand shine feature Image","mailpoet"),className:"landingpage-images"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:(0,Me.__)("Let your brand shine","mailpoet")}),(0,m.jsx)("p",{children:(0,Me.__)("Use our inbuilt WooCommerce email customizer to design your store's transactional emails and build customer confidence.","mailpoet")})]})]})]})]})}function td(){return(0,m.jsx)(l.k.Provider,{value:(0,l.S)(window),children:(0,m.jsxs)("main",{children:[(0,m.jsx)(St.B,{}),(0,m.jsx)(c.Q,{}),(0,m.jsx)(Je.A,{color:"#fff"}),(0,m.jsx)(Gc,{}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(ed,{}),(0,m.jsx)("div",{className:"mailpoet-gap"}),(0,m.jsx)(Xc,{}),(0,m.jsx)(Qc,{})]})})}ed.displayName="Landingpage Content",td.displayName="Landingpage";const nd=document.getElementById("mailpoet_landingpage_container");nd&&((0,o.registerTranslations)(),i.render((0,m.jsx)(o.ErrorBoundary,{children:(0,m.jsx)(td,{})}),nd)),n(51072)},51072:function(){document.addEventListener("DOMContentLoaded",(function(){window.mailpoet_track_wizard_loaded_via_woocommerce&&(window.MailPoet.trackEvent("User opened the MailPoet setup task in WooCommerce > Home",{"WooCommerce version":window.mailpoet_woocommerce_version}),window.MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"delete",data:"send_event_that_wizard_was_loaded_via_woocommerce"}))}))},71050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(66557),r=n(47010),i=n(44438),s=36e5;function o(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.Z)(e,n*s)}},94392:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(47010),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.Z)(e,6e4*n)}},31247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(84613),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.default)(e,12*n)}},31213:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(78435),r=n(81793),i=n(44438),s=864e5;function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t),l=n.getTime()-(0,a.Z)(n),c=o.getTime()-(0,a.Z)(o);return Math.round((l-c)/s)}},46418:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t),s=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return 12*s+o}},27088:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(72611),r=n(78435),i=n(44438),s=6048e5;function o(e,t,n){(0,i.Z)(2,arguments);var o=(0,a.default)(e,n),l=(0,a.default)(t,n),c=o.getTime()-(0,r.Z)(o),d=l.getTime()-(0,r.Z)(l);return Math.round((c-d)/s)}},86854:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t);return n.getFullYear()-i.getFullYear()}},68392:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e);return t.setHours(23,59,59,999),t}},48216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},33184:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getDate();return n}},32097:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getDay();return n}},42370:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getHours();return n}},84097:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(78789),r=n(72611),i=n(44438);function s(e){return(0,i.Z)(1,arguments),(0,r.default)(e,{weekStartsOn:1})}function o(e){(0,i.Z)(1,arguments);var t=(0,a.default)(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var o=s(r),l=new Date(0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);var c=s(l);return t.getTime()>=o.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function l(e){(0,i.Z)(1,arguments);var t=o(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var a=s(n);return a}var c=6048e5;function d(e){(0,i.Z)(1,arguments);var t=(0,a.default)(e),n=s(t).getTime()-l(t).getTime();return Math.round(n/c)+1}},91352:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getMinutes();return n}},66821:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getMonth();return n}},12838:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=Math.floor(t.getMonth()/3)+1;return n}},54909:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getSeconds();return n}},31359:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getTime();return n}},42384:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){return(0,r.Z)(1,arguments),(0,a.default)(e).getFullYear()}},40538:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t);return n.getTime()>i.getTime()}},94326:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t);return n.getTime()<i.getTime()}},41667:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(27747),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t);return n.getTime()===i.getTime()}},99114:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e),i=(0,a.default)(t);return n.getFullYear()===i.getFullYear()}},34256:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e,t){(0,r.Z)(2,arguments);var n=(0,a.default)(e).getTime(),i=(0,a.default)(t.start).getTime(),s=(0,a.default)(t.end).getTime();if(!(i<=s))throw new RangeError("Invalid interval");return n>=i&&n<=s}},82399:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){var t,n;if((0,r.Z)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,a.default)(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)})),n||new Date(NaN)}},1711:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){var t,n;if((0,r.Z)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,a.default)(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)})),n||new Date(NaN)}},84188:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var a=n(60016),r=n(59719),i=n(78789);function s(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var o=n(87933),l=n(78435),c=n(28135),d=n(66557),u=n(40640),p=n(44438);function m(e,t,n){(0,p.Z)(2,arguments);var a=n||{},r=a.locale,s=r&&r.options&&r.options.weekStartsOn,o=null==s?0:(0,d.Z)(s),l=null==a.weekStartsOn?o:(0,d.Z)(a.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=(0,i.default)(e),u=(0,d.Z)(t),m=c.getUTCDay(),h=u%7,f=(h+7)%7,g=(f<l?7:0)+u-m;return c.setUTCDate(c.getUTCDate()+g),c}var h=n(84327),f=n(27191),g=n(32275),x=n(15290),_=/^(1[0-2]|0?\d)/,b=/^(3[0-1]|[0-2]?\d)/,v=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,y=/^(5[0-3]|[0-4]?\d)/,w=/^(2[0-3]|[0-1]?\d)/,j=/^(2[0-4]|[0-1]?\d)/,S=/^(1[0-1]|0?\d)/,k=/^(1[0-2]|0?\d)/,N=/^[0-5]?\d/,C=/^[0-5]?\d/,I=/^\d/,T=/^\d{1,2}/,D=/^\d{1,3}/,E=/^\d{1,4}/,P=/^-?\d+/,O=/^-?\d/,R=/^-?\d{1,2}/,M=/^-?\d{1,3}/,A=/^-?\d{1,4}/,L=/^([+-])(\d{2})(\d{2})?|Z/,F=/^([+-])(\d{2})(\d{2})|Z/,q=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,W=/^([+-])(\d{2}):(\d{2})|Z/,B=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function U(e,t,n){var a=t.match(e);if(!a)return null;var r=parseInt(a[0],10);return{value:n?n(r):r,rest:t.slice(a[0].length)}}function V(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function Z(e,t){return U(P,e,t)}function $(e,t,n){switch(e){case 1:return U(I,t,n);case 2:return U(T,t,n);case 3:return U(D,t,n);case 4:return U(E,t,n);default:return U(new RegExp("^\\d{1,"+e+"}"),t,n)}}function Y(e,t,n){switch(e){case 1:return U(O,t,n);case 2:return U(R,t,n);case 3:return U(M,t,n);case 4:return U(A,t,n);default:return U(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function H(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function z(e,t){var n,a=t>0,r=a?t:1-t;if(r<=50)n=e||100;else{var i=r+50;n=e+100*Math.floor(i/100)-(e>=i%100?100:0)}return a?n:1-n}var K=[31,28,31,30,31,30,31,31,30,31,30,31],G=[31,29,31,30,31,30,31,31,30,31,30,31];function Q(e){return e%400==0||e%4==0&&e%100!=0}var X={G:{priority:140,parse:function(e,t,n,a){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,a){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,a){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return $(4,e,r);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:r});default:return $(t.length,e,r)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=z(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var s="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,a){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return $(4,e,r);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:r});default:return $(t.length,e,r)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var r=(0,u.Z)(e,a);if(n.isTwoDigitYear){var i=z(n.year,r);return e.setUTCFullYear(i,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,x.Z)(e,a)}var s="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(s,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,x.Z)(e,a)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,a){return Y("R"===t?4:t.length,e)},set:function(e,t,n,a){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,g.Z)(r)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,a){return Y("u"===t?4:t.length,e)},set:function(e,t,n,a){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,a){switch(t){case"Q":case"QQ":return $(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,a){switch(t){case"q":case"qq":return $(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,a){var r=function(e){return e-1};switch(t){case"M":return U(_,e,r);case"MM":return $(2,e,r);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:r});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,a){var r=function(e){return e-1};switch(t){case"L":return U(_,e,r);case"LL":return $(2,e,r);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:r});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,a){switch(t){case"w":return U(y,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return(0,x.Z)(function(e,t,n){(0,p.Z)(2,arguments);var a=(0,i.default)(e),r=(0,d.Z)(t),s=(0,f.Z)(a,n)-r;return a.setUTCDate(a.getUTCDate()-7*s),a}(e,n,a),a)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,a){switch(t){case"I":return U(y,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return(0,g.Z)(function(e,t){(0,p.Z)(2,arguments);var n=(0,i.default)(e),a=(0,d.Z)(t),r=(0,h.Z)(n)-a;return n.setUTCDate(n.getUTCDate()-7*r),n}(e,n,a),a)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"d":return U(b,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return $(t.length,e)}},validate:function(e,t,n){var a=Q(e.getUTCFullYear()),r=e.getUTCMonth();return a?t>=1&&t<=G[r]:t>=1&&t<=K[r]},set:function(e,t,n,a){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"D":case"DD":return U(v,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return $(t.length,e)}},validate:function(e,t,n){return Q(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,a){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,a){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=m(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,a){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return $(t.length,e,r);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:r});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=m(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,a){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return $(t.length,e,r);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:r});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=m(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,a){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return $(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:r})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,a){return e=function(e,t){(0,p.Z)(2,arguments);var n=(0,d.Z)(t);n%7==0&&(n-=7);var a=1,r=(0,i.default)(e),s=r.getUTCDay(),o=((n%7+7)%7<a?7:0)+n-s;return r.setUTCDate(r.getUTCDate()+o),r}(e,n,a),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,a){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(H(n),0,0,0),e},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(e,t,n,a){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(H(n),0,0,0),e},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(e,t,n,a){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(H(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,a){switch(t){case"h":return U(k,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,a){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,a){switch(t){case"H":return U(w,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,a){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,a){switch(t){case"K":return U(S,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,a){switch(t){case"k":return U(j,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,a){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,a){switch(t){case"m":return U(N,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,a){switch(t){case"s":return U(C,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return $(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,a){return $(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,a){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,a){switch(t){case"X":return V(L,e);case"XX":return V(F,e);case"XXXX":return V(q,e);case"XXXXX":return V(B,e);default:return V(W,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,a){switch(t){case"x":return V(L,e);case"xx":return V(F,e);case"xxxx":return V(q,e);case"xxxxx":return V(B,e);default:return V(W,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,a){return Z(e)},set:function(e,t,n,a){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,a){return Z(e)},set:function(e,t,n,a){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},J=X,ee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,te=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ne=/^'([^]*?)'?$/,ae=/''/g,re=/\S/,ie=/[a-zA-Z]/;function se(e,t,n,u){(0,p.Z)(3,arguments);var m=String(e),h=String(t),f=u||{},g=f.locale||a.Z;if(!g.match)throw new RangeError("locale must contain match property");var x=g.options&&g.options.firstWeekContainsDate,_=null==x?1:(0,d.Z)(x),b=null==f.firstWeekContainsDate?_:(0,d.Z)(f.firstWeekContainsDate);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=g.options&&g.options.weekStartsOn,y=null==v?0:(0,d.Z)(v),w=null==f.weekStartsOn?y:(0,d.Z)(f.weekStartsOn);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===h)return""===m?(0,i.default)(n):new Date(NaN);var j,S={firstWeekContainsDate:b,weekStartsOn:w,locale:g},k=[{priority:10,subPriority:-1,set:oe,index:0}],N=h.match(te).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,o.Z[t])(e,g.formatLong,S):e})).join("").match(ee),C=[];for(j=0;j<N.length;j++){var I=N[j];!f.useAdditionalWeekYearTokens&&(0,c.Do)(I)&&(0,c.qp)(I,h,e),!f.useAdditionalDayOfYearTokens&&(0,c.Iu)(I)&&(0,c.qp)(I,h,e);var T=I[0],D=J[T];if(D){var E=D.incompatibleTokens;if(Array.isArray(E)){for(var P=void 0,O=0;O<C.length;O++){var R=C[O].token;if(-1!==E.indexOf(R)||R===T){P=C[O];break}}if(P)throw new RangeError("The format string mustn't contain `".concat(P.fullToken,"` and `").concat(I,"` at the same time"))}else if("*"===D.incompatibleTokens&&C.length)throw new RangeError("The format string mustn't contain `".concat(I,"` and any other token at the same time"));C.push({token:T,fullToken:I});var M=D.parse(m,I,g.match,S);if(!M)return new Date(NaN);k.push({priority:D.priority,subPriority:D.subPriority||0,set:D.set,validate:D.validate,value:M.value,index:k.length}),m=M.rest}else{if(T.match(ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");if("''"===I?I="'":"'"===T&&(I=le(I)),0!==m.indexOf(I))return new Date(NaN);m=m.slice(I.length)}}if(m.length>0&&re.test(m))return new Date(NaN);var A=k.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return k.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),L=(0,i.default)(n);if(isNaN(L))return new Date(NaN);var F=(0,r.Z)(L,(0,l.Z)(L)),q={};for(j=0;j<A.length;j++){var W=A[j];if(W.validate&&!W.validate(F,W.value,S))return new Date(NaN);var B=W.set(F,q,W.value,S);B[0]?(F=B[0],s(q,B[1])):F=B}return F}function oe(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function le(e){return e.match(ne)[1].replace(ae,"'")}},30091:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(61600),r=n(44438),i=n(66557);function s(e,t){(0,r.Z)(1,arguments);var n=t||{},a=null==n.additionalDigits?2:(0,i.Z)(n.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,o=u(e);if(o.date){var l=p(o.date,a);s=m(l.restDateString,l.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var c,d=s.getTime(),h=0;if(o.time&&(h=f(o.time),isNaN(h)))return new Date(NaN);if(!o.timezone){var g=new Date(d+h),_=new Date(0);return _.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),_.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),_}return c=x(o.timezone),isNaN(c)?new Date(NaN):new Date(d+h+c)}var o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){var t,n={},a=e.split(o.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?t=a[0]:(n.date=a[0],t=a[1],o.timeZoneDelimiter.test(n.date)&&(n.date=e.split(o.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=o.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}function p(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};var r=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((a[1]||a[2]).length)}}function m(e,t){if(null===t)return new Date(NaN);var n=e.match(l);if(!n)return new Date(NaN);var a=!!n[4],r=h(n[1]),i=h(n[2])-1,s=h(n[3]),o=h(n[4]),c=h(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,c)?function(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+r),a}(t,o,c):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(_[t]||(b(e)?29:28))}(t,i,s)&&function(e,t){return t>=1&&t<=(b(e)?366:365)}(t,r)?(d.setUTCFullYear(t,i,Math.max(r,s)),d):new Date(NaN)}function h(e){return e?parseInt(e):1}function f(e){var t=e.match(c);if(!t)return NaN;var n=g(t[1]),r=g(t[2]),i=g(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i)?n*a.vh+r*a.yJ+1e3*i:NaN}function g(e){return e&&parseFloat(e.replace(",","."))||0}function x(e){if("Z"===e)return 0;var t=e.match(d);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(r*a.vh+i*a.yJ):NaN}var _=[31,null,31,30,31,30,31,31,30,31,30,31];function b(e){return e%400==0||e%4==0&&e%100!=0}},6257:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(78789),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),s=(0,a.Z)(t);return n.setMinutes(s),n}},5042:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(66557),r=n(78789),i=n(28208),s=n(44438);function o(e,t){(0,s.Z)(2,arguments);var n=(0,r.default)(e),o=(0,a.Z)(t),l=Math.floor(n.getMonth()/3)+1,c=o-l;return(0,i.default)(n,n.getMonth()+3*c)}},14603:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(78789),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),s=(0,a.Z)(t);return n.setSeconds(s),n}},57006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(78789),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),s=(0,a.Z)(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}},27747:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}},19752:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(78789),r=n(44438);function i(e){(0,r.Z)(1,arguments);var t=(0,a.default)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},22836:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(63703),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.default)(e,-n)}},76508:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(71050),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.default)(e,-n)}},79605:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(94392),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.default)(e,-n)}},35865:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(66557),r=n(31247),i=n(44438);function s(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(t);return(0,r.default)(e,-n)}},29514:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var a,r=n||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=r.width?String(r.width):i;a=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,l=r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}return a[e.argumentCallback?e.argumentCallback(t):t]}},e.exports=t.default},71248:function(e,t,n){var a={EventEmitter:n(71793),EmitterSubscription:n(10777)};e.exports=a},71793:function(e,t,n){"use strict";var a=n(10777),r=n(31073),i=n(53101),s=n(73928),o=function(){function e(){this._subscriber=new r,this._currentSubscription=null}var t=e.prototype;return t.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new a(this._subscriber,t,n))},t.once=function(e,t,n){var a=this;return this.addListener(e,(function(){a.removeCurrentListener(),t.apply(n,arguments)}))},t.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},t.removeCurrentListener=function(){this._currentSubscription||i(!1),this._subscriber.removeSubscription(this._currentSubscription)},t.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(s.thatReturnsTrue).map((function(e){return e.listener})):[]},t.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),a=0;a<n.length;a++){var r=n[a],i=t[r];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=o},10777:function(e,t,n){"use strict";var a=function(e){var t,n;function a(t,n,a){var r;return(r=e.call(this,t)||this).listener=n,r.context=a,r}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(n(56447));e.exports=a},56447:function(e){"use strict";var t=function(){function e(e){this.subscriber=e}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=t},31073:function(e,t,n){"use strict";var a=n(53101),r=function(){function e(){this._subscriptionsForType={},this._currentSubscription=null}var t=e.prototype;return t.addSubscription=function(e,t){t.subscriber!==this&&a(!1),this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},t.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},t.removeSubscription=function(e){var t=e.eventType,n=e.key,a=this._subscriptionsForType[t];a&&delete a[n]},t.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=r},35245:function(e){"use strict";var t=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n},13003:function(e,t,n){"use strict";var a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];void 0!==n.g.Int32Array&&(a=new Int32Array(a)),e.exports=function(e){for(var t=-1,n=0,r=e.length;n<r;n++)t=t>>>8^a[255&(t^e.charCodeAt(n))];return~t}},73928:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},53101:function(e){"use strict";e.exports=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];if(!e){var i;if(void 0===t)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(i=new Error(t.replace(/%s/g,(function(){return String(a[s++])})))).name="Invariant Violation"}throw i.framesToPop=1,i}}},71906:function(e,t){var n,a;n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,a=n&&/blob:/i.test((t.location||{}).protocol),r={},i=0,s={parse:function(n,a){var o=(a=a||{}).dynamicTyping||!1;if(y(o)&&(a.dynamicTypingFunction=o,o={}),a.dynamicTyping=o,a.transform=!!y(a.transform)&&a.transform,a.worker&&s.WORKERS_SUPPORTED){var l=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,a,o=(n=t.URL||t.webkitURL||null,a=e.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",a,")();"],{type:"text/javascript"})))),l=new t.Worker(o);return l.onmessage=g,l.id=i++,r[l.id]=l}();return l.userStep=a.step,l.userChunk=a.chunk,l.userComplete=a.complete,l.userError=a.error,a.step=y(a.step),a.chunk=y(a.chunk),a.complete=y(a.complete),a.error=y(a.error),delete a.worker,void l.postMessage({input:n,config:a,workerId:l.id})}var m=null;return s.NODE_STREAM_INPUT,"string"==typeof n?m=a.download?new c(a):new u(a):!0===n.readable&&y(n.read)&&y(n.on)?m=new p(a):(t.File&&n instanceof File||n instanceof Object)&&(m=new d(a)),m.stream(n)},unparse:function(e,t){var n=!1,a=!0,r=",",i="\r\n",o='"',l=o+o,c=!1,d=null,u=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(r=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(a=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");d=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+o),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(u=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var p=new RegExp(h(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return m(null,e,c);if("object"==typeof e[0])return m(d||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),m(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function m(e,t,n){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(o&&a){for(var c=0;c<e.length;c++)0<c&&(s+=r),s+=f(e[c],c);0<t.length&&(s+=i)}for(var d=0;d<t.length;d++){var u=o?e.length:t[d].length,p=!1,m=o?0===Object.keys(t[d]).length:0===t[d].length;if(n&&!o&&(p="greedy"===n?""===t[d].join("").trim():1===t[d].length&&0===t[d][0].length),"greedy"===n&&o){for(var h=[],g=0;g<u;g++){var x=l?e[g]:g;h.push(t[d][x])}p=""===h.join("").trim()}if(!p){for(var _=0;_<u;_++){0<_&&!m&&(s+=r);var b=o&&l?e[_]:_;s+=f(t[d][b],_)}d<t.length-1&&(!n||0<u&&!m)&&(s+=i)}}return s}function f(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var a=!1;u&&"string"==typeof e&&u.test(e)&&(e="'"+e,a=!0);var i=e.toString().replace(p,l);return(a=a||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(i,s.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1))?o+i+o:i}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=f,s.ParserHandle=m,s.NetworkStreamer=c,s.FileStreamer=d,s.StringStreamer=u,s.ReadableStreamStreamer=p,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var n=e.config||{},a=[];return this.each((function(e){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)a.push({file:this.files[r],inputElem:this,instanceConfig:o.extend({},n)})})),r(),this;function r(){if(0!==a.length){var t,n,r,l=a[0];if(y(e.before)){var c=e.before(l.file,l.inputElem);if("object"==typeof c){if("abort"===c.action)return"AbortError",t=l.file,n=l.inputElem,r=c.reason,void(y(e.error)&&e.error({name:"AbortError"},t,n,r));if("skip"===c.action)return void i();"object"==typeof c.config&&(l.instanceConfig=o.extend(l.instanceConfig,c.config))}else if("skip"===c)return void i()}var d=l.instanceConfig.complete;l.instanceConfig.complete=function(e){y(d)&&d(e,l.file,l.inputElem),i()},s.parse(l.file,l.instanceConfig)}else y(e.complete)&&e.complete()}function i(){a.splice(0,1),r()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new m(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&y(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var o=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=i.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)t.postMessage({results:o,workerId:s.WORKER_ID,finished:c});else if(y(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!c||!y(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){y(this._config.error)?this._config.error(e):a&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var a in e)t.setRequestHeader(a,e[a])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function d(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),l.call(this,e);var a="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,a?((t=new FileReader).onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var i=t.readAsText(e,this._config.encoding);a||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function p(e){l.call(this,e=e||{});var t=[],n=!0,a=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=v((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=v((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=v((function(){this._streamCleanUp(),a=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function m(e){var t,n,a,r=Math.pow(2,53),i=-r,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,c=this,d=0,u=0,p=!1,m=!1,g=[],x={data:[],errors:[],meta:{}};if(y(e.step)){var _=e.step;e.step=function(t){if(x=t,j())w();else{if(w(),0===x.data.length)return;d+=t.data.length,e.preview&&d>e.preview?n.abort():(x.data=x.data[0],_(x,c))}}}function v(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){return x&&a&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),a=!1),e.skipEmptyLines&&(x.data=x.data.filter((function(e){return!v(e)}))),j()&&function(){if(x)if(Array.isArray(x.data[0])){for(var t=0;j()&&t<x.data.length;t++)x.data[t].forEach(n);x.data.splice(0,1)}else x.data.forEach(n);function n(t,n){y(e.transformHeader)&&(t=e.transformHeader(t,n)),g.push(t)}}(),function(){if(!x||!e.header&&!e.dynamicTyping&&!e.transform)return x;function t(t,n){var a,r=e.header?{}:[];for(a=0;a<t.length;a++){var i=a,s=t[a];e.header&&(i=a>=g.length?"__parsed_extra":g[a]),e.transform&&(s=e.transform(s,i)),s=S(i,s),"__parsed_extra"===i?(r[i]=r[i]||[],r[i].push(s)):r[i]=s}return e.header&&(a>g.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+a,u+n):a<g.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+a,u+n)),r}var n=1;return!x.data.length||Array.isArray(x.data[0])?(x.data=x.data.map(t),n=x.data.length):x.data=t(x.data,0),e.header&&x.meta&&(x.meta.fields=g),u+=n,x}()}function j(){return e.header&&0===g.length}function S(t,n){return a=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[a]&&(e.dynamicTyping[a]=e.dynamicTypingFunction(a)),!0===(e.dynamicTyping[a]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(o.test(e)){var t=parseFloat(e);if(i<t&&t<r)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var a}function k(e,t,n,a){var r={type:e,code:t,message:n};void 0!==a&&(r.row=a),x.errors.push(r)}this.parse=function(r,i,o){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(h(t)+"([^]*?)"+h(t),"gm"),a=(e=e.replace(n,"")).split("\r"),r=e.split("\n"),i=1<r.length&&r[0].length<a[0].length;if(1===a.length||i)return"\n";for(var s=0,o=0;o<a.length;o++)"\n"===a[o][0]&&s++;return s>=a.length/2?"\r\n":"\r"}(r,l)),a=!1,e.delimiter)y(e.delimiter)&&(e.delimiter=e.delimiter(r),x.meta.delimiter=e.delimiter);else{var c=function(t,n,a,r,i){var o,l,c,d;i=i||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var u=0;u<i.length;u++){var p=i[u],m=0,h=0,g=0;c=void 0;for(var x=new f({comments:r,delimiter:p,newline:n,preview:10}).parse(t),_=0;_<x.data.length;_++)if(a&&v(x.data[_]))g++;else{var b=x.data[_].length;h+=b,void 0!==c?0<b&&(m+=Math.abs(b-c),c=b):c=b}0<x.data.length&&(h/=x.data.length-g),(void 0===l||m<=l)&&(void 0===d||d<h)&&1.99<h&&(l=m,o=p,d=h)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(r,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(a=!0,e.delimiter=s.DefaultDelimiter),x.meta.delimiter=e.delimiter}var d=b(e);return e.preview&&e.header&&d.preview++,t=r,n=new f(d),x=n.parse(t,i,o),w(),p?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=y(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(p=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,n.abort(),x.meta.aborted=!0,y(e.complete)&&e.complete(x),t=""}}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t,n=(e=e||{}).delimiter,a=e.newline,r=e.comments,i=e.step,o=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var d=0,u=!1;this.parse=function(e,s,p){if("string"!=typeof e)throw new Error("Input must be a string");var m=e.length,f=n.length,g=a.length,x=r.length,_=y(i),b=[],v=[],w=[],j=d=0;if(!e)return A();if(l||!1!==l&&-1===e.indexOf(t)){for(var S=e.split(a),k=0;k<S.length;k++){if(w=S[k],d+=w.length,k!==S.length-1)d+=a.length;else if(p)return A();if(!r||w.substring(0,x)!==r){if(_){if(b=[],P(w.split(n)),L(),u)return A()}else P(w.split(n));if(o&&o<=k)return b=b.slice(0,o),A(!0)}}return A()}for(var N=e.indexOf(n,d),C=e.indexOf(a,d),I=new RegExp(h(c)+h(t),"g"),T=e.indexOf(t,d);;)if(e[d]!==t)if(r&&0===w.length&&e.substring(d,d+x)===r){if(-1===C)return A();d=C+g,C=e.indexOf(a,d),N=e.indexOf(n,d)}else if(-1!==N&&(N<C||-1===C))w.push(e.substring(d,N)),d=N+f,N=e.indexOf(n,d);else{if(-1===C)break;if(w.push(e.substring(d,C)),M(C+g),_&&(L(),u))return A();if(o&&b.length>=o)return A(!0)}else for(T=d,d++;;){if(-1===(T=e.indexOf(t,T+1)))return p||v.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:d}),R();if(T===m-1)return R(e.substring(d,T).replace(I,t));if(t!==c||e[T+1]!==c){if(t===c||0===T||e[T-1]!==c){-1!==N&&N<T+1&&(N=e.indexOf(n,T+1)),-1!==C&&C<T+1&&(C=e.indexOf(a,T+1));var D=O(-1===C?N:Math.min(N,C));if(e.substr(T+1+D,f)===n){w.push(e.substring(d,T).replace(I,t)),e[d=T+1+D+f]!==t&&(T=e.indexOf(t,d)),N=e.indexOf(n,d),C=e.indexOf(a,d);break}var E=O(C);if(e.substring(T+1+E,T+1+E+g)===a){if(w.push(e.substring(d,T).replace(I,t)),M(T+1+E+g),N=e.indexOf(n,d),T=e.indexOf(t,d),_&&(L(),u))return A();if(o&&b.length>=o)return A(!0);break}v.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:d}),T++}}else T++}return R();function P(e){b.push(e),j=d}function O(t){var n=0;if(-1!==t){var a=e.substring(T+1,t);a&&""===a.trim()&&(n=a.length)}return n}function R(t){return p||(void 0===t&&(t=e.substring(d)),w.push(t),d=m,P(w),_&&L()),A()}function M(t){d=t,P(w),w=[],C=e.indexOf(a,d)}function A(e){return{data:b,errors:v,meta:{delimiter:n,linebreak:a,aborted:u,truncated:!!e,cursor:j+(s||0)}}}function L(){i(A()),b=[],v=[]}},this.abort=function(){u=!0},this.getCharIndex=function(){return d}}function g(e){var t=e.data,n=r[t.workerId],a=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){a=!0,x(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(y(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},i),!a);s++);delete t.results}else y(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!a&&x(t.workerId,t.results)}function x(e,t){var n=r[e];y(n.userComplete)&&n.userComplete(t),n.terminate(),delete r[e]}function _(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=b(e[n]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function y(e){return"function"==typeof e}return a&&(t.onmessage=function(e){var n=e.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var a=s.parse(n.input,n.config);a&&t.postMessage({workerId:s.WORKER_ID,results:a,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(l.prototype)).constructor=d,(u.prototype=Object.create(u.prototype)).constructor=u,(p.prototype=Object.create(l.prototype)).constructor=p,s},void 0===(a=n.apply(t,[]))||(e.exports=a)},81677:function(e,t,n){!function(e,t,n,a,r,i,s,o,l,c,d,u,p,m,h,f,g,x,_,b,v,y,w,j,S,k,N,C,I,T,D,E,P,O,R,M,A,L,F,q,W,B,U,V,Z,$,Y,H,z,K,G,Q,X,J,ee,te,ne,ae,re,ie,se,oe,le){"use strict";function ce(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var de=ce(t),ue=ce(a),pe=ce(r),me=ce(i),he=ce(s),fe=ce(o),ge=ce(l),xe=ce(c),_e=ce(d),be=ce(u),ve=ce(p),ye=ce(f),we=ce(g),je=ce(x),Se=ce(_),ke=ce(b),Ne=ce(v),Ce=ce(y),Ie=ce(w),Te=ce(j),De=ce(S),Ee=ce(k),Pe=ce(N),Oe=ce(C),Re=ce(I),Me=ce(T),Ae=ce(D),Le=ce(E),Fe=ce(P),qe=ce(O),We=ce(R),Be=ce(M),Ue=ce(A),Ve=ce(L),Ze=ce(F),$e=ce(W),Ye=ce(B),He=ce(U),ze=ce(V),Ke=ce(Z),Ge=ce($),Qe=ce(Y),Xe=ce(K),Je=ce(G),et=ce(Q),tt=ce(X),nt=ce(J),at=ce(ee),rt=ce(te),it=ce(ne),st=ce(ae),ot=ce(re),lt=ce(ie),ct=ce(se),dt=ce(oe);function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gt(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&yt(e,t)}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wt(e)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=vt(e);if(t){var r=vt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return jt(this,n)}}function kt(e){return function(e){if(Array.isArray(e))return Nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ct(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function It(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Tt={p:It,P:function(e,t){var n,a=e.match(/(P+)(p+)?/)||[],r=a[1],i=a[2];if(!i)return Ct(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ct(r,t)).replace("{{time}}",It(i,t))}},Dt=12,Et=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Pt(e){var t=e?"string"==typeof e||e instanceof String?lt.default(e):st.default(e):new Date;return Rt(t)?t:null}function Ot(e,t,n,a,r){var i=null,s=Xt(n)||Xt(Qt()),o=!0;return Array.isArray(t)?(t.forEach((function(t){var l=ot.default(e,t,new Date,{locale:s});a&&(o=Rt(l,r)&&e===Mt(l,t,n)),Rt(l,r)&&o&&(i=l)})),i):(i=ot.default(e,t,new Date,{locale:s}),a?o=Rt(i)&&e===Mt(i,t,n):Rt(i)||(t=t.match(Et).map((function(e){var t=e[0];return"p"===t||"P"===t?s?(0,Tt[t])(e,s.formatLong):t:e})).join(""),e.length>0&&(i=ot.default(e,t.slice(0,e.length),new Date)),Rt(i)||(i=new Date(e))),Rt(i)&&o?i:null)}function Rt(e,t){return t=t||new Date("1/1/1000"),me.default(e)&&!rt.default(e,t)}function Mt(e,t,n){if("en"===n)return he.default(e,t,{awareOfUnicodeTokens:!0});var a=Xt(n);return n&&!a&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!a&&Qt()&&Xt(Qt())&&(a=Xt(Qt())),he.default(e,t,{locale:a||null,awareOfUnicodeTokens:!0})}function At(e,t){var n=t.dateFormat,a=t.locale;return e&&Mt(e,Array.isArray(n)?n[0]:n,a)||""}function Lt(e,t){var n=t.hour,a=void 0===n?0:n,r=t.minute,i=void 0===r?0:r,s=t.second,o=void 0===s?0:s;return Le.default(Ae.default(Me.default(e,o),i),a)}function Ft(e,t){var n=t&&Xt(t)||Qt()&&Xt(Qt());return De.default(e,n?{locale:n}:null)}function qt(e,t){return Mt(e,"ddd",t)}function Wt(e){return Ye.default(e)}function Bt(e,t,n){var a=Xt(t||Qt());return He.default(e,{locale:a,weekStartsOn:n})}function Ut(e){return ze.default(e)}function Vt(e){return Ge.default(e)}function Zt(e){return Ke.default(e)}function $t(e,t){return e&&t?tt.default(e,t):!e&&!t}function Yt(e,t){return e&&t?et.default(e,t):!e&&!t}function Ht(e,t){return e&&t?nt.default(e,t):!e&&!t}function zt(e,t){return e&&t?Je.default(e,t):!e&&!t}function Kt(e,t){return e&&t?Xe.default(e,t):!e&&!t}function Gt(e,t,n){var a,r=Ye.default(t),i=Qe.default(n);try{a=it.default(e,{start:r,end:i})}catch(e){a=!1}return a}function Qt(){return("undefined"!=typeof window?window:globalThis).__localeId__}function Xt(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function Jt(e,t){return Mt(Fe.default(Pt(),e),"LLLL",t)}function en(e,t){return Mt(Fe.default(Pt(),e),"LLL",t)}function tn(e,t){return Mt(qe.default(Pt(),e),"QQQ",t)}function nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.maxDate,r=t.excludeDates,i=t.excludeDateIntervals,s=t.includeDates,o=t.includeDateIntervals,l=t.filterDate;return dn(e,{minDate:n,maxDate:a})||r&&r.some((function(t){return zt(e,t)}))||i&&i.some((function(t){var n=t.start,a=t.end;return it.default(e,{start:n,end:a})}))||s&&!s.some((function(t){return zt(e,t)}))||o&&!o.some((function(t){var n=t.start,a=t.end;return it.default(e,{start:n,end:a})}))||l&&!l(Pt(e))||!1}function an(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeDates,a=t.excludeDateIntervals;return a&&a.length>0?a.some((function(t){var n=t.start,a=t.end;return it.default(e,{start:n,end:a})})):n&&n.some((function(t){return zt(e,t)}))||!1}function rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.maxDate,r=t.excludeDates,i=t.includeDates,s=t.filterDate;return dn(e,{minDate:n,maxDate:a})||r&&r.some((function(t){return Yt(e,t)}))||i&&!i.some((function(t){return Yt(e,t)}))||s&&!s(Pt(e))||!1}function sn(e,t,n,a){var r=Oe.default(e),i=Ee.default(e),s=Oe.default(t),o=Ee.default(t),l=Oe.default(a);return r===s&&r===l?i<=n&&n<=o:r<s?l===r&&i<=n||l===s&&o>=n||l<s&&l>r:void 0}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.maxDate,r=t.excludeDates,i=t.includeDates,s=t.filterDate;return dn(e,{minDate:n,maxDate:a})||r&&r.some((function(t){return Ht(e,t)}))||i&&!i.some((function(t){return Ht(e,t)}))||s&&!s(Pt(e))||!1}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.maxDate;return dn(new Date(e,0,1),{minDate:n,maxDate:a})||!1}function cn(e,t,n,a){var r=Oe.default(e),i=Pe.default(e),s=Oe.default(t),o=Pe.default(t),l=Oe.default(a);return r===s&&r===l?i<=n&&n<=o:r<s?l===r&&i<=n||l===s&&o>=n||l<s&&l>r:void 0}function dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.maxDate;return n&&Ve.default(e,n)<0||a&&Ve.default(e,a)>0}function un(e,t){return t.some((function(t){return Ce.default(t)===Ce.default(e)&&Ne.default(t)===Ne.default(e)}))}function pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeTimes,a=t.includeTimes,r=t.filterTime;return n&&un(e,n)||a&&!un(e,a)||r&&!r(e)||!1}function mn(e,t){var n=t.minTime,a=t.maxTime;if(!n||!a)throw new Error("Both minTime and maxTime props required");var r,i=Pt(),s=Le.default(Ae.default(i,Ne.default(e)),Ce.default(e)),o=Le.default(Ae.default(i,Ne.default(n)),Ce.default(n)),l=Le.default(Ae.default(i,Ne.default(a)),Ce.default(a));try{r=!it.default(s,{start:o,end:l})}catch(e){r=!1}return r}function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.includeDates,r=je.default(e,1);return n&&Ze.default(n,r)>0||a&&a.every((function(e){return Ze.default(e,r)>0}))||!1}function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,a=t.includeDates,r=be.default(e,1);return n&&Ze.default(r,n)>0||a&&a.every((function(e){return Ze.default(r,e)>0}))||!1}function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.includeDates,r=Se.default(e,1);return n&&$e.default(n,r)>0||a&&a.every((function(e){return $e.default(e,r)>0}))||!1}function xn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,a=t.includeDates,r=ve.default(e,1);return n&&$e.default(r,n)>0||a&&a.every((function(e){return $e.default(r,e)>0}))||!1}function _n(e){var t=e.minDate,n=e.includeDates;if(n&&t){var a=n.filter((function(e){return Ve.default(e,t)>=0}));return Be.default(a)}return n?Be.default(n):t}function bn(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var a=n.filter((function(e){return Ve.default(e,t)<=0}));return Ue.default(a)}return n?Ue.default(n):t}function vn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,a=0,r=e.length;a<r;a++){var i=e[a];if(pe.default(i)){var s=Mt(i,"MM.dd.yyyy"),o=n.get(s)||[];o.includes(t)||(o.push(t),n.set(s,o))}else if("object"===mt(i)){var l=Object.keys(i),c=l[0],d=i[l[0]];if("string"==typeof c&&d.constructor===Array)for(var u=0,p=d.length;u<p;u++){var m=Mt(d[u],"MM.dd.yyyy"),h=n.get(m)||[];h.includes(c)||(h.push(c),n.set(m,h))}}}return n}function yn(e,t,n,a,r){for(var i=r.length,s=[],o=0;o<i;o++){var l=fe.default(ge.default(e,Ce.default(r[o])),Ne.default(r[o])),c=fe.default(e,(n+1)*a);at.default(l,t)&&rt.default(l,c)&&s.push(r[o])}return s}function wn(e){return e<10?"0".concat(e):"".concat(e)}function jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt,n=Math.ceil(Oe.default(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function Sn(e,t,n,a){for(var r=[],i=0;i<2*t+1;i++){var s=e+t-i,o=!0;n&&(o=Oe.default(n)<=s),a&&o&&(o=Oe.default(a)>=s),o&&r.push(s)}return r}var kn=function(e){bt(a,e);var n=St(a);function a(e){var r;ht(this,a),xt(wt(r=n.call(this,e)),"renderOptions",(function(){var e=r.props.year,t=r.state.yearsList.map((function(t){return de.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:r.onChange.bind(wt(r),t),"aria-selected":e===t?"true":void 0},e===t?de.default.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",t)})),n=r.props.minDate?Oe.default(r.props.minDate):null,a=r.props.maxDate?Oe.default(r.props.maxDate):null;return a&&r.state.yearsList.find((function(e){return e===a}))||t.unshift(de.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&r.state.yearsList.find((function(e){return e===n}))||t.push(de.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),xt(wt(r),"onChange",(function(e){r.props.onChange(e)})),xt(wt(r),"handleClickOutside",(function(){r.props.onCancel()})),xt(wt(r),"shiftYears",(function(e){var t=r.state.yearsList.map((function(t){return t+e}));r.setState({yearsList:t})})),xt(wt(r),"incrementYears",(function(){return r.shiftYears(1)})),xt(wt(r),"decrementYears",(function(){return r.shiftYears(-1)}));var i=e.yearDropdownItemNumber,s=e.scrollableYearDropdown,o=i||(s?10:5);return r.state={yearsList:Sn(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=t.createRef(),r}return gt(a,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;e&&(e.scrollTop=e.scrollHeight/2-e.clientHeight/2)}},{key:"render",value:function(){var e=ue.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return de.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}]),a}(de.default.Component),Nn=ct.default(kn),Cn=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"state",{dropdownVisible:!1}),xt(wt(e),"renderSelectOptions",(function(){for(var t=e.props.minDate?Oe.default(e.props.minDate):1900,n=e.props.maxDate?Oe.default(e.props.maxDate):2100,a=[],r=t;r<=n;r++)a.push(de.default.createElement("option",{key:r,value:r},r));return a})),xt(wt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),xt(wt(e),"renderSelectMode",(function(){return de.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),xt(wt(e),"renderReadView",(function(t){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),xt(wt(e),"renderDropdown",(function(){return de.default.createElement(Nn,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),xt(wt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),xt(wt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),xt(wt(e),"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),xt(wt(e),"handleYearChange",(function(t,n){e.onSelect(t,n),e.setOpen()})),xt(wt(e),"onSelect",(function(t,n){e.props.onSelect&&e.props.onSelect(t,n)})),xt(wt(e),"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return gt(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(de.default.Component),In=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"isSelectedMonth",(function(t){return e.props.month===t})),xt(wt(e),"renderOptions",(function(){return e.props.monthNames.map((function(t,n){return de.default.createElement("div",{className:e.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(wt(e),n),"aria-selected":e.isSelectedMonth(n)?"true":void 0},e.isSelectedMonth(n)?de.default.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",t)}))})),xt(wt(e),"onChange",(function(t){return e.props.onChange(t)})),xt(wt(e),"handleClickOutside",(function(){return e.props.onCancel()})),e}return gt(n,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}(de.default.Component),Tn=ct.default(In),Dn=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"state",{dropdownVisible:!1}),xt(wt(e),"renderSelectOptions",(function(e){return e.map((function(e,t){return de.default.createElement("option",{key:t,value:t},e)}))})),xt(wt(e),"renderSelectMode",(function(t){return de.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),xt(wt(e),"renderReadView",(function(t,n){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},de.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[e.props.month]))})),xt(wt(e),"renderDropdown",(function(t){return de.default.createElement(Tn,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),xt(wt(e),"renderScrollMode",(function(t){var n=e.state.dropdownVisible,a=[e.renderReadView(!n,t)];return n&&a.unshift(e.renderDropdown(t)),a})),xt(wt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),xt(wt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return gt(n,[{key:"render",value:function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return en(e,t.props.locale)}:function(e){return Jt(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return de.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(de.default.Component);function En(e,t){for(var n=[],a=Ut(e),r=Ut(t);!at.default(a,r);)n.push(Pt(a)),a=be.default(a,1);return n}var Pn=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),xt(wt(a=t.call(this,e)),"renderOptions",(function(){return a.state.monthYearsList.map((function(e){var t=Re.default(e),n=$t(a.props.date,e)&&Yt(a.props.date,e);return de.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:a.onChange.bind(wt(a),t),"aria-selected":n?"true":void 0},n?de.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Mt(e,a.props.dateFormat,a.props.locale))}))})),xt(wt(a),"onChange",(function(e){return a.props.onChange(e)})),xt(wt(a),"handleClickOutside",(function(){a.props.onCancel()})),a.state={monthYearsList:En(a.props.minDate,a.props.maxDate)},a}return gt(n,[{key:"render",value:function(){var e=ue.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return de.default.createElement("div",{className:e},this.renderOptions())}}]),n}(de.default.Component),On=ct.default(Pn),Rn=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"state",{dropdownVisible:!1}),xt(wt(e),"renderSelectOptions",(function(){for(var t=Ut(e.props.minDate),n=Ut(e.props.maxDate),a=[];!at.default(t,n);){var r=Re.default(t);a.push(de.default.createElement("option",{key:r,value:r},Mt(t,e.props.dateFormat,e.props.locale))),t=be.default(t,1)}return a})),xt(wt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),xt(wt(e),"renderSelectMode",(function(){return de.default.createElement("select",{value:Re.default(Ut(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),xt(wt(e),"renderReadView",(function(t){var n=Mt(e.props.date,e.props.dateFormat,e.props.locale);return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),xt(wt(e),"renderDropdown",(function(){return de.default.createElement(On,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),xt(wt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),xt(wt(e),"onChange",(function(t){e.toggleDropdown();var n=Pt(parseInt(t));$t(e.props.date,n)&&Yt(e.props.date,n)||e.props.onChange(n)})),xt(wt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return gt(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(de.default.Component),Mn=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"dayEl",de.default.createRef()),xt(wt(e),"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),xt(wt(e),"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),xt(wt(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),xt(wt(e),"isSameDay",(function(t){return zt(e.props.day,t)})),xt(wt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!e.isSameDay(e.props.selected)&&e.isSameDay(e.props.preSelection)})),xt(wt(e),"isDisabled",(function(){return nn(e.props.day,e.props)})),xt(wt(e),"isExcluded",(function(){return an(e.props.day,e.props)})),xt(wt(e),"getHighLightedClass",(function(t){var n=e.props,a=n.day,r=n.highlightDates;if(!r)return!1;var i=Mt(a,"MM.dd.yyyy");return r.get(i)})),xt(wt(e),"isInRange",(function(){var t=e.props,n=t.day,a=t.startDate,r=t.endDate;return!(!a||!r)&&Gt(n,a,r)})),xt(wt(e),"isInSelectingRange",(function(){var t,n=e.props,a=n.day,r=n.selectsStart,i=n.selectsEnd,s=n.selectsRange,o=n.selectsDisabledDaysInRange,l=n.startDate,c=n.endDate,d=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(r||i||s)||!d||!o&&e.isDisabled())&&(r&&c&&(rt.default(d,c)||Kt(d,c))?Gt(a,d,c):(i&&l&&(at.default(d,l)||Kt(d,l))||!(!s||!l||c||!at.default(d,l)&&!Kt(d,l)))&&Gt(a,l,d))})),xt(wt(e),"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,a=n.day,r=n.startDate,i=n.selectsStart,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return zt(a,i?s:r)})),xt(wt(e),"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,a=n.day,r=n.endDate,i=n.selectsEnd,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return zt(a,i?s:r)})),xt(wt(e),"isRangeStart",(function(){var t=e.props,n=t.day,a=t.startDate,r=t.endDate;return!(!a||!r)&&zt(a,n)})),xt(wt(e),"isRangeEnd",(function(){var t=e.props,n=t.day,a=t.startDate,r=t.endDate;return!(!a||!r)&&zt(r,n)})),xt(wt(e),"isWeekend",(function(){var t=Ie.default(e.props.day);return 0===t||6===t})),xt(wt(e),"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===Ee.default(e.props.day)})),xt(wt(e),"isBeforeMonth",(function(){return void 0!==e.props.month&&(Ee.default(e.props.day)+1)%12===e.props.month})),xt(wt(e),"isCurrentDay",(function(){return e.isSameDay(Pt())})),xt(wt(e),"isSelected",(function(){return e.isSameDay(e.props.selected)})),xt(wt(e),"getClassNames",(function(t){var n=e.props.dayClassName?e.props.dayClassName(t):void 0;return ue.default("react-datepicker__day",n,"react-datepicker__day--"+qt(e.props.day),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"))})),xt(wt(e),"getAriaLabel",(function(){var t=e.props,n=t.day,a=t.ariaLabelPrefixWhenEnabled,r=void 0===a?"Choose":a,i=t.ariaLabelPrefixWhenDisabled,s=void 0===i?"Not available":i,o=e.isDisabled()||e.isExcluded()?s:r;return"".concat(o," ").concat(Mt(n,"PPPP",e.props.locale))})),xt(wt(e),"getTabIndex",(function(t,n){var a=t||e.props.selected,r=n||e.props.preSelection;return e.isKeyboardSelected()||e.isSameDay(a)&&zt(r,a)?0:-1})),xt(wt(e),"handleFocusDay",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!t.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(n=!0)),n&&e.dayEl.current.focus({preventScroll:!0})})),xt(wt(e),"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(Te.default(e.props.day),e.props.day):Te.default(e.props.day)})),xt(wt(e),"render",(function(){return de.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.handleMouseEnter,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option","aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()},e.renderDayContents())})),e}return gt(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}]),n}(de.default.Component),An=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),e}return gt(n,[{key:"render",value:function(){var e=this.props,t=e.weekNumber,n=e.ariaLabelPrefix,a=void 0===n?"week ":n,r={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!e.onClick};return de.default.createElement("div",{className:ue.default(r),"aria-label":"".concat(a," ").concat(this.props.weekNumber),onClick:this.handleClick},t)}}]),n}(de.default.Component),Ln=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n)})),xt(wt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),xt(wt(e),"handleWeekClick",(function(t,n,a){"function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,n,a),e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),xt(wt(e),"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):Ft(t)})),xt(wt(e),"renderDays",(function(){var t=Bt(e.props.day,e.props.locale,e.props.calendarStartDay),n=[],a=e.formatWeekNumber(t);if(e.props.showWeekNumber){var r=e.props.onWeekSelect?e.handleWeekClick.bind(wt(e),t,a):void 0;n.push(de.default.createElement(An,{key:"W",weekNumber:a,onClick:r,ariaLabelPrefix:e.props.ariaLabelPrefix}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var a=xe.default(t,n);return de.default.createElement(Mn,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:a.valueOf(),day:a,month:e.props.month,onClick:e.handleDayClick.bind(wt(e),a),onMouseEnter:e.handleDayMouseEnter.bind(wt(e),a),minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),e}return gt(n,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__week"},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(de.default.Component),Fn=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"MONTH_REFS",kt(Array(12)).map((function(){return de.default.createRef()}))),xt(wt(e),"isDisabled",(function(t){return nn(t,e.props)})),xt(wt(e),"isExcluded",(function(t){return an(t,e.props)})),xt(wt(e),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n,e.props.orderInDisplay)})),xt(wt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),xt(wt(e),"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),xt(wt(e),"isRangeStartMonth",(function(t){var n=e.props,a=n.day,r=n.startDate,i=n.endDate;return!(!r||!i)&&Yt(Fe.default(a,t),r)})),xt(wt(e),"isRangeStartQuarter",(function(t){var n=e.props,a=n.day,r=n.startDate,i=n.endDate;return!(!r||!i)&&Ht(qe.default(a,t),r)})),xt(wt(e),"isRangeEndMonth",(function(t){var n=e.props,a=n.day,r=n.startDate,i=n.endDate;return!(!r||!i)&&Yt(Fe.default(a,t),i)})),xt(wt(e),"isRangeEndQuarter",(function(t){var n=e.props,a=n.day,r=n.startDate,i=n.endDate;return!(!r||!i)&&Ht(qe.default(a,t),i)})),xt(wt(e),"isWeekInMonth",(function(t){var n=e.props.day,a=xe.default(t,6);return Yt(t,n)||Yt(a,n)})),xt(wt(e),"isCurrentMonth",(function(e,t){return Oe.default(e)===Oe.default(Pt())&&t===Ee.default(Pt())})),xt(wt(e),"isSelectedMonth",(function(e,t,n){return Ee.default(e)===t&&Oe.default(e)===Oe.default(n)})),xt(wt(e),"isSelectedQuarter",(function(e,t,n){return Pe.default(e)===t&&Oe.default(e)===Oe.default(n)})),xt(wt(e),"renderWeeks",(function(){for(var t=[],n=e.props.fixedHeight,a=0,r=!1,i=Bt(Ut(e.props.day),e.props.locale,e.props.calendarStartDay);t.push(de.default.createElement(Ln,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:a,day:i,month:Ee.default(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,showWeekNumber:e.props.showWeekNumbers,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!r;){a++,i=_e.default(i,1);var s=n&&a>=6,o=!n&&!e.isWeekInMonth(i);if(s||o){if(!e.props.peekNextMonth)break;r=!0}}return t})),xt(wt(e),"onMonthClick",(function(t,n){e.handleDayClick(Ut(Fe.default(e.props.day,n)),t)})),xt(wt(e),"handleMonthNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),xt(wt(e),"onMonthKeyDown",(function(t,n){var a=t.key;if(!e.props.disabledKeyboardNavigation)switch(a){case"Enter":e.onMonthClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleMonthNavigation(11===n?0:n+1,be.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleMonthNavigation(0===n?11:n-1,je.default(e.props.preSelection,1))}})),xt(wt(e),"onQuarterClick",(function(t,n){e.handleDayClick(Zt(qe.default(e.props.day,n)),t)})),xt(wt(e),"getMonthClassNames",(function(t){var n=e.props,a=n.day,r=n.startDate,i=n.endDate,s=n.selected,o=n.minDate,l=n.maxDate,c=n.preSelection,d=n.monthClassName,u=d?d(a):void 0;return ue.default("react-datepicker__month-text","react-datepicker__month-".concat(t),u,{"react-datepicker__month--disabled":(o||l)&&rn(Fe.default(a,t),e.props),"react-datepicker__month--selected":e.isSelectedMonth(a,t,s),"react-datepicker__month-text--keyboard-selected":Ee.default(c)===t,"react-datepicker__month--in-range":sn(r,i,t,a),"react-datepicker__month--range-start":e.isRangeStartMonth(t),"react-datepicker__month--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--today":e.isCurrentMonth(a,t)})})),xt(wt(e),"getTabIndex",(function(t){var n=Ee.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),xt(wt(e),"getAriaLabel",(function(t){var n=e.props,a=n.ariaLabelPrefix,r=void 0===a?"Choose":a,i=n.disabledDayAriaLabelPrefix,s=void 0===i?"Not available":i,o=n.day,l=Fe.default(o,t),c=e.isDisabled(l)||e.isExcluded(l)?s:r;return"".concat(c," ").concat(Mt(l,"MMMM yyyy"))})),xt(wt(e),"getQuarterClassNames",(function(t){var n=e.props,a=n.day,r=n.startDate,i=n.endDate,s=n.selected,o=n.minDate,l=n.maxDate;return ue.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter--disabled":(o||l)&&on(qe.default(a,t),e.props),"react-datepicker__quarter--selected":e.isSelectedQuarter(a,t,s),"react-datepicker__quarter--in-range":cn(r,i,t,a),"react-datepicker__quarter--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter--range-end":e.isRangeEndQuarter(t)})})),xt(wt(e),"renderMonths",(function(){var t=e.props,n=t.showFullMonthYearPicker,a=t.showTwoColumnMonthYearPicker,r=t.showFourColumnMonthYearPicker,i=t.locale,s=t.day,o=t.selected;return(r?[[0,1,2,3],[4,5,6,7],[8,9,10,11]]:a?[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]]:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]]).map((function(t,a){return de.default.createElement("div",{className:"react-datepicker__month-wrapper",key:a},t.map((function(t,a){return de.default.createElement("div",{ref:e.MONTH_REFS[t],key:a,onClick:function(n){e.onMonthClick(n,t)},onKeyDown:function(n){e.onMonthKeyDown(n,t)},tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(s,t)?"date":void 0,"aria-selected":e.isSelectedMonth(s,t,o)},n?Jt(t,i):en(t,i))})))}))})),xt(wt(e),"renderQuarters",(function(){var t=e.props,n=t.day,a=t.selected;return de.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,r){return de.default.createElement("div",{key:r,role:"option",onClick:function(n){e.onQuarterClick(n,t)},className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(n,t,a)},tn(t,e.props.locale))})))})),xt(wt(e),"getClassNames",(function(){var t=e.props;t.day;var n=t.selectingDate,a=t.selectsStart,r=t.selectsEnd,i=t.showMonthYearPicker,s=t.showQuarterYearPicker;return ue.default("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(a||r)},{"react-datepicker__monthPicker":i},{"react-datepicker__quarterPicker":s})})),e}return gt(n,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,a=e.day,r=e.ariaLabelPrefix,i=void 0===r?"month ":r;return de.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(i," ").concat(Mt(a,"yyyy-MM")),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}]),n}(de.default.Component),qn=function(e){bt(n,e);var t=St(n);function n(){var e;ht(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return xt(wt(e=t.call.apply(t,[this].concat(r))),"state",{height:null}),xt(wt(e),"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&mn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&pn(t,e.props)||e.props.onChange(t)})),xt(wt(e),"isSelectedTime",(function(t,n,a){return e.props.selected&&n===Ce.default(t)&&a===Ne.default(t)})),xt(wt(e),"liClasses",(function(t,n,a){var r=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t,n,a):void 0];return e.isSelectedTime(t,n,a)&&r.push("react-datepicker__time-list-item--selected"),((e.props.minTime||e.props.maxTime)&&mn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&pn(t,e.props))&&r.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*Ce.default(t)+Ne.default(t))%e.props.intervals!=0&&r.push("react-datepicker__time-list-item--injected"),r.join(" ")})),xt(wt(e),"handleOnKeyDown",(function(t,n){" "===t.key&&(t.preventDefault(),t.key="Enter"),"Enter"===t.key&&e.handleClick(n),e.props.handleOnKeyDown(t)})),xt(wt(e),"renderTimes",(function(){for(var t=[],n=e.props.format?e.props.format:"p",a=e.props.intervals,r=Wt(Pt(e.props.selected)),i=1440/a,s=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),o=e.props.selected||e.props.openToDate||Pt(),l=Ce.default(o),c=Ne.default(o),d=Le.default(Ae.default(r,c),l),u=0;u<i;u++){var p=fe.default(r,u*a);if(t.push(p),s){var m=yn(r,p,u,a,s);t=t.concat(m)}}return t.map((function(t,a){return de.default.createElement("li",{key:a,onClick:e.handleClick.bind(wt(e),t),className:e.liClasses(t,l,c),ref:function(n){(rt.default(t,d)||Kt(t,d))&&(e.centerLi=n)},onKeyDown:function(n){e.handleOnKeyDown(n,t)},tabIndex:"0","aria-selected":e.isSelectedTime(t,l,c)?"true":void 0},Mt(t,n,e.props.locale))}))})),e}return gt(n,[{key:"componentDidMount",value:function(){this.list.scrollTop=n.calcCenterPosition(this.props.monthRef?this.props.monthRef.clientHeight-this.header.clientHeight:this.list.clientHeight,this.centerLi),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return de.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},de.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),de.default.createElement("div",{className:"react-datepicker__time"},de.default.createElement("div",{className:"react-datepicker__time-box"},de.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},tabIndex:"0"},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}(de.default.Component);xt(qn,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Wn=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),xt(wt(a=t.call(this,e)),"YEAR_REFS",kt(Array(a.props.yearItemNumber)).map((function(){return de.default.createRef()}))),xt(wt(a),"isDisabled",(function(e){return nn(e,a.props)})),xt(wt(a),"isExcluded",(function(e){return an(e,a.props)})),xt(wt(a),"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(wt(a));window.requestAnimationFrame(t)})),xt(wt(a),"handleYearClick",(function(e,t){a.props.onDayClick&&a.props.onDayClick(e,t)})),xt(wt(a),"handleYearNavigation",(function(e,t){var n=a.props,r=n.date,i=n.yearItemNumber,s=jn(r,i).startPeriod;a.isDisabled(t)||a.isExcluded(t)||(a.props.setPreSelection(t),e-s==-1?a.updateFocusOnPaginate(i-1):e-s===i?a.updateFocusOnPaginate(0):a.YEAR_REFS[e-s].current.focus())})),xt(wt(a),"isSameDay",(function(e,t){return zt(e,t)})),xt(wt(a),"isCurrentYear",(function(e){return e===Oe.default(Pt())})),xt(wt(a),"isKeyboardSelected",(function(e){var t=Vt(We.default(a.props.date,e));return!a.props.disabledKeyboardNavigation&&!a.props.inline&&!zt(t,Vt(a.props.selected))&&zt(t,Vt(a.props.preSelection))})),xt(wt(a),"onYearClick",(function(e,t){var n=a.props.date;a.handleYearClick(Vt(We.default(n,t)),e)})),xt(wt(a),"onYearKeyDown",(function(e,t){var n=e.key;if(!a.props.disabledKeyboardNavigation)switch(n){case"Enter":a.onYearClick(e,t),a.props.setPreSelection(a.props.selected);break;case"ArrowRight":a.handleYearNavigation(t+1,ve.default(a.props.preSelection,1));break;case"ArrowLeft":a.handleYearNavigation(t-1,Se.default(a.props.preSelection,1))}})),xt(wt(a),"getYearClassNames",(function(e){var t=a.props,n=t.minDate,r=t.maxDate,i=t.selected;return ue.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":e===Oe.default(i),"react-datepicker__year-text--disabled":(n||r)&&ln(e,a.props),"react-datepicker__year-text--keyboard-selected":a.isKeyboardSelected(e),"react-datepicker__year-text--today":a.isCurrentYear(e)})})),xt(wt(a),"getYearTabIndex",(function(e){return a.props.disabledKeyboardNavigation?"-1":e===Oe.default(a.props.preSelection)?"0":"-1"})),a}return gt(n,[{key:"render",value:function(){for(var e=this,t=[],n=this.props,a=jn(n.date,n.yearItemNumber),r=a.startPeriod,i=a.endPeriod,s=function(n){t.push(de.default.createElement("div",{ref:e.YEAR_REFS[n-r],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){e.onYearKeyDown(t,n)},tabIndex:e.getYearTabIndex(n),className:e.getYearClassNames(n),key:n,"aria-current":e.isCurrentYear(n)?"date":void 0},n))},o=r;o<=i;o++)s(o);return de.default.createElement("div",{className:"react-datepicker__year"},de.default.createElement("div",{className:"react-datepicker__year-wrapper"},t))}}]),n}(de.default.Component),Bn=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),xt(wt(a=t.call(this,e)),"onTimeChange",(function(e){a.setState({time:e});var t=new Date;t.setHours(e.split(":")[0]),t.setMinutes(e.split(":")[1]),a.props.onChange(t)})),xt(wt(a),"renderTimeInput",(function(){var e=a.state.time,t=a.props,n=t.date,r=t.timeString,i=t.customTimeInput;return i?de.default.cloneElement(i,{date:n,value:e,onChange:a.onTimeChange}):de.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){a.onTimeChange(e.target.value||r)}})})),a.state={time:a.props.timeString},a}return gt(n,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__input-time-container"},de.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),de.default.createElement("div",{className:"react-datepicker-time__input-container"},de.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}]),n}(de.default.Component);function Un(e){var t=e.className,n=e.children,a=e.showPopperArrow,r=e.arrowProps,i=void 0===r?{}:r;return de.default.createElement("div",{className:t},a&&de.default.createElement("div",_t({className:"react-datepicker__triangle"},i)),n)}var Vn=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Zn=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),xt(wt(a=t.call(this,e)),"handleClickOutside",(function(e){a.props.onClickOutside(e)})),xt(wt(a),"setClickOutsideRef",(function(){return a.containerRef.current})),xt(wt(a),"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Vn.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&a.props.onDropdownFocus()})),xt(wt(a),"getDateInView",(function(){var e=a.props,t=e.preSelection,n=e.selected,r=e.openToDate,i=_n(a.props),s=bn(a.props),o=Pt();return r||n||t||(i&&rt.default(o,i)?i:s&&at.default(o,s)?s:o)})),xt(wt(a),"increaseMonth",(function(){a.setState((function(e){var t=e.date;return{date:be.default(t,1)}}),(function(){return a.handleMonthChange(a.state.date)}))})),xt(wt(a),"decreaseMonth",(function(){a.setState((function(e){var t=e.date;return{date:je.default(t,1)}}),(function(){return a.handleMonthChange(a.state.date)}))})),xt(wt(a),"handleDayClick",(function(e,t,n){a.props.onSelect(e,t,n),a.props.setPreSelection&&a.props.setPreSelection(e)})),xt(wt(a),"handleDayMouseEnter",(function(e){a.setState({selectingDate:e}),a.props.onDayMouseEnter&&a.props.onDayMouseEnter(e)})),xt(wt(a),"handleMonthMouseLeave",(function(){a.setState({selectingDate:null}),a.props.onMonthMouseLeave&&a.props.onMonthMouseLeave()})),xt(wt(a),"handleYearChange",(function(e){a.props.onYearChange&&a.props.onYearChange(e),a.props.adjustDateOnChange&&(a.props.onSelect&&a.props.onSelect(e),a.props.setOpen&&a.props.setOpen(!0)),a.props.setPreSelection&&a.props.setPreSelection(e)})),xt(wt(a),"handleMonthChange",(function(e){a.props.onMonthChange&&a.props.onMonthChange(e),a.props.adjustDateOnChange&&(a.props.onSelect&&a.props.onSelect(e),a.props.setOpen&&a.props.setOpen(!0)),a.props.setPreSelection&&a.props.setPreSelection(e)})),xt(wt(a),"handleMonthYearChange",(function(e){a.handleYearChange(e),a.handleMonthChange(e)})),xt(wt(a),"changeYear",(function(e){a.setState((function(t){var n=t.date;return{date:We.default(n,e)}}),(function(){return a.handleYearChange(a.state.date)}))})),xt(wt(a),"changeMonth",(function(e){a.setState((function(t){var n=t.date;return{date:Fe.default(n,e)}}),(function(){return a.handleMonthChange(a.state.date)}))})),xt(wt(a),"changeMonthYear",(function(e){a.setState((function(t){var n=t.date;return{date:We.default(Fe.default(n,Ee.default(e)),Oe.default(e))}}),(function(){return a.handleMonthYearChange(a.state.date)}))})),xt(wt(a),"header",(function(){var e=Bt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.date,a.props.locale,a.props.calendarStartDay),t=[];return a.props.showWeekNumbers&&t.push(de.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},a.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var n=xe.default(e,t),r=a.formatWeekday(n,a.props.locale),i=a.props.weekDayClassName?a.props.weekDayClassName(n):void 0;return de.default.createElement("div",{key:t,className:ue.default("react-datepicker__day-name",i)},r)})))})),xt(wt(a),"formatWeekday",(function(e,t){return a.props.formatWeekDay?function(e,t,n){return t(Mt(e,"EEEE",n))}(e,a.props.formatWeekDay,t):a.props.useWeekdaysShort?function(e,t){return Mt(e,"EEE",t)}(e,t):function(e,t){return Mt(e,"EEEEEE",t)}(e,t)})),xt(wt(a),"decreaseYear",(function(){a.setState((function(e){var t=e.date;return{date:Se.default(t,a.props.showYearPicker?a.props.yearItemNumber:1)}}),(function(){return a.handleYearChange(a.state.date)}))})),xt(wt(a),"renderPreviousButton",(function(){if(!a.props.renderCustomHeader){var e;switch(!0){case a.props.showMonthYearPicker:e=gn(a.state.date,a.props);break;case a.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,a=t.yearItemNumber,r=void 0===a?Dt:a,i=jn(Vt(Se.default(e,r)),r).endPeriod,s=n&&Oe.default(n);return s&&s>i||!1}(a.state.date,a.props);break;default:e=hn(a.state.date,a.props)}if((a.props.forceShowMonthNavigation||a.props.showDisabledMonthNavigation||!e)&&!a.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=a.decreaseMonth;(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker)&&(n=a.decreaseYear),e&&a.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null);var r=a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker,i=a.props,s=i.previousMonthButtonLabel,o=i.previousYearButtonLabel,l=a.props,c=l.previousMonthAriaLabel,d=void 0===c?"string"==typeof s?s:"Previous Month":c,u=l.previousYearAriaLabel,p=void 0===u?"string"==typeof o?o:"Previous Year":u;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:a.props.handleOnKeyDown,"aria-label":r?p:d},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},r?a.props.previousYearButtonLabel:a.props.previousMonthButtonLabel))}}})),xt(wt(a),"increaseYear",(function(){a.setState((function(e){var t=e.date;return{date:ve.default(t,a.props.showYearPicker?a.props.yearItemNumber:1)}}),(function(){return a.handleYearChange(a.state.date)}))})),xt(wt(a),"renderNextButton",(function(){if(!a.props.renderCustomHeader){var e;switch(!0){case a.props.showMonthYearPicker:e=xn(a.state.date,a.props);break;case a.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,a=t.yearItemNumber,r=void 0===a?Dt:a,i=jn(ve.default(e,r),r).startPeriod,s=n&&Oe.default(n);return s&&s<i||!1}(a.state.date,a.props);break;default:e=fn(a.state.date,a.props)}if((a.props.forceShowMonthNavigation||a.props.showDisabledMonthNavigation||!e)&&!a.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];a.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),a.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=a.increaseMonth;(a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker)&&(n=a.increaseYear),e&&a.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null);var r=a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker,i=a.props,s=i.nextMonthButtonLabel,o=i.nextYearButtonLabel,l=a.props,c=l.nextMonthAriaLabel,d=void 0===c?"string"==typeof s?s:"Next Month":c,u=l.nextYearAriaLabel,p=void 0===u?"string"==typeof o?o:"Next Year":u;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:a.props.handleOnKeyDown,"aria-label":r?p:d},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},r?a.props.nextYearButtonLabel:a.props.nextMonthButtonLabel))}}})),xt(wt(a),"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.date,t=["react-datepicker__current-month"];return a.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),a.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),a.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),de.default.createElement("div",{className:t.join(" ")},Mt(e,a.props.dateFormat,a.props.locale))})),xt(wt(a),"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.props.showYearDropdown&&!e)return de.default.createElement(Cn,{adjustDateOnChange:a.props.adjustDateOnChange,date:a.state.date,onSelect:a.props.onSelect,setOpen:a.props.setOpen,dropdownMode:a.props.dropdownMode,onChange:a.changeYear,minDate:a.props.minDate,maxDate:a.props.maxDate,year:Oe.default(a.state.date),scrollableYearDropdown:a.props.scrollableYearDropdown,yearDropdownItemNumber:a.props.yearDropdownItemNumber})})),xt(wt(a),"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.props.showMonthDropdown&&!e)return de.default.createElement(Dn,{dropdownMode:a.props.dropdownMode,locale:a.props.locale,onChange:a.changeMonth,month:Ee.default(a.state.date),useShortMonthInDropdown:a.props.useShortMonthInDropdown})})),xt(wt(a),"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.props.showMonthYearDropdown&&!e)return de.default.createElement(Rn,{dropdownMode:a.props.dropdownMode,locale:a.props.locale,dateFormat:a.props.dateFormat,onChange:a.changeMonthYear,minDate:a.props.minDate,maxDate:a.props.maxDate,date:a.state.date,scrollableMonthYearDropdown:a.props.scrollableMonthYearDropdown})})),xt(wt(a),"renderTodayButton",(function(){if(a.props.todayButton&&!a.props.showTimeSelectOnly)return de.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return a.props.onSelect(Ye.default(Pt()),e)}},a.props.todayButton)})),xt(wt(a),"renderDefaultHeader",(function(e){var t=e.monthDate,n=e.i;return de.default.createElement("div",{className:"react-datepicker__header ".concat(a.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},a.renderCurrentMonth(t),de.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(a.props.dropdownMode),onFocus:a.handleDropdownFocus},a.renderMonthDropdown(0!==n),a.renderMonthYearDropdown(0!==n),a.renderYearDropdown(0!==n)),de.default.createElement("div",{className:"react-datepicker__day-names"},a.header(t)))})),xt(wt(a),"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,n=e.i;if(a.props.showTimeSelect&&!a.state.monthContainer||a.props.showTimeSelectOnly)return null;var r=hn(a.state.date,a.props),i=fn(a.state.date,a.props),s=gn(a.state.date,a.props),o=xn(a.state.date,a.props),l=!a.props.showMonthYearPicker&&!a.props.showQuarterYearPicker&&!a.props.showYearPicker;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:a.props.onDropdownFocus},a.props.renderCustomHeader(pt(pt({},a.state),{},{customHeaderCount:n,monthDate:t,changeMonth:a.changeMonth,changeYear:a.changeYear,decreaseMonth:a.decreaseMonth,increaseMonth:a.increaseMonth,decreaseYear:a.decreaseYear,increaseYear:a.increaseYear,prevMonthButtonDisabled:r,nextMonthButtonDisabled:i,prevYearButtonDisabled:s,nextYearButtonDisabled:o})),l&&de.default.createElement("div",{className:"react-datepicker__day-names"},a.header(t)))})),xt(wt(a),"renderYearHeader",(function(){var e=a.state.date,t=a.props,n=t.showYearPicker,r=jn(e,t.yearItemNumber),i=r.startPeriod,s=r.endPeriod;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},n?"".concat(i," - ").concat(s):Oe.default(e))})),xt(wt(a),"renderHeader",(function(e){switch(!0){case void 0!==a.props.renderCustomHeader:return a.renderCustomHeader(e);case a.props.showMonthYearPicker||a.props.showQuarterYearPicker||a.props.showYearPicker:return a.renderYearHeader(e);default:return a.renderDefaultHeader(e)}})),xt(wt(a),"renderMonths",(function(){if(!a.props.showTimeSelectOnly&&!a.props.showYearPicker){for(var e=[],t=a.props.showPreviousMonths?a.props.monthsShown-1:0,n=je.default(a.state.date,t),r=0;r<a.props.monthsShown;++r){var i=r-a.props.monthSelectedIn,s=be.default(n,i),o="month-".concat(r),l=r<a.props.monthsShown-1,c=r>0;e.push(de.default.createElement("div",{key:o,ref:function(e){a.monthContainer=e},className:"react-datepicker__month-container"},a.renderHeader({monthDate:s,i:r}),de.default.createElement(Fn,{chooseDayAriaLabelPrefix:a.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:a.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:a.props.weekAriaLabelPrefix,onChange:a.changeMonthYear,day:s,dayClassName:a.props.dayClassName,calendarStartDay:a.props.calendarStartDay,monthClassName:a.props.monthClassName,onDayClick:a.handleDayClick,handleOnKeyDown:a.props.handleOnDayKeyDown,onDayMouseEnter:a.handleDayMouseEnter,onMouseLeave:a.handleMonthMouseLeave,onWeekSelect:a.props.onWeekSelect,orderInDisplay:r,formatWeekNumber:a.props.formatWeekNumber,locale:a.props.locale,minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,excludeDateIntervals:a.props.excludeDateIntervals,highlightDates:a.props.highlightDates,selectingDate:a.state.selectingDate,includeDates:a.props.includeDates,includeDateIntervals:a.props.includeDateIntervals,inline:a.props.inline,shouldFocusDayInline:a.props.shouldFocusDayInline,fixedHeight:a.props.fixedHeight,filterDate:a.props.filterDate,preSelection:a.props.preSelection,setPreSelection:a.props.setPreSelection,selected:a.props.selected,selectsStart:a.props.selectsStart,selectsEnd:a.props.selectsEnd,selectsRange:a.props.selectsRange,selectsDisabledDaysInRange:a.props.selectsDisabledDaysInRange,showWeekNumbers:a.props.showWeekNumbers,startDate:a.props.startDate,endDate:a.props.endDate,peekNextMonth:a.props.peekNextMonth,setOpen:a.props.setOpen,shouldCloseOnSelect:a.props.shouldCloseOnSelect,renderDayContents:a.props.renderDayContents,disabledKeyboardNavigation:a.props.disabledKeyboardNavigation,showMonthYearPicker:a.props.showMonthYearPicker,showFullMonthYearPicker:a.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:a.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:a.props.showFourColumnMonthYearPicker,showYearPicker:a.props.showYearPicker,showQuarterYearPicker:a.props.showQuarterYearPicker,isInputFocused:a.props.isInputFocused,containerRef:a.containerRef,monthShowsDuplicateDaysEnd:l,monthShowsDuplicateDaysStart:c})))}return e}})),xt(wt(a),"renderYears",(function(){if(!a.props.showTimeSelectOnly)return a.props.showYearPicker?de.default.createElement("div",{className:"react-datepicker__year--container"},a.renderHeader(),de.default.createElement(Wn,_t({onDayClick:a.handleDayClick,date:a.state.date},a.props))):void 0})),xt(wt(a),"renderTimeSection",(function(){if(a.props.showTimeSelect&&(a.state.monthContainer||a.props.showTimeSelectOnly))return de.default.createElement(qn,{selected:a.props.selected,openToDate:a.props.openToDate,onChange:a.props.onTimeChange,timeClassName:a.props.timeClassName,format:a.props.timeFormat,includeTimes:a.props.includeTimes,intervals:a.props.timeIntervals,minTime:a.props.minTime,maxTime:a.props.maxTime,excludeTimes:a.props.excludeTimes,filterTime:a.props.filterTime,timeCaption:a.props.timeCaption,todayButton:a.props.todayButton,showMonthDropdown:a.props.showMonthDropdown,showMonthYearDropdown:a.props.showMonthYearDropdown,showYearDropdown:a.props.showYearDropdown,withPortal:a.props.withPortal,monthRef:a.state.monthContainer,injectTimes:a.props.injectTimes,locale:a.props.locale,handleOnKeyDown:a.props.handleOnKeyDown,showTimeSelectOnly:a.props.showTimeSelectOnly})})),xt(wt(a),"renderInputTimeSection",(function(){var e=new Date(a.props.selected),t=Rt(e)&&Boolean(a.props.selected)?"".concat(wn(e.getHours()),":").concat(wn(e.getMinutes())):"";if(a.props.showTimeInput)return de.default.createElement(Bn,{date:e,timeString:t,timeInputLabel:a.props.timeInputLabel,onChange:a.props.onTimeChange,customTimeInput:a.props.customTimeInput})})),a.containerRef=de.default.createRef(),a.state={date:a.getDateInView(),selectingDate:null,monthContainer:null},a}return gt(n,[{key:"componentDidMount",value:function(){this.props.showTimeSelect&&(this.assignMonthContainer=void this.setState({monthContainer:this.monthContainer}))}},{key:"componentDidUpdate",value:function(e){this.props.preSelection&&!zt(this.props.preSelection,e.preSelection)?this.setState({date:this.props.preSelection}):this.props.openToDate&&!zt(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate})}},{key:"render",value:function(){var e=this.props.container||Un;return de.default.createElement("div",{ref:this.containerRef},de.default.createElement(e,{className:ue.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.props.children))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,monthSelectedIn:0,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Dt}}}]),n}(de.default.Component),$n=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),(a=t.call(this,e)).el=document.createElement("div"),a}return gt(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return dt.default.createPortal(this.props.children,this.el)}}]),n}(de.default.Component),Yn=function(e){return!e.disabled&&-1!==e.tabIndex},Hn=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),xt(wt(a=t.call(this,e)),"getTabChildren",(function(){return Array.prototype.slice.call(a.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Yn)})),xt(wt(a),"handleFocusStart",(function(e){var t=a.getTabChildren();t&&t.length>1&&t[t.length-1].focus()})),xt(wt(a),"handleFocusEnd",(function(e){var t=a.getTabChildren();t&&t.length>1&&t[0].focus()})),a.tabLoopRef=de.default.createRef(),a}return gt(n,[{key:"render",value:function(){return this.props.enableTabLoop?de.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},de.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,de.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(de.default.Component),zn=function(e){bt(n,e);var t=St(n);function n(){return ht(this,n),t.apply(this,arguments)}return gt(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.wrapperClassName,r=t.hidePopper,i=t.popperComponent,s=t.popperModifiers,o=t.popperPlacement,l=t.popperProps,c=t.targetComponent,d=t.enableTabLoop,u=t.popperOnKeyDown,p=t.portalId,m=t.portalHost;if(!r){var h=ue.default("react-datepicker-popper",n);e=de.default.createElement(le.Popper,_t({modifiers:s,placement:o},l),(function(e){var t=e.ref,n=e.style,a=e.placement,r=e.arrowProps;return de.default.createElement(Hn,{enableTabLoop:d},de.default.createElement("div",{ref:t,style:n,className:h,"data-placement":a,onKeyDown:u},de.default.cloneElement(i,{arrowProps:r})))}))}this.props.popperContainer&&(e=de.default.createElement(this.props.popperContainer,{},e)),p&&!r&&(e=de.default.createElement($n,{portalId:p,portalHost:m},e));var f=ue.default("react-datepicker-wrapper",a);return de.default.createElement(le.Manager,{className:"react-datepicker-manager"},de.default.createElement(le.Reference,null,(function(e){var t=e.ref;return de.default.createElement("div",{ref:t,className:f},c)})),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(de.default.Component),Kn="react-datepicker-ignore-onclickoutside",Gn=ct.default(Zn),Qn="Date input not valid.",Xn=function(e){bt(n,e);var t=St(n);function n(e){var a;return ht(this,n),xt(wt(a=t.call(this,e)),"getPreSelection",(function(){return a.props.openToDate?a.props.openToDate:a.props.selectsEnd&&a.props.startDate?a.props.startDate:a.props.selectsStart&&a.props.endDate?a.props.endDate:Pt()})),xt(wt(a),"calcInitialState",(function(){var e,t=a.getPreSelection(),n=_n(a.props),r=bn(a.props),i=n&&rt.default(t,Ye.default(n))?n:r&&at.default(t,Qe.default(r))?r:t;return{open:a.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=a.props.selectsRange?a.props.startDate:a.props.selected)&&void 0!==e?e:i,highlightDates:vn(a.props.highlightDates),focused:!1,shouldFocusDayInline:!1}})),xt(wt(a),"clearPreventFocusTimeout",(function(){a.preventFocusTimeout&&clearTimeout(a.preventFocusTimeout)})),xt(wt(a),"setFocus",(function(){a.input&&a.input.focus&&a.input.focus({preventScroll:!0})})),xt(wt(a),"setBlur",(function(){a.input&&a.input.blur&&a.input.blur(),a.cancelFocusInput()})),xt(wt(a),"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState({open:e,preSelection:e&&a.state.open?a.state.preSelection:a.calcInitialState().preSelection,lastPreSelectChange:ea},(function(){e||a.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&a.setBlur(),a.setState({inputValue:null})}))}))})),xt(wt(a),"inputOk",(function(){return pe.default(a.state.preSelection)})),xt(wt(a),"isCalendarOpen",(function(){return void 0===a.props.open?a.state.open&&!a.props.disabled&&!a.props.readOnly:a.props.open})),xt(wt(a),"handleFocus",(function(e){a.state.preventFocus||(a.props.onFocus(e),a.props.preventOpenOnFocus||a.props.readOnly||a.setOpen(!0)),a.setState({focused:!0})})),xt(wt(a),"cancelFocusInput",(function(){clearTimeout(a.inputFocusTimeout),a.inputFocusTimeout=null})),xt(wt(a),"deferFocusInput",(function(){a.cancelFocusInput(),a.inputFocusTimeout=setTimeout((function(){return a.setFocus()}),1)})),xt(wt(a),"handleDropdownFocus",(function(){a.cancelFocusInput()})),xt(wt(a),"handleBlur",(function(e){(!a.state.open||a.props.withPortal||a.props.showTimeInput)&&a.props.onBlur(e),a.setState({focused:!1})})),xt(wt(a),"handleCalendarClickOutside",(function(e){a.props.inline||a.setOpen(!1),a.props.onClickOutside(e),a.props.withPortal&&e.preventDefault()})),xt(wt(a),"handleChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(!a.props.onChangeRaw||(a.props.onChangeRaw.apply(wt(a),t),"function"==typeof r.isDefaultPrevented&&!r.isDefaultPrevented())){a.setState({inputValue:r.target.value,lastPreSelectChange:Jn});var i=Ot(r.target.value,a.props.dateFormat,a.props.locale,a.props.strictParsing,a.props.minDate);!i&&r.target.value||a.setSelected(i,r,!0)}})),xt(wt(a),"handleSelect",(function(e,t,n){if(a.setState({preventFocus:!0},(function(){return a.preventFocusTimeout=setTimeout((function(){return a.setState({preventFocus:!1})}),50),a.preventFocusTimeout})),a.props.onChangeRaw&&a.props.onChangeRaw(t),a.setSelected(e,t,!1,n),!a.props.shouldCloseOnSelect||a.props.showTimeSelect)a.setPreSelection(e);else if(!a.props.inline){a.props.selectsRange||a.setOpen(!1);var r=a.props,i=r.startDate,s=r.endDate;!i||s||rt.default(e,i)||a.setOpen(!1)}})),xt(wt(a),"setSelected",(function(e,t,n,r){var i=e;if(null===i||!nn(i,a.props)){var s=a.props,o=s.onChange,l=s.selectsRange,c=s.startDate,d=s.endDate;if(!Kt(a.props.selected,i)||a.props.allowSameDay||l)if(null!==i&&(!a.props.selected||n&&(a.props.showTimeSelect||a.props.showTimeSelectOnly||a.props.showTimeInput)||(i=Lt(i,{hour:Ce.default(a.props.selected),minute:Ne.default(a.props.selected),second:ke.default(a.props.selected)})),a.props.inline||a.setState({preSelection:i}),a.props.focusSelectedMonth||a.setState({monthSelectedIn:r})),l){var u=c&&d;c||d?c&&!d&&(rt.default(i,c)?o([i,null],t):o([c,i],t)):o([i,null],t),u&&o([i,null],t)}else o(i,t);n||(a.props.onSelect(i,t),a.setState({inputValue:null}))}})),xt(wt(a),"setPreSelection",(function(e){var t=void 0!==a.props.minDate,n=void 0!==a.props.maxDate,r=!0;if(e){var i=Ye.default(e);if(t&&n)r=Gt(e,a.props.minDate,a.props.maxDate);else if(t){var s=Ye.default(a.props.minDate);r=at.default(e,s)||Kt(i,s)}else if(n){var o=Qe.default(a.props.maxDate);r=rt.default(e,o)||Kt(i,o)}}r&&a.setState({preSelection:e})})),xt(wt(a),"handleTimeChange",(function(e){var t=Lt(a.props.selected?a.props.selected:a.getPreSelection(),{hour:Ce.default(e),minute:Ne.default(e)});a.setState({preSelection:t}),a.props.onChange(t),a.props.shouldCloseOnSelect&&a.setOpen(!1),a.props.showTimeInput&&a.setOpen(!0),a.setState({inputValue:null})})),xt(wt(a),"onInputClick",(function(){a.props.disabled||a.props.readOnly||a.setOpen(!0),a.props.onInputClick()})),xt(wt(a),"onInputKeyDown",(function(e){a.props.onKeyDown(e);var t=e.key;if(a.state.open||a.props.inline||a.props.preventOpenOnFocus){if(a.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n=a.calendar.componentNode&&a.calendar.componentNode.querySelector('.react-datepicker__day[tabindex="0"]');return void(n&&n.focus({preventScroll:!0}))}var r=Pt(a.state.preSelection);"Enter"===t?(e.preventDefault(),a.inputOk()&&a.state.lastPreSelectChange===ea?(a.handleSelect(r,e),!a.props.shouldCloseOnSelect&&a.setPreSelection(r)):a.setOpen(!1)):"Escape"===t&&(e.preventDefault(),a.setOpen(!1)),a.inputOk()||a.props.onInputError({code:1,msg:Qn})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||a.onInputClick()})),xt(wt(a),"onDayKeyDown",(function(e){a.props.onKeyDown(e);var t=e.key,n=Pt(a.state.preSelection);if("Enter"===t)e.preventDefault(),a.handleSelect(n,e),!a.props.shouldCloseOnSelect&&a.setPreSelection(n);else if("Escape"===t)e.preventDefault(),a.setOpen(!1),a.inputOk()||a.props.onInputError({code:1,msg:Qn});else if(!a.props.disabledKeyboardNavigation){var r;switch(t){case"ArrowLeft":r=ye.default(n,1);break;case"ArrowRight":r=xe.default(n,1);break;case"ArrowUp":r=we.default(n,1);break;case"ArrowDown":r=_e.default(n,1);break;case"PageUp":r=je.default(n,1);break;case"PageDown":r=be.default(n,1);break;case"Home":r=Se.default(n,1);break;case"End":r=ve.default(n,1)}if(!r)return void(a.props.onInputError&&a.props.onInputError({code:1,msg:Qn}));if(e.preventDefault(),a.setState({lastPreSelectChange:ea}),a.props.adjustDateOnChange&&a.setSelected(r),a.setPreSelection(r),a.props.inline){var i=Ee.default(n),s=Ee.default(r),o=Oe.default(n),l=Oe.default(r);i!==s||o!==l?a.setState({shouldFocusDayInline:!0}):a.setState({shouldFocusDayInline:!1})}}})),xt(wt(a),"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),a.setState({preventFocus:!0},(function(){a.setOpen(!1),setTimeout((function(){a.setFocus(),a.setState({preventFocus:!1})}))})))})),xt(wt(a),"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),a.props.selectsRange?a.props.onChange([null,null],e):a.props.onChange(null,e),a.setState({inputValue:null})})),xt(wt(a),"clear",(function(){a.onClearClick()})),xt(wt(a),"onScroll",(function(e){"boolean"==typeof a.props.closeOnScroll&&a.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||a.setOpen(!1):"function"==typeof a.props.closeOnScroll&&a.props.closeOnScroll(e)&&a.setOpen(!1)})),xt(wt(a),"renderCalendar",(function(){return a.props.inline||a.isCalendarOpen()?de.default.createElement(Gn,{ref:function(e){a.calendar=e},locale:a.props.locale,calendarStartDay:a.props.calendarStartDay,chooseDayAriaLabelPrefix:a.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:a.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:a.props.weekAriaLabelPrefix,adjustDateOnChange:a.props.adjustDateOnChange,setOpen:a.setOpen,shouldCloseOnSelect:a.props.shouldCloseOnSelect,dateFormat:a.props.dateFormatCalendar,useWeekdaysShort:a.props.useWeekdaysShort,formatWeekDay:a.props.formatWeekDay,dropdownMode:a.props.dropdownMode,selected:a.props.selected,preSelection:a.state.preSelection,onSelect:a.handleSelect,onWeekSelect:a.props.onWeekSelect,openToDate:a.props.openToDate,minDate:a.props.minDate,maxDate:a.props.maxDate,selectsStart:a.props.selectsStart,selectsEnd:a.props.selectsEnd,selectsRange:a.props.selectsRange,startDate:a.props.startDate,endDate:a.props.endDate,excludeDates:a.props.excludeDates,excludeDateIntervals:a.props.excludeDateIntervals,filterDate:a.props.filterDate,onClickOutside:a.handleCalendarClickOutside,formatWeekNumber:a.props.formatWeekNumber,highlightDates:a.state.highlightDates,includeDates:a.props.includeDates,includeDateIntervals:a.props.includeDateIntervals,includeTimes:a.props.includeTimes,injectTimes:a.props.injectTimes,inline:a.props.inline,shouldFocusDayInline:a.state.shouldFocusDayInline,peekNextMonth:a.props.peekNextMonth,showMonthDropdown:a.props.showMonthDropdown,showPreviousMonths:a.props.showPreviousMonths,useShortMonthInDropdown:a.props.useShortMonthInDropdown,showMonthYearDropdown:a.props.showMonthYearDropdown,showWeekNumbers:a.props.showWeekNumbers,showYearDropdown:a.props.showYearDropdown,withPortal:a.props.withPortal,forceShowMonthNavigation:a.props.forceShowMonthNavigation,showDisabledMonthNavigation:a.props.showDisabledMonthNavigation,scrollableYearDropdown:a.props.scrollableYearDropdown,scrollableMonthYearDropdown:a.props.scrollableMonthYearDropdown,todayButton:a.props.todayButton,weekLabel:a.props.weekLabel,outsideClickIgnoreClass:Kn,fixedHeight:a.props.fixedHeight,monthsShown:a.props.monthsShown,monthSelectedIn:a.state.monthSelectedIn,onDropdownFocus:a.handleDropdownFocus,onMonthChange:a.props.onMonthChange,onYearChange:a.props.onYearChange,dayClassName:a.props.dayClassName,weekDayClassName:a.props.weekDayClassName,monthClassName:a.props.monthClassName,timeClassName:a.props.timeClassName,showTimeSelect:a.props.showTimeSelect,showTimeSelectOnly:a.props.showTimeSelectOnly,onTimeChange:a.handleTimeChange,timeFormat:a.props.timeFormat,timeIntervals:a.props.timeIntervals,minTime:a.props.minTime,maxTime:a.props.maxTime,excludeTimes:a.props.excludeTimes,filterTime:a.props.filterTime,timeCaption:a.props.timeCaption,className:a.props.calendarClassName,container:a.props.calendarContainer,yearItemNumber:a.props.yearItemNumber,yearDropdownItemNumber:a.props.yearDropdownItemNumber,previousMonthAriaLabel:a.props.previousMonthAriaLabel,previousMonthButtonLabel:a.props.previousMonthButtonLabel,nextMonthAriaLabel:a.props.nextMonthAriaLabel,nextMonthButtonLabel:a.props.nextMonthButtonLabel,previousYearAriaLabel:a.props.previousYearAriaLabel,previousYearButtonLabel:a.props.previousYearButtonLabel,nextYearAriaLabel:a.props.nextYearAriaLabel,nextYearButtonLabel:a.props.nextYearButtonLabel,timeInputLabel:a.props.timeInputLabel,disabledKeyboardNavigation:a.props.disabledKeyboardNavigation,renderCustomHeader:a.props.renderCustomHeader,popperProps:a.props.popperProps,renderDayContents:a.props.renderDayContents,onDayMouseEnter:a.props.onDayMouseEnter,onMonthMouseLeave:a.props.onMonthMouseLeave,selectsDisabledDaysInRange:a.props.selectsDisabledDaysInRange,showTimeInput:a.props.showTimeInput,showMonthYearPicker:a.props.showMonthYearPicker,showFullMonthYearPicker:a.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:a.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:a.props.showFourColumnMonthYearPicker,showYearPicker:a.props.showYearPicker,showQuarterYearPicker:a.props.showQuarterYearPicker,showPopperArrow:a.props.showPopperArrow,excludeScrollbar:a.props.excludeScrollbar,handleOnKeyDown:a.props.onKeyDown,handleOnDayKeyDown:a.onDayKeyDown,isInputFocused:a.state.focused,customTimeInput:a.props.customTimeInput,setPreSelection:a.setPreSelection},a.props.children):null})),xt(wt(a),"renderDateInput",(function(){var e,t=ue.default(a.props.className,xt({},Kn,a.state.open)),n=a.props.customInput||de.default.createElement("input",{type:"text"}),r=a.props.customInputRef||"ref",i="string"==typeof a.props.value?a.props.value:"string"==typeof a.state.inputValue?a.state.inputValue:a.props.selectsRange?function(e,t,n){if(!e)return"";var a=At(e,n),r=t?At(t,n):"";return"".concat(a," - ").concat(r)}(a.props.startDate,a.props.endDate,a.props):At(a.props.selected,a.props);return de.default.cloneElement(n,(xt(e={},r,(function(e){a.input=e})),xt(e,"value",i),xt(e,"onBlur",a.handleBlur),xt(e,"onChange",a.handleChange),xt(e,"onClick",a.onInputClick),xt(e,"onFocus",a.handleFocus),xt(e,"onKeyDown",a.onInputKeyDown),xt(e,"id",a.props.id),xt(e,"name",a.props.name),xt(e,"autoFocus",a.props.autoFocus),xt(e,"placeholder",a.props.placeholderText),xt(e,"disabled",a.props.disabled),xt(e,"autoComplete",a.props.autoComplete),xt(e,"className",ue.default(n.props.className,t)),xt(e,"title",a.props.title),xt(e,"readOnly",a.props.readOnly),xt(e,"required",a.props.required),xt(e,"tabIndex",a.props.tabIndex),xt(e,"aria-describedby",a.props.ariaDescribedBy),xt(e,"aria-invalid",a.props.ariaInvalid),xt(e,"aria-labelledby",a.props.ariaLabelledBy),xt(e,"aria-required",a.props.ariaRequired),e))})),xt(wt(a),"renderClearButton",(function(){var e=a.props,t=e.isClearable,n=e.selected,r=e.startDate,i=e.endDate,s=e.clearButtonTitle,o=e.clearButtonClassName,l=void 0===o?"":o,c=e.ariaLabelClose,d=void 0===c?"Close":c;return!t||null==n&&null==r&&null==i?null:de.default.createElement("button",{type:"button",className:"react-datepicker__close-icon ".concat(l).trim(),"aria-label":d,onClick:a.onClearClick,title:s,tabIndex:-1})})),a.state=a.calcInitialState(),a}return gt(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var n,a;e.inline&&(n=e.selected,a=this.props.selected,n&&a?Ee.default(n)!==Ee.default(a)||Oe.default(n)!==Oe.default(a):n!==a)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:vn(this.props.highlightDates)}),t.focused||Kt(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){return de.default.createElement("div",{className:"react-datepicker__input-container"},this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?de.default.createElement("div",{className:"react-datepicker__portal"},e):null;return this.state.open&&this.props.portalId&&(t=de.default.createElement($n,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),de.default.createElement("div",null,this.renderInputContainer(),t)}return de.default.createElement(zn,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Dt,renderDayContents:function(e){return e},focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0}}}]),n}(de.default.Component),Jn="input",ea="navigate";e.CalendarContainer=Un,e.default=Xn,e.getDefaultLocale=Qt,e.registerLocale=function(e,t){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(70079),n(39519),n(65443),n(27930),n(47612),n(95822),n(94392),n(71050),n(63703),n(90806),n(84613),n(31247),n(79605),n(76508),n(22836),n(83538),n(76136),n(35865),n(54909),n(91352),n(42370),n(32097),n(33184),n(84097),n(66821),n(12838),n(42384),n(31359),n(14603),n(6257),n(47067),n(28208),n(5042),n(57006),n(1711),n(82399),n(31213),n(46418),n(27088),n(86854),n(81793),n(72611),n(13167),n(27747),n(19752),n(68392),n(82296),n(48216),n(4820),n(72986),n(51467),n(99114),n(41667),n(40538),n(94326),n(34256),n(78789),n(84188),n(30091),n(70850),n(99581),n(69274))},82330:function(e){var t="undefined"!=typeof Element,n="function"==typeof Map,a="function"==typeof Set,r="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var o,l,c,d;if(Array.isArray(e)){if((o=e.length)!=s.length)return!1;for(l=o;0!=l--;)if(!i(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(d=e.entries();!(l=d.next()).done;)if(!s.has(l.value[0]))return!1;for(d=e.entries();!(l=d.next()).done;)if(!i(l.value[1],s.get(l.value[0])))return!1;return!0}if(a&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(d=e.entries();!(l=d.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((o=e.length)!=s.length)return!1;for(l=o;0!=l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=o;0!=l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!i(e[c[l]],s[c[l]]))return!1;return!0}return e!=e&&s!=s}e.exports=function(e,t){try{return i(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},70850:function(e,t,n){"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:function(){return h}});var a=n(70079),r=n(99581);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var l,c,d=(void 0===l&&(l=0),function(){return++l}),u={},p={},m=["touchstart","touchmove"],h="ignore-react-onclickoutside";function f(e,t){var n=null;return-1!==m.indexOf(t)&&c&&(n={passive:!e.props.preventDefault}),n}t.default=function(e,t){var n,l,m=e.displayName||e.name||"Component";return l=n=function(n){var l,h;function g(e){var a;return(a=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!=typeof a.__clickOutsideHandlerProp){var t=a.getInstance();if("function"!=typeof t.props.handleClickOutside){if("function"!=typeof t.handleClickOutside)throw new Error("WrappedComponent: "+m+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else a.__clickOutsideHandlerProp(e)},a.__getComponentNode=function(){var e=a.getInstance();return t&&"function"==typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"==typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,r.findDOMNode)(e)},a.enableOnClickOutside=function(){if("undefined"!=typeof document&&!p[a._uid]){void 0===c&&(c=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),p[a._uid]=!0;var e=a.props.eventTypes;e.forEach||(e=[e]),u[a._uid]=function(e){var t;null!==a.componentNode&&(a.props.preventDefault&&e.preventDefault(),a.props.stopPropagation&&e.stopPropagation(),a.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&o(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,a.componentNode,a.props.outsideClickIgnoreClass)===document&&a.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,u[a._uid],f(s(a),e))}))}},a.disableOnClickOutside=function(){delete p[a._uid];var e=u[a._uid];if(e&&"undefined"!=typeof document){var t=a.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,f(s(a),t))})),delete u[a._uid]}},a.getRef=function(e){return a.instanceRef=e},a._uid=d(),a}h=n,(l=g).prototype=Object.create(h.prototype),l.prototype.constructor=l,i(l,h);var x=g.prototype;return x.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},x.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+m+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},x.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},x.componentWillUnmount=function(){this.disableOnClickOutside()},x.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,a.createElement)(e,n)},g}(a.Component),n.displayName="OnClickOutside("+m+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:h,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},l}},69274:function(e,t,n){"use strict";n.r(t),n.d(t,{Manager:function(){return s},Popper:function(){return v},Reference:function(){return j},usePopper:function(){return g}});var a=n(70079),r=a.createContext(),i=a.createContext();function s(e){var t=e.children,n=a.useState(null),s=n[0],o=n[1],l=a.useRef(!1);a.useEffect((function(){return function(){l.current=!0}}),[]);var c=a.useCallback((function(e){l.current||o(e)}),[]);return a.createElement(r.Provider,{value:s},a.createElement(i.Provider,{value:c},t))}var o=function(e){return Array.isArray(e)?e[0]:e},l=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.apply(void 0,n)}},c=function(e,t){if("function"==typeof e)return l(e,t);null!=e&&(e.current=t)},d=function(e){return e.reduce((function(e,t){var n=t[0],a=t[1];return e[n]=a,e}),{})},u="undefined"!=typeof window&&window.document&&window.document.createElement?a.useLayoutEffect:a.useEffect,p=n(27087),m=n(82330),h=n.n(m),f=[],g=function(e,t,n){void 0===n&&(n={});var r=a.useRef(null),i={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||f},s=a.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=s[0],l=s[1],c=a.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);l({styles:d(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:d(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),m=a.useMemo((function(){var e={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[c,{name:"applyStyles",enabled:!1}])};return h()(r.current,e)?r.current||e:(r.current=e,e)}),[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,c]),g=a.useRef();return u((function(){g.current&&g.current.setOptions(m)}),[m]),u((function(){if(null!=e&&null!=t){var a=(n.createPopper||p.fi)(e,t,m);return g.current=a,function(){a.destroy(),g.current=null}}}),[e,t,n.createPopper]),{state:g.current?g.current.state:null,styles:o.styles,attributes:o.attributes,update:g.current?g.current.update:null,forceUpdate:g.current?g.current.forceUpdate:null}},x=function(){},_=function(){return Promise.resolve(null)},b=[];function v(e){var t=e.placement,n=void 0===t?"bottom":t,i=e.strategy,s=void 0===i?"absolute":i,l=e.modifiers,d=void 0===l?b:l,u=e.referenceElement,p=e.onFirstUpdate,m=e.innerRef,h=e.children,f=a.useContext(r),v=a.useState(null),y=v[0],w=v[1],j=a.useState(null),S=j[0],k=j[1];a.useEffect((function(){c(m,y)}),[m,y]);var N=a.useMemo((function(){return{placement:n,strategy:s,onFirstUpdate:p,modifiers:[].concat(d,[{name:"arrow",enabled:null!=S,options:{element:S}}])}}),[n,s,p,d,S]),C=g(u||f,y,N),I=C.state,T=C.styles,D=C.forceUpdate,E=C.update,P=a.useMemo((function(){return{ref:w,style:T.popper,placement:I?I.placement:n,hasPopperEscaped:I&&I.modifiersData.hide?I.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:I&&I.modifiersData.hide?I.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:T.arrow,ref:k},forceUpdate:D||x,update:E||_}}),[w,k,n,I,T,E,D]);return o(h)(P)}var y=n(20282),w=n.n(y);function j(e){var t=e.children,n=e.innerRef,r=a.useContext(i),s=a.useCallback((function(e){c(n,e),l(r,e)}),[n,r]);return a.useEffect((function(){return function(){return c(n,null)}})),a.useEffect((function(){w()(Boolean(r),"`Reference` should not be used outside of a `Manager` component.")}),[r]),o(t)({ref:s})}},23064:function(e){e.exports=function(e){if(!window.satismeter){window.satismeter=function(){var e=[];function t(){e.push(arguments)}return t.q=e,t}();var t=document.createElement("script"),n=document.getElementsByTagName("script")[0].parentNode;t.async=1,t.src="https://app.satismeter.com/satismeter.js",n.appendChild(t)}return window.satismeter(e)}},20282:function(e){"use strict";e.exports=function(){}},65311:function(e){"use strict";e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 60108,e(e.s=60108)})),e.O()}]);