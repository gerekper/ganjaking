jQuery(document).ready(function(o){let d=new URLSearchParams(window.location.search);if("mollie_payment"===d.get("pafe_action")){d.delete("pafe_action");let e=window.location.href.replace(window.location.search,"?"+d.toString());e=new URL(e);let a=new URLSearchParams(e.search);a.toString()?window.history.pushState({},"",e.href):window.history.pushState({},"",e.href.replace("?",""));let t=localStorage.getItem("pafe_data_form_mollie_payment");t=JSON.parse(t);var n,s=t.formName;let i,r,l=o('[data-pafe-form-builder-mollie-payment="'+s+'"]').closest(".elementor-element");t&&(n=JSON.parse(t.fields),o.each(n,function(e,t){t.value&&("radio"==t.type?o('[data-pafe-form-builder-form-id="'+s+'"][name="form_fields['+t.name+']"][value="'+t.value+'"]').prop("checked",!0):"checkbox"==t.type?(r=t.value.split(","),o.each(r,function(e,a){o('[data-pafe-form-builder-form-id="'+s+'"][name="form_fields['+t.name+'][]"][value="'+a+'"]').prop("checked",!0)})):o('[data-pafe-form-builder-form-id="'+s+'"][name="form_fields['+t.name+']"]').val(t.value))}),o(document).find('[data-pafe-form-builder-form-id="'+s+'"]').closest(".elementor-element").css({opacity:.45}),o('[data-pafe-form-builder-mollie-payment="'+s+'"]').closest(".elementor-element").css({opacity:.45}),o('[data-pafe-form-builder-mollie-payment="'+s+'"]').closest(".elementor-element").addClass("elementor-form-waiting"),o.ajax({type:"post",dataType:"json",url:o("[data-pafe-ajax-url]").data("pafe-ajax-url"),data:{action:"pafe_mollie_get_payment",payment_id:t.mollie_payment_id},success:function(e){e.status?i="paid"==e.status?"succeeded":"pending"==e.status?"pending":"failed":console.log("Mollie payment error!")},error:function(e){console.log("Mollie payment error!")}}),o.ajax({url:o("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:t,success:function(e){var a,t,r;l.css({opacity:1}),l.removeClass("elementor-form-waiting"),o(document).find('[data-pafe-form-builder-form-id="'+s+'"]').closest(".elementor-element").css({opacity:1}),-1!==e.indexOf(",")&&((a=JSON.parse(e)).custom_message&&l.find("[data-pafe-form-builder-message]").html(a.custom_message),a.payment_status=i,l.find(".elementor-message").each(function(){var e;""!=a.post_url&&(e=o(this).html().replace("[post_url]",'<a href="'+a.post_url+'">'+a.post_url+"</a>"),o(this).html(e))}),"succeeded"!=a.payment_status&&"active"!=a.payment_status||l.find(".pafe-form-builder-alert--mollie .elementor-message-success").addClass("visible"),"pending"==a.payment_status&&l.find(".pafe-form-builder-alert--mollie .elementor-help-inline").addClass("visible"),"failed"!=a.payment_status&&"incomplete"!=a.payment_status||(l.find(".pafe-form-builder-alert--mollie .elementor-message-danger").addClass("visible"),o(document).find('[data-pafe-form-builder-form-id="'+s+'"]').closest(".elementor-element").css({opacity:1}),o(this).closest(".elementor-element").css({opacity:1})),""!=a.status?(l.find(".pafe-form-builder-alert--mail .elementor-message-success").addClass("visible"),l.find("[data-pafe-form-builder-trigger-success]").trigger("click")):(l.find(".pafe-form-builder-alert--mail .elementor-message-danger").addClass("visible"),o(document).find('[data-pafe-form-builder-form-id="'+s+'"]').closest(".elementor-element").css({opacity:1}),o(this).closest(".elementor-element").css({opacity:1}),l.find("[data-pafe-form-builder-trigger-failed]").trigger("click"),""!=a.register_message&&l.find(".pafe-form-builder-alert--mail .elementor-message-danger").html(a.register_message.replace(/###/g,",")))),0!=l.find('input[name="redirect"]').length&&(t=l.find('input[name="redirect"]').val().trim(),r=l.find('input[name="redirect"]').attr("data-pafe-form-builder-open-new-tab"),-1!==e.indexOf(",")&&"1"!=a.failed_status&&(""!=a.post_url&&"[post_url]"==t?window.location.href=a.post_url:""!=a.redirect&&("yes"==r?window.open(a.redirect,"_blank"):window.location.href=a.redirect))),0!=o(document).find('[data-pafe-form-builder-popup][data-pafe-form-builder-hidden-form-id="'+s+'"]').length&&$submit.closest(".elementor-widget-container").find('[data-pafe-form-builder-hidden-form-id="'+s+'"]').trigger("click"),a.popup&&0!=o(document).find('[data-pafe-form-builder-popup-open][data-pafe-form-builder-hidden-form-id="'+s+'"]').length&&$submit.closest(".elementor-widget-container").find('[data-pafe-form-builder-hidden-form-id="'+s+'"]').trigger("click"),0!=o(document).find('[data-pafe-form-builder-popup-close][data-pafe-form-builder-hidden-form-id="'+s+'"]').length&&$submit.closest(".elementor-widget-container").find('[data-pafe-form-builder-hidden-form-id="'+s+'"]').trigger("click")}}),localStorage.removeItem("pafe_data_form_mollie_payment"))}});