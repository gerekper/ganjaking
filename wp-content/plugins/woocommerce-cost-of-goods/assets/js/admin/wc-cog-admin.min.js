"use strict";!function(){jQuery(function(c){var n=function(s){var t,o;return 0===c("p.applying-costs-result .progress").length&&c("p.applying-costs-result").append(' <span class="progress"></span>'),t='<span class="error"   style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,o='<span class="success" style="color: #008000;">&#10004;</span> '+wc_cog_admin.i18n.apply_costs_success,s={action:"wc_cog_get_applying_costs_status",security:wc_cog_admin.get_applying_cost_of_goods_status_nonce,job_id:s},c.post(ajaxurl,s).done(function(s){if(s.success){if("completed"!==s.data.status)return c("p.applying-costs-result .progress").html(s.data.progress+" / "+s.data.total),setTimeout(n(s.data.id),1e5);c("p.applying-costs-result").html(o)}else c("p.applying-costs-result").html(t),console.log(s.data);return c("span.applying-costs-progress").removeClass("is-active"),c("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)}).fail(function(){return c("p.applying-costs-result").html(t),c("span.applying-costs-progress").removeClass("is-active"),c("#wc_cog_apply_costs_to_previous_orders").prop("disabled",!1)})};return wc_cog_admin.existing_background_job_id&&n(wc_cog_admin.existing_background_job_id),c("button#wc_cog_apply_costs_to_previous_orders").on("click",function(s){var t,o,a,e=this;return s.preventDefault(),!!confirm(wc_cog_admin.i18n.apply_costs_confirm_message_all)&&(s=c(this).closest("fieldset"),t=s.find("span.applying-costs-progress"),o=s.find("> p"),c(this).prop("disabled",!0),t.addClass("is-active"),o.addClass("applying-costs-result").html(wc_cog_admin.i18n.apply_costs_in_progress+"<br/>"+wc_cog_admin.i18n.apply_costs_notice),a='<span class="error" style="color: #DC3232;">&#10005;</span> '+wc_cog_admin.i18n.apply_costs_error,s={action:"wc_cog_apply_costs_to_previous_orders",security:wc_cog_admin.apply_cost_of_goods_nonce},c.post(ajaxurl,s).done(function(s){return s.success?null!=s.data.id?setTimeout(n(s.data.id),1e5):void 0:(o.html(a),t.removeClass("is-active"),c(e).prop("disabled",!1))}).fail(function(){return c(e).prop("disabled",!1),t.removeClass("is-active"),o.html(a)}))}),c("select#field_to_edit").on("variable_cost_of_good_ajax_data",function(){return{value:window.prompt(woocommerce_admin_meta_boxes_variations.i18n_enter_a_value)}}),c("#the-list").on("click",".editinline",function(s){var t=c(this).closest("tr").attr("id");return t=t.replace("post-",""),t=c("#wc_cog_inline_"+t).find(".cost").text(),c('input[name="_wc_cog_cost"]').val(t)}),c("#woocommerce-order-items").on("change","input.quantity",function(s){var t,o,a;return s.preventDefault(),a=c(this).closest("tr.item"),o=c(this).val(),t=c(this).attr("data-qty"),s=c("input.cog-total",a),a=c("input.cog-suggestion",a),s=accounting.unformat(s.attr("data-cog-total"),"."),s/=t,a.val(accounting.formatNumber(s*o,woocommerce_admin_meta_boxes.currency_format_num_decimals,"",woocommerce_admin_meta_boxes.currency_format_decimal_sep).toString())})})}.call(void 0);