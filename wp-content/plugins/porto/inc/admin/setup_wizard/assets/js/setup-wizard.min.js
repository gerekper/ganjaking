var PortoWizard=function(e){var t={install_plugins:function(e){(new i).init(e)},load_unused_shortcodes:function(){(new o).init()}};function n(){if(e(".button-next").on("click",(function(n){if(!(e(".porto_mini_status.file-permission").length>0))return!!s(this)&&(!e(this).data("callback")||void 0===t[e(this).data("callback")]||(t[e(this).data("callback")](this),!1));var i=this,o=e("body"),a=e(".porto-wizard-notification");if(n.preventDefault(),a.length>0){if(o.hasClass("show-pm-popup"))return a.addClass("shake"),void setTimeout((function(){a.removeClass("shake")}),1e3)}else{var r='<div class="porto-wizard-notification"><p><b>'+wp.i18n.__("Warning!")+"</b>"+wp.i18n.__("File permissions of the wp-contnet/uploads folder are not writable on your server. If you do not fix this, then you cannot import demos properly on your server.")+'&nbsp;<a href="https://www.wpbeginner.com/beginners-guide/how-to-fix-file-and-folder-permissions-error-in-wordpress/" target="_blank">'+wp.i18n.__("How to fix it?")+'</a></p><button class="btn btn-primary btn-action">'+wp.i18n.__("OK")+'</button><button class="btn btn-cancel">'+wp.i18n.__("CANCEL")+"</button></div>";o.append(r).on("click",".porto-wizard-notification .btn-action",(function(n){return o.removeClass("show-pm-popup"),!!s(i)&&(!e(i).data("callback")||void 0===t[e(i).data("callback")]||(t[e(i).data("callback")](i),!1))})).on("click",".porto-wizard-notification .btn-cancel",(function(e){o.removeClass("show-pm-popup")}))}setTimeout((function(){o.addClass("show-pm-popup")}),100)})),e(".shortcode_list").length)return t.load_unused_shortcodes(),!1;e(".button-upload").on("click",(function(e){e.preventDefault(),function(){"use strict";var e,t;if(void 0!==e)return void e.open();(e=wp.media.frames.file_frame=wp.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1})).on("select",(function(){t=e.state().get("selection").first().toJSON(),jQuery(".site-logo").attr("src",t.url),jQuery("#new_logo_id").val(t.id)})),e.open()}()})),e(".theme-presets a").on("click",(function(t){t.preventDefault(),e(this).parents("ul").first().find(".current").removeClass("current"),e(this).parents("li").first().addClass("current");var n=e(this).data("style");return e("#new_style").val(n),!1})),e('.porto-setup-wizard-plugins input[type="checkbox"]').on("change",(function(){var t=e(this).closest("li").data("slug");if("js_composer"==t||"elementor"==t||"visualcomposer"==t){var n=e(this).closest(".porto-setup-wizard-plugins"),i=e(this).closest("form").find(".porto-notice"),o=0,s=["js_composer","elementor","visualcomposer"];for(var a in s){var r=s[a];n.find('li[data-slug="'+r+'"]').length&&!n.find('li[data-slug="'+r+'"] input[type="checkbox"]').is(":checked")||o++}o>1?i.removeClass("d-none"):i.addClass("d-none")}})),e(document.body).on("click",".porto-install-demo .message-section .install-plugin, .porto-install-demo .plugins-used .install-plugin",(function(t){var n,i,o=e(this),s=o.closest(".active-plugin"),a=e('<a href="#" class="install-plugin">'+wp.i18n.__("Failed","porto")+"</a>"),r=!1,l=e("#porto-install-options .btn-actions"),d=s.data("slug");t.preventDefault(),o.closest(".plugins-used").length?(r=!0,n=o.closest(".plugins-used")):n=o.closest(".pagebuilder-selector");var p=n.find("input:checked").val();function u(){jQuery.post(ajaxurl+"?activate-multi=1",{action:"undefined"==typeof porto_setup_wizard_params?"porto_speed_optimize_wizard_plugins":"porto_setup_wizard_plugins",wpnonce:"undefined"==typeof porto_setup_wizard_params?porto_speed_optimize_wizard_params.wpnonce:porto_setup_wizard_params.wpnonce,slug:d}).success(c).fail(c)}function c(t){if("object"==typeof t&&void 0!==t.message)if(void 0!==t.url){if(i==t.hash)return void s.empty().append(a);t.plugin&&-1!==t.plugin.indexOf("visualcomposer")?t["activate-multi"]=1:!t.plugin||-1===t.plugin.indexOf("woocommerce")&&-1===t.plugin.indexOf("elementor")||(t.url=t.url+"&activate-multi=1"),i=t.hash,jQuery.post(t.url,t,(function(e){u()}))}else void 0!==t.done?r?(e(document).find('.plugins-used >li[data-slug="'+d+'"]').remove(),n.find(">li:not(.plugin-step)").length||(n.siblings(".porto-install-section").slideDown(),e("#porto-install-options .more-options").css("display",""),n.remove())):("revslider"==d||"dynamic-featured-image"==d||"porto-vc-addon"==d?n.find(".message-section>."+d).remove():n.find(".message-section>."+d).addClass("d-none"),"elementor"==p||"fse-el"==p?n.find(".message-section>.elementor").hasClass("d-none")&&0==n.find(".message-section>.dynamic-featured-image:not(.d-none)").length&&(n.find(">label.elementor").removeClass("notinstalled"),l.slideDown()):"js_composer"==p||"fse-wpb"==p?0==n.find(".message-section>.revslider_j:not(.d-none)").length&&n.find(".message-section>.js_composer").hasClass("d-none")&&0==n.find(".message-section>.dynamic-featured-image:not(.d-none)").length&&(n.find(">label.js_composer").removeClass("notinstalled"),l.slideDown()):"vc"==p&&n.find(".message-section>.vc").hasClass("d-none")&&0==n.find(".message-section>.porto-vc-addon:not(.d-none)").length&&(n.find(">label.vc").removeClass("notinstalled"),l.slideDown())):s.empty().append(a);else s.empty().append(a)}s.empty().html('<i class="porto-ajax-loader"></i>'),u()}))}function i(){var t,n,i=0,o="",s="";function a(e){"object"==typeof e&&void 0!==e.message?(n.find("span").text(e.message),void 0!==e.url?e.hash==s?(n.find("span").text("failed"),l()):(e.plugin&&-1!==e.plugin.indexOf("visualcomposer")?e["activate-multi"]=1:!e.plugin||-1===e.plugin.indexOf("woocommerce")&&-1===e.plugin.indexOf("elementor")||(e.url=e.url+"&activate-multi=1"),s=e.hash,jQuery.post(e.url,e,(function(t){r(),n.find("span").text(e.message)})).fail(a)):(e.done,l())):(n.find("span").text("ajax error"),l())}function r(){o&&jQuery.post(ajaxurl+"?activate-multi=1",{action:"undefined"==typeof porto_setup_wizard_params?"porto_speed_optimize_wizard_plugins":"porto_setup_wizard_plugins",wpnonce:"undefined"==typeof porto_setup_wizard_params?porto_speed_optimize_wizard_params.wpnonce:porto_setup_wizard_params.wpnonce,slug:o},a).fail(a)}function l(){var s=!1;n&&(n.data("done_item")||(i++,n.data("done_item",1)),n.find(".spinner").css("visibility","hidden")),e(".porto-setup-wizard-plugins li").each((function(){e(this).hasClass("installing")&&(""==o||s?(o=e(this).data("slug"),n=e(this),r(),s=!1):e(this).data("slug")==o&&(s=!0))})),i>=e(".porto-setup-wizard-plugins li.installing").length&&t()}return{init:function(n){e(".porto-setup-wizard-plugins > li").each((function(){e(this).find('input[type="checkbox"]').is(":checked")&&e(this).addClass("installing")})),t=function(){e(n).attr("href")&&"#"!=e(n).attr("href")?window.location.href=n.href+"&activate-multi=1":window.location.reload()},l()}}}function o(){function e(e,t){if(null!=typeof t)for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}function t(t){if(t){var n="";for(var i in t){var o=t[i];n+="<li>",n+='<label class="checkbox checkbox-inline">',n+='<input type="checkbox" name="shortcodes[]" value="'+o+'"'+(e(o,porto_speed_optimize_wizard_params.shortcodes_to_remove)?' checked="checked"':"")+">",n+=o,n+="</label>",n+="</li>"}jQuery(".shortcode_list").html(n),jQuery(".porto-setup-actions .btn:disabled").removeAttr("disabled")}}return{init:function(){jQuery(".shortcode_list").block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.6}}),jQuery.ajax({type:"post",url:ajaxurl,data:{action:"porto_speed_optimize_wizard_shortcodes",wpnonce:porto_speed_optimize_wizard_params.wpnonce},dataType:"json",success:t})}}}function s(e){var t=jQuery(e);if("yes"==t.data("done-loading"))return!1;var n=t.text(),i=t.outerWidth(),o="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",s=!1;t.css("width",i),t.addClass("wizard_step_loading_button_current");var a=t.is("input")?"val":"text";t[a](o),t.data("done-loading","yes");var r=[0,1,2];return function e(){if(!s){for(var n="",i=0;i<r.length;i++)r[i]=r[i]+1,r[i]>=o.length&&(r[i]=0),n+=o.charAt(r[i]);t[a](n),setTimeout((function(){e()}),60)}}(),{done:function(){s=!0,t[a](n),t.removeClass("wizard_step_loading_button_current"),t.attr("disabled",!1)}}}return{init:function(){e(n)}}}(jQuery);PortoWizard.init();