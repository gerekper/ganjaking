var wc_pb_bundle_scripts={};function wc_pb_price_format(t,e){return e=void 0!==e&&e,wc_pb_woocommerce_number_format(wc_pb_number_format(t),e)}function wc_pb_woocommerce_number_format(t,e){var i=wc_bundle_params.currency_format_decimal_sep,_=wc_bundle_params.currency_position,a=wc_bundle_params.currency_symbol,n=wc_bundle_params.currency_format_trim_zeros,s=wc_bundle_params.currency_format_num_decimals;if(e=void 0!==e&&e,"yes"==n&&0<s){for(var d=0;d<s;d++)i+="0";t=t.replace(i,"")}var r=String(t),o=e?a:'<span class="woocommerce-Price-currencySymbol">'+a+"</span>";return"left"===_?r=o+r:"right"===_?r+=o:"left_space"===_?r=o+" "+r:"right_space"===_&&(r=r+" "+o),r=e?r:'<span class="woocommerce-Price-amount amount">'+r+"</span>"}function wc_pb_number_format(t){var e=wc_bundle_params.currency_format_num_decimals,i=wc_bundle_params.currency_format_decimal_sep,_=wc_bundle_params.currency_format_thousand_sep,a=t,n=isNaN(e=Math.abs(e))?2:e,s=null==i?",":i,d=null==_?".":_,r=a<0?"-":"",o=parseInt(a=Math.abs(+a||0).toFixed(n),10)+"",c=3<(c=o.length)?c%3:0;return r+(c?o.substr(0,c)+d:"")+o.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+d)+(n?s+Math.abs(a-o).toFixed(n).slice(2):"")}function wc_pb_number_round(t){var e=wc_bundle_params.currency_format_num_decimals,i=Math.pow(10,e),_=t*i;return Math.round(_)/i}function wc_pb_format_list(t){var e="",i=t.length;if(0<i)for(var _,a=0,n=0;n<i;n++)a++,_=wc_bundle_params.i18n_string_list_item.replace("%s",t[n]),e=1==i||1==a?_:a===i?wc_bundle_params.i18n_string_list_last_sep.replace("%s",e).replace("%v",_):wc_bundle_params.i18n_string_list_sep.replace("%s",e).replace("%v",_);return e}jQuery.fn.wc_get_bundle_script=function(){var t=jQuery(this);if(!t.hasClass("bundle_form"))return!1;var e=t.data("script_id");return void 0!==wc_pb_bundle_scripts[e]&&wc_pb_bundle_scripts[e]},function(b){function c(t){var m=this;this.bundle_id=t.bundle_id,this.$bundle_form=t.$bundle_form,this.$bundle_data=t.$bundle_data,this.$bundle_wrap=t.$bundle_data.find(".bundle_wrap"),this.$bundled_items=t.$bundle_form.find(".bundled_product"),this.$bundle_availability=t.$bundle_data.find(".bundle_availability"),this.$bundle_price=t.$bundle_data.find(".bundle_price"),this.$bundle_button=t.$bundle_data.find(".bundle_button"),this.$bundle_error=t.$bundle_data.find(".bundle_error"),this.$bundle_error_content=this.$bundle_error.find("ul.msg"),this.$bundle_quantity=this.$bundle_button.find("input.qty"),this.$nyp=this.$bundle_data.find(".nyp"),this.$addons_totals=this.$bundle_data.find("#product-addons-total"),this.show_addons_totals=!1,this.bundled_items={},this.price_data=t.$bundle_data.data("bundle_price_data"),this.$initial_stock_status=!1,this.update_bundle_timer=!1,this.update_price_timer=!1,this.validation_messages=[],this.is_initialized=!1,this.composite_data=t.composite_data,this.dirty_subtotals=!1,this.filters=!1,this.api={get_bundle_totals:function(){return m.price_data.totals},get_bundled_item_totals:function(t){return m.price_data["bundled_item_"+t+"_totals"]},get_bundled_item_recurring_totals:function(t){return m.price_data["bundled_item_"+t+"_recurring_totals"]},get_bundle_validation_status:function(){return m.passes_validation()?"pass":"fail"},get_bundle_validation_messages:function(){return m.get_validation_messages()},get_bundle_stock_status:function(){return 0<m.$bundle_wrap.find("p.out-of-stock").not(".inactive").length?"out-of-stock":"in-stock"},get_bundle_availability:function(){var t=m.$bundle_wrap.find("p.stock");return t=t.hasClass("inactive")?!1!==m.$initial_stock_status?m.$initial_stock_status.clone().wrap("<div></div>").parent().html():"":t.clone().removeAttr("style").wrap("<div></div>").parent().html()},get_bundle_configuration:function(){var _={};return 0!==m.bundled_items.length&&(b.each(m.bundled_items,function(t,e){var i={title:e.get_title(),product_title:e.get_product_title(),product_id:e.get_product_id(),variation_id:e.get_variation_id(),quantity:m.price_data.quantities[e.bundled_item_id],product_type:e.get_product_type()};_[e.bundled_item_id]=i}),_)}},this.initialize=function(){this.filters=new i,this.has_addons()?(1==this.$addons_totals.data("show-sub-total")||this.is_composited()&&this.composite_data.component.show_addons_totals)&&(this.$addons_totals.data("show-sub-total",0),this.$bundle_price.after(this.$addons_totals),this.show_addons_totals=!0):this.$addons_totals=!1,0<this.$bundle_wrap.find("p.stock").length&&(this.$initial_stock_status=this.$bundle_wrap.find("p.stock").clone()),this.price_data.suffix_exists=""!==wc_bundle_params.price_display_suffix,this.price_data.suffix=""!==wc_bundle_params.price_display_suffix?' <small class="woocommerce-price-suffix">'+wc_bundle_params.price_display_suffix+"</small>":"",this.price_data.suffix_contains_price_incl=-1<wc_bundle_params.price_display_suffix.indexOf("{price_including_tax}"),this.price_data.suffix_contains_price_excl=-1<wc_bundle_params.price_display_suffix.indexOf("{price_excluding_tax}"),this.$bundle_button.find('input[name*="bundle_variation"], input[name*="bundle_attribute"]').remove(),this.bind_event_handlers(),this.viewport_resized(),this.init_bundled_items(),this.is_composited()&&this.init_composite(),this.$bundle_data.triggerHandler("woocommerce-product-bundle-initializing",[this]),b.each(this.bundled_items,function(t,e){e.init_scripts()}),this.update_bundle_task(),this.is_initialized=!0,this.$bundle_form.addClass("initialized"),this.$bundle_data.trigger("woocommerce-product-bundle-initialized",[this])},this.shutdown=function(){this.$bundle_form.find("*").off(),!1!==this.composite_data&&this.remove_composite_hooks()},this.init_composite=function(){this.composite_data.composite.actions.add_action("component_scripts_initialized_"+this.composite_data.component.step_id,this.component_scripts_initialized_action,10,this)},this.component_scripts_initialized_action=function(){(void 0!==this.composite_data.component.component_selection_model.selected_product?parseInt(this.composite_data.component.component_selection_model.selected_product,10)===parseInt(this.bundle_id,10):parseInt(this.composite_data.component.component_selection_model.get("selected_product"),10)===parseInt(this.bundle_id,10))?this.add_composite_hooks():this.remove_composite_hooks()},this.add_composite_hooks=function(){this.composite_data.composite.filters.add_filter("component_is_valid",this.cp_component_is_valid_filter,10,this),this.composite_data.composite.filters.add_filter("component_selection_formatted_title",this.cp_component_selection_formatted_title_filter,10,this),this.composite_data.composite.filters.add_filter("component_selection_meta",this.cp_component_selection_meta_filter,10,this),this.composite_data.composite.filters.add_filter("component_totals",this.cp_component_totals_filter,10,this),this.composite_data.composite.filters.add_filter("component_configuration",this.cp_component_configuration_filter,10,this),this.composite_data.composite.actions.add_action("validate_step",this.cp_validation_messages_action,10,this)},this.remove_composite_hooks=function(){this.composite_data.composite.filters.remove_filter("component_is_valid",this.cp_component_is_valid_filter),this.composite_data.composite.filters.remove_filter("component_selection_formatted_title",this.cp_component_selection_formatted_title_filter),this.composite_data.composite.filters.remove_filter("component_selection_meta",this.cp_component_selection_meta_filter),this.composite_data.composite.filters.remove_filter("component_totals",this.cp_component_totals_filter),this.composite_data.composite.filters.remove_filter("component_configuration",this.cp_component_configuration_filter),this.composite_data.composite.actions.remove_action("component_scripts_initialized_"+this.composite_data.component.step_id,this.component_scripts_initialized_action),this.composite_data.composite.actions.remove_action("validate_step",this.cp_validation_messages_action)},this.cp_component_configuration_filter=function(t,e){return e.step_id===this.composite_data.component.step_id&&parseInt(e.get_selected_product(),10)===parseInt(m.bundle_id,10)&&(t.bundled_items=m.api.get_bundle_configuration()),t},this.cp_component_totals_filter=function(t,e,i){if(e.step_id!==this.composite_data.component.step_id||parseInt(e.get_selected_product(),10)!==parseInt(m.bundle_id,10))return t;var _=b.extend(!0,{},m.price_data),a=m.has_addons()?m.get_addons_raw_price():0;return i=void 0===i?e.get_selected_quantity():i,0<a&&(_.base_price=Number(_.base_price)+Number(a)),_=m.calculate_subtotals(!1,_,i),(_=m.calculate_totals(_)).totals},this.cp_component_selection_formatted_title_filter=function(t,e,i,_,a){var n,s;return a.step_id===this.composite_data.component.step_id&&parseInt(a.get_selected_product(),10)===parseInt(this.bundle_id,10)&&(n=0,b.each(this.bundled_items,function(t,e){0<e.$bundled_item_cart.data("quantity")&&n++}),this.group_mode_supports("component_multiselect")&&(0===n?t=wc_composite_params.i18n_no_selection:(s=this.cp_get_formatted_contents(a))&&(t=s))),t},this.cp_component_selection_meta_filter=function(t,e){var i,_;return e.step_id===this.composite_data.component.step_id&&parseInt(e.get_selected_product(),10)===parseInt(this.bundle_id,10)&&(i=0,b.each(this.bundled_items,function(t,e){0<e.$bundled_item_cart.data("quantity")&&i++}),0===i||!1!==this.group_mode_supports("component_multiselect")||""!==(_=this.cp_get_formatted_contents(e))&&t.push({meta_key:wc_bundle_params.i18n_contents,meta_value:_})),t},this.cp_get_formatted_contents=function(t){var i="",o=[],c=t.get_selected_quantity();return b.each(this.bundled_items,function(t,e){return!!e.$self.hasClass("bundled_item_hidden")||void(0<e.$bundled_item_cart.data("quantity")&&(_=0<(i=e.$bundled_item_image.find("img").first()).length&&i.get(0).outerHTML,a=parseInt(e.$bundled_item_cart.data("quantity")*c,10),n=wc_cp_get_variation_data(e.$bundled_item_cart.find(".variations")),s=e.$bundled_item_cart.data("title"),d=1<a?"<strong>"+wc_composite_params.i18n_qty_string.replace("%s",a)+"</strong>":"",r="",0<n.length&&(b.each(n,function(t,e){r=r+'<span class="bundled_meta_element"><span class="bundled_meta_key">'+e.meta_key+':</span> <span class="bundled_meta_value">'+e.meta_value+"</span>",t!==n.length-1&&(r+='<span class="bundled_meta_value_sep">, </span>'),r+="</span>"}),s=wc_bundle_params.i18n_title_meta_string.replace("%t",s).replace("%m",'<span class="content_bundled_product_meta">'+r+"</span>")),s=wc_composite_params.i18n_title_string.replace("%t",s).replace("%q",d).replace("%p",""),o.push({title:s,image:_})));var i,_,a,n,s,d,r}),0<o.length&&(i+='<span class="content_bundled_product_details_wrapper">',b.each(o,function(t,e){i=i+'<span class="content_bundled_product_details">'+(e.image?'<span class="content_bundled_product_image">'+e.image+"</span>":"")+'<span class="content_bundled_product_title">'+e.title+"</span></span>"}),i+="</span>"),i},this.cp_component_is_valid_filter=function(t,e,i){return i.step_id===this.composite_data.component.step_id&&parseInt(i.get_selected_product(e),10)===parseInt(this.bundle_id,10)&&0<i.get_selected_quantity()&&i.is_visible()&&(t=this.passes_validation()),t},this.cp_validation_messages_action=function(i,t){var e;i.step_id===this.composite_data.component.step_id&&!1===t&&parseInt(i.get_selected_product(),10)===parseInt(this.bundle_id,10)&&(e=this.get_validation_messages(),b.each(e,function(t,e){i.add_validation_message(e),i.add_validation_message(e,"composite")}))},this.get_ajax_url=function(t){return woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%",t)},this.viewport_resized=function(){this.is_composited()||(this.$bundle_form.width()<=wc_bundle_params.responsive_breakpoint?this.$bundle_form.addClass("small_width"):this.$bundle_form.removeClass("small_width"))},this.bind_event_handlers=function(){b(window).resize(function(){clearTimeout(m.viewport_resize_timer),m.viewport_resize_timer=setTimeout(function(){m.viewport_resized()},50)}),m.has_addons()&&m.$bundle_data.on("updated_addons",m.updated_addons_handler),m.is_composited()&&m.$bundle_quantity.on("input change",function(){m.update_bundle()}),this.$bundle_data.on("woocommerce-nyp-updated-item",function(t){m.$nyp.is(":visible")&&(m.price_data.base_price=m.$nyp.data("price"),m.is_initialized&&(m.dirty_subtotals=!0,m.update_totals())),t.stopPropagation()}).on("woocommerce-product-bundle-validation-status-changed",function(t,e){e.updated_totals()}).on("click",".bundle_add_to_cart_button",function(t){b(this).hasClass("disabled")?(t.preventDefault(),window.alert(wc_bundle_params.i18n_validation_alert)):b.each(m.bundled_items,function(t,e){e.has_required_addons()&&e.is_optional()&&!1===e.is_selected()&&e.$required_addons.prop("required",!1)})}).on("woocommerce-product-bundle-update-totals",function(t,e,i){var _=void 0===i?m:i;(e=void 0!==e&&e)&&(_.dirty_subtotals=!0),_.update_totals()})},this.init_bundled_items=function(){m.$bundled_items.each(function(t){m.bundled_items[t]=new e(m,b(this),t),m.bind_bundled_item_event_handlers(m.bundled_items[t])})},this.bind_bundled_item_event_handlers=function(c){c.$self.on("input change","input.bundled_qty",function(t){var e=b(this),i=parseFloat(e.attr("min")),_=parseFloat(e.attr("max"));"yes"===wc_bundle_params.force_min_max_qty_input&&("change"===t.type&&0<=i&&(parseFloat(e.val())<i||isNaN(parseFloat(e.val())))&&e.val(i),"change"===t.type&&0<_&&parseFloat(e.val())>_&&e.val(_)),c.is_nyp()&&!c.is_optional()&&0===i&&c.$nyp.data("optional_status",0<parseFloat(e.val())),c.update_selection_title(),m.update_bundle(c)}).on("change",".bundled_product_optional_checkbox input",function(t){var e;b(this).is(":checked")?(c.$bundled_item_content.css({height:"",display:"block",position:"absolute"}),void 0===(e=c.$bundled_item_content.get(0).getBoundingClientRect().height)&&(e=c.$bundled_item_content.outerHeight()),c.$bundled_item_content.css({height:"",position:"",display:"none"}),e&&(c.$bundled_item_content.addClass("bundled_item_cart_content--populated"),c.$bundled_item_content.slideDown(200)),c.set_selected(!0),c.$self.find(".bundled_item_qty_col .quantity").removeClass("quantity_hidden"),c.is_nyp()&&c.$nyp.trigger("wc-nyp-update",[{force:!0}]),c.$bundled_item_cart.find(".variations select:eq(0)").trigger("change")):(c.$bundled_item_content.slideUp(200),c.set_selected(!1),c.$self.find(".bundled_item_qty_col .quantity").addClass("quantity_hidden"),c.has_single_variation()||(c.maybe_add_wc_core_gallery_class(),c.$bundled_item_cart.trigger("reset_image"),c.maybe_remove_wc_core_gallery_class())),c.update_selection_title(),m.update_bundle(c),t.stopPropagation()}).on("found_variation",function(t,e){c.variation_id=e.variation_id.toString(),m.price_data.prices[c.bundled_item_id]=Number(e.price),m.price_data.regular_prices[c.bundled_item_id]=Number(e.regular_price),m.price_data.prices_tax[c.bundled_item_id]=e.price_tax,m.price_data.recurring_prices[c.bundled_item_id]=Number(e.recurring_price),m.price_data.regular_recurring_prices[c.bundled_item_id]=Number(e.regular_recurring_price),m.price_data.recurring_html[c.bundled_item_id]=e.recurring_html,m.price_data.recurring_keys[c.bundled_item_id]=e.recurring_key,c.maybe_remove_wc_core_gallery_class();var i=c.$self.find(".bundled_item_qty_col .quantity input");0<i.length&&i.attr("min",e.min_qty).attr("max",e.max_qty),e.is_in_stock&&c.$bundled_item_qty.trigger("change"),!c.is_optional()||c.has_single_variation()||c.$self.find(".bundled_product_optional_checkbox input").is(":checked")||(c.maybe_add_wc_core_gallery_class(),c.$bundled_item_cart.trigger("reset_image"),c.maybe_remove_wc_core_gallery_class()),c.update_selection_title(),m.update_bundle(c),t.stopPropagation()}).on("reset_image",function(){c.maybe_remove_wc_core_gallery_class()}).on("woocommerce-product-addons-update",function(t){t.stopPropagation()}).on("woocommerce_variation_select_focusin",function(t){t.stopPropagation()}).on("woocommerce_variation_has_changed",function(t){c.$reset_bundled_variations&&(c.variation_id?c.$reset_bundled_variations.slideDown(200):c.$reset_bundled_variations.slideUp(200)),t.stopPropagation()}).on("woocommerce_variation_select_change",function(t){c.variation_id="",c.is_selected()&&c.maybe_add_wc_core_gallery_class(),c.$attribute_select&&c.$attribute_select.each(function(){if(""===b(this).val())return c.$bundled_item_cart.find(".bundled_item_wrap .stock").addClass("disabled"),m.update_bundle(c),!1}),t.stopPropagation()}),c.has_addons()&&c.$bundled_item_cart.on("updated_addons",function(t){var e,i,_,a,n,s,d,r=m.get_addons_raw_price(c),o=m.has_pct_addons(c)?m.get_addons_raw_price(c,"regular"):r;m.price_data.addons_prices[c.bundled_item_id]===r&&m.price_data.regular_addons_prices[c.bundled_item_id]===o||(m.price_data.addons_prices[c.bundled_item_id]=r,m.price_data.regular_addons_prices[c.bundled_item_id]=o,m.update_bundle(c)),c.show_addons_totals&&(e=c.get_quantity(),i=m.price_data.prices_tax[c.bundled_item_id],0<m.get_taxed_totals(r,r,i,e).price?(_=Number(m.price_data.prices[c.bundled_item_id])+Number(r),n=wc_pb_price_format((a=m.get_taxed_totals(_,_,i,e)).price),s=m.get_formatted_price_suffix(m.price_data,a),d='<span class="price"><span class="subtotal">'+wc_bundle_params.i18n_subtotal+"</span>"+n+s+"</span>",c.addons_totals_html=d,c.$addons_totals.html(d).slideDown(200)):c.$addons_totals.html(c.addons_totals_html).slideUp(200)),t.stopPropagation()}),c.is_nyp()&&c.$bundled_item_cart.on("woocommerce-nyp-updated-item",function(t){var e;c.$nyp.is(":visible")&&(e=c.$nyp.data("price"),m.price_data.prices[c.bundled_item_id]=e,m.price_data.regular_prices[c.bundled_item_id]=e,m.update_bundle(c)),t.stopPropagation()})},this.get_quantity=function(){var t=0<m.$bundle_quantity.length?m.$bundle_quantity.val():1;return isNaN(t)?1:parseInt(t,10)},this.update_bundle=function(t){clearTimeout(m.update_bundle_timer),m.update_bundle_timer=setTimeout(function(){m.update_bundle_task(t)},5)},this.update_bundle_task=function(t){var e,i,_=!1,a=!1,n=!1===m.is_initialized?"":m.api.get_bundle_validation_status(),s=0,d=[],r=0,o=0,c=[];m.validation_messages=[],b.each(m.bundled_items,function(t,e){var i=e.is_selected()?e.get_quantity():0;r+=i,"variable"!==e.get_product_type()&&"variable-subscription"!==e.get_product_type()||""!==e.get_variation_id()||0<i&&(s++,e.is_visible()&&e.get_title(!0)&&d.push(e.get_title(!0))),e.is_nyp()&&!e.is_nyp_valid()&&(o++,e.is_visible()&&e.get_title(!0)&&c.push(e.get_title(!0)))}),0<s&&(e="",e=s===d.length&&s<5?wc_bundle_params.i18n_select_options_for.replace("%s",wc_pb_format_list(d)):wc_bundle_params.i18n_select_options,m.add_validation_message(e)),0<o&&(i="",i=o===c.length&&o<5?wc_bundle_params.i18n_enter_valid_price_for.replace("%s",wc_pb_format_list(c)):wc_bundle_params.i18n_enter_valid_price,m.add_validation_message(i)),0===r&&"no"===m.price_data.zero_items_allowed&&m.add_validation_message(wc_bundle_params.i18n_zero_qty_error),"yes"!==m.price_data.is_purchasable?m.add_validation_message(wc_bundle_params.i18n_unavailable_text):m.$bundle_data.triggerHandler("woocommerce-product-bundle-validate",[m]),n!==m.api.get_bundle_validation_status()&&m.$bundle_data.triggerHandler("woocommerce-product-bundle-validation-status-changed",[m]),"yes"===m.price_data.is_purchasable&&m.update_totals(t),m.passes_validation()?(b.each(m.bundled_items,function(t,e){return!e.is_selected()||void(e.$bundled_item_cart.find("p.stock:not(.disabled)").hasClass("out-of-stock")&&0<m.price_data.quantities[e.bundled_item_id]&&(_=!0))}),_?m.$bundle_button.find("button").addClass("disabled"):m.$bundle_button.find("button").removeClass("disabled"),setTimeout(function(){m.$bundle_error.slideUp(200)},1),m.$bundle_wrap.trigger("woocommerce-product-bundle-show")):m.hide_bundle(),b.each(m.bundled_items,function(t,e){if(!e.is_selected())return!0;var i=e.$bundled_item_cart.find("p.stock:not(.disabled)");i.hasClass("out-of-stock")&&0<m.price_data.quantities[e.bundled_item_id]&&(a=i.clone().html(wc_bundle_params.i18n_partially_out_of_stock)),!_&&i.hasClass("available-on-backorder")&&0<m.price_data.quantities[e.bundled_item_id]&&(a=i.clone().html(wc_bundle_params.i18n_partially_on_backorder))}),a?(m.$bundle_availability.html(a),m.$bundle_availability.slideDown(200)):m.$initial_stock_status?m.$bundle_availability.html(m.$initial_stock_status):(m.is_composited()&&m.$bundle_availability.find("p.stock").addClass("inactive"),m.$bundle_availability.slideUp(200)),m.is_composited()&&("function"==typeof m.composite_data.component.component_selection_model.set_stock_status&&m.composite_data.component.component_selection_model.set_stock_status(_?"out-of-stock":"in-stock"),m.composite_data.composite.actions.do_action("component_selection_content_changed",[m.composite_data.component])),m.$bundle_data.trigger("woocommerce-product-bundle-updated",[m])},this.hide_bundle=function(t){var e,i=b("<ul/>");void 0===t?0<(e=m.get_validation_messages()).length?b.each(e,function(t,e){i.append(b("<li/>").html(e))}):i.append(b("<li/>").html(wc_bundle_params.i18n_unavailable_text)):i.append(b("<li/>").html(t.toString())),m.$bundle_error_content.html(i.html()),setTimeout(function(){m.$bundle_error.slideDown(200)},1),m.$bundle_button.find("button").addClass("disabled"),m.$bundle_wrap.trigger("woocommerce-product-bundle-hide")},this.update_price_data=function(){b.each(m.bundled_items,function(t,e){var i=e.$bundled_item_cart,_=e.bundled_item_id,a=e.get_quantity();m.price_data.quantities[_]=0,e.is_selected()&&0<a&&(m.price_data.quantities[_]=parseInt(a,10)),i.data("quantity",m.price_data.quantities[_]),"variable"!==e.get_product_type()&&"variable-subscription"!==e.get_product_type()||""!==e.get_variation_id()||(m.price_data.prices[_]=0,m.price_data.regular_prices[_]=0,m.price_data.prices_tax[_]=!1),m.price_data.prices[_]=Number(m.price_data.prices[_]),m.price_data.regular_prices[_]=Number(m.price_data.regular_prices[_]),m.price_data.addons_prices[_]=Number(m.price_data.addons_prices[_]),m.price_data.regular_addons_prices[_]=Number(m.price_data.regular_addons_prices[_]),m.price_data.recurring_prices[_]=Number(m.price_data.recurring_prices[_]),m.price_data.regular_recurring_prices[_]=Number(m.price_data.regular_recurring_prices[_])})},this.update_totals=function(t){this.update_price_data(),this.calculate_subtotals(t),!m.dirty_subtotals&&!1!==m.is_initialized||(m.dirty_subtotals=!1,m.calculate_totals())},this.get_taxed_totals=function(t,e,i,_){_=void 0===_?1:_;var a=!(!i||void 0===i.incl)&&Number(i.incl),n=!(!i||void 0===i.excl)&&Number(i.excl),s={price:_*t,regular_price:_*e,price_incl_tax:_*t,price_excl_tax:_*t};return a&&n&&(s.price_incl_tax=wc_pb_number_round(s.price*a),s.price_excl_tax=wc_pb_number_round(s.price*n),"incl"===wc_bundle_params.tax_display_shop?(s.price=s.price_incl_tax,s.regular_price=wc_pb_number_round(s.regular_price*a)):(s.price=s.price_excl_tax,s.regular_price=wc_pb_number_round(s.regular_price*n))),s},this.calculate_subtotals=function(l,t,u){var e,i,_,p=void 0===t?m.price_data:t;if(u=void 0===u?1:parseInt(u,10),!1===(l=void 0!==l&&l)&&(e=Number(p.base_price),i=Number(p.base_regular_price),_=p.base_price_tax,p.base_price_totals=this.get_taxed_totals(e,i,_,u)),b.each(m.bundled_items,function(t,e){if(!1!==l&&l.bundled_item_id!==e.bundled_item_id)return!0;var i=e.is_sold_individually()&&0<p.quantities[e.bundled_item_id]?1:p.quantities[e.bundled_item_id]*u,_="variable"===e.get_product_type()?e.get_variation_id():e.get_product_id(),a=p.prices_tax[e.bundled_item_id],n=p.regular_prices[e.bundled_item_id]+p.regular_addons_prices[e.bundled_item_id],s=p.prices[e.bundled_item_id]+p.addons_prices[e.bundled_item_id],d=p.regular_recurring_prices[e.bundled_item_id]+p.regular_addons_prices[e.bundled_item_id],r=p.recurring_prices[e.bundled_item_id]+p.addons_prices[e.bundled_item_id],o={price:0,regular_price:0,price_incl_tax:0,price_excl_tax:0},c={price:0,regular_price:0,price_incl_tax:0,price_excl_tax:0};"yes"===wc_bundle_params.calc_taxes?0<_&&0<i&&((0<s||0<n)&&(o=m.get_taxed_totals(s,n,a,i)),(0<r||0<d)&&(c=m.get_taxed_totals(r,d,a,i))):(o.price=i*s,o.regular_price=i*n,o.price_incl_tax=i*s,o.price_excl_tax=i*s,c.price=i*r,c.regular_price=i*d,c.price_incl_tax=i*r,c.price_excl_tax=i*r),o=m.filters.apply_filters("bundled_item_totals",[o,e,u]),c=m.filters.apply_filters("bundled_item_recurring_totals",[c,e,u]),m.totals_changed(p["bundled_item_"+e.bundled_item_id+"_totals"],o)&&(m.dirty_subtotals=!0,p["bundled_item_"+e.bundled_item_id+"_totals"]=o),m.totals_changed(p["bundled_item_"+e.bundled_item_id+"_recurring_totals"],c)&&(m.dirty_subtotals=!0,p["bundled_item_"+e.bundled_item_id+"_recurring_totals"]=c)}),void 0!==t)return p},this.calculate_totals=function(t){void 0===t&&m.$bundle_data.triggerHandler("woocommerce-product-bundle-calculate-totals",[m]);var e,n=void 0===t?m.price_data:t,i=!1,_={price:n.base_price_totals.price,regular_price:n.base_price_totals.regular_price,price_incl_tax:n.base_price_totals.price_incl_tax,price_excl_tax:n.base_price_totals.price_excl_tax};b.each(m.bundled_items,function(t,e){if(e.is_unavailable())return!0;var i=n["bundled_item_"+e.bundled_item_id+"_totals"];void 0!==i&&(_.price+=i.price,_.regular_price+=i.regular_price,_.price_incl_tax+=i.price_incl_tax,_.price_excl_tax+=i.price_excl_tax)});var a=m.get_bundled_subscriptions(),s={};return a&&b.each(a,function(t,e){var i=e.bundled_item_id;if(0===n.quantities[i])return!0;var _=n.recurring_keys[i],a=n["bundled_item_"+i+"_recurring_totals"];void 0===s[_]?s[_]={html:n.recurring_html[i],price:a.price,regular_price:a.regular_price,price_incl_tax:a.price_incl_tax,price_excl_tax:a.price_excl_tax}:(s[_].price+=a.price,s[_].regular_price+=a.regular_price,s[_].price_incl_tax+=a.price_incl_tax,s[_].price_excl_tax+=a.price_excl_tax)}),e=_,_=m.filters.apply_filters("bundle_totals",[_,n,m]),!(i=m.totals_changed(n.totals,_))&&a&&JSON.stringify(n.recurring_totals)!==JSON.stringify(s)&&(i=!0),!i&&!1!==m.is_initialized||(n.subtotals=e,n.totals=_,n.recurring_totals=s,void 0===t&&this.updated_totals()),n},this.updated_totals=function(){clearTimeout(m.update_price_timer),m.update_price_timer=setTimeout(function(){m.updated_totals_task()},5)},this.get_price_html=function(t){var e,i,_=void 0===t?m.price_data:t,a=!1,n=m.is_composited()?m.composite_data.component.get_selected_quantity():1,s="p";m.has_addons()&&(a=!0,e=(_=b.extend(!0,{},_)).addons_price?_.addons_price:m.get_addons_raw_price(),i=_.addons_regular_price?_.addons_regular_price:e,0<e&&(_.base_price=Number(_.base_price)+Number(e)),0<i&&(_.base_regular_price=Number(_.base_regular_price)+Number(i))),m.is_composited()&&(s="span","yes"===_.composited_totals_incl_qty&&(a=!0)),a&&(_=m.calculate_subtotals(!1,_,n),_=m.calculate_totals(_));var d,r="yes"===_.show_total_string&&wc_bundle_params.i18n_total?'<span class="total">'+wc_bundle_params.i18n_total+"</span>":"",o=0===_.totals.price&&"yes"===_.show_free_string?wc_bundle_params.i18n_free:wc_pb_price_format(_.totals.price),c=wc_pb_price_format(_.totals.regular_price),l=m.get_formatted_price_suffix(_);return _.totals.regular_price>_.totals.price&&(o=wc_bundle_params.i18n_strikeout_price_string.replace("%f",c).replace("%t",o)),d=wc_bundle_params.i18n_price_format.replace("%t",r).replace("%p",o).replace("%s",l),"<"+s+' class="price">'+_.price_string.replace("%s",d)+"</"+s+">"},this.get_recurring_price_html=function(t){var s=void 0===t?m.price_data:t,d="";return m.get_bundled_subscriptions()&&b.each(s.recurring_totals,function(t,e){var i,_=0==e.price?wc_bundle_params.i18n_free:wc_pb_price_format(e.price),a=wc_pb_price_format(e.regular_price),n=m.get_formatted_price_suffix(s,{price_incl_tax:e.price_incl_tax,price_excl_tax:e.price_excl_tax});e.regular_price>e.price&&(_=wc_bundle_params.i18n_strikeout_price_string.replace("%f",a).replace("%t",_)),i=wc_bundle_params.i18n_price_format.replace("%t","").replace("%p",_).replace("%s",n),i='<span class="bundled_sub_price_html">'+e.html.replace("%s",i)+"</span>",d=(""!==d?d+'<span class="plus"> + </span>':d)+i}),d},this.show_price_html=function(){var i=!1;return!1===m.get_bundled_subscriptions()?i=wc_pb_number_round(m.price_data.totals.price)!==wc_pb_number_round(m.price_data.raw_bundle_price_min)||m.price_data.raw_bundle_price_min!==m.price_data.raw_bundle_price_max:b.each(m.bundled_items,function(t,e){if(0<m.price_data.recurring_prices[e.bundled_item_id]&&(e.is_subscription("variable")||e.is_optional()||!1===e.$self.find(".quantity").hasClass("quantity_hidden")))return!(i=!0)}),i&&b.each(m.bundled_items,function(t,e){if(e.is_unavailable()&&e.is_required())return i=!1}),m.is_composited()&&(i||m.composite_data.composite.api.is_component_priced_individually(this.composite_data.component.step_id)&&(i=!0),!i||!1!==this.composite_data.component.is_selected_product_price_visible()&&!1!==m.composite_data.composite.api.is_component_priced_individually(this.composite_data.component.step_id)||(i=!1)),i},this.updated_totals_task=function(){var t,e,i=m.show_price_html();m.passes_validation()&&i?(e=m.get_price_html(),t=m.get_recurring_price_html(),e=e.replace("%r",t),e=m.filters.apply_filters("bundle_total_price_html",[e,m]),m.$bundle_price.html(e),t&&m.$bundle_price.find(".bundled_subscriptions_price_html").show(),m.$bundle_price.slideDown(200)):m.$bundle_price.slideUp(200),m.$bundle_data.triggerHandler("woocommerce-product-bundle-updated-totals",[m])},this.updated_addons_handler=function(t){m.updated_totals_task()},this.has_addons=function(){return this.$addons_totals&&0<this.$addons_totals.length},this.has_pct_addons=function(t){var e=void 0!==t?t:this,i=!1;if(!e.has_addons)return i;var _=e.$addons_totals.data("price_data");return b.each(_,function(t,e){if("percentage_based"===e.price_type)return!(i=!0)}),i},this.get_addons_raw_price=function(s,t){var d=void 0!==s,r="regular"===t?"regular":"",e=d?s:this,o=d?s.get_quantity():1,c=d?m.price_data.prices_tax[s.bundled_item_id]:m.price_data.base_price_tax,l=0;if(!e.has_addons())return 0;if(!o)return 0;m.is_composited()&&(o=m.composite_data.component.get_selected_quantity());var i=e.$addons_totals.data("price_data");return b.each(i,function(t,e){var i,_,a,n;e.is_custom_price?(a=0,i=!(!c||void 0===c.incl)&&Number(c.incl),_=!(!c||void 0===c.excl)&&Number(c.excl),a="incl"===wc_bundle_params.tax_display_shop&&"no"===wc_bundle_params.prices_include_tax?e.cost_raw/(i||1):"excl"===wc_bundle_params.tax_display_shop&&"yes"===wc_bundle_params.prices_include_tax?e.cost_raw/(_||1):e.cost_raw,l+=a/o):"quantity_based"===e.price_type?l+=e.cost_raw_pu:"flat_fee"===e.price_type?l+=e.cost_raw/o:"percentage_based"===e.price_type&&(n="regular"==r?d?m.price_data.regular_prices[s.bundled_item_id]:m.price_data.base_regular_price:d?m.price_data.prices[s.bundled_item_id]:m.price_data.base_price,l+=e.cost_raw_pct*n)}),l},this.totals_changed=function(t,e){return void 0===t||t.price!==e.price||t.regular_price!==e.regular_price||t.price_incl_tax!==e.price_incl_tax||t.price_excl_tax!==e.price_excl_tax},this.is_composited=function(){return!1!==this.composite_data},this.get_formatted_price_suffix=function(t,e){var i=void 0===t?m.price_data:t,_="";return e=void 0===e?i.totals:e,i.suffix_exists&&(_=i.suffix,i.suffix_contains_price_incl&&(_=_.replace("{price_including_tax}",wc_pb_price_format(e.price_incl_tax))),i.suffix_contains_price_excl&&(_=_.replace("{price_excluding_tax}",wc_pb_price_format(e.price_excl_tax)))),_},this.get_bundled_subscriptions=function(i){var _={},a=!1;return b.each(m.bundled_items,function(t,e){e.is_subscription(i)&&(_[t]=e,a=!0)}),!!a&&_},this.add_validation_message=function(t){this.validation_messages.push(t.toString())},this.get_validation_messages=function(){return this.validation_messages},this.passes_validation=function(){return!(0<this.validation_messages.length)},this.group_mode_supports=function(t){return-1<b.inArray(t,this.price_data.group_mode_features)}}function e(t,e,i){this.initialize=function(){this.$self=e,this.$bundled_item_cart=e.find(".cart"),this.$bundled_item_content=e.find(".bundled_item_optional_content, .bundled_item_cart_content"),this.$bundled_item_image=e.find(".bundled_product_images"),this.$bundled_item_title=e.find(".bundled_product_title_inner"),this.$bundled_item_qty=e.find("input.bundled_qty"),this.$addons_totals=e.find("#product-addons-total"),this.$required_addons=!1,this.$nyp=e.find(".nyp"),this.$attribute_select=!1,this.$attribute_select_config=!1,this.$reset_bundled_variations=!1,this.show_addons_totals=!1,this.addons_totals_html="",this.bundled_item_index=i,this.bundled_item_id=this.$bundled_item_cart.data("bundled_item_id"),this.bundled_item_title=this.$bundled_item_cart.data("title"),this.bundled_item_title_raw=this.bundled_item_title?b("<div/>").html(this.bundled_item_title).text():"",this.bundled_item_product_title=this.$bundled_item_cart.data("product_title"),this.bundled_item_product_title_raw=this.bundled_item_title?b("<div/>").html(this.bundled_item_title).text():"",this.bundled_item_optional_suffix=void 0===this.$bundled_item_cart.data("optional_suffix")?wc_bundle_params.i18n_optional:this.$bundled_item_cart.data("optional_suffix"),this.product_type=this.$bundled_item_cart.data("type"),this.product_id=void 0===t.price_data.product_ids[this.bundled_item_id]?"":t.price_data.product_ids[this.bundled_item_id].toString(),this.nyp=void 0!==t.price_data.product_ids[this.bundled_item_id]&&"yes"===t.price_data.is_nyp[this.bundled_item_id],this.sold_individually=void 0!==t.price_data.product_ids[this.bundled_item_id]&&"yes"===t.price_data.is_sold_individually[this.bundled_item_id],this.variation_id="",this.has_wc_core_gallery_class=this.$bundled_item_image.hasClass("images"),void 0===this.bundled_item_id&&(this.bundled_item_id=this.$bundled_item_cart.attr("data-bundled-item-id")),this.initialize_addons()},this.initialize_addons=function(){this.has_addons()?(1==this.$addons_totals.data("show-sub-total")&&(this.$addons_totals.data("show-sub-total",0),this.show_addons_totals=!0),this.$required_addons=this.$bundled_item_cart.find(".wc-pao-required-addon [required]")):this.$addons_totals=!1},this.get_title=function(t){return(t=void 0!==t&&t)?this.bundled_item_title_raw:this.bundled_item_title},this.get_product_title=function(t){return(t=void 0!==t&&t)?this.bundled_item_product_title_raw:this.bundled_item_product_title},this.get_optional_suffix=function(){return this.bundled_item_optional_suffix},this.get_product_id=function(){return this.product_id},this.get_variation_id=function(){return this.variation_id},this.get_variation_data=function(){return this.$bundled_item_cart.data("product_variations")},this.get_product_type=function(){return this.product_type},this.get_quantity=function(){var t=this.$bundled_item_qty.val();return isNaN(t)?0:parseInt(t,10)},this.is_optional=function(){return"yes"===this.$bundled_item_cart.data("optional")||1===this.$bundled_item_cart.data("optional")},this.is_unavailable=function(){return"yes"===this.$bundled_item_cart.data("custom_data").is_unavailable},this.is_required=function(){return!this.is_optional()&&"no"!==this.$bundled_item_cart.data("custom_data").is_required},this.is_visible=function(){return"yes"===this.$bundled_item_cart.data("visible")||1===this.$bundled_item_cart.data("visible")},this.is_selected=function(){var t=!0;return this.is_optional()&&!1===this.$bundled_item_cart.data("optional_status")&&(t=!1),t},this.set_selected=function(t){this.is_optional()&&(this.$bundled_item_cart.data("optional_status",t),this.is_nyp()&&this.$nyp.data("optional_status",t))},this.init_scripts=function(){"undefined"!=typeof PhotoSwipe&&"yes"===wc_bundle_params.photoswipe_enabled&&this.init_photoswipe(),this.$self.find(".bundled_product_optional_checkbox input").change(),this.$self.find("input.bundled_qty").change(),"variable"!==this.product_type&&"variable-subscription"!==this.product_type||this.$bundled_item_cart.hasClass("variations_form")||(this.$reset_bundled_variations=this.$bundled_item_cart.find(".reset_bundled_variations"),0===this.$reset_bundled_variations.length&&(this.$reset_bundled_variations=!1),this.$bundled_item_cart.addClass("variations_form").wc_variation_form(),this.$attribute_select=this.$bundled_item_cart.find(".variations .attribute_options select"),this.$attribute_select_config=this.$attribute_select.filter(function(){return!1===b(this).parent().hasClass("bundled_variation_attribute_options_wrapper")}),0<this.$attribute_select.length&&this.$attribute_select.first().change()),this.$self.find("div").stop(!0,!0),this.update_selection_title()},this.init_photoswipe=function(){this.$bundled_item_image.wc_product_gallery({zoom_enabled:!1,flexslider_enabled:!1});var t=this.$bundled_item_image.find("a.placeholder_image");0<t.length&&t.on("click",function(){return!1})},this.update_selection_title=function(t){if(0===this.$bundled_item_title.length)return!1;var e=parseInt(this.get_quantity(),10);if(isNaN(e))return!1;(t=void 0!==t&&t)&&(e=parseInt(this.$bundled_item_qty.attr("min"),10));var i=this.bundled_item_title,_=1<e?wc_bundle_params.i18n_qty_string.replace("%s",e):"",a=this.is_optional()&&""!==this.get_optional_suffix()?wc_bundle_params.i18n_optional_string.replace("%s",this.get_optional_suffix()):"",n=wc_bundle_params.i18n_title_string.replace("%t",i).replace("%q",_).replace("%o",a);this.$bundled_item_title.html(n)},this.reset_selection_title=function(){this.update_selection_title(!0)},this.is_subscription=function(t){return"simple"===t?"subscription"===this.product_type:"variable"!==t&&"subscription"===this.product_type||"variable-subscription"===this.product_type},this.has_addons=function(){return this.$addons_totals&&0<this.$addons_totals.length},this.has_required_addons=function(){return this.$required_addons&&0<this.$required_addons.length},this.has_single_variation=function(){return void 0!==this.get_variation_data()&&1===this.get_variation_data().length},this.is_nyp=function(){return this.nyp},this.is_nyp_valid=function(){var t,e=!0;return!b.fn.wc_nyp_get_script_object||(t=this.$nyp.wc_nyp_get_script_object())&&!1===t.isValid()&&(e=!1),e},this.is_sold_individually=function(){return this.sold_individually},this.maybe_add_wc_core_gallery_class=function(){this.has_wc_core_gallery_class||this.$bundled_item_image.addClass("images")},this.maybe_remove_wc_core_gallery_class=function(){this.has_wc_core_gallery_class||this.$bundled_item_image.removeClass("images")},this.initialize()}function i(){var a=this,s={},n={add_filter:function(t,e,i,_){var a={callback:e,priority:i,context:_},n=(n=s[t])?(n.push(a),this.sort_filters(n)):[a];s[t]=n},remove_filter:function(t,e,i){var _,a,n;if(s[t])if(e)if(_=s[t],i)for(n=_.length;n--;)(a=_[n]).callback===e&&a.context===i&&_.splice(n,1);else for(n=_.length;n--;)_[n].callback===e&&_.splice(n,1);else s[t]=[]},sort_filters:function(t){for(var e,i,_,a=1,n=t.length;a<n;a++){for(e=t[a],i=a;(_=t[i-1])&&_.priority>e.priority;)t[i]=t[i-1],--i;t[i]=e}return t},apply_filters:function(t,e){var i,_,a=s[t];if(!a)return e[0];for(_=a.length,i=0;i<_;i++)e[0]=a[i].callback.apply(a[i].context,e);return e[0]}};this.add_filter=function(t,e,i,_){return"string"==typeof t&&"function"==typeof e&&(i=parseInt(i||10,10),n.add_filter(t,e,i,_)),a},this.apply_filters=function(t,e){if("string"==typeof t)return n.apply_filters(t,e)},this.remove_filter=function(t,e){return"string"==typeof t&&n.remove_filter(t,e),a}}jQuery(document).ready(function(o){o("body").on("quick-view-displayed",function(){o(".quick-view .bundle_form .bundle_data").each(function(){var t=o(this);0===t.closest(".composite_form").length&&t.wc_pb_bundle_form()})}),o.fn.wc_pb_bundle_form=function(){if(!o(this).hasClass("bundle_data"))return!0;var t=o(this),e=t.data("bundle_id");if(void 0===e){if(!(e=t.attr("data-bundle-id")))return!1;t.data("bundle_id",e)}var i,_,a,n=t.closest(".bundle_form"),s=n.closest(".composite_form"),d=!1,r=e;0<s.length&&(0<(i=n.closest(".component").data("item_id"))&&o.isFunction(o.fn.wc_get_composite_script)&&(!1===(_=s.wc_get_composite_script())||!1!==(a=_.api.get_step(i))&&(d={composite:_,component:a},r=i))),void 0!==wc_pb_bundle_scripts[r]&&wc_pb_bundle_scripts[r].shutdown(),wc_pb_bundle_scripts[r]=new c({$bundle_form:n,$bundle_data:t,bundle_id:e,composite_data:d}),n.data("script_id",r),wc_pb_bundle_scripts[r].initialize()},o(".bundle_form .bundle_data").each(function(){var t=o(this);0===t.closest(".composite_form").length&&t.wc_pb_bundle_form()})})}(jQuery);