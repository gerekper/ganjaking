/*! woocommerce-free-gift-coupons 3.0.4 */

jQuery(document).ready(function(t){var c=function(t){(function(t){return t.is(".processing")||t.parents(".processing").length})(t)||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},a=function(t){t.removeClass("processing").unblock()};t.fn.wc_fgc_find_auto_variation_open=function(c){let a=t(".wc_fgc_cart").closest("tr.wc-fgc-new-row"),e=t(".wc-fgc-show-edit");if(t(c).find(e).length>0){if(1==e.length&&0==a.length){let c=e.attr("id");t("#"+c+" .wc_fgc_updatenow").trigger("click")}return!0}return!1},t.fn.wc_fgc_observer=new MutationObserver(function(c){for(let a of c)if("childList"===a.type)for(let c of a.addedNodes)if(1==t(this).wc_fgc_find_auto_variation_open(c))break});let e=document;t(this).wc_fgc_observer.observe(e,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),t(document).on("click",".wc_fgc_updatenow",function(e){e.preventDefault();var r=t(this).data("item_key"),o=t("tr#wc-fgc-new-row_"+r);if(o.length)o.fadeIn("slow");else{c(t(".woocommerce-cart-form"));var i=t(this).data("product_id"),n=t(this).data("variation_id"),_=(t(this).parent().parent(),t(this).closest("tr"));t.ajax({url:wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fgc_get_product"),method:"GET",cache:!1,headers:{"cache-control":"no-cache"},data:{product_id:i,variation_id:n,cart_item_key:r}}).done(function(c){if(c.success){t("#wc_fgc_"+r).length||_.after('<tr class="wc-fgc-new-row" id="wc-fgc-new-row_'+r+'"><td colspan="6">'+c.data+"</td></tr>");var a=t("#wc_fgc_"+r).find(".variations_form");a&&a.wc_variation_form(),a.find(".single_add_to_cart_button").data("cart_item_key",r),t("body,html").animate({scrollTop:t("#wc_fgc_"+r+" .summary").offset().top-100},1e3),t("body").trigger("wc-fgc-cart-edit-init",[r])}else alert(c.data)}).fail(function(t){alert(wc_fgc_var_cart_params.server_error)}).always(function(c){a(t(".woocommerce-cart-form"))})}}),t(document).on("reset_data",function(){t(".wc-fgc-stock-error").html(""),t(".wc-fgc-stock-error").hide()}),t(document).on("click",".single_add_to_cart_button",function(e){if(e.preventDefault(),!t(this).is(".disabled")){c(t(".wc_fgc_cart"));var r=t(this).closest(".wc_fgc_cart").attr("id"),o=t(this).data("cart_item_key"),i=t("#"+r).find('input[name="product_id"]').val(),n=t("#"+r).find('input[name="variation_id"]').val(),_={};t("#"+r).find("select[name^=attribute]").each(function(){var c=t(this).attr("name"),a=t(this).val();_[c]=a}),t.ajax({url:wc_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fgc_update_variation_in_cart"),method:"GET",cache:!1,headers:{"cache-control":"no-cache"},data:{product_id:i,variation_id:n,variation:_,cart_item_key:o}}).done(function(c){if(c.success){t('.woocommerce-cart-form [name="update_cart"]').removeAttr("disabled").trigger("click")}else t(".wc-fgc-stock-error").html(c),t(".wc-fgc-stock-error").show(),t("form.variations_form").find("div .woocommerce-variation-add-to-cart .input-text").show()}).fail(function(t){alert(wc_fgc_var_cart_params.variation_update_error)}).always(function(c){a(t(".wc_fgc_cart"))})}}),t(document).on("click",".wc-fgc-close-btn",function(c){c.preventDefault();let a=t(this).closest(".wc-fgc-new-row"),e="wc-fgc-item_"+a.attr("id").split("_")[1];a.fadeOut("slow"),t("#"+e+" .wc_fgc_updatenow").fadeIn("slow")}),t(this).wc_fgc_find_auto_variation_open(e)});