jQuery(document).ready(function(r){"use strict";var n=!1,e=function(t,i,o){var a=t.find(".yith-wfbt-items input"),n=[],e=[];a.each(function(t){n[t]=this.value,r(this).is(":checked")||e.push(this.value)}),t.block({message:null,overlayCSS:{background:"#fff url("+yith_wfbt.loader+") no-repeat center",opacity:.6}}),r.ajax({type:"post",url:yith_wfbt.ajaxurl.toString().replace("%%endpoint%%",yith_wfbt.refreshForm),data:{action:yith_wfbt.refreshForm,product_id:t.find('input[name="yith-wfbt-main-product"]').val(),variation_id:o,group:n,unchecked:e,context:"frontend"},dataType:"html",success:function(t){i.replaceWith(t)},complete:function(){t.unblock(),r(document).trigger("yith_wfbt_form_updated",[t])}})};r(document).on("change",".yith-wfbt-items input",function(){r(this).closest(".yith-wfbt-item").hasClass("choise-variation");e(r(this).closest(".yith-wfbt-form"),r(this).closest(".yith-wfbt-section"),0)}),r(document).on("show_variation",".variations_form",function(t,i){!n&&i.is_in_stock&&e(r(".yith-wfbt-form"),r(".yith-wfbt-section"),i.variation_id)});var t=r(document).find(".yith-wfbt-products-list"),i=t.next(".yith-wfbt-slider-nav");t.length&&(t.owlCarousel({loop:!0,dots:!1,responsive:{0:{items:2},480:{items:3},768:{items:yith_wfbt.visible_elem}}}),i.length&&(i.find(".yith-wfbt-nav-prev").click(function(){t.trigger("prev.owl.carousel")}),i.find(".yith-wfbt-nav-next").click(function(){t.trigger("next.owl.carousel")}))),r(document).on("click",".yith-wfbt-open-modal",function(t){t.preventDefault();var i=r(this).data("product_id"),o=r(".yith-wfbt-form"),a=r("#yith-wfbt-modal");o.block({message:null,overlayCSS:{background:"#fff url("+yith_wfbt.loader+") no-repeat center",opacity:.6}}),r.ajax({type:"post",url:yith_wfbt.ajaxurl.toString().replace("%%endpoint%%",yith_wfbt.loadVariationsDialog),data:{action:yith_wfbt.loadVariationsDialog,product_id:i,context:"frontend"},dataType:"html",success:function(t){n=!0,a.html(t),o.unblock(),a.modal(),c()},complete:function(){r(document).trigger("yith_wfbt_modal_opened",[o])}})});var c=function(){r(".variations_form").each(function(){r(this).wc_variation_form()}),r(".variations_form.cart").on("found_variation",function(t,i){r('input[name="yith-wfbt-variation-id"]').val(i.variation_id),i.availability_html&&r(".yith-wfbt-stock-status").html(i.availability_html),i.is_purchasable&&i.is_in_stock&&i.variation_is_visible?r("#yith-wfbt-submit-variation").prop("disabled",!1):r("#yith-wfbt-submit-variation").prop("disabled",!0)}),r(".variations_form.cart").on("click",".reset_variations",function(t){r(".yith-wfbt-stock-status").html(""),r("#yith-wfbt-submit-variation").prop("disabled",!0)})};r(document).on("click","#yith-wfbt-submit-variation",function(t){var i=r('input[name="yith-wfbt-variation-id"]').val(),o=r('input[name="yith-wfbt-main-product-id"]').val(),a=r(".yith-wfbt-form");r.modal.close(),a.find("input[data-variable_product_id="+o+"]").prop("disabled",!1).prop("checked",!0).val(i),e(a,r(".yith-wfbt-section"),0)}),r(document).on("modal:after-close",function(){n=!1,r("#yith-wfbt-modal").html("")})});