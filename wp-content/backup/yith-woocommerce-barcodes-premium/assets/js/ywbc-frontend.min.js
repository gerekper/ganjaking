!function(a){a(document).ready(function(){var e,c=null;function o(){a(".ywbc-action-results").empty();var e=c.closest('form[name="yith-barcodes-form"]');if(e.find('input[name="yith-barcode-value"]').val()){var o={action:"barcode_actions_search_"+e.data("barcode-type"),text:e.find('input[name="yith-barcode-value"]').val(),"barcode-actions":e.data("barcode-actions")};e.block({message:null,overlayCSS:{background:"#fff url("+ywbc_data.loader+") no-repeat center",opacity:.6}}),a.post(ywbc_data.ajax_url,o,function(a){1==a.code?e.append('<div class="ywbc-action-results">'+a.items+"</div>"):-1==a.code&&(e.append('<div class="ywbc-action-results error">'+a.items+"</div>"),console.log("Error -> "+a.items)),e.unblock()})}}a('form[name="yith-barcodes-form"]').submit(function(a){a.preventDefault()}),a('input[name="yith-barcode-value"]').on("keyup",function(t){t.preventDefault(),e&&clearTimeout(e),c=a(this),e=setTimeout(o,1e3)}),a(document).on("click","button.ywbc-action",function(e){e.preventDefault();var o=a(this).closest(".yith-barcode-actions"),t=c.closest('form[name="yith-barcodes-form"]'),r=a(this).closest("tr.ywbc-search-row"),i={action:"apply_barcode_action",status:a(this).data("status"),type:a(this).data("type"),"barcode-actions":t.data("barcode-actions"),id:a(this).data("id")};o.block({message:null,overlayCSS:{background:"#fff url("+ywbc_data.loader+") no-repeat center",opacity:.6}}),a.post(ywbc_data.ajax_url,i,function(a){1==a.code&&r.replaceWith(a.items),o.unblock()})});var t=a("#ywbc_barcode_value img.ywbc-barcode-image").length?a("#ywbc_barcode_value img.ywbc-barcode-image").attr("src"):"",r=a("#ywbc_barcode_value .ywbc-barcode-display-value").length?a("#ywbc_barcode_value .ywbc-barcode-display-value").text():"";a(document).on("found_variation","form.variations_form",function(e,c){$variation_barcode_img=c.barcode_img?c.barcode_img:t,$variation_barcode_value=c.barcode_img?c.barcode_value:r,""!=$variation_barcode_img&&(a("img.ywbc-barcode-image").length?(a("#ywbc_barcode_value img.ywbc-barcode-image").attr("src",$variation_barcode_img),a("#ywbc_barcode_value .ywbc-barcode-display-value").text($variation_barcode_value)):a("#ywbc_barcode_value").append('<img class="ywbc-barcode-image" src="'+$variation_barcode_img+'"><div class="ywbc-barcode-display-container"><span class="ywbc-barcode-display-value">'+$variation_barcode_value+"</span></div>"))}).on("reset_image",function(e){a("#ywbc_barcode_value img.ywbc-barcode-image").attr("src",t),a("#ywbc_barcode_value .ywbc-barcode-display-value").text(r)})})}(jQuery);
