!function(e,t,o){"use strict";o(document).ready((function(){function e(t){var i=[];return t.children("span").each((function(){var t=o(this);if(t.hasClass("element-cont")){var s=e(o(this));Array.isArray(s)&&s.length>0&&i.push(s)}else{var a={},r="";(t.data("html")||t.data("el_class"))&&(r={}),t.data("html")&&(r.html=t.data("html")),void 0!==t.data("el_class")&&(r.el_class=t.data("el_class")),a[t.data("id")]=r,i.push(a)}})),i}function i(e,t,s,a){"string"==typeof s&&(s=".header-wrapper-"+s+' [data-id="'+t+'"]'),o.each(e,(function(e,r){if(Array.isArray(r)){var l=o(".porto-"+a+'-visible span[data-id="row"]').clone().addClass("porto-drop-item"+("sm"==a?"-mobile":""));l.children("b").remove(),l.appendTo(s),i(r,t,l,a)}else o.each(r,(function(e,t){var i;i=o(".porto-"+a+'-visible span[data-id="'+e+'"]').hasClass("element-infinite")?o(".porto-"+a+'-visible span[data-id="'+e+'"]').clone().appendTo(s):o(".porto-"+a+'-visible span[data-id="'+e+'"]').appendTo(s),t&&("string"==typeof t?i.data("html",t):(t.html&&i.data("html",t.html),void 0!==t.el_class&&i.data("el_class",t.el_class)))}))}))}function s(i,s){if(i){var a=e(o("."+s+'[data-id="'+i+'"]'));t.customize.instance(i).set(JSON.stringify(a))}}function a(e,t){e.sortable({connectWith:"."+t,update:function(e,i){o(i.item).hasClass("element-cont")&&(o(i.item).contents().filter((function(){return 3===this.nodeType})).remove(),o(i.item).addClass(t).children("b").remove(),a(o(i.item),t)),s(o(i.item).closest("div").data("id"),t),o(i.sender).hasClass("element-cont")||s(o(i.sender).data("id"),t)},start:function(e,i){if(o(i.item).hasClass("element-cont")){var s=o(i.item).closest("."+t),a=s.data("ui-sortable"),r=a.containers,l=!1;o.each(r,(function(e,t){void 0!==t&&o(t.element).is(o(i.item))&&(r.splice(e,1),l=!0)})),l&&(a.containers=r,s.data("ui-sortable",a))}o(i.item).hasClass("element-infinite")&&o(i.item).closest(".porto-header-builder-list").length&&o(i.item).clone().removeAttr("style").insertAfter(o(i.item))},stop:function(e,t){o(t.item).hasClass("element-infinite")&&o(t.item).closest(".porto-header-builder-list").length&&o(t.item).remove()}}).disableSelection()}function r(){o(".porto-drop-item").each((function(){var e=o(this).data("id");e&&t.customize.instance(e)&&t.customize.instance(e).get()&&i(JSON.parse(t.customize.instance(e).get()),e,"desktop","lg")})),o(".porto-drop-item-mobile").each((function(){var e=o(this).data("id");e&&t.customize.instance(e)&&t.customize.instance(e).get()&&i(JSON.parse(t.customize.instance(e).get()),e,"mobile","sm")})),a(o(".porto-drop-item"),"porto-drop-item"),a(o(".porto-drop-item-mobile"),"porto-drop-item-mobile")}function l(e){o.each(t.customize.section("porto_header_builder").controls(),(function(e,o){t.customize.instance(o.settings.default.id).set("")})),o(".porto-header-builder .header-builder-wrapper .porto-drop-item span:not(.element-infinite)").insertBefore(o(".header-wrapper-desktop .porto-header-builder-list span.element-infinite").first()),o(".porto-header-builder .header-builder-wrapper .porto-drop-item-mobile span:not(.element-infinite)").insertBefore(o(".header-wrapper-mobile .porto-header-builder-list span.element-infinite").first()),o(".porto-header-builder .header-builder-wrapper .porto-drop-item, .porto-header-builder .header-builder-wrapper .porto-drop-item-mobile").html(""),e.elements&&o.each(e.elements,(function(e,o){o&&t.customize.instance("porto_header_builder_elements["+e+"]").set(o)})),r(),e.custom_css?t.customize.instance("porto_header_builder[custom_css]").set(e.custom_css):t.customize.instance("porto_header_builder[custom_css]").set(""),e.type?t.customize.instance("porto_header_builder[type]").set(e.type):t.customize.instance("porto_header_builder[type]").set(""),t.customize.control("porto_header_layouts_type").container.find("select").trigger("change"),e.side_header_toggle?t.customize.instance("porto_header_builder[side_header_toggle]").set(e.side_header_toggle):t.customize.instance("porto_header_builder[side_header_toggle]").set(""),t.customize.control("porto_header_layouts_side_header_toggle").container.find("select").trigger("change"),e.side_header_toggle_logo?t.customize.instance("porto_header_builder[side_header_toggle_logo]").set(e.side_header_toggle_logo):t.customize.instance("porto_header_builder[side_header_toggle_logo]").set(""),e.side_header_toggle_desc?t.customize.instance("porto_header_builder[side_header_toggle_desc]").set(e.side_header_toggle_desc):t.customize.instance("porto_header_builder[side_header_toggle_desc]").set(""),e.side_header_width?t.customize.instance("porto_header_builder[side_header_width]").set(e.side_header_width):t.customize.instance("porto_header_builder[side_header_width]").set("")}r();var n=!0,c=t.customize.instance("porto_header_builder[on_section]");c&&c.set(""),t.customize.section("porto_header_layouts")&&t.customize.section("porto_header_layouts").expanded.bind((function(e){e?o("#customize-control-porto_header_layouts_select select").val()&&(o(".porto-header-builder").addClass("active"),t.customize.instance("porto_header_builder[on_section]").set("1"),!n||void 0!==t.customize.instance("porto_settings[header-type-select]")&&"header_builder"==t.customize.instance("porto_settings[header-type-select]").get()||o("#customize-control-porto_header_layouts_select select").trigger("change"),n=!1):(o(".porto-header-builder").removeClass("active"),t.customize.instance("porto_header_builder[on_section]").set(""))})),o("#customize-control-porto_header_layouts_select select").on("change",(function(){if(o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").hide(),d=null,o(this).val()){var e=o(this);o(".porto-header-builder").addClass("active"),o("#customize-control-porto_header_layouts_custom_css").show(),o(".porto_delete_header_layout_link").removeClass("disabled"),e.attr("disabled","disabled"),o.ajax({url:customizer_admin_vars.ajax_url,data:{wp_customize:"on",action:"porto_load_header_elements",nonce:customizer_admin_vars.nonce,header_layout:e.val()},type:"post",dataType:"json",success:function(e){e||(e={}),l(e),t.customize.instance("porto_header_builder[preset]").set("")},complete:function(){e.removeAttr("disabled")}})}else o(".porto-header-builder").removeClass("active"),o("#customize-control-porto_header_layouts_custom_css").hide(),o(".porto_delete_header_layout_link").addClass("disabled")}));var d=null;if(o(document.body).on("click",'.porto-header-builder .header-builder-wrapper [data-id="html"], .porto-header-builder .header-builder-wrapper [data-id="porto_block"]',(function(e){var t=!(null==d||!d.is(o(this))),i=o(this);"html"==i.data("id")?!t||o("#customize-control-porto_header_layouts_html_element").is(":hidden")?(o("#customize-control-porto_header_layouts_block_element").hide(),o("#customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").show(),o("#customize-control-porto_header_layouts_html_element textarea").focus(),i.data("html")?o("#customize-control-porto_header_layouts_html_element textarea").val(i.data("html")):o("#customize-control-porto_header_layouts_html_element textarea").val("")):o("#customize-control-porto_header_layouts_html_element").is(":visible")&&o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").hide():"porto_block"==i.data("id")&&(!t||o("#customize-control-porto_header_layouts_block_element").is(":hidden")?(o("#customize-control-porto_header_layouts_html_element").hide(),o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").show(),i.data("html")&&(o("#customize-control-porto_header_layouts_block_element select :selected").removeAttr("selected"),o('#customize-control-porto_header_layouts_block_element select option[value="'+escape(i.data("html"))+'"]').attr("selected","selected"))):o("#customize-control-porto_header_layouts_block_element").is(":visible")&&o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").hide()),i.data("el_class")?o("#customize-control-porto_header_layouts_el_class input").val(i.data("el_class")):o("#customize-control-porto_header_layouts_el_class input").val(""),d=o(this)})),o(document.body).on("click",".goto-header-builder",(function(e){e.preventDefault(),t.customize.section("porto_header_layouts").focus()})),o(".porto-header-builder-tooltip").on("click",(function(e){if(e.preventDefault(),o(this).data("id")){var i=o(this).data("type")?o(this).data("type"):"section";if(void 0===t.customize[i](o(this).data("id")))return;t.customize[i](o(this).data("id")).contentContainer&&o.redux.initFields(t.customize[i](o(this).data("id")).contentContainer),t.customize[i](o(this).data("id")).focus()}})),o(document.body).on("click",".porto_header_builder_save_html",(function(){if(null==d)return!1;"html"==d.data("id")?(d.data("html",o("#customize-control-porto_header_layouts_html_element textarea").val()),o("#customize-control-porto_header_layouts_html_element textarea").val("")):"porto_block"==d.data("id")&&d.data("html",o("#customize-control-porto_header_layouts_block_element select").val()),d.data("el_class",o("#customize-control-porto_header_layouts_el_class input").val()),s(d.closest("div").data("id"),"porto-drop-item"+(d.closest(".porto-drop-item-mobile").length?"-mobile":"")),o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").fadeOut()})),o(document.body).on("initReduxFields",(function(e,t){o.redux.initFields(t)})),void 0!==o.redux){var _=["background","color_gradient","color"];o.redux.initFields=function(e){e||(e=o(".redux-section.open")),e.find(".redux-group-tab:visible .redux-field-init:visible").each((function(){var e=o(this).attr("data-type");e in redux.field_objects&&"function"==typeof redux.field_objects[e].init&&(_.push(e),redux.field_objects[e].init(o(this)))})),e.find(".redux-image-select [data-original]").each((function(e,t){o.fn.waypoint?o(t).waypoint((function(e){u(t)}),{offset:"140%"}):u(t)}))}}function u(e){var t=o(e);if(!t.hasClass("lazy-load-active")){var i=t.data("original");i&&t.attr("src",i),t.addClass("lazy-load-active")}}o(".porto_reset_all_options").on("click",(function(e){e.preventDefault(),confirm("Attention! This will remove all customizations made to the theme.")&&o.ajax({url:customizer_admin_vars.ajax_url,data:{wp_customize:"on",action:"porto_customizer_reset_options",nonce:customizer_admin_vars.nonce},type:"post",dataType:"json",success:function(e){t.customize.state("saved").set(!0),window.location.reload()}})})),o(".redux-info-field .goto-section").on("click",(function(e){e.preventDefault();var i=o(this).attr("href");o(this).hasClass("field-control")?(void 0!==t.customize.control("porto_settings["+i+"]").contentContainer&&o.redux.initFields(t.customize.control(i).container.closest(".control-section")),t.customize.control("porto_settings["+i+"]").focus()):(void 0!==t.customize.section(i).contentContainer&&o.redux.initFields(t.customize.section(i).contentContainer),t.customize.section(i).focus())})),o(".header-builder-header .preview-desktop").on("click",(function(e){e.preventDefault(),o(".devices .preview-desktop").click(),o(this).siblings().removeClass("active"),o(this).addClass("active")})),o(".header-builder-header .preview-mobile").on("click",(function(e){e.preventDefault(),o(".devices .preview-tablet").click(),o(this).siblings().removeClass("active"),o(this).addClass("active")})),o(".header-builder-header .button-close").on("click",(function(e){e.preventDefault(),o("#sub-accordion-section-porto_header_layouts .customize-section-back").click()})),o(".header-builder-header .button-clear").on("click",(function(e){e.preventDefault(),o(".header-builder-wrapper .header-builder").each((function(){var e=o(this);e.find("span:not(.element-infinite)").appendTo(e.parent().prev().find(".porto-header-builder-list")),e.find(".element-infinite").remove()})),o.each(t.customize.section("porto_header_builder").controls(),(function(e,o){t.customize.instance(o.settings.default.id).set("")}))})),void 0!==o.redux&&o("#customize-header-actions").append('<a href="#" class="button button-secondary switch-live-option-panel">Old Panel</a>'),o(".porto_header_presets > h3").on("click",(function(e){o(this).parent().toggleClass("opened")})),"undefined"!=typeof js_porto_hb_vars&&(js_porto_hb_vars.header_builder_presets=JSON.parse(js_porto_hb_vars.header_builder_presets)),o(".porto_header_presets > img").on("click",(function(){if(!o(this).hasClass("active")){o(this).siblings("img").removeClass("active"),o(this).addClass("active");var e=o(this).data("preset");if(t.customize.instance("porto_header_builder[preset]").set(e),js_porto_hb_vars.header_builder_presets[e]){var i=js_porto_hb_vars.header_builder_presets[e];l(i),o.each(i.options,(function(e,t){o("#porto_settings-"+e).length&&(t?o("#porto_settings-"+e).find('input[value="'+t+'"]').trigger("click"):o("#porto_settings-"+e).find("input[value]:first-child").trigger("click"))}))}}})),o("#porto_settings-show-icon-menus-mobile label").on("click",(function(e){320!=o("#customize-preview").width()&&o("#customize-footer-actions .preview-mobile").trigger("click")}))}))}(wp.customize,wp,jQuery);