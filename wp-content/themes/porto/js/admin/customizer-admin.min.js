!function(e,t,o){"use strict";o(document).ready(function(){function e(t){var i=[];return t.children("span").each(function(){var t=o(this);if(t.hasClass("element-cont")){var s=e(o(this));Array.isArray(s)&&s.length>0&&i.push(s)}else{var a={},r="";(t.data("html")||t.data("el_class"))&&(r={}),t.data("html")&&(r.html=t.data("html")),"undefined"!=typeof t.data("el_class")&&(r.el_class=t.data("el_class")),a[t.data("id")]=r,i.push(a)}}),i}function i(e,t,s,a){"string"==typeof s&&(s=".header-wrapper-"+s+' [data-id="'+t+'"]'),o.each(e,function(e,r){if(Array.isArray(r)){var n=o(".porto-"+a+'-visible span[data-id="row"]').clone().addClass("porto-drop-item"+("sm"==a?"-mobile":""));n.children("b").remove(),n.appendTo(s),i(r,t,n,a)}else o.each(r,function(e,t){var i;i=o(".porto-"+a+'-visible span[data-id="'+e+'"]').hasClass("element-infinite")?o(".porto-"+a+'-visible span[data-id="'+e+'"]').clone().appendTo(s):o(".porto-"+a+'-visible span[data-id="'+e+'"]').appendTo(s),t&&("string"==typeof t?i.data("html",t):(t.html&&i.data("html",t.html),"undefined"!=typeof t.el_class&&i.data("el_class",t.el_class)))})})}function s(i,s){if(i){var a=e(o("."+s+'[data-id="'+i+'"]'));t.customize.instance(i).set(JSON.stringify(a))}}function a(e,t){e.sortable({connectWith:"."+t,update:function(e,i){o(i.item).hasClass("element-cont")&&(o(i.item).contents().filter(function(){return 3===this.nodeType}).remove(),o(i.item).addClass(t).children("b").remove(),a(o(i.item),t)),s(o(i.item).closest("div").data("id"),t),o(i.sender).hasClass("element-cont")||s(o(i.sender).data("id"),t)},start:function(e,i){if(o(i.item).hasClass("element-cont")){var s=o(i.item).closest("."+t),a=s.data("ui-sortable"),r=a.containers,n=!1;o.each(r,function(e,t){"undefined"!=typeof t&&o(t.element).is(o(i.item))&&(r.splice(e,1),n=!0)}),n&&(a.containers=r,s.data("ui-sortable",a))}o(i.item).hasClass("element-infinite")&&o(i.item).closest(".porto-header-builder-list").length&&o(i.item).clone().removeAttr("style").insertAfter(o(i.item))},stop:function(e,t){o(t.item).hasClass("element-infinite")&&o(t.item).closest(".porto-header-builder-list").length&&o(t.item).remove()}}).disableSelection()}function r(){o(".porto-drop-item").each(function(){var e=o(this).data("id");if(e&&t.customize.instance(e)&&t.customize.instance(e).get()){var s=o.parseJSON(t.customize.instance(e).get());i(s,e,"desktop","lg")}}),o(".porto-drop-item-mobile").each(function(){var e=o(this).data("id");if(e&&t.customize.instance(e)&&t.customize.instance(e).get()){var s=o.parseJSON(t.customize.instance(e).get());i(s,e,"mobile","sm")}}),a(o(".porto-drop-item"),"porto-drop-item"),a(o(".porto-drop-item-mobile"),"porto-drop-item-mobile")}function n(e){o.each(t.customize.section("porto_header_builder").controls(),function(e,o){t.customize.instance(o.settings.default.id).set("")}),o(".porto-header-builder .header-builder-wrapper .porto-drop-item span:not(.element-infinite)").insertBefore(o(".header-wrapper-desktop .porto-header-builder-list span.element-infinite").first()),o(".porto-header-builder .header-builder-wrapper .porto-drop-item-mobile span:not(.element-infinite)").insertBefore(o(".header-wrapper-mobile .porto-header-builder-list span.element-infinite").first()),o(".porto-header-builder .header-builder-wrapper .porto-drop-item, .porto-header-builder .header-builder-wrapper .porto-drop-item-mobile").html(""),e.elements&&o.each(e.elements,function(e,o){o&&t.customize.instance("porto_header_builder_elements["+e+"]").set(o)}),r(),t.customize.instance("porto_header_builder[custom_css]").set(e.custom_css?e.custom_css:""),t.customize.instance("porto_header_builder[type]").set(e.type?e.type:""),t.customize.control("porto_header_layouts_type").container.find("select").trigger("change"),t.customize.instance("porto_header_builder[side_header_toggle]").set(e.side_header_toggle?e.side_header_toggle:""),t.customize.control("porto_header_layouts_side_header_toggle").container.find("select").trigger("change"),t.customize.instance("porto_header_builder[side_header_toggle_logo]").set(e.side_header_toggle_logo?e.side_header_toggle_logo:""),t.customize.instance("porto_header_builder[side_header_toggle_desc]").set(e.side_header_toggle_desc?e.side_header_toggle_desc:""),t.customize.instance("porto_header_builder[side_header_width]").set(e.side_header_width?e.side_header_width:"")}function l(e){var t=o(e);if(!t.hasClass("lazy-load-active")){var i=t.data("original");i&&t.attr("src",i),t.addClass("lazy-load-active")}}r();var c=!0;t.customize.instance("porto_header_builder[on_section]").set(""),t.customize.section("porto_header_layouts")&&t.customize.section("porto_header_layouts").expanded.bind(function(e){e?o("#customize-control-porto_header_layouts_select select").val()&&(o(".porto-header-builder").addClass("active"),t.customize.instance("porto_header_builder[on_section]").set("1"),!c||"undefined"!=typeof t.customize.instance("porto_settings[header-type-select]")&&"header_builder"==t.customize.instance("porto_settings[header-type-select]").get()||o("#customize-control-porto_header_layouts_select select").trigger("change"),c=!1):(o(".porto-header-builder").removeClass("active"),t.customize.instance("porto_header_builder[on_section]").set(""))}),o("#customize-control-porto_header_layouts_select select").on("change",function(){if(o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").hide(),d=null,o(this).val()){var e=o(this);o(".porto-header-builder").addClass("active"),o(".porto_delete_header_layout_link, #customize-control-porto_header_layouts_custom_css").show(),e.attr("disabled","disabled"),o.ajax({url:customizer_admin_vars.ajax_url,data:{wp_customize:"on",action:"porto_load_header_elements",nonce:customizer_admin_vars.nonce,header_layout:e.val()},type:"post",dataType:"json",success:function(o){o||(o={}),n(o),t.customize.instance("porto_header_builder[preset]").set(""),e.removeAttr("disabled")}})}else o(".porto-header-builder").removeClass("active"),o(".porto_delete_header_layout_link, #customize-control-porto_header_layouts_custom_css").hide()});var d=null;if(o(document.body).on("click",'.porto-header-builder .header-builder-wrapper [data-id="html"], .porto-header-builder .header-builder-wrapper [data-id="porto_block"]',function(){var e=null!=d&&d.is(o(this))?!0:!1,t=o(this);"html"==t.data("id")?!e||o("#customize-control-porto_header_layouts_html_element").is(":hidden")?(o("#customize-control-porto_header_layouts_block_element").hide(),o("#customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").show(),o("#customize-control-porto_header_layouts_html_element textarea").focus(),o("#customize-control-porto_header_layouts_html_element textarea").val(t.data("html")?t.data("html"):"")):o("#customize-control-porto_header_layouts_html_element").is(":visible")&&o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").hide():"porto_block"==t.data("id")&&(!e||o("#customize-control-porto_header_layouts_block_element").is(":hidden")?(o("#customize-control-porto_header_layouts_html_element").hide(),o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").show(),t.data("html")&&(o("#customize-control-porto_header_layouts_block_element select :selected").removeAttr("selected"),o('#customize-control-porto_header_layouts_block_element select option[value="'+escape(t.data("html"))+'"]').attr("selected","selected"))):o("#customize-control-porto_header_layouts_block_element").is(":visible")&&o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").hide()),o("#customize-control-porto_header_layouts_el_class input").val(t.data("el_class")?t.data("el_class"):""),d=o(this)}),o(document.body).on("click",".goto-header-builder",function(e){e.preventDefault(),t.customize.section("porto_header_layouts").focus()}),o(".porto-header-builder-tooltip").on("click",function(e){if(e.preventDefault(),o(this).data("id")){var i=o(this).data("type")?o(this).data("type"):"section";if("undefined"==typeof t.customize[i](o(this).data("id")))return;t.customize[i](o(this).data("id")).contentContainer&&o.redux.initFields(t.customize[i](o(this).data("id")).contentContainer),t.customize[i](o(this).data("id")).focus()}}),o(document.body).on("click",".porto_header_builder_save_html",function(){return null==d?!1:("html"==d.data("id")?(d.data("html",o("#customize-control-porto_header_layouts_html_element textarea").val()),o("#customize-control-porto_header_layouts_html_element textarea").val("")):"porto_block"==d.data("id")&&d.data("html",o("#customize-control-porto_header_layouts_block_element select").val()),d.data("el_class",o("#customize-control-porto_header_layouts_el_class input").val()),s(d.closest("div").data("id"),"porto-drop-item"+(d.closest(".porto-drop-item-mobile").length?"-mobile":"")),void o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_el_class, #customize-control-porto_header_layouts_save_html_button").fadeOut())}),o(document.body).on("initReduxFields",function(e,t){o.redux.initFields(t)}),"undefined"!=typeof o.redux){var u=["background","color_gradient","color"];o.redux.initFields=function(e){e||(e=o(".redux-section.open")),e.find(".redux-group-tab:visible .redux-field-init:visible").each(function(){var e=o(this).attr("data-type");e in redux.field_objects&&"function"==typeof redux.field_objects[e].init&&(u.push(e),redux.field_objects[e].init(o(this)))}),e.find(".redux-image-select [data-original]").each(function(e,t){o.fn.waypoint?o(t).waypoint(function(){l(t)},{offset:"140%"}):l(t)})}}o(".porto_reset_all_options").on("click",function(e){e.preventDefault(),confirm("Attention! This will remove all customizations made to the theme.")&&o.ajax({url:customizer_admin_vars.ajax_url,data:{wp_customize:"on",action:"porto_customizer_reset_options",nonce:customizer_admin_vars.nonce},type:"post",dataType:"json",success:function(){t.customize.state("saved").set(!0),window.location.reload()}})}),o(".redux-info-field .goto-section").on("click",function(e){e.preventDefault();var i=o(this).attr("href");o(this).hasClass("field-control")?("undefined"!=typeof t.customize.control("porto_settings["+i+"]").contentContainer&&o.redux.initFields(t.customize.control(i).container.closest(".control-section")),t.customize.control("porto_settings["+i+"]").focus()):("undefined"!=typeof t.customize.section(i).contentContainer&&o.redux.initFields(t.customize.section(i).contentContainer),t.customize.section(i).focus())}),o(".header-builder-header .preview-desktop").click(function(e){e.preventDefault(),o(".devices .preview-desktop").click(),o(this).siblings().removeClass("active"),o(this).addClass("active")}),o(".header-builder-header .preview-mobile").click(function(e){e.preventDefault(),o(".devices .preview-tablet").click(),o(this).siblings().removeClass("active"),o(this).addClass("active")}),o(".header-builder-header .button-close").click(function(e){e.preventDefault(),o("#sub-accordion-section-porto_header_layouts .customize-section-back").click()}),o(".header-builder-header .button-clear").click(function(e){e.preventDefault(),o(".header-builder-wrapper .header-builder").each(function(){var e=o(this);e.find("span:not(.element-infinite)").appendTo(e.parent().prev().find(".porto-header-builder-list")),e.find(".element-infinite").remove()}),o.each(t.customize.section("porto_header_builder").controls(),function(e,o){t.customize.instance(o.settings.default.id).set("")})}),"undefined"!=typeof o.redux&&o("#customize-header-actions").append('<a href="#" class="button button-secondary switch-live-option-panel">Old Panel</a>'),o(".porto_header_presets > h3").on("click",function(){o(this).parent().toggleClass("opened")}),js_porto_hb_vars.header_builder_presets=o.parseJSON(js_porto_hb_vars.header_builder_presets),o(".porto_header_presets > img").on("click",function(){if(!o(this).hasClass("active")){o(this).siblings("img").removeClass("active"),o(this).addClass("active");var e=o(this).data("preset");if(t.customize.instance("porto_header_builder[preset]").set(e),js_porto_hb_vars.header_builder_presets[e]){var i=js_porto_hb_vars.header_builder_presets[e];n(i),o.each(i.options,function(e,t){o("#porto_settings-"+e).length&&(t?o("#porto_settings-"+e).find('input[value="'+t+'"]').trigger("click"):o("#porto_settings-"+e).find("input[value]:first-child").trigger("click"))})}}}),o("#porto_settings-show-icon-menus-mobile label").on("click",function(){320!=o("#customize-preview").width()&&o("#customize-footer-actions .preview-mobile").trigger("click")})})}(wp.customize,wp,jQuery);